{
  "best_value": 59.61589712881957,
  "best_dirhit": 93.75,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.27915080442025597,
    "ml_loss_threshold": 0.0010268468107662598,
    "ml_dir_penalty": 4.163721603444029,
    "meta_stacking_alpha": 0.7286933911459372,
    "ml_adaptive_k_1d": 1.8546055294243342,
    "ml_pattern_weight_scale_1d": 1.8728662351472907,
    "enable_talib_patterns_short": true,
    "external_min_days": 55,
    "external_smooth_alpha": 0.3205818307399001,
    "fingpt_confidence_threshold": 0.26593232046739745,
    "xgb_n_estimators": 481,
    "xgb_max_depth": 6,
    "xgb_learning_rate": 0.026876074116050554,
    "xgb_subsample": 0.7498120853740278,
    "xgb_colsample_bytree": 0.5496871183172404,
    "xgb_reg_alpha": 1.8200146402597533e-06,
    "xgb_reg_lambda": 0.04646008588935031,
    "xgb_min_child_weight": 15,
    "xgb_gamma": 0.0010091241477921033,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 499,
    "lgb_n_estimators": 132,
    "lgb_max_depth": 8,
    "lgb_learning_rate": 0.012229689307630605,
    "lgb_num_leaves": 11,
    "lgb_subsample": 0.6761526381737847,
    "lgb_colsample_bytree": 0.8666028274956559,
    "lgb_reg_alpha": 0.8475574663711164,
    "lgb_reg_lambda": 0.20335962951104425,
    "lgb_min_data_in_leaf": 72,
    "lgb_feature_fraction_bynode": 0.5672746009629859,
    "lgb_bagging_freq": 5,
    "lgb_min_gain_to_split": 0.05112399086845902,
    "cat_iterations": 453,
    "cat_depth": 5,
    "cat_learning_rate": 0.06778881949574665,
    "cat_l2_leaf_reg": 7.528301807158116,
    "cat_subsample": 0.5316307191475219,
    "cat_rsm": 0.6158531306401154,
    "cat_border_count": 43,
    "cat_random_strength": 0.12691063546910936,
    "cat_leaf_estimation_iterations": 9,
    "cat_bootstrap_type": "No"
  },
  "best_trial": {
    "number": 263,
    "value": 59.61589712881957,
    "state": "1"
  },
  "n_trials": 1336,
  "pruned_count": 0,
  "avg_trial_time": 195.5523841588015,
  "top_k_trials": [
    {
      "number": 263,
      "value": 59.61589712881957,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.27915080442025597,
        "ml_loss_threshold": 0.0010268468107662598,
        "ml_dir_penalty": 4.163721603444029,
        "meta_stacking_alpha": 0.7286933911459372,
        "ml_adaptive_k_1d": 1.8546055294243342,
        "ml_pattern_weight_scale_1d": 1.8728662351472907,
        "enable_talib_patterns_short": true,
        "external_min_days": 55,
        "external_smooth_alpha": 0.3205818307399001,
        "fingpt_confidence_threshold": 0.26593232046739745,
        "xgb_n_estimators": 481,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.026876074116050554,
        "xgb_subsample": 0.7498120853740278,
        "xgb_colsample_bytree": 0.5496871183172404,
        "xgb_reg_alpha": 1.8200146402597533e-06,
        "xgb_reg_lambda": 0.04646008588935031,
        "xgb_min_child_weight": 15,
        "xgb_gamma": 0.0010091241477921033,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 499,
        "lgb_n_estimators": 132,
        "lgb_max_depth": 8,
        "lgb_learning_rate": 0.012229689307630605,
        "lgb_num_leaves": 11,
        "lgb_subsample": 0.6761526381737847,
        "lgb_colsample_bytree": 0.8666028274956559,
        "lgb_reg_alpha": 0.8475574663711164,
        "lgb_reg_lambda": 0.20335962951104425,
        "lgb_min_data_in_leaf": 72,
        "lgb_feature_fraction_bynode": 0.5672746009629859,
        "lgb_bagging_freq": 5,
        "lgb_min_gain_to_split": 0.05112399086845902,
        "cat_iterations": 453,
        "cat_depth": 5,
        "cat_learning_rate": 0.06778881949574665,
        "cat_l2_leaf_reg": 7.528301807158116,
        "cat_subsample": 0.5316307191475219,
        "cat_rsm": 0.6158531306401154,
        "cat_border_count": 43,
        "cat_random_strength": 0.12691063546910936,
        "cat_leaf_estimation_iterations": 9,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 93.75,
        "avg_nrmse": 1.0015171451967384,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 855,
      "value": 52.63428590093847,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.6509750994475643,
        "ml_loss_threshold": 0.0015102577512838137,
        "ml_dir_penalty": 4.905864310910133,
        "meta_stacking_alpha": 0.010544635878908082,
        "ml_adaptive_k_1d": 1.6705904702870678,
        "ml_pattern_weight_scale_1d": 1.6085961014120675,
        "enable_talib_patterns_short": false,
        "external_min_days": 60,
        "external_smooth_alpha": 0.3043892606919833,
        "smart_consensus_weight": 0.7325642234742766,
        "smart_performance_weight": 0.21169240822402896,
        "smart_sigma": 0.005316522357270102,
        "smart_weight_xgb": 0.7595118421246531,
        "smart_weight_lgbm": 1.2312190070326516,
        "smart_weight_cat": 0.8712022941664017,
        "xgb_n_estimators": 472,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.10833117901174517,
        "xgb_subsample": 0.8843698410676142,
        "xgb_colsample_bytree": 0.5147817279063401,
        "xgb_reg_alpha": 0.004286325392571146,
        "xgb_reg_lambda": 0.004068709921452569,
        "xgb_min_child_weight": 15,
        "xgb_gamma": 0.0036392346800828723,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 322,
        "lgb_n_estimators": 139,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.013978910776212182,
        "lgb_num_leaves": 21,
        "lgb_subsample": 0.5837142657940377,
        "lgb_colsample_bytree": 0.8434795178670386,
        "lgb_reg_alpha": 0.007202813391595278,
        "lgb_reg_lambda": 0.45104499711285034,
        "lgb_min_data_in_leaf": 67,
        "lgb_feature_fraction_bynode": 0.6022257892901476,
        "lgb_bagging_freq": 9,
        "lgb_min_gain_to_split": 0.08699803493354166,
        "cat_iterations": 401,
        "cat_depth": 6,
        "cat_learning_rate": 0.04095014069285892,
        "cat_l2_leaf_reg": 6.397644476880408,
        "cat_subsample": 0.593882661598114,
        "cat_rsm": 0.9404056096562261,
        "cat_border_count": 52,
        "cat_random_strength": 0.26306478089529267,
        "cat_leaf_estimation_iterations": 7,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 83.6904761904762,
        "avg_nrmse": 0.9915079053991438,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 785,
      "value": 50.70092625403455,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.3344717500565039,
        "ml_loss_threshold": 0.00913765851620377,
        "ml_dir_penalty": 4.998827936033797,
        "ml_adaptive_k_1d": 1.3713281066400627,
        "ml_pattern_weight_scale_1d": 1.936752041964392,
        "enable_talib_patterns_short": false,
        "external_min_days": 54,
        "external_smooth_alpha": 0.3111887872221957,
        "regime_scale_low": 0.8980877332077575,
        "regime_scale_high": 1.1362527698519895,
        "yolo_min_conf": 0.3016661841533574,
        "xgb_n_estimators": 476,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.06476838394442395,
        "xgb_subsample": 0.7673834073665067,
        "xgb_colsample_bytree": 0.5522243226683816,
        "xgb_reg_alpha": 0.008230830386931709,
        "xgb_reg_lambda": 0.029807615686207344,
        "xgb_min_child_weight": 15,
        "xgb_gamma": 0.867441294049113,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 487,
        "lgb_n_estimators": 181,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.011973399899637563,
        "lgb_num_leaves": 28,
        "lgb_subsample": 0.6200454270445274,
        "lgb_colsample_bytree": 0.6816945880786679,
        "lgb_reg_alpha": 0.031864457240079094,
        "lgb_reg_lambda": 0.18260806796642642,
        "lgb_min_data_in_leaf": 58,
        "lgb_feature_fraction_bynode": 0.7960343363351866,
        "lgb_bagging_freq": 3,
        "lgb_min_gain_to_split": 0.5931717655186984,
        "cat_iterations": 291,
        "cat_depth": 6,
        "cat_learning_rate": 0.06320920848633854,
        "cat_l2_leaf_reg": 5.818775069928202,
        "cat_subsample": 0.5506848403513885,
        "cat_rsm": 0.7622737647940931,
        "cat_border_count": 165,
        "cat_random_strength": 0.11527183336459525,
        "cat_leaf_estimation_iterations": 11,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 81.25,
        "avg_nrmse": 1.0290122909942405,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_ARENA_h1_c1",
  "symbols": [
    "ARENA"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.27915080442025597,
    "ml_loss_threshold": 0.0010268468107662598,
    "ml_dir_penalty": 4.163721603444029,
    "meta_stacking_alpha": 0.7286933911459372,
    "ml_adaptive_k_1d": 1.8546055294243342,
    "ml_pattern_weight_scale_1d": 1.8728662351472907,
    "external_min_days": 55,
    "external_smooth_alpha": 0.3205818307399001,
    "fingpt_confidence_threshold": 0.26593232046739745
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 481,
    "xgb_max_depth": 6,
    "xgb_learning_rate": 0.026876074116050554,
    "xgb_subsample": 0.7498120853740278,
    "xgb_colsample_bytree": 0.5496871183172404,
    "xgb_reg_alpha": 1.8200146402597533e-06,
    "xgb_reg_lambda": 0.04646008588935031,
    "xgb_min_child_weight": 15,
    "xgb_gamma": 0.0010091241477921033,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 499,
    "lgb_n_estimators": 132,
    "lgb_max_depth": 8,
    "lgb_learning_rate": 0.012229689307630605,
    "lgb_num_leaves": 11,
    "lgb_subsample": 0.6761526381737847,
    "lgb_colsample_bytree": 0.8666028274956559,
    "lgb_reg_alpha": 0.8475574663711164,
    "lgb_reg_lambda": 0.20335962951104425,
    "lgb_min_data_in_leaf": 72,
    "lgb_feature_fraction_bynode": 0.5672746009629859,
    "lgb_bagging_freq": 5,
    "lgb_min_gain_to_split": 0.05112399086845902,
    "cat_iterations": 453,
    "cat_depth": 5,
    "cat_learning_rate": 0.06778881949574665,
    "cat_l2_leaf_reg": 7.528301807158116,
    "cat_subsample": 0.5316307191475219,
    "cat_rsm": 0.6158531306401154,
    "cat_border_count": 43,
    "cat_random_strength": 0.12691063546910936,
    "cat_leaf_estimation_iterations": 9,
    "cat_bootstrap_type": "No"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "0",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "ARENA_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -12.507696957747465,
              "rmse": 0.12504776338195062,
              "mape": 1.677348747785136,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.01571308875575994,
              "rmse": 0.035636809411694635,
              "mape": 1.714571070203128,
              "confidence": 0.6122396783320574
            },
            "catboost": {
              "raw_r2": -0.0035566437063783893,
              "rmse": 0.03538382436460605,
              "mape": 1.7142825880641148,
              "confidence": 0.6221103031419998
            }
          },
          "dirhit": 100.0,
          "rmse": 0.026592308165962728,
          "mape": 23384.37390747733,
          "nrmse": 0.9796456644927222,
          "mask_count": 3,
          "mask_pct": 10.344827586206897
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -12.02625057196609,
              "rmse": 0.1244603188699405,
              "mape": 1.6756245150613658,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.011177624634977215,
              "rmse": 0.035072783210709675,
              "mape": 1.695206069406309,
              "confidence": 0.6159205431546333
            },
            "catboost": {
              "raw_r2": -0.0099209408858143,
              "rmse": 0.03505687137483841,
              "mape": 1.7064151140675288,
              "confidence": 0.6169408880013565
            }
          },
          "dirhit": 0.0,
          "rmse": 0.027647913642803494,
          "mape": 134.43673152238057,
          "nrmse": 1.061066600953345,
          "mask_count": 3,
          "mask_pct": 10.344827586206897
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -11.794051282476604,
              "rmse": 0.12275257660203047,
              "mape": 1.6758943381721292,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.011926362727783246,
              "rmse": 0.03472183182059094,
              "mape": 1.693852202622088,
              "confidence": 0.6153127007454569
            },
            "catboost": {
              "raw_r2": 0.003803294634785792,
              "rmse": 0.03446451730538272,
              "mape": 1.6376536826095978,
              "confidence": 0.6280900837700404
            }
          },
          "dirhit": 0.0,
          "rmse": 0.025415068020425542,
          "mape": 131.3873629358265,
          "nrmse": 1.039998658182953,
          "mask_count": 2,
          "mask_pct": 6.896551724137931
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -13.033921233122252,
              "rmse": 0.12441662269863356,
              "mape": 1.69529806534894,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.019828968648355778,
              "rmse": 0.034046291698515925,
              "mape": 1.6970404740864724,
              "confidence": 0.6089021472352718
            },
            "catboost": {
              "raw_r2": -0.021307320393474976,
              "rmse": 0.034071818304960554,
              "mape": 1.7070672169453476,
              "confidence": 0.6077041581388449
            }
          },
          "dirhit": 100.0,
          "rmse": 0.021844859040258756,
          "mape": 723922.8012711814,
          "nrmse": 1.0048402125027187,
          "mask_count": 1,
          "mask_pct": 3.4482758620689653
        }
      ],
      "avg_dirhit": 50.0,
      "avg_nrmse": 1.0213877840329348,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -12.340480011328102,
          "rmse": 0.12416932038813878,
          "mape": 1.6810414165918928,
          "confidence": 0.3
        },
        "lightgbm": {
          "raw_r2": -0.014661511191719045,
          "rmse": 0.03486942903537779,
          "mape": 1.7001674540794993,
          "confidence": 0.6130937673668548
        },
        "catboost": {
          "raw_r2": -0.007745402587720468,
          "rmse": 0.03474425783744693,
          "mape": 1.6913546504216472,
          "confidence": 0.6187113582630603
        }
      }
    }
  }
}