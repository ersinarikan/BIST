{
  "best_value": 49.9655814379495,
  "best_dirhit": 80.0,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.342487463086917,
    "ml_loss_threshold": 0.001953168134631609,
    "ml_dir_penalty": 2.663102974022909,
    "ml_adaptive_k_1d": 2.1944211886941987,
    "ml_pattern_weight_scale_1d": 1.5914301778382651,
    "enable_talib_patterns_short": true,
    "external_min_days": 37,
    "external_smooth_alpha": 0.16574753836727296,
    "xgb_n_estimators": 573,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.06421963262825856,
    "xgb_subsample": 0.684613147308965,
    "xgb_colsample_bytree": 0.6369394025063347,
    "xgb_reg_alpha": 0.020599915094764106,
    "xgb_reg_lambda": 14.567531044700477,
    "xgb_min_child_weight": 15,
    "xgb_gamma": 0.4530500534729219,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 335,
    "lgb_n_estimators": 405,
    "lgb_max_depth": 5,
    "lgb_learning_rate": 0.04433696611873909,
    "lgb_num_leaves": 26,
    "lgb_subsample": 0.722322710377409,
    "lgb_colsample_bytree": 0.8254011373570874,
    "lgb_reg_alpha": 0.8094220913285921,
    "lgb_reg_lambda": 0.0009946197014817203,
    "lgb_min_data_in_leaf": 92,
    "lgb_feature_fraction_bynode": 0.9495409504829029,
    "lgb_bagging_freq": 10,
    "lgb_min_gain_to_split": 0.9997280015655705,
    "cat_iterations": 196,
    "cat_depth": 7,
    "cat_learning_rate": 0.020566182574885374,
    "cat_l2_leaf_reg": 1.0005678901752715,
    "cat_subsample": 0.594079523562158,
    "cat_rsm": 0.8193754477657651,
    "cat_border_count": 254,
    "cat_random_strength": 0.24369814875884513,
    "cat_leaf_estimation_iterations": 6,
    "cat_bootstrap_type": "Bayesian"
  },
  "best_trial": {
    "number": 997,
    "value": 49.9655814379495,
    "state": "1"
  },
  "best_trial_number": 997,
  "best_trial_seed": 1039,
  "n_trials": 1028,
  "pruned_count": 0,
  "avg_trial_time": 291.0985328387097,
  "top_k_trials": [
    {
      "number": 997,
      "value": 49.9655814379495,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.342487463086917,
        "ml_loss_threshold": 0.001953168134631609,
        "ml_dir_penalty": 2.663102974022909,
        "ml_adaptive_k_1d": 2.1944211886941987,
        "ml_pattern_weight_scale_1d": 1.5914301778382651,
        "enable_talib_patterns_short": true,
        "external_min_days": 37,
        "external_smooth_alpha": 0.16574753836727296,
        "xgb_n_estimators": 573,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.06421963262825856,
        "xgb_subsample": 0.684613147308965,
        "xgb_colsample_bytree": 0.6369394025063347,
        "xgb_reg_alpha": 0.020599915094764106,
        "xgb_reg_lambda": 14.567531044700477,
        "xgb_min_child_weight": 15,
        "xgb_gamma": 0.4530500534729219,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 335,
        "lgb_n_estimators": 405,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.04433696611873909,
        "lgb_num_leaves": 26,
        "lgb_subsample": 0.722322710377409,
        "lgb_colsample_bytree": 0.8254011373570874,
        "lgb_reg_alpha": 0.8094220913285921,
        "lgb_reg_lambda": 0.0009946197014817203,
        "lgb_min_data_in_leaf": 92,
        "lgb_feature_fraction_bynode": 0.9495409504829029,
        "lgb_bagging_freq": 10,
        "lgb_min_gain_to_split": 0.9997280015655705,
        "cat_iterations": 196,
        "cat_depth": 7,
        "cat_learning_rate": 0.020566182574885374,
        "cat_l2_leaf_reg": 1.0005678901752715,
        "cat_subsample": 0.594079523562158,
        "cat_rsm": 0.8193754477657651,
        "cat_border_count": 254,
        "cat_random_strength": 0.24369814875884513,
        "cat_leaf_estimation_iterations": 6,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 80.0,
        "avg_nrmse": 1.005736427008416,
        "model_choice": "all",
        "symbol_metrics": {
          "AYGAZ_1d": {
            "symbol": "AYGAZ",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 458,
                "test_days": 30,
                "train_end_idx": 458,
                "test_end_idx": 488,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-20T00:00:00",
                "test_start": "2025-06-23T00:00:00",
                "test_end": "2025-08-04T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.5686871191667564,
                    "rmse": 0.026871920356927592,
                    "mape": 1.4037394277806456,
                    "confidence": 0.3357640615906647
                  },
                  "lightgbm": {
                    "raw_r2": -0.010621827581441368,
                    "rmse": 0.02174748681714259,
                    "mape": 1.778232486157363,
                    "confidence": 0.6163717930407935
                  },
                  "catboost": {
                    "raw_r2": 0.01861531743095235,
                    "rmse": 0.02143534975818563,
                    "mape": 1.7138975186749363,
                    "confidence": 0.6401140355973627
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.025547511763900736,
                "mape": 1734120.1832767718,
                "nrmse": 1.0154287376522975,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 2,
                "train_days": 488,
                "test_days": 30,
                "train_end_idx": 488,
                "test_end_idx": 518,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-08-04T00:00:00",
                "test_start": "2025-08-05T00:00:00",
                "test_end": "2025-09-15T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.5139652984724907,
                    "rmse": 0.027244299875328216,
                    "mape": 1.3933180499505204,
                    "confidence": 0.3462187461870996
                  },
                  "lightgbm": {
                    "raw_r2": -0.0023520418779044614,
                    "rmse": 0.02236214392747337,
                    "mape": 1.7692664146599941,
                    "confidence": 0.6230889879989672
                  },
                  "catboost": {
                    "raw_r2": 0.017327233237375395,
                    "rmse": 0.022183664174604587,
                    "mape": 1.7727837866742535,
                    "confidence": 0.6390695777899966
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.016434046383146227,
                "mape": 1675921.5020991035,
                "nrmse": 0.9916782320613086,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 3,
                "train_days": 518,
                "test_days": 30,
                "train_end_idx": 518,
                "test_end_idx": 548,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-15T00:00:00",
                "test_start": "2025-09-16T00:00:00",
                "test_end": "2025-10-27T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.5070798217693439,
                    "rmse": 0.02662247081220422,
                    "mape": 1.381129440904099,
                    "confidence": 0.34771879499525465
                  },
                  "lightgbm": {
                    "raw_r2": -0.002764638566772115,
                    "rmse": 0.021786941374305722,
                    "mape": 1.7923056628746756,
                    "confidence": 0.6227537669320252
                  },
                  "catboost": {
                    "raw_r2": 0.01961474253703029,
                    "rmse": 0.02156646913806186,
                    "mape": 1.750375340622603,
                    "confidence": 0.640924216496192
                  }
                },
                "dirhit": null,
                "rmse": 0.01903429255530433,
                "mape": 1639416.2610667874,
                "nrmse": 1.0051120939687557,
                "mask_count": 4,
                "mask_pct": 13.793103448275861,
                "low_support": true,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 4,
                "train_days": 548,
                "test_days": 30,
                "train_end_idx": 548,
                "test_end_idx": 578,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-27T00:00:00",
                "test_start": "2025-10-28T00:00:00",
                "test_end": "2025-12-08T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.4669197360859474,
                    "rmse": 0.026456015974182658,
                    "mape": 1.3677267924320846,
                    "confidence": 0.3573935453542938
                  },
                  "lightgbm": {
                    "raw_r2": -0.003898426722200199,
                    "rmse": 0.021812508699369276,
                    "mape": 1.7798827901609366,
                    "confidence": 0.6218326285726995
                  },
                  "catboost": {
                    "raw_r2": 0.028218925129836408,
                    "rmse": 0.021462324544826904,
                    "mape": 1.7171432184318314,
                    "confidence": 0.647889915476617
                  }
                },
                "dirhit": null,
                "rmse": 0.01262472834648799,
                "mape": 1062745.9037992,
                "nrmse": 1.010726644351302,
                "mask_count": 2,
                "mask_pct": 6.896551724137931,
                "low_support": true,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              }
            ],
            "avg_dirhit": 80.0,
            "avg_nrmse": 1.005736427008416,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.5141629938736345,
                "rmse": 0.026798676754660668,
                "mape": 1.3864784277668376,
                "confidence": 0.3467737870318282
              },
              "lightgbm": {
                "raw_r2": -0.004909233687079536,
                "rmse": 0.021927270204572743,
                "mape": 1.7799218384632423,
                "confidence": 0.6210117941361214
              },
              "catboost": {
                "raw_r2": 0.02094405458379861,
                "rmse": 0.021661951903919743,
                "mape": 1.7385499661009058,
                "confidence": 0.6419994363400421
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 784,
      "value": 46.835379188714214,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.3178463939636689,
        "ml_loss_threshold": 0.001958778929277818,
        "ml_dir_penalty": 2.209416745306361,
        "ml_adaptive_k_1d": 1.5953864788781382,
        "ml_pattern_weight_scale_1d": 1.6297456460845794,
        "enable_talib_patterns_short": true,
        "external_min_days": 36,
        "external_smooth_alpha": 0.15712551811030104,
        "xgb_n_estimators": 520,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.070444189870207,
        "xgb_subsample": 0.6469697256686852,
        "xgb_colsample_bytree": 0.677403265458325,
        "xgb_reg_alpha": 0.7894462622456405,
        "xgb_reg_lambda": 10.022949641813547,
        "xgb_min_child_weight": 12,
        "xgb_gamma": 0.09442049596516265,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 318,
        "lgb_n_estimators": 481,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.049781640390748734,
        "lgb_num_leaves": 29,
        "lgb_subsample": 0.5451653866984736,
        "lgb_colsample_bytree": 0.8405165371715404,
        "lgb_reg_alpha": 0.4328931802792144,
        "lgb_reg_lambda": 0.001606643052429094,
        "lgb_min_data_in_leaf": 99,
        "lgb_feature_fraction_bynode": 0.9998352061969561,
        "lgb_bagging_freq": 9,
        "lgb_min_gain_to_split": 0.9858995165975957,
        "cat_iterations": 225,
        "cat_depth": 7,
        "cat_learning_rate": 0.018251497836217705,
        "cat_l2_leaf_reg": 1.2049598946924178,
        "cat_subsample": 0.5748413948989283,
        "cat_rsm": 0.5772976343628963,
        "cat_border_count": 143,
        "cat_random_strength": 1.0788424013696418,
        "cat_leaf_estimation_iterations": 10,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 75.71428571428572,
        "avg_nrmse": 1.0274368018809648,
        "model_choice": "all",
        "symbol_metrics": {
          "AYGAZ_1d": {
            "symbol": "AYGAZ",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 457,
                "test_days": 30,
                "train_end_idx": 457,
                "test_end_idx": 487,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-19T00:00:00",
                "test_start": "2025-06-20T00:00:00",
                "test_end": "2025-08-01T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.4751825244417063,
                    "rmse": 0.026241793785679274,
                    "mape": 1.4064967440291298,
                    "confidence": 0.35526821150416243
                  },
                  "lightgbm": {
                    "raw_r2": -0.010621827581441368,
                    "rmse": 0.02174748681714259,
                    "mape": 1.778232486157363,
                    "confidence": 0.6163717930407935
                  },
                  "catboost": {
                    "raw_r2": 0.021381464735429234,
                    "rmse": 0.021441480785638057,
                    "mape": 1.7683664847883092,
                    "confidence": 0.6423559129303926
                  }
                },
                "dirhit": 71.42857142857143,
                "rmse": 0.02608264377603988,
                "mape": 1282054.6675316782,
                "nrmse": 1.0446621926958253,
                "mask_count": 7,
                "mask_pct": 24.137931034482758,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 2,
                "train_days": 487,
                "test_days": 30,
                "train_end_idx": 487,
                "test_end_idx": 517,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-08-01T00:00:00",
                "test_start": "2025-08-04T00:00:00",
                "test_end": "2025-09-12T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.4305101027620861,
                    "rmse": 0.026640054387701336,
                    "mape": 1.399373941733667,
                    "confidence": 0.3676605329738536
                  },
                  "lightgbm": {
                    "raw_r2": -0.0023520418779044614,
                    "rmse": 0.02236214392747337,
                    "mape": 1.7692664146599941,
                    "confidence": 0.6230889879989672
                  },
                  "catboost": {
                    "raw_r2": 0.021129238470454004,
                    "rmse": 0.02214538501965081,
                    "mape": 1.7511160514610606,
                    "confidence": 0.6421515566783214
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.01437021679500612,
                "mape": 1504414.2411944484,
                "nrmse": 1.0065299980863922,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 3,
                "train_days": 517,
                "test_days": 30,
                "train_end_idx": 517,
                "test_end_idx": 547,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-12T00:00:00",
                "test_start": "2025-09-15T00:00:00",
                "test_end": "2025-10-24T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.4141834939766003,
                    "rmse": 0.02592772313354398,
                    "mape": 1.3840214031021831,
                    "confidence": 0.3727712632855077
                  },
                  "lightgbm": {
                    "raw_r2": -0.002764638566772115,
                    "rmse": 0.021786941374305722,
                    "mape": 1.7923056628746756,
                    "confidence": 0.6227537669320252
                  },
                  "catboost": {
                    "raw_r2": 0.015515489131234647,
                    "rmse": 0.02160517838326014,
                    "mape": 1.7701866621520932,
                    "confidence": 0.6376000163715896
                  }
                },
                "dirhit": null,
                "rmse": 0.01920145869242422,
                "mape": 1334659.247102128,
                "nrmse": 1.0079866312952797,
                "mask_count": 4,
                "mask_pct": 13.793103448275861,
                "low_support": true,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 4,
                "train_days": 547,
                "test_days": 30,
                "train_end_idx": 547,
                "test_end_idx": 577,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-24T00:00:00",
                "test_start": "2025-10-27T00:00:00",
                "test_end": "2025-12-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.37172912481079506,
                    "rmse": 0.025693959930605005,
                    "mape": 1.3708692855531206,
                    "confidence": 0.3876596458466378
                  },
                  "lightgbm": {
                    "raw_r2": -0.003898426722200199,
                    "rmse": 0.021812508699369276,
                    "mape": 1.7798827901609366,
                    "confidence": 0.6218326285726995
                  },
                  "catboost": {
                    "raw_r2": 0.022353204288599732,
                    "rmse": 0.02150951379498198,
                    "mape": 1.7471131893423955,
                    "confidence": 0.6431430959913592
                  }
                },
                "dirhit": null,
                "rmse": 0.013103059502926688,
                "mape": 1512580.4508637441,
                "nrmse": 1.0505683854463623,
                "mask_count": 4,
                "mask_pct": 13.793103448275861,
                "low_support": true,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              }
            ],
            "avg_dirhit": 75.71428571428572,
            "avg_nrmse": 1.0274368018809648,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.4229013114977969,
                "rmse": 0.026125882809382397,
                "mape": 1.390190343604525,
                "confidence": 0.3708399134025404
              },
              "lightgbm": {
                "raw_r2": -0.004909233687079536,
                "rmse": 0.021927270204572743,
                "mape": 1.7799218384632423,
                "confidence": 0.6210117941361214
              },
              "catboost": {
                "raw_r2": 0.020094849156429406,
                "rmse": 0.021675389495882748,
                "mape": 1.7591955969359647,
                "confidence": 0.6413126454929157
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 424,
      "value": 46.4142980726327,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.34123418993131127,
        "ml_loss_threshold": 0.0030208723453201136,
        "ml_dir_penalty": 2.0272041136361754,
        "ml_adaptive_k_1d": 1.5504626105571506,
        "ml_pattern_weight_scale_1d": 1.554141898888517,
        "enable_talib_patterns_short": true,
        "external_min_days": 38,
        "external_smooth_alpha": 0.15487842157072076,
        "xgb_n_estimators": 530,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.05868225055740997,
        "xgb_subsample": 0.7437160563786339,
        "xgb_colsample_bytree": 0.6587524726462732,
        "xgb_reg_alpha": 0.47934841151993296,
        "xgb_reg_lambda": 11.55332328319509,
        "xgb_min_child_weight": 15,
        "xgb_gamma": 0.17582099517529542,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 437,
        "lgb_n_estimators": 271,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.03589190797604252,
        "lgb_num_leaves": 7,
        "lgb_subsample": 0.7738376233665423,
        "lgb_colsample_bytree": 0.8421222041368043,
        "lgb_reg_alpha": 0.5075725211886749,
        "lgb_reg_lambda": 0.0011369482898154098,
        "lgb_min_data_in_leaf": 100,
        "lgb_feature_fraction_bynode": 0.7334775797614691,
        "lgb_bagging_freq": 10,
        "lgb_min_gain_to_split": 0.7733107271902143,
        "cat_iterations": 144,
        "cat_depth": 6,
        "cat_learning_rate": 0.01427477572214157,
        "cat_l2_leaf_reg": 1.669727743754566,
        "cat_subsample": 0.5442155964980541,
        "cat_rsm": 0.7890448449711573,
        "cat_border_count": 194,
        "cat_random_strength": 0.22192092521310985,
        "cat_leaf_estimation_iterations": 15,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 75.0,
        "avg_nrmse": 1.0142836545612173,
        "model_choice": "all",
        "symbol_metrics": {
          "AYGAZ_1d": {
            "symbol": "AYGAZ",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 457,
                "test_days": 30,
                "train_end_idx": 457,
                "test_end_idx": 487,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-19T00:00:00",
                "test_start": "2025-06-20T00:00:00",
                "test_end": "2025-08-01T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -1.516186320822546,
                    "rmse": 0.034054973427021275,
                    "mape": 1.4486026081383792,
                    "confidence": 0.3003313867366474
                  },
                  "lightgbm": {
                    "raw_r2": -0.010621827581441368,
                    "rmse": 0.02174748681714259,
                    "mape": 1.778232486157363,
                    "confidence": 0.6163717930407935
                  },
                  "catboost": {
                    "raw_r2": 0.014716784225884294,
                    "rmse": 0.021467227924097613,
                    "mape": 1.7486914421145254,
                    "confidence": 0.6369519947374435
                  }
                },
                "dirhit": 66.66666666666666,
                "rmse": 0.02553423234123301,
                "mape": 2245911.347389,
                "nrmse": 1.022697214877469,
                "mask_count": 12,
                "mask_pct": 41.37931034482759,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 2,
                "train_days": 487,
                "test_days": 30,
                "train_end_idx": 487,
                "test_end_idx": 517,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-08-01T00:00:00",
                "test_start": "2025-08-04T00:00:00",
                "test_end": "2025-09-12T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -1.401793678416159,
                    "rmse": 0.034135377515403256,
                    "mape": 1.4314452521155527,
                    "confidence": 0.3005869008627089
                  },
                  "lightgbm": {
                    "raw_r2": -0.0023520418779044614,
                    "rmse": 0.02236214392747337,
                    "mape": 1.7692664146599941,
                    "confidence": 0.6230889879989672
                  },
                  "catboost": {
                    "raw_r2": 0.032572169579654475,
                    "rmse": 0.022047794815975283,
                    "mape": 1.7093944878906318,
                    "confidence": 0.6514065470550432
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.014134460969816999,
                "mape": 2233060.2730459706,
                "nrmse": 0.9900170036297654,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 3,
                "train_days": 517,
                "test_days": 30,
                "train_end_idx": 517,
                "test_end_idx": 547,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-12T00:00:00",
                "test_start": "2025-09-15T00:00:00",
                "test_end": "2025-10-24T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -1.3860191675819993,
                    "rmse": 0.033399476894282465,
                    "mape": 1.4294729539520519,
                    "confidence": 0.3006350186538851
                  },
                  "lightgbm": {
                    "raw_r2": -0.002764638566772115,
                    "rmse": 0.021786941374305722,
                    "mape": 1.7923056628746756,
                    "confidence": 0.6227537669320252
                  },
                  "catboost": {
                    "raw_r2": 0.032704605138175004,
                    "rmse": 0.021440390908046607,
                    "mape": 1.7155076882257136,
                    "confidence": 0.6515134376971448
                  }
                },
                "dirhit": 70.0,
                "rmse": 0.01917276561725045,
                "mape": 1521329.0529865252,
                "nrmse": 1.0064803792625983,
                "mask_count": 10,
                "mask_pct": 34.48275862068966,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 4,
                "train_days": 547,
                "test_days": 30,
                "train_end_idx": 547,
                "test_end_idx": 577,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-24T00:00:00",
                "test_start": "2025-10-27T00:00:00",
                "test_end": "2025-12-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -1.2803110263720654,
                    "rmse": 0.033035518130924514,
                    "mape": 1.416280181730224,
                    "confidence": 0.30107654800483835
                  },
                  "lightgbm": {
                    "raw_r2": -0.003898426722200199,
                    "rmse": 0.021812508699369276,
                    "mape": 1.7798827901609366,
                    "confidence": 0.6218326285726995
                  },
                  "catboost": {
                    "raw_r2": 0.02848143670627908,
                    "rmse": 0.02142115779918078,
                    "mape": 1.687027652808709,
                    "confidence": 0.6481021382735876
                  }
                },
                "dirhit": 83.33333333333334,
                "rmse": 0.01294555408020863,
                "mape": 2016549.749827343,
                "nrmse": 1.0379400204750364,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              }
            ],
            "avg_dirhit": 75.0,
            "avg_nrmse": 1.0142836545612173,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -1.3960775482981924,
                "rmse": 0.03365633649190788,
                "mape": 1.431450248984052,
                "confidence": 0.30065746356451994
              },
              "lightgbm": {
                "raw_r2": -0.004909233687079536,
                "rmse": 0.021927270204572743,
                "mape": 1.7799218384632423,
                "confidence": 0.6210117941361214
              },
              "catboost": {
                "raw_r2": 0.02711874891249821,
                "rmse": 0.021594142861825066,
                "mape": 1.7151553177598948,
                "confidence": 0.6469935294408047
              }
            }
          }
        }
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_AYGAZ_h1_c3",
  "symbols": [
    "AYGAZ"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.342487463086917,
    "ml_loss_threshold": 0.001953168134631609,
    "ml_dir_penalty": 2.663102974022909,
    "ml_adaptive_k_1d": 2.1944211886941987,
    "ml_pattern_weight_scale_1d": 1.5914301778382651,
    "external_min_days": 37,
    "external_smooth_alpha": 0.16574753836727296
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 573,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.06421963262825856,
    "xgb_subsample": 0.684613147308965,
    "xgb_colsample_bytree": 0.6369394025063347,
    "xgb_reg_alpha": 0.020599915094764106,
    "xgb_reg_lambda": 14.567531044700477,
    "xgb_min_child_weight": 15,
    "xgb_gamma": 0.4530500534729219,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 335,
    "lgb_n_estimators": 405,
    "lgb_max_depth": 5,
    "lgb_learning_rate": 0.04433696611873909,
    "lgb_num_leaves": 26,
    "lgb_subsample": 0.722322710377409,
    "lgb_colsample_bytree": 0.8254011373570874,
    "lgb_reg_alpha": 0.8094220913285921,
    "lgb_reg_lambda": 0.0009946197014817203,
    "lgb_min_data_in_leaf": 92,
    "lgb_feature_fraction_bynode": 0.9495409504829029,
    "lgb_bagging_freq": 10,
    "lgb_min_gain_to_split": 0.9997280015655705,
    "cat_iterations": 196,
    "cat_depth": 7,
    "cat_learning_rate": 0.020566182574885374,
    "cat_l2_leaf_reg": 1.0005678901752715,
    "cat_subsample": 0.594079523562158,
    "cat_rsm": 0.8193754477657651,
    "cat_border_count": 254,
    "cat_random_strength": 0.24369814875884513,
    "cat_leaf_estimation_iterations": 6,
    "cat_bootstrap_type": "Bayesian"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "0",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "AYGAZ_1d": {
      "symbol": "AYGAZ",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 458,
          "test_days": 30,
          "train_end_idx": 458,
          "test_end_idx": 488,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-20T00:00:00",
          "test_start": "2025-06-23T00:00:00",
          "test_end": "2025-08-04T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.5686871191667564,
              "rmse": 0.026871920356927592,
              "mape": 1.4037394277806456,
              "confidence": 0.3357640615906647
            },
            "lightgbm": {
              "raw_r2": -0.010621827581441368,
              "rmse": 0.02174748681714259,
              "mape": 1.778232486157363,
              "confidence": 0.6163717930407935
            },
            "catboost": {
              "raw_r2": 0.01861531743095235,
              "rmse": 0.02143534975818563,
              "mape": 1.7138975186749363,
              "confidence": 0.6401140355973627
            }
          },
          "dirhit": 80.0,
          "rmse": 0.025547511763900736,
          "mape": 1734120.1832767718,
          "nrmse": 1.0154287376522975,
          "mask_count": 5,
          "mask_pct": 17.24137931034483,
          "low_support": false,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        },
        {
          "split_index": 2,
          "train_days": 488,
          "test_days": 30,
          "train_end_idx": 488,
          "test_end_idx": 518,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-08-04T00:00:00",
          "test_start": "2025-08-05T00:00:00",
          "test_end": "2025-09-15T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.5139652984724907,
              "rmse": 0.027244299875328216,
              "mape": 1.3933180499505204,
              "confidence": 0.3462187461870996
            },
            "lightgbm": {
              "raw_r2": -0.0023520418779044614,
              "rmse": 0.02236214392747337,
              "mape": 1.7692664146599941,
              "confidence": 0.6230889879989672
            },
            "catboost": {
              "raw_r2": 0.017327233237375395,
              "rmse": 0.022183664174604587,
              "mape": 1.7727837866742535,
              "confidence": 0.6390695777899966
            }
          },
          "dirhit": 80.0,
          "rmse": 0.016434046383146227,
          "mape": 1675921.5020991035,
          "nrmse": 0.9916782320613086,
          "mask_count": 5,
          "mask_pct": 17.24137931034483,
          "low_support": false,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        },
        {
          "split_index": 3,
          "train_days": 518,
          "test_days": 30,
          "train_end_idx": 518,
          "test_end_idx": 548,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-15T00:00:00",
          "test_start": "2025-09-16T00:00:00",
          "test_end": "2025-10-27T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.5070798217693439,
              "rmse": 0.02662247081220422,
              "mape": 1.381129440904099,
              "confidence": 0.34771879499525465
            },
            "lightgbm": {
              "raw_r2": -0.002764638566772115,
              "rmse": 0.021786941374305722,
              "mape": 1.7923056628746756,
              "confidence": 0.6227537669320252
            },
            "catboost": {
              "raw_r2": 0.01961474253703029,
              "rmse": 0.02156646913806186,
              "mape": 1.750375340622603,
              "confidence": 0.640924216496192
            }
          },
          "dirhit": null,
          "rmse": 0.01903429255530433,
          "mape": 1639416.2610667874,
          "nrmse": 1.0051120939687557,
          "mask_count": 4,
          "mask_pct": 13.793103448275861,
          "low_support": true,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        },
        {
          "split_index": 4,
          "train_days": 548,
          "test_days": 30,
          "train_end_idx": 548,
          "test_end_idx": 578,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-27T00:00:00",
          "test_start": "2025-10-28T00:00:00",
          "test_end": "2025-12-08T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.4669197360859474,
              "rmse": 0.026456015974182658,
              "mape": 1.3677267924320846,
              "confidence": 0.3573935453542938
            },
            "lightgbm": {
              "raw_r2": -0.003898426722200199,
              "rmse": 0.021812508699369276,
              "mape": 1.7798827901609366,
              "confidence": 0.6218326285726995
            },
            "catboost": {
              "raw_r2": 0.028218925129836408,
              "rmse": 0.021462324544826904,
              "mape": 1.7171432184318314,
              "confidence": 0.647889915476617
            }
          },
          "dirhit": null,
          "rmse": 0.01262472834648799,
          "mape": 1062745.9037992,
          "nrmse": 1.010726644351302,
          "mask_count": 2,
          "mask_pct": 6.896551724137931,
          "low_support": true,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        }
      ],
      "avg_dirhit": 80.0,
      "avg_nrmse": 1.005736427008416,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.5141629938736345,
          "rmse": 0.026798676754660668,
          "mape": 1.3864784277668376,
          "confidence": 0.3467737870318282
        },
        "lightgbm": {
          "raw_r2": -0.004909233687079536,
          "rmse": 0.021927270204572743,
          "mape": 1.7799218384632423,
          "confidence": 0.6210117941361214
        },
        "catboost": {
          "raw_r2": 0.02094405458379861,
          "rmse": 0.021661951903919743,
          "mape": 1.7385499661009058,
          "confidence": 0.6419994363400421
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 5,
    "min_mask_pct": 2.5,
    "best_trial_number": 997,
    "best_trial_seed": 1039,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "split_generation": {
      "type": "generate_walkforward_splits",
      "n_splits": 4
    },
    "symbol_specs": {
      "AYGAZ_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 458,
            "test_end_idx": 488,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-20T00:00:00",
            "test_start": "2025-06-23T00:00:00",
            "test_end": "2025-08-04T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 488,
            "test_end_idx": 518,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-08-04T00:00:00",
            "test_start": "2025-08-05T00:00:00",
            "test_end": "2025-09-15T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 518,
            "test_end_idx": 548,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-15T00:00:00",
            "test_start": "2025-09-16T00:00:00",
            "test_end": "2025-10-27T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 548,
            "test_end_idx": 578,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-27T00:00:00",
            "test_start": "2025-10-28T00:00:00",
            "test_end": "2025-12-08T00:00:00"
          }
        ]
      }
    }
  }
}