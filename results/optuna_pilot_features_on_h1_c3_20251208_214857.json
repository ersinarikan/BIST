{
  "best_value": 42.76660672394669,
  "best_dirhit": 70.8840579710145,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.43846878051180416,
    "ml_loss_threshold": 0.0028504341474534563,
    "ml_dir_penalty": 4.6956617743627245,
    "n_seeds": 4,
    "meta_stacking_alpha": 0.03594546142257719,
    "ml_adaptive_k_1d": 2.4759951875045543,
    "ml_pattern_weight_scale_1d": 1.0826259047352824,
    "enable_talib_patterns_short": false,
    "external_min_days": 28,
    "external_smooth_alpha": 0.16802809371866106,
    "smart_consensus_weight": 0.7943026678112673,
    "smart_performance_weight": 0.3151936245263903,
    "smart_sigma": 0.013985865009294069,
    "smart_weight_xgb": 0.8629893675635929,
    "smart_weight_lgbm": 0.7223813653471276,
    "smart_weight_cat": 0.9288350672325186,
    "xgb_n_estimators": 300,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.011435247678837622,
    "xgb_subsample": 0.872744722594933,
    "xgb_colsample_bytree": 0.8247054417832312,
    "xgb_reg_alpha": 0.0003844952490305713,
    "xgb_reg_lambda": 0.005838893818815824,
    "xgb_min_child_weight": 12,
    "xgb_gamma": 0.00010367282809454287,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 443,
    "lgb_n_estimators": 347,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.04337445249943936,
    "lgb_num_leaves": 28,
    "lgb_subsample": 0.8753854828855399,
    "lgb_colsample_bytree": 0.8408181765886282,
    "lgb_reg_alpha": 0.00041381016494281063,
    "lgb_reg_lambda": 0.0272919274288419,
    "lgb_min_data_in_leaf": 49,
    "lgb_feature_fraction_bynode": 0.7097438892791106,
    "lgb_bagging_freq": 8,
    "lgb_min_gain_to_split": 0.7649617515502256,
    "cat_iterations": 537,
    "cat_depth": 3,
    "cat_learning_rate": 0.049890233491672424,
    "cat_l2_leaf_reg": 1.9778926695901327,
    "cat_subsample": 0.5529644569402007,
    "cat_rsm": 0.9156106763896842,
    "cat_border_count": 235,
    "cat_random_strength": 0.10086561952456624,
    "cat_leaf_estimation_iterations": 18,
    "cat_bootstrap_type": "MVS"
  },
  "best_trial": {
    "number": 93,
    "value": 42.76660672394669,
    "state": "1"
  },
  "best_trial_number": 93,
  "best_trial_seed": 135,
  "n_trials": 1041,
  "pruned_count": 0,
  "avg_trial_time": 287.4229678397683,
  "top_k_trials": [
    {
      "number": 93,
      "value": 42.76660672394669,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.43846878051180416,
        "ml_loss_threshold": 0.0028504341474534563,
        "ml_dir_penalty": 4.6956617743627245,
        "n_seeds": 4,
        "meta_stacking_alpha": 0.03594546142257719,
        "ml_adaptive_k_1d": 2.4759951875045543,
        "ml_pattern_weight_scale_1d": 1.0826259047352824,
        "enable_talib_patterns_short": false,
        "external_min_days": 28,
        "external_smooth_alpha": 0.16802809371866106,
        "smart_consensus_weight": 0.7943026678112673,
        "smart_performance_weight": 0.3151936245263903,
        "smart_sigma": 0.013985865009294069,
        "smart_weight_xgb": 0.8629893675635929,
        "smart_weight_lgbm": 0.7223813653471276,
        "smart_weight_cat": 0.9288350672325186,
        "xgb_n_estimators": 300,
        "xgb_max_depth": 5,
        "xgb_learning_rate": 0.011435247678837622,
        "xgb_subsample": 0.872744722594933,
        "xgb_colsample_bytree": 0.8247054417832312,
        "xgb_reg_alpha": 0.0003844952490305713,
        "xgb_reg_lambda": 0.005838893818815824,
        "xgb_min_child_weight": 12,
        "xgb_gamma": 0.00010367282809454287,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 443,
        "lgb_n_estimators": 347,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.04337445249943936,
        "lgb_num_leaves": 28,
        "lgb_subsample": 0.8753854828855399,
        "lgb_colsample_bytree": 0.8408181765886282,
        "lgb_reg_alpha": 0.00041381016494281063,
        "lgb_reg_lambda": 0.0272919274288419,
        "lgb_min_data_in_leaf": 49,
        "lgb_feature_fraction_bynode": 0.7097438892791106,
        "lgb_bagging_freq": 8,
        "lgb_min_gain_to_split": 0.7649617515502256,
        "cat_iterations": 537,
        "cat_depth": 3,
        "cat_learning_rate": 0.049890233491672424,
        "cat_l2_leaf_reg": 1.9778926695901327,
        "cat_subsample": 0.5529644569402007,
        "cat_rsm": 0.9156106763896842,
        "cat_border_count": 235,
        "cat_random_strength": 0.10086561952456624,
        "cat_leaf_estimation_iterations": 18,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 70.8840579710145,
        "avg_nrmse": 1.1420389759605762,
        "model_choice": "all",
        "symbol_metrics": {
          "AYES_1d": {
            "symbol": "AYES",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 456,
                "test_days": 30,
                "train_end_idx": 456,
                "test_end_idx": 486,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-17T00:00:00",
                "test_start": "2025-06-18T00:00:00",
                "test_end": "2025-07-30T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -75.84777420904739,
                    "rmse": 0.2750570289835994,
                    "mape": 1.8378224680783188,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.008723628230949965,
                    "rmse": 0.033615858190351317,
                    "mape": 1.7181223112386104,
                    "confidence": 0.6179131756086218
                  },
                  "catboost": {
                    "raw_r2": 0.007765377652878473,
                    "rmse": 0.03332292543560677,
                    "mape": 1.729213526419631,
                    "confidence": 0.631308576833584
                  }
                },
                "dirhit": 60.86956521739131,
                "rmse": 0.04756313295483698,
                "mape": 226.5938090736902,
                "nrmse": 1.0769002281492879,
                "mask_count": 23,
                "mask_pct": 79.3103448275862,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 2,
                "train_days": 486,
                "test_days": 30,
                "train_end_idx": 486,
                "test_end_idx": 516,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-30T00:00:00",
                "test_start": "2025-07-31T00:00:00",
                "test_end": "2025-09-10T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -71.68301688794999,
                    "rmse": 0.2744863509015987,
                    "mape": 1.8279797860258395,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.012565607662789654,
                    "rmse": 0.034690590234147535,
                    "mape": 1.714950809714335,
                    "confidence": 0.6147938008503592
                  },
                  "catboost": {
                    "raw_r2": -0.005593744412387617,
                    "rmse": 0.03448694094678414,
                    "mape": 1.7240546513431931,
                    "confidence": 0.6204553789133378
                  }
                },
                "dirhit": 76.0,
                "rmse": 0.055229071233281676,
                "mape": 34056812.0373278,
                "nrmse": 1.6435564158922689,
                "mask_count": 25,
                "mask_pct": 86.20689655172413,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 3,
                "train_days": 516,
                "test_days": 30,
                "train_end_idx": 516,
                "test_end_idx": 546,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-10T00:00:00",
                "test_start": "2025-09-11T00:00:00",
                "test_end": "2025-10-22T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -72.83335100735367,
                    "rmse": 0.2757396885880551,
                    "mape": 1.8349454624422978,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.00799510085016005,
                    "rmse": 0.03463442358661742,
                    "mape": 1.7204598608440815,
                    "confidence": 0.6185048454964426
                  },
                  "catboost": {
                    "raw_r2": -0.011263890154436037,
                    "rmse": 0.03468666935137591,
                    "mape": 1.7276552442018642,
                    "confidence": 0.6158505075464329
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.0239494926744919,
                "mape": 4003280.027340252,
                "nrmse": 0.8403229694480485,
                "mask_count": 20,
                "mask_pct": 68.96551724137932,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 4,
                "train_days": 546,
                "test_days": 30,
                "train_end_idx": 546,
                "test_end_idx": 576,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-22T00:00:00",
                "test_start": "2025-10-23T00:00:00",
                "test_end": "2025-12-03T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -71.62938243971779,
                    "rmse": 0.27462588202413474,
                    "mape": 1.8358016527463994,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.011521409901279625,
                    "rmse": 0.034455431072077256,
                    "mape": 1.7322350444211507,
                    "confidence": 0.6156414423994627
                  },
                  "catboost": {
                    "raw_r2": -0.01710684951290964,
                    "rmse": 0.03453344292903245,
                    "mape": 1.7364443816065631,
                    "confidence": 0.6111091526493309
                  }
                },
                "dirhit": 66.66666666666666,
                "rmse": 0.035880917620851355,
                "mape": 2937400.673672887,
                "nrmse": 1.0073762903527,
                "mask_count": 9,
                "mask_pct": 31.03448275862069,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              }
            ],
            "avg_dirhit": 70.8840579710145,
            "avg_nrmse": 1.1420389759605762,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -72.99838113601722,
                "rmse": 0.274977237624347,
                "mape": 1.834137342323214,
                "confidence": 0.3
              },
              "lightgbm": {
                "raw_r2": -0.010201436661294824,
                "rmse": 0.034349075770798376,
                "mape": 1.7214420065545444,
                "confidence": 0.6167133160887216
              },
              "catboost": {
                "raw_r2": -0.0065497766067137055,
                "rmse": 0.03425749466569982,
                "mape": 1.729341950892813,
                "confidence": 0.6196809039856714
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 121,
      "value": 42.60119098107957,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.33880206140353325,
        "ml_loss_threshold": 0.003559776065920807,
        "ml_dir_penalty": 3.7991071457498484,
        "n_seeds": 2,
        "meta_stacking_alpha": 0.011935599173899709,
        "ml_adaptive_k_1d": 2.4540545668477924,
        "ml_pattern_weight_scale_1d": 1.134694332953103,
        "enable_talib_patterns_short": false,
        "external_min_days": 31,
        "external_smooth_alpha": 0.12893866038001373,
        "xgb_n_estimators": 206,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.01658587848765287,
        "xgb_subsample": 0.8903998748333017,
        "xgb_colsample_bytree": 0.7635319289811535,
        "xgb_reg_alpha": 0.0002499119365990527,
        "xgb_reg_lambda": 0.08164715415555016,
        "xgb_min_child_weight": 9,
        "xgb_gamma": 0.0012308377373710445,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 444,
        "lgb_n_estimators": 474,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.03148716402232516,
        "lgb_num_leaves": 31,
        "lgb_subsample": 0.7817528285485169,
        "lgb_colsample_bytree": 0.7051303191030339,
        "lgb_reg_alpha": 0.0015313273618939266,
        "lgb_reg_lambda": 0.0990697488005773,
        "lgb_min_data_in_leaf": 54,
        "lgb_feature_fraction_bynode": 0.6122239038458265,
        "lgb_bagging_freq": 8,
        "lgb_min_gain_to_split": 0.9337306534503641,
        "cat_iterations": 488,
        "cat_depth": 7,
        "cat_learning_rate": 0.03367966593975151,
        "cat_l2_leaf_reg": 9.177549962127046,
        "cat_subsample": 0.7178758686602629,
        "cat_rsm": 0.5073826354746204,
        "cat_border_count": 245,
        "cat_random_strength": 0.10016402546855815,
        "cat_leaf_estimation_iterations": 17,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 71.5984015984016,
        "avg_nrmse": 1.2529483563002577,
        "model_choice": "all",
        "symbol_metrics": {
          "AYES_1d": {
            "symbol": "AYES",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 458,
                "test_days": 30,
                "train_end_idx": 458,
                "test_end_idx": 488,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-19T00:00:00",
                "test_start": "2025-06-20T00:00:00",
                "test_end": "2025-08-01T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -41.99531277445985,
                    "rmse": 0.2076220046622788,
                    "mape": 1.7926305949718297,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.006696769684920427,
                    "rmse": 0.03349368585903006,
                    "mape": 1.7183693651250773,
                    "confidence": 0.6195593829420304
                  },
                  "catboost": {
                    "raw_r2": -0.002861193507180985,
                    "rmse": 0.03345190941855047,
                    "mape": 1.705267314111526,
                    "confidence": 0.6226753199228359
                  }
                },
                "dirhit": 57.692307692307686,
                "rmse": 0.06847219729088207,
                "mape": 617.9110445590269,
                "nrmse": 1.5106662106280775,
                "mask_count": 26,
                "mask_pct": 89.65517241379311,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 2,
                "train_days": 488,
                "test_days": 30,
                "train_end_idx": 488,
                "test_end_idx": 518,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-08-01T00:00:00",
                "test_start": "2025-08-04T00:00:00",
                "test_end": "2025-09-12T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -41.88041076932431,
                    "rmse": 0.21035475424171315,
                    "mape": 1.7848429406762738,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.012565607662789654,
                    "rmse": 0.034690590234147535,
                    "mape": 1.714950809714335,
                    "confidence": 0.6147938008503592
                  },
                  "catboost": {
                    "raw_r2": -0.008655708054518393,
                    "rmse": 0.03453872779402132,
                    "mape": 1.7089327921569444,
                    "confidence": 0.6179683347159788
                  }
                },
                "dirhit": 77.27272727272727,
                "rmse": 0.03892645891237245,
                "mape": 16585060.950947909,
                "nrmse": 1.1013422699174629,
                "mask_count": 22,
                "mask_pct": 75.86206896551724,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 3,
                "train_days": 518,
                "test_days": 30,
                "train_end_idx": 518,
                "test_end_idx": 548,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-12T00:00:00",
                "test_start": "2025-09-15T00:00:00",
                "test_end": "2025-10-24T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -42.119723932766156,
                    "rmse": 0.21059333279623352,
                    "mape": 1.7923290185767349,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.008422868964908034,
                    "rmse": 0.03486826999932382,
                    "mape": 1.722395922593335,
                    "confidence": 0.6181574302782094
                  },
                  "catboost": {
                    "raw_r2": 0.002072789209463225,
                    "rmse": 0.03464368584982069,
                    "mape": 1.699217021346183,
                    "confidence": 0.6266841261581899
                  }
                },
                "dirhit": 71.42857142857143,
                "rmse": 0.04059163704259202,
                "mape": 15606079.47418205,
                "nrmse": 1.4250891089556612,
                "mask_count": 21,
                "mask_pct": 72.41379310344827,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 4,
                "train_days": 548,
                "test_days": 30,
                "train_end_idx": 548,
                "test_end_idx": 578,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-24T00:00:00",
                "test_start": "2025-10-27T00:00:00",
                "test_end": "2025-12-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -41.7062364418424,
                    "rmse": 0.21002047605288834,
                    "mape": 1.794602208675732,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.011521409901279625,
                    "rmse": 0.034455431072077256,
                    "mape": 1.7322350444211507,
                    "confidence": 0.6156414423994627
                  },
                  "catboost": {
                    "raw_r2": -0.0073879502762037585,
                    "rmse": 0.03432400305578965,
                    "mape": 1.7026875875376857,
                    "confidence": 0.6189979728881864
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.03509663383173786,
                "mape": 1887368.1808442802,
                "nrmse": 0.9746958356998285,
                "mask_count": 10,
                "mask_pct": 34.48275862068966,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              }
            ],
            "avg_dirhit": 71.5984015984016,
            "avg_nrmse": 1.2529483563002577,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -41.92542097959818,
                "rmse": 0.20964764193827845,
                "mape": 1.7911011907251426,
                "confidence": 0.3
              },
              "lightgbm": {
                "raw_r2": -0.009801664053474435,
                "rmse": 0.03437699429114467,
                "mape": 1.7219877854634744,
                "confidence": 0.6170380141175154
              },
              "catboost": {
                "raw_r2": -0.004208015657109978,
                "rmse": 0.03423958152954553,
                "mape": 1.7040261787880846,
                "confidence": 0.6215814384212978
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 790,
      "value": 42.54223040270064,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.2937541080156322,
        "ml_loss_threshold": 0.006337825200251752,
        "ml_dir_penalty": 4.345974049639983,
        "n_seeds": 4,
        "meta_stacking_alpha": 0.03196682070750124,
        "ml_adaptive_k_1d": 2.281958851942099,
        "ml_pattern_weight_scale_1d": 1.0402021019833916,
        "enable_talib_patterns_short": true,
        "external_min_days": 29,
        "external_smooth_alpha": 0.12803529049341666,
        "regime_scale_low": 0.8936941292643814,
        "regime_scale_high": 1.0628327482820428,
        "smart_consensus_weight": 0.7490240993352382,
        "smart_performance_weight": 0.5099338812838682,
        "smart_sigma": 0.0011373720724800291,
        "smart_weight_xgb": 0.9333785927331524,
        "smart_weight_lgbm": 0.9959473982280741,
        "smart_weight_cat": 0.9248320436750506,
        "xgb_n_estimators": 331,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.015008138452194572,
        "xgb_subsample": 0.8846445393371024,
        "xgb_colsample_bytree": 0.7948608627187579,
        "xgb_reg_alpha": 1.28264685634758e-05,
        "xgb_reg_lambda": 0.032730377542638835,
        "xgb_min_child_weight": 10,
        "xgb_gamma": 0.0002096592085399899,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 282,
        "lgb_n_estimators": 474,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.014668924571601079,
        "lgb_num_leaves": 31,
        "lgb_subsample": 0.7858488846528991,
        "lgb_colsample_bytree": 0.7346620845347966,
        "lgb_reg_alpha": 9.68542617768972e-05,
        "lgb_reg_lambda": 0.07304267617002748,
        "lgb_min_data_in_leaf": 54,
        "lgb_feature_fraction_bynode": 0.6375531848447047,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.10814739147170216,
        "cat_iterations": 411,
        "cat_depth": 7,
        "cat_learning_rate": 0.12626108937337707,
        "cat_l2_leaf_reg": 5.393097139036393,
        "cat_subsample": 0.5561341720641684,
        "cat_rsm": 0.5255254358061574,
        "cat_border_count": 208,
        "cat_random_strength": 0.8711022086613914,
        "cat_leaf_estimation_iterations": 18,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 70.86670480549199,
        "avg_nrmse": 1.1774104935239593,
        "model_choice": "all",
        "symbol_metrics": {
          "AYES_1d": {
            "symbol": "AYES",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 458,
                "test_days": 30,
                "train_end_idx": 458,
                "test_end_idx": 488,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-19T00:00:00",
                "test_start": "2025-06-20T00:00:00",
                "test_end": "2025-08-01T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -50.52859994442835,
                    "rmse": 0.22713946530531065,
                    "mape": 1.8075010150333026,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.006696769684920427,
                    "rmse": 0.03349368585903006,
                    "mape": 1.7183693651250773,
                    "confidence": 0.6195593829420304
                  },
                  "catboost": {
                    "raw_r2": 0.013072700125195421,
                    "rmse": 0.03315142667227769,
                    "mape": 1.6719887829208846,
                    "confidence": 0.6356177888454317
                  }
                },
                "dirhit": 60.86956521739131,
                "rmse": 0.06289802915374954,
                "mape": 432.27442518846175,
                "nrmse": 1.3876862597824355,
                "mask_count": 23,
                "mask_pct": 79.3103448275862,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 2,
                "train_days": 488,
                "test_days": 30,
                "train_end_idx": 488,
                "test_end_idx": 518,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-08-01T00:00:00",
                "test_start": "2025-08-04T00:00:00",
                "test_end": "2025-09-12T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -48.55255834838209,
                    "rmse": 0.22645159095298711,
                    "mape": 1.7974477406611336,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.012565607662789654,
                    "rmse": 0.034690590234147535,
                    "mape": 1.714950809714335,
                    "confidence": 0.6147938008503592
                  },
                  "catboost": {
                    "raw_r2": -0.025686922806998764,
                    "rmse": 0.03490331323849904,
                    "mape": 1.7310635443093274,
                    "confidence": 0.604158017169826
                  }
                },
                "dirhit": 73.91304347826086,
                "rmse": 0.0465771707305783,
                "mape": 22427007.975759085,
                "nrmse": 1.3178030669119987,
                "mask_count": 23,
                "mask_pct": 79.3103448275862,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 3,
                "train_days": 518,
                "test_days": 30,
                "train_end_idx": 518,
                "test_end_idx": 548,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-12T00:00:00",
                "test_start": "2025-09-15T00:00:00",
                "test_end": "2025-10-24T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -51.206121492281106,
                    "rmse": 0.2312906972836735,
                    "mape": 1.8077199850140933,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.008422868964908034,
                    "rmse": 0.03486826999932382,
                    "mape": 1.722395922593335,
                    "confidence": 0.6181574302782094
                  },
                  "catboost": {
                    "raw_r2": 0.005097157641538952,
                    "rmse": 0.03451485342999941,
                    "mape": 1.6660663398883726,
                    "confidence": 0.6291412164340716
                  }
                },
                "dirhit": 73.68421052631578,
                "rmse": 0.03077342289386309,
                "mape": 5962205.48414069,
                "nrmse": 1.0803917507765215,
                "mask_count": 19,
                "mask_pct": 65.51724137931035,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 4,
                "train_days": 548,
                "test_days": 30,
                "train_end_idx": 548,
                "test_end_idx": 578,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-24T00:00:00",
                "test_start": "2025-10-27T00:00:00",
                "test_end": "2025-12-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -50.02488832576634,
                    "rmse": 0.22985387388299974,
                    "mape": 1.8089234371173608,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.011521409901279625,
                    "rmse": 0.034455431072077256,
                    "mape": 1.7322350444211507,
                    "confidence": 0.6156414423994627
                  },
                  "catboost": {
                    "raw_r2": -0.01425459541247561,
                    "rmse": 0.0345082202276898,
                    "mape": 1.746793419353855,
                    "confidence": 0.6134230415678958
                  }
                },
                "dirhit": 75.0,
                "rmse": 0.03326257971918307,
                "mape": 363594.4077374114,
                "nrmse": 0.9237608966248813,
                "mask_count": 12,
                "mask_pct": 41.37931034482759,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              }
            ],
            "avg_dirhit": 70.86670480549199,
            "avg_nrmse": 1.1774104935239593,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -50.078042027714474,
                "rmse": 0.22868390685624274,
                "mape": 1.8053980444564726,
                "confidence": 0.3
              },
              "lightgbm": {
                "raw_r2": -0.009801664053474435,
                "rmse": 0.03437699429114467,
                "mape": 1.7219877854634744,
                "confidence": 0.6170380141175154
              },
              "catboost": {
                "raw_r2": -0.005442915113185,
                "rmse": 0.03426945339211648,
                "mape": 1.70397802161811,
                "confidence": 0.6205850160043063
              }
            }
          }
        }
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_AYES_h1_c3",
  "symbols": [
    "AYES"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.43846878051180416,
    "ml_loss_threshold": 0.0028504341474534563,
    "ml_dir_penalty": 4.6956617743627245,
    "n_seeds": 4,
    "meta_stacking_alpha": 0.03594546142257719,
    "ml_adaptive_k_1d": 2.4759951875045543,
    "ml_pattern_weight_scale_1d": 1.0826259047352824,
    "external_min_days": 28,
    "external_smooth_alpha": 0.16802809371866106,
    "smart_consensus_weight": 0.7943026678112673,
    "smart_performance_weight": 0.3151936245263903,
    "smart_sigma": 0.013985865009294069,
    "smart_weight_xgb": 0.8629893675635929,
    "smart_weight_lgbm": 0.7223813653471276,
    "smart_weight_cat": 0.9288350672325186
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 300,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.011435247678837622,
    "xgb_subsample": 0.872744722594933,
    "xgb_colsample_bytree": 0.8247054417832312,
    "xgb_reg_alpha": 0.0003844952490305713,
    "xgb_reg_lambda": 0.005838893818815824,
    "xgb_min_child_weight": 12,
    "xgb_gamma": 0.00010367282809454287,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 443,
    "lgb_n_estimators": 347,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.04337445249943936,
    "lgb_num_leaves": 28,
    "lgb_subsample": 0.8753854828855399,
    "lgb_colsample_bytree": 0.8408181765886282,
    "lgb_reg_alpha": 0.00041381016494281063,
    "lgb_reg_lambda": 0.0272919274288419,
    "lgb_min_data_in_leaf": 49,
    "lgb_feature_fraction_bynode": 0.7097438892791106,
    "lgb_bagging_freq": 8,
    "lgb_min_gain_to_split": 0.7649617515502256,
    "cat_iterations": 537,
    "cat_depth": 3,
    "cat_learning_rate": 0.049890233491672424,
    "cat_l2_leaf_reg": 1.9778926695901327,
    "cat_subsample": 0.5529644569402007,
    "cat_rsm": 0.9156106763896842,
    "cat_border_count": 235,
    "cat_random_strength": 0.10086561952456624,
    "cat_leaf_estimation_iterations": 18,
    "cat_bootstrap_type": "MVS"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "1",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "AYES_1d": {
      "symbol": "AYES",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 456,
          "test_days": 30,
          "train_end_idx": 456,
          "test_end_idx": 486,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-17T00:00:00",
          "test_start": "2025-06-18T00:00:00",
          "test_end": "2025-07-30T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -75.84777420904739,
              "rmse": 0.2750570289835994,
              "mape": 1.8378224680783188,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.008723628230949965,
              "rmse": 0.033615858190351317,
              "mape": 1.7181223112386104,
              "confidence": 0.6179131756086218
            },
            "catboost": {
              "raw_r2": 0.007765377652878473,
              "rmse": 0.03332292543560677,
              "mape": 1.729213526419631,
              "confidence": 0.631308576833584
            }
          },
          "dirhit": 60.86956521739131,
          "rmse": 0.04756313295483698,
          "mape": 226.5938090736902,
          "nrmse": 1.0769002281492879,
          "mask_count": 23,
          "mask_pct": 79.3103448275862,
          "low_support": false,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        },
        {
          "split_index": 2,
          "train_days": 486,
          "test_days": 30,
          "train_end_idx": 486,
          "test_end_idx": 516,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-30T00:00:00",
          "test_start": "2025-07-31T00:00:00",
          "test_end": "2025-09-10T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -71.68301688794999,
              "rmse": 0.2744863509015987,
              "mape": 1.8279797860258395,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.012565607662789654,
              "rmse": 0.034690590234147535,
              "mape": 1.714950809714335,
              "confidence": 0.6147938008503592
            },
            "catboost": {
              "raw_r2": -0.005593744412387617,
              "rmse": 0.03448694094678414,
              "mape": 1.7240546513431931,
              "confidence": 0.6204553789133378
            }
          },
          "dirhit": 76.0,
          "rmse": 0.055229071233281676,
          "mape": 34056812.0373278,
          "nrmse": 1.6435564158922689,
          "mask_count": 25,
          "mask_pct": 86.20689655172413,
          "low_support": false,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        },
        {
          "split_index": 3,
          "train_days": 516,
          "test_days": 30,
          "train_end_idx": 516,
          "test_end_idx": 546,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-10T00:00:00",
          "test_start": "2025-09-11T00:00:00",
          "test_end": "2025-10-22T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -72.83335100735367,
              "rmse": 0.2757396885880551,
              "mape": 1.8349454624422978,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.00799510085016005,
              "rmse": 0.03463442358661742,
              "mape": 1.7204598608440815,
              "confidence": 0.6185048454964426
            },
            "catboost": {
              "raw_r2": -0.011263890154436037,
              "rmse": 0.03468666935137591,
              "mape": 1.7276552442018642,
              "confidence": 0.6158505075464329
            }
          },
          "dirhit": 80.0,
          "rmse": 0.0239494926744919,
          "mape": 4003280.027340252,
          "nrmse": 0.8403229694480485,
          "mask_count": 20,
          "mask_pct": 68.96551724137932,
          "low_support": false,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        },
        {
          "split_index": 4,
          "train_days": 546,
          "test_days": 30,
          "train_end_idx": 546,
          "test_end_idx": 576,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-22T00:00:00",
          "test_start": "2025-10-23T00:00:00",
          "test_end": "2025-12-03T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -71.62938243971779,
              "rmse": 0.27462588202413474,
              "mape": 1.8358016527463994,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.011521409901279625,
              "rmse": 0.034455431072077256,
              "mape": 1.7322350444211507,
              "confidence": 0.6156414423994627
            },
            "catboost": {
              "raw_r2": -0.01710684951290964,
              "rmse": 0.03453344292903245,
              "mape": 1.7364443816065631,
              "confidence": 0.6111091526493309
            }
          },
          "dirhit": 66.66666666666666,
          "rmse": 0.035880917620851355,
          "mape": 2937400.673672887,
          "nrmse": 1.0073762903527,
          "mask_count": 9,
          "mask_pct": 31.03448275862069,
          "low_support": false,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        }
      ],
      "avg_dirhit": 70.8840579710145,
      "avg_nrmse": 1.1420389759605762,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -72.99838113601722,
          "rmse": 0.274977237624347,
          "mape": 1.834137342323214,
          "confidence": 0.3
        },
        "lightgbm": {
          "raw_r2": -0.010201436661294824,
          "rmse": 0.034349075770798376,
          "mape": 1.7214420065545444,
          "confidence": 0.6167133160887216
        },
        "catboost": {
          "raw_r2": -0.0065497766067137055,
          "rmse": 0.03425749466569982,
          "mape": 1.729341950892813,
          "confidence": 0.6196809039856714
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 5,
    "min_mask_pct": 2.5,
    "best_trial_number": 93,
    "best_trial_seed": 135,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "split_generation": {
      "type": "generate_walkforward_splits",
      "n_splits": 4
    },
    "symbol_specs": {
      "AYES_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 456,
            "test_end_idx": 486,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-17T00:00:00",
            "test_start": "2025-06-18T00:00:00",
            "test_end": "2025-07-30T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 486,
            "test_end_idx": 516,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-30T00:00:00",
            "test_start": "2025-07-31T00:00:00",
            "test_end": "2025-09-10T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 516,
            "test_end_idx": 546,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-10T00:00:00",
            "test_start": "2025-09-11T00:00:00",
            "test_end": "2025-10-22T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 546,
            "test_end_idx": 576,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-22T00:00:00",
            "test_start": "2025-10-23T00:00:00",
            "test_end": "2025-12-03T00:00:00"
          }
        ]
      }
    }
  }
}