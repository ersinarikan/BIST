{
  "best_value": 56.90765941657616,
  "best_dirhit": 90.0,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": false,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "model_choice": "all",
    "n_seeds": 2,
    "ml_adaptive_k_1d": 2.06685363305683,
    "ml_pattern_weight_scale_1d": 1.4284430657972031,
    "enable_talib_patterns_short": false,
    "external_min_days": 45,
    "external_smooth_alpha": 0.07134216032191872,
    "regime_scale_low": 0.9301498014894173,
    "regime_scale_high": 1.1181110876202105,
    "smart_consensus_weight": 0.7933226384017755,
    "smart_performance_weight": 0.5592993612013166,
    "smart_sigma": 0.006329846710109993,
    "smart_weight_xgb": 1.279654830072305,
    "smart_weight_lgbm": 1.3226145174878263,
    "smart_weight_cat": 1.4512992603347905,
    "fingpt_confidence_threshold": 0.3120178842371159,
    "xgb_n_estimators": 424,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.13017925391737695,
    "xgb_subsample": 0.8021574088925348,
    "xgb_colsample_bytree": 0.8276116806118402,
    "xgb_reg_alpha": 0.0009382689939953927,
    "xgb_reg_lambda": 12.0610027782925,
    "xgb_min_child_weight": 9,
    "xgb_gamma": 0.07975986268832509,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 400,
    "lgb_n_estimators": 589,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.028056415036893077,
    "lgb_num_leaves": 28,
    "lgb_subsample": 0.7168982656558797,
    "lgb_colsample_bytree": 0.8465851077312145,
    "lgb_reg_alpha": 2.8146658075009448e-05,
    "lgb_reg_lambda": 0.00016430991496740535,
    "lgb_min_data_in_leaf": 92,
    "lgb_feature_fraction_bynode": 0.5283937204214808,
    "lgb_bagging_freq": 5,
    "lgb_min_gain_to_split": 0.9161461566952389,
    "cat_iterations": 213,
    "cat_depth": 3,
    "cat_learning_rate": 0.016661758137108604,
    "cat_l2_leaf_reg": 3.22668092531327,
    "cat_subsample": 0.9263394594733583,
    "cat_rsm": 0.7807972809694644,
    "cat_border_count": 43,
    "cat_random_strength": 1.2468053470159206,
    "cat_leaf_estimation_iterations": 13,
    "cat_bootstrap_type": "MVS"
  },
  "best_trial": {
    "number": 1323,
    "value": 56.90765941657616,
    "state": "1"
  },
  "best_trial_number": 1323,
  "best_trial_seed": 1365,
  "n_trials": 1366,
  "pruned_count": 0,
  "avg_trial_time": 267.0700429801324,
  "top_k_trials": [
    {
      "number": 1323,
      "value": 56.90765941657616,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "n_seeds": 2,
        "ml_adaptive_k_1d": 2.06685363305683,
        "ml_pattern_weight_scale_1d": 1.4284430657972031,
        "enable_talib_patterns_short": false,
        "external_min_days": 45,
        "external_smooth_alpha": 0.07134216032191872,
        "regime_scale_low": 0.9301498014894173,
        "regime_scale_high": 1.1181110876202105,
        "smart_consensus_weight": 0.7933226384017755,
        "smart_performance_weight": 0.5592993612013166,
        "smart_sigma": 0.006329846710109993,
        "smart_weight_xgb": 1.279654830072305,
        "smart_weight_lgbm": 1.3226145174878263,
        "smart_weight_cat": 1.4512992603347905,
        "fingpt_confidence_threshold": 0.3120178842371159,
        "xgb_n_estimators": 424,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.13017925391737695,
        "xgb_subsample": 0.8021574088925348,
        "xgb_colsample_bytree": 0.8276116806118402,
        "xgb_reg_alpha": 0.0009382689939953927,
        "xgb_reg_lambda": 12.0610027782925,
        "xgb_min_child_weight": 9,
        "xgb_gamma": 0.07975986268832509,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 400,
        "lgb_n_estimators": 589,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.028056415036893077,
        "lgb_num_leaves": 28,
        "lgb_subsample": 0.7168982656558797,
        "lgb_colsample_bytree": 0.8465851077312145,
        "lgb_reg_alpha": 2.8146658075009448e-05,
        "lgb_reg_lambda": 0.00016430991496740535,
        "lgb_min_data_in_leaf": 92,
        "lgb_feature_fraction_bynode": 0.5283937204214808,
        "lgb_bagging_freq": 5,
        "lgb_min_gain_to_split": 0.9161461566952389,
        "cat_iterations": 213,
        "cat_depth": 3,
        "cat_learning_rate": 0.016661758137108604,
        "cat_l2_leaf_reg": 3.22668092531327,
        "cat_subsample": 0.9263394594733583,
        "cat_rsm": 0.7807972809694644,
        "cat_border_count": 43,
        "cat_random_strength": 1.2468053470159206,
        "cat_leaf_estimation_iterations": 13,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 90.0,
        "avg_nrmse": 1.0153900972373053,
        "model_choice": "all",
        "symbol_metrics": {
          "CLEBI_1d": {
            "symbol": "CLEBI",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 453,
                "test_days": 30,
                "train_end_idx": 453,
                "test_end_idx": 483,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-13T00:00:00",
                "test_start": "2025-06-16T00:00:00",
                "test_end": "2025-07-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.04428435931473892,
                    "rmse": 0.034171955115045935,
                    "mape": 1.6657959488471148,
                    "confidence": 0.5891652462627788
                  },
                  "lightgbm": {
                    "raw_r2": -0.04544202424363486,
                    "rmse": 0.03418754964806352,
                    "mape": 1.6572896053217994,
                    "confidence": 0.5882363778364558
                  },
                  "catboost": {
                    "raw_r2": -0.04480911393534881,
                    "rmse": 0.034171172539279024,
                    "mape": 1.6771442966065384,
                    "confidence": 0.5887441277738199
                  }
                },
                "dirhit": 90.0,
                "rmse": 0.03360479653017136,
                "mape": 1873228.739378181,
                "nrmse": 0.9585659658384584,
                "mask_count": 10,
                "mask_pct": 34.48275862068966,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.04428435931473892,
                    "lightgbm": -0.04544202424363486,
                    "catboost": -0.04480911393534881
                  },
                  "ensemble_weights": {
                    "xgboost": 0.315722909702127,
                    "lightgbm": 0.32624404782333377,
                    "catboost": 0.3580330424745392
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 2,
                "train_days": 483,
                "test_days": 30,
                "train_end_idx": 483,
                "test_end_idx": 513,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-28T00:00:00",
                "test_start": "2025-07-29T00:00:00",
                "test_end": "2025-09-08T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.026171242385391997,
                    "rmse": 0.03442974960679903,
                    "mape": 1.6515722705493148,
                    "confidence": 0.6037661564596133
                  },
                  "lightgbm": {
                    "raw_r2": -0.022496329000787057,
                    "rmse": 0.03441171284047924,
                    "mape": 1.6487954594124177,
                    "confidence": 0.6067409799054059
                  },
                  "catboost": {
                    "raw_r2": -0.0180360415286908,
                    "rmse": 0.03434295850807824,
                    "mape": 1.6753369376412106,
                    "confidence": 0.6103556394813782
                  }
                },
                "dirhit": null,
                "rmse": 0.01714810944709596,
                "mape": 112.25962979498516,
                "nrmse": 1.1064224427036595,
                "mask_count": 4,
                "mask_pct": 13.793103448275861,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.026171242385391997,
                    "lightgbm": -0.022496329000787057,
                    "catboost": -0.0180360415286908
                  },
                  "ensemble_weights": {
                    "xgboost": 0.31541771352975884,
                    "lightgbm": 0.3262543320521105,
                    "catboost": 0.35832795441813065
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 3,
                "train_days": 513,
                "test_days": 30,
                "train_end_idx": 513,
                "test_end_idx": 543,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-08T00:00:00",
                "test_start": "2025-09-09T00:00:00",
                "test_end": "2025-10-20T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.01141127200022877,
                    "rmse": 0.03288084152115639,
                    "mape": 1.639039037130967,
                    "confidence": 0.615730855949481
                  },
                  "lightgbm": {
                    "raw_r2": -0.01400502535318049,
                    "rmse": 0.03290893720123043,
                    "mape": 1.6246514650716224,
                    "confidence": 0.6136255644168951
                  },
                  "catboost": {
                    "raw_r2": -0.012729369187752063,
                    "rmse": 0.03288666811547814,
                    "mape": 1.6235940318518824,
                    "confidence": 0.6146608775466829
                  }
                },
                "dirhit": null,
                "rmse": 0.02394151075420302,
                "mape": 111.52510408442404,
                "nrmse": 0.9893155249087869,
                "mask_count": 7,
                "mask_pct": 24.137931034482758,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.01141127200022877,
                    "lightgbm": -0.01400502535318049,
                    "catboost": -0.012729369187752063
                  },
                  "ensemble_weights": {
                    "xgboost": 0.3157720391816659,
                    "lightgbm": 0.32619794920081757,
                    "catboost": 0.3580300116175165
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 4,
                "train_days": 543,
                "test_days": 30,
                "train_end_idx": 543,
                "test_end_idx": 573,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-20T00:00:00",
                "test_start": "2025-10-21T00:00:00",
                "test_end": "2025-12-01T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.019639054588966937,
                    "rmse": 0.03237013915061563,
                    "mape": 1.6434242150145548,
                    "confidence": 0.609056077443908
                  },
                  "lightgbm": {
                    "raw_r2": -0.020900447308342434,
                    "rmse": 0.03238786122274746,
                    "mape": 1.6322872284051562,
                    "confidence": 0.6080338239869212
                  },
                  "catboost": {
                    "raw_r2": -0.013661795044830302,
                    "rmse": 0.03224275671411571,
                    "mape": 1.6047382815734108,
                    "confidence": 0.6139041057514716
                  }
                },
                "dirhit": null,
                "rmse": 0.022405397553163377,
                "mape": 1908331.6778552614,
                "nrmse": 1.0072564554983159,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.019639054588966937,
                    "lightgbm": -0.020900447308342434,
                    "catboost": -0.013661795044830302
                  },
                  "ensemble_weights": {
                    "xgboost": 0.7078437890948565,
                    "lightgbm": 0.13903762953286733,
                    "catboost": 0.15311858137227616
                  },
                  "source": "model"
                }
              }
            ],
            "avg_dirhit": 90.0,
            "avg_nrmse": 1.0153900972373053,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.025376482072331657,
                "rmse": 0.03346317134840424,
                "mape": 1.649957867885488,
                "confidence": 0.6044295840289453
              },
              "lightgbm": {
                "raw_r2": -0.02571095647648621,
                "rmse": 0.03347401522813016,
                "mape": 1.640755939552749,
                "confidence": 0.6041591865364195
              },
              "catboost": {
                "raw_r2": -0.022309079924155494,
                "rmse": 0.03341088896923777,
                "mape": 1.6452033869182607,
                "confidence": 0.6069161876383381
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 1345,
      "value": 52.13305428380888,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.5313173221757138,
        "ml_loss_threshold": 0.005150524235649088,
        "ml_dir_penalty": 1.4059195944047314,
        "n_seeds": 2,
        "ml_adaptive_k_1d": 2.050889881370271,
        "ml_pattern_weight_scale_1d": 1.9400973855045978,
        "enable_talib_patterns_short": false,
        "external_min_days": 43,
        "external_smooth_alpha": 0.10725933197771906,
        "regime_scale_low": 0.9301058421131534,
        "regime_scale_high": 1.1277095427003423,
        "fingpt_confidence_threshold": 0.3311217706437215,
        "xgb_n_estimators": 466,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.13769451523104828,
        "xgb_subsample": 0.7996896311595876,
        "xgb_colsample_bytree": 0.8111127441525916,
        "xgb_reg_alpha": 0.0014141356381162191,
        "xgb_reg_lambda": 12.007176655036139,
        "xgb_min_child_weight": 9,
        "xgb_gamma": 0.06082965478594242,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 363,
        "lgb_n_estimators": 574,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.03043810927302885,
        "lgb_num_leaves": 29,
        "lgb_subsample": 0.69770785561508,
        "lgb_colsample_bytree": 0.8376339730069681,
        "lgb_reg_alpha": 2.0727015435346093e-05,
        "lgb_reg_lambda": 0.0002723369206925601,
        "lgb_min_data_in_leaf": 92,
        "lgb_feature_fraction_bynode": 0.5442866221387562,
        "lgb_bagging_freq": 5,
        "lgb_min_gain_to_split": 0.9657400150668981,
        "cat_iterations": 223,
        "cat_depth": 3,
        "cat_learning_rate": 0.016275093312388057,
        "cat_l2_leaf_reg": 2.791569969044689,
        "cat_subsample": 0.7072037417890747,
        "cat_rsm": 0.7454454060880686,
        "cat_border_count": 44,
        "cat_random_strength": 0.3758448919360679,
        "cat_leaf_estimation_iterations": 13,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 83.33333333333334,
        "avg_nrmse": 1.0333798415874094,
        "model_choice": "all",
        "symbol_metrics": {
          "CLEBI_1d": {
            "symbol": "CLEBI",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 453,
                "test_days": 30,
                "train_end_idx": 453,
                "test_end_idx": 483,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-13T00:00:00",
                "test_start": "2025-06-16T00:00:00",
                "test_end": "2025-07-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.04208666486030044,
                    "rmse": 0.034132281431065024,
                    "mape": 1.6303713612859876,
                    "confidence": 0.5909302158143375
                  },
                  "lightgbm": {
                    "raw_r2": -0.04544202424363486,
                    "rmse": 0.03418754964806352,
                    "mape": 1.6572896053217994,
                    "confidence": 0.5882363778364558
                  },
                  "catboost": {
                    "raw_r2": -0.04372995827315503,
                    "rmse": 0.034161669671008026,
                    "mape": 1.6662985052799917,
                    "confidence": 0.5896102885071834
                  }
                },
                "dirhit": 83.33333333333334,
                "rmse": 0.03324805862791082,
                "mape": 127979.95113103805,
                "nrmse": 0.9483901324116873,
                "mask_count": 12,
                "mask_pct": 41.37931034482759,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 2,
                "train_days": 483,
                "test_days": 30,
                "train_end_idx": 483,
                "test_end_idx": 513,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-28T00:00:00",
                "test_start": "2025-07-29T00:00:00",
                "test_end": "2025-09-08T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.025273786325579566,
                    "rmse": 0.034418554622445204,
                    "mape": 1.622908110060078,
                    "confidence": 0.6044923321114413
                  },
                  "lightgbm": {
                    "raw_r2": -0.022496329000787057,
                    "rmse": 0.03441171284047924,
                    "mape": 1.6487954594124177,
                    "confidence": 0.6067409799054059
                  },
                  "catboost": {
                    "raw_r2": -0.023368798727954793,
                    "rmse": 0.0344213259490949,
                    "mape": 1.6542959576220861,
                    "confidence": 0.6060344234496642
                  }
                },
                "dirhit": null,
                "rmse": 0.01901567836212064,
                "mape": 136.28485517177822,
                "nrmse": 1.2269208665826232,
                "mask_count": 7,
                "mask_pct": 24.137931034482758,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 3,
                "train_days": 513,
                "test_days": 30,
                "train_end_idx": 513,
                "test_end_idx": 543,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-08T00:00:00",
                "test_start": "2025-09-09T00:00:00",
                "test_end": "2025-10-20T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.016293409837176975,
                    "rmse": 0.0329352311102231,
                    "mape": 1.6080209862270163,
                    "confidence": 0.6117689214547986
                  },
                  "lightgbm": {
                    "raw_r2": -0.01400502535318049,
                    "rmse": 0.03290893720123043,
                    "mape": 1.6246514650716224,
                    "confidence": 0.6136255644168951
                  },
                  "catboost": {
                    "raw_r2": -0.013056104964522327,
                    "rmse": 0.03287806192402421,
                    "mape": 1.628730745174595,
                    "confidence": 0.6143956803493564
                  }
                },
                "dirhit": null,
                "rmse": 0.023304020614174716,
                "mape": 113.47397846828441,
                "nrmse": 0.9629730397172224,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 4,
                "train_days": 543,
                "test_days": 30,
                "train_end_idx": 543,
                "test_end_idx": 573,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-20T00:00:00",
                "test_start": "2025-10-21T00:00:00",
                "test_end": "2025-12-01T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.022824621052153143,
                    "rmse": 0.03241591504516683,
                    "mape": 1.6127212703847202,
                    "confidence": 0.6064750968553951
                  },
                  "lightgbm": {
                    "raw_r2": -0.020900447308342434,
                    "rmse": 0.03238786122274746,
                    "mape": 1.6322872284051562,
                    "confidence": 0.6080338239869212
                  },
                  "catboost": {
                    "raw_r2": -0.00763884701731062,
                    "rmse": 0.03217659574127436,
                    "mape": 1.6646149133199981,
                    "confidence": 0.6187941911993731
                  }
                },
                "dirhit": null,
                "rmse": 0.022137999764571203,
                "mape": 800927.3075766225,
                "nrmse": 0.9952353276381047,
                "mask_count": 2,
                "mask_pct": 6.896551724137931,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              }
            ],
            "avg_dirhit": 83.33333333333334,
            "avg_nrmse": 1.0333798415874094,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.026619620518802532,
                "rmse": 0.03347549555222504,
                "mape": 1.6185054319894505,
                "confidence": 0.6034166415589931
              },
              "lightgbm": {
                "raw_r2": -0.02571095647648621,
                "rmse": 0.03347401522813016,
                "mape": 1.640755939552749,
                "confidence": 0.6041591865364195
              },
              "catboost": {
                "raw_r2": -0.02194842724573569,
                "rmse": 0.03340941332135037,
                "mape": 1.6534850303491675,
                "confidence": 0.6072086458763943
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 1191,
      "value": 51.183389929630714,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "n_seeds": 2,
        "ml_adaptive_k_1d": 2.2336601293603917,
        "ml_pattern_weight_scale_1d": 0.5677144410859774,
        "enable_talib_patterns_short": false,
        "external_min_days": 51,
        "external_smooth_alpha": 0.08166604524762669,
        "regime_scale_low": 0.8962969895147999,
        "regime_scale_high": 1.1076222342382815,
        "yolo_min_conf": 0.4278229934229297,
        "smart_consensus_weight": 0.7057402103142735,
        "smart_performance_weight": 0.5771836624355642,
        "smart_sigma": 0.005900039721002279,
        "smart_weight_xgb": 1.3723589802903264,
        "smart_weight_lgbm": 1.0689841536639217,
        "smart_weight_cat": 1.4621960736032364,
        "fingpt_confidence_threshold": 0.3345057026742404,
        "xgb_n_estimators": 289,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.03835578984201461,
        "xgb_subsample": 0.6704291250871277,
        "xgb_colsample_bytree": 0.8474963443313333,
        "xgb_reg_alpha": 0.0009896133339942588,
        "xgb_reg_lambda": 5.873127346396572,
        "xgb_min_child_weight": 9,
        "xgb_gamma": 0.00046779379685608745,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 478,
        "lgb_n_estimators": 514,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.019828956155111457,
        "lgb_num_leaves": 33,
        "lgb_subsample": 0.5151022546749675,
        "lgb_colsample_bytree": 0.8557750595269228,
        "lgb_reg_alpha": 5.6400934864612795e-05,
        "lgb_reg_lambda": 0.0006639691961765365,
        "lgb_min_data_in_leaf": 59,
        "lgb_feature_fraction_bynode": 0.5211224087692227,
        "lgb_bagging_freq": 3,
        "lgb_min_gain_to_split": 0.7288323689666012,
        "cat_iterations": 337,
        "cat_depth": 3,
        "cat_learning_rate": 0.01968628778836694,
        "cat_l2_leaf_reg": 1.9174133088575966,
        "cat_subsample": 0.8163760614549382,
        "cat_rsm": 0.8561135254649525,
        "cat_border_count": 21,
        "cat_random_strength": 1.456595036104889,
        "cat_leaf_estimation_iterations": 10,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 81.81818181818183,
        "avg_nrmse": 1.01488955718276,
        "model_choice": "all",
        "symbol_metrics": {
          "CLEBI_1d": {
            "symbol": "CLEBI",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 453,
                "test_days": 30,
                "train_end_idx": 453,
                "test_end_idx": 483,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-13T00:00:00",
                "test_start": "2025-06-16T00:00:00",
                "test_end": "2025-07-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.03873154632847198,
                    "rmse": 0.034214807869705766,
                    "mape": 1.688779496490783,
                    "confidence": 0.5936286016711049
                  },
                  "lightgbm": {
                    "raw_r2": -0.04544202424363486,
                    "rmse": 0.03418754964806352,
                    "mape": 1.6572896053217994,
                    "confidence": 0.5882363778364558
                  },
                  "catboost": {
                    "raw_r2": -0.03813589441043493,
                    "rmse": 0.03407965972582463,
                    "mape": 1.663890763472467,
                    "confidence": 0.5941081280468774
                  }
                },
                "dirhit": 81.81818181818183,
                "rmse": 0.03411059302893309,
                "mape": 589616.968865268,
                "nrmse": 0.9729936475807939,
                "mask_count": 11,
                "mask_pct": 37.93103448275862,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.03873154632847198,
                    "lightgbm": -0.04544202424363486,
                    "catboost": -0.03813589441043493
                  },
                  "ensemble_weights": {
                    "xgboost": 0.14822605638978809,
                    "lightgbm": 0.11507233647479742,
                    "catboost": 0.7367016071354144
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 2,
                "train_days": 483,
                "test_days": 30,
                "train_end_idx": 483,
                "test_end_idx": 513,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-28T00:00:00",
                "test_start": "2025-07-29T00:00:00",
                "test_end": "2025-09-08T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.010280036777736923,
                    "rmse": 0.034193011569780815,
                    "mape": 1.612361115207946,
                    "confidence": 0.6166493085663546
                  },
                  "lightgbm": {
                    "raw_r2": -0.022496329000787057,
                    "rmse": 0.03441171284047924,
                    "mape": 1.6487954594124177,
                    "confidence": 0.6067409799054059
                  },
                  "catboost": {
                    "raw_r2": -0.018424395744209066,
                    "rmse": 0.034313827046856885,
                    "mape": 1.6193636333612407,
                    "confidence": 0.6100407562125034
                  }
                },
                "dirhit": null,
                "rmse": 0.016842439339939588,
                "mape": 120.95843598830413,
                "nrmse": 1.0867001364246593,
                "mask_count": 8,
                "mask_pct": 27.586206896551722,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.010280036777736923,
                    "lightgbm": -0.022496329000787057,
                    "catboost": -0.018424395744209066
                  },
                  "ensemble_weights": {
                    "xgboost": 0.35207408444557525,
                    "lightgbm": 0.2734915542780092,
                    "catboost": 0.37443436127641566
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 3,
                "train_days": 513,
                "test_days": 30,
                "train_end_idx": 513,
                "test_end_idx": 543,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-08T00:00:00",
                "test_start": "2025-09-09T00:00:00",
                "test_end": "2025-10-20T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.005102313513455359,
                    "rmse": 0.0326194012245956,
                    "mape": 1.617208130964009,
                    "confidence": 0.62914540489915
                  },
                  "lightgbm": {
                    "raw_r2": -0.01400502535318049,
                    "rmse": 0.03290893720123043,
                    "mape": 1.6246514650716224,
                    "confidence": 0.6136255644168951
                  },
                  "catboost": {
                    "raw_r2": -0.005174854693304698,
                    "rmse": 0.0327632001159621,
                    "mape": 1.6515873236357141,
                    "confidence": 0.6207956651182247
                  }
                },
                "dirhit": null,
                "rmse": 0.02384536327774131,
                "mape": 119.56165613840419,
                "nrmse": 0.9853425011459622,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": 0.005102313513455359,
                    "lightgbm": -0.01400502535318049,
                    "catboost": -0.005174854693304698
                  },
                  "ensemble_weights": {
                    "xgboost": 0.35228677673490344,
                    "lightgbm": 0.2732329644090037,
                    "catboost": 0.3744802588560928
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 4,
                "train_days": 543,
                "test_days": 30,
                "train_end_idx": 543,
                "test_end_idx": 573,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-20T00:00:00",
                "test_start": "2025-10-21T00:00:00",
                "test_end": "2025-12-01T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.014318847148526234,
                    "rmse": 0.03228581441187018,
                    "mape": 1.621122582193866,
                    "confidence": 0.6133709035726749
                  },
                  "lightgbm": {
                    "raw_r2": -0.020900447308342434,
                    "rmse": 0.03238786122274746,
                    "mape": 1.6322872284051562,
                    "confidence": 0.6080338239869212
                  },
                  "catboost": {
                    "raw_r2": -0.016085698123028108,
                    "rmse": 0.03229793932351583,
                    "mape": 1.6334609683140133,
                    "confidence": 0.6119374110592453
                  }
                },
                "dirhit": null,
                "rmse": 0.022536019753519473,
                "mape": 677968.6140727673,
                "nrmse": 1.014521943579625,
                "mask_count": 3,
                "mask_pct": 10.344827586206897,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.014318847148526234,
                    "lightgbm": -0.020900447308342434,
                    "catboost": -0.016085698123028108
                  },
                  "ensemble_weights": {
                    "xgboost": 0.14828458737191944,
                    "lightgbm": 0.11512519413227748,
                    "catboost": 0.7365902184958031
                  },
                  "source": "model"
                }
              }
            ],
            "avg_dirhit": 81.81818181818183,
            "avg_nrmse": 1.01488955718276,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.014557029185319944,
                "rmse": 0.03332825876898809,
                "mape": 1.6348678312141511,
                "confidence": 0.6131985546773211
              },
              "lightgbm": {
                "raw_r2": -0.02571095647648621,
                "rmse": 0.03347401522813016,
                "mape": 1.640755939552749,
                "confidence": 0.6041591865364195
              },
              "catboost": {
                "raw_r2": -0.0194552107427442,
                "rmse": 0.033363656553039855,
                "mape": 1.6420756721958587,
                "confidence": 0.6092204901092126
              }
            }
          }
        }
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_CLEBI_h1_c2",
  "symbols": [
    "CLEBI"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": false,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "n_seeds": 2,
    "ml_adaptive_k_1d": 2.06685363305683,
    "ml_pattern_weight_scale_1d": 1.4284430657972031,
    "external_min_days": 45,
    "external_smooth_alpha": 0.07134216032191872,
    "regime_scale_low": 0.9301498014894173,
    "regime_scale_high": 1.1181110876202105,
    "smart_consensus_weight": 0.7933226384017755,
    "smart_performance_weight": 0.5592993612013166,
    "smart_sigma": 0.006329846710109993,
    "smart_weight_xgb": 1.279654830072305,
    "smart_weight_lgbm": 1.3226145174878263,
    "smart_weight_cat": 1.4512992603347905,
    "fingpt_confidence_threshold": 0.3120178842371159
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 424,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.13017925391737695,
    "xgb_subsample": 0.8021574088925348,
    "xgb_colsample_bytree": 0.8276116806118402,
    "xgb_reg_alpha": 0.0009382689939953927,
    "xgb_reg_lambda": 12.0610027782925,
    "xgb_min_child_weight": 9,
    "xgb_gamma": 0.07975986268832509,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 400,
    "lgb_n_estimators": 589,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.028056415036893077,
    "lgb_num_leaves": 28,
    "lgb_subsample": 0.7168982656558797,
    "lgb_colsample_bytree": 0.8465851077312145,
    "lgb_reg_alpha": 2.8146658075009448e-05,
    "lgb_reg_lambda": 0.00016430991496740535,
    "lgb_min_data_in_leaf": 92,
    "lgb_feature_fraction_bynode": 0.5283937204214808,
    "lgb_bagging_freq": 5,
    "lgb_min_gain_to_split": 0.9161461566952389,
    "cat_iterations": 213,
    "cat_depth": 3,
    "cat_learning_rate": 0.016661758137108604,
    "cat_l2_leaf_reg": 3.22668092531327,
    "cat_subsample": 0.9263394594733583,
    "cat_rsm": 0.7807972809694644,
    "cat_border_count": 43,
    "cat_random_strength": 1.2468053470159206,
    "cat_leaf_estimation_iterations": 13,
    "cat_bootstrap_type": "MVS"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "1",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "CLEBI_1d": {
      "symbol": "CLEBI",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 453,
          "test_days": 30,
          "train_end_idx": 453,
          "test_end_idx": 483,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-13T00:00:00",
          "test_start": "2025-06-16T00:00:00",
          "test_end": "2025-07-28T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.04428435931473892,
              "rmse": 0.034171955115045935,
              "mape": 1.6657959488471148,
              "confidence": 0.5891652462627788
            },
            "lightgbm": {
              "raw_r2": -0.04544202424363486,
              "rmse": 0.03418754964806352,
              "mape": 1.6572896053217994,
              "confidence": 0.5882363778364558
            },
            "catboost": {
              "raw_r2": -0.04480911393534881,
              "rmse": 0.034171172539279024,
              "mape": 1.6771442966065384,
              "confidence": 0.5887441277738199
            }
          },
          "dirhit": 90.0,
          "rmse": 0.03360479653017136,
          "mape": 1873228.739378181,
          "nrmse": 0.9585659658384584,
          "mask_count": 10,
          "mask_pct": 34.48275862068966,
          "low_support": false,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.04428435931473892,
              "lightgbm": -0.04544202424363486,
              "catboost": -0.04480911393534881
            },
            "ensemble_weights": {
              "xgboost": 0.315722909702127,
              "lightgbm": 0.32624404782333377,
              "catboost": 0.3580330424745392
            },
            "source": "model"
          }
        },
        {
          "split_index": 2,
          "train_days": 483,
          "test_days": 30,
          "train_end_idx": 483,
          "test_end_idx": 513,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-28T00:00:00",
          "test_start": "2025-07-29T00:00:00",
          "test_end": "2025-09-08T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.026171242385391997,
              "rmse": 0.03442974960679903,
              "mape": 1.6515722705493148,
              "confidence": 0.6037661564596133
            },
            "lightgbm": {
              "raw_r2": -0.022496329000787057,
              "rmse": 0.03441171284047924,
              "mape": 1.6487954594124177,
              "confidence": 0.6067409799054059
            },
            "catboost": {
              "raw_r2": -0.0180360415286908,
              "rmse": 0.03434295850807824,
              "mape": 1.6753369376412106,
              "confidence": 0.6103556394813782
            }
          },
          "dirhit": null,
          "rmse": 0.01714810944709596,
          "mape": 112.25962979498516,
          "nrmse": 1.1064224427036595,
          "mask_count": 4,
          "mask_pct": 13.793103448275861,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.026171242385391997,
              "lightgbm": -0.022496329000787057,
              "catboost": -0.0180360415286908
            },
            "ensemble_weights": {
              "xgboost": 0.31541771352975884,
              "lightgbm": 0.3262543320521105,
              "catboost": 0.35832795441813065
            },
            "source": "model"
          }
        },
        {
          "split_index": 3,
          "train_days": 513,
          "test_days": 30,
          "train_end_idx": 513,
          "test_end_idx": 543,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-08T00:00:00",
          "test_start": "2025-09-09T00:00:00",
          "test_end": "2025-10-20T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.01141127200022877,
              "rmse": 0.03288084152115639,
              "mape": 1.639039037130967,
              "confidence": 0.615730855949481
            },
            "lightgbm": {
              "raw_r2": -0.01400502535318049,
              "rmse": 0.03290893720123043,
              "mape": 1.6246514650716224,
              "confidence": 0.6136255644168951
            },
            "catboost": {
              "raw_r2": -0.012729369187752063,
              "rmse": 0.03288666811547814,
              "mape": 1.6235940318518824,
              "confidence": 0.6146608775466829
            }
          },
          "dirhit": null,
          "rmse": 0.02394151075420302,
          "mape": 111.52510408442404,
          "nrmse": 0.9893155249087869,
          "mask_count": 7,
          "mask_pct": 24.137931034482758,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.01141127200022877,
              "lightgbm": -0.01400502535318049,
              "catboost": -0.012729369187752063
            },
            "ensemble_weights": {
              "xgboost": 0.3157720391816659,
              "lightgbm": 0.32619794920081757,
              "catboost": 0.3580300116175165
            },
            "source": "model"
          }
        },
        {
          "split_index": 4,
          "train_days": 543,
          "test_days": 30,
          "train_end_idx": 543,
          "test_end_idx": 573,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-20T00:00:00",
          "test_start": "2025-10-21T00:00:00",
          "test_end": "2025-12-01T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.019639054588966937,
              "rmse": 0.03237013915061563,
              "mape": 1.6434242150145548,
              "confidence": 0.609056077443908
            },
            "lightgbm": {
              "raw_r2": -0.020900447308342434,
              "rmse": 0.03238786122274746,
              "mape": 1.6322872284051562,
              "confidence": 0.6080338239869212
            },
            "catboost": {
              "raw_r2": -0.013661795044830302,
              "rmse": 0.03224275671411571,
              "mape": 1.6047382815734108,
              "confidence": 0.6139041057514716
            }
          },
          "dirhit": null,
          "rmse": 0.022405397553163377,
          "mape": 1908331.6778552614,
          "nrmse": 1.0072564554983159,
          "mask_count": 5,
          "mask_pct": 17.24137931034483,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.019639054588966937,
              "lightgbm": -0.020900447308342434,
              "catboost": -0.013661795044830302
            },
            "ensemble_weights": {
              "xgboost": 0.7078437890948565,
              "lightgbm": 0.13903762953286733,
              "catboost": 0.15311858137227616
            },
            "source": "model"
          }
        }
      ],
      "avg_dirhit": 90.0,
      "avg_nrmse": 1.0153900972373053,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.025376482072331657,
          "rmse": 0.03346317134840424,
          "mape": 1.649957867885488,
          "confidence": 0.6044295840289453
        },
        "lightgbm": {
          "raw_r2": -0.02571095647648621,
          "rmse": 0.03347401522813016,
          "mape": 1.640755939552749,
          "confidence": 0.6041591865364195
        },
        "catboost": {
          "raw_r2": -0.022309079924155494,
          "rmse": 0.03341088896923777,
          "mape": 1.6452033869182607,
          "confidence": 0.6069161876383381
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 10,
    "min_mask_pct": 5.0,
    "best_trial_number": 1323,
    "best_trial_seed": 1365,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "split_generation": {
      "type": "generate_walkforward_splits",
      "n_splits": 4
    },
    "symbol_specs": {
      "CLEBI_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 453,
            "test_end_idx": 483,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-13T00:00:00",
            "test_start": "2025-06-16T00:00:00",
            "test_end": "2025-07-28T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 483,
            "test_end_idx": 513,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-28T00:00:00",
            "test_start": "2025-07-29T00:00:00",
            "test_end": "2025-09-08T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 513,
            "test_end_idx": 543,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-08T00:00:00",
            "test_start": "2025-09-09T00:00:00",
            "test_end": "2025-10-20T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 543,
            "test_end_idx": 573,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-20T00:00:00",
            "test_start": "2025-10-21T00:00:00",
            "test_end": "2025-12-01T00:00:00"
          }
        ]
      }
    }
  }
}