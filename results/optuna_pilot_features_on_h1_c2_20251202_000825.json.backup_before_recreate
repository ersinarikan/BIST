{
  "best_value": 49.258681704928904,
  "best_dirhit": 79.1875,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": true,
    "enable_meta_stacking": false,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.4933574857305613,
    "ml_loss_threshold": 0.00411893044760045,
    "ml_dir_penalty": 3.069965619158797,
    "ml_adaptive_k_1d": 2.0989957052332078,
    "ml_pattern_weight_scale_1d": 1.8604586083681058,
    "enable_talib_patterns_short": true,
    "external_min_days": 57,
    "external_smooth_alpha": 0.15563750336603444,
    "xgb_n_estimators": 344,
    "xgb_max_depth": 6,
    "xgb_learning_rate": 0.025959726966413018,
    "xgb_subsample": 0.569953834757673,
    "xgb_colsample_bytree": 0.5845401160044714,
    "xgb_reg_alpha": 1.4239138906748826e-06,
    "xgb_reg_lambda": 0.003623700550031719,
    "xgb_min_child_weight": 14,
    "xgb_gamma": 0.007349401945790802,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 444,
    "lgb_n_estimators": 167,
    "lgb_max_depth": 3,
    "lgb_learning_rate": 0.018866121829124158,
    "lgb_num_leaves": 42,
    "lgb_subsample": 0.8038779765828155,
    "lgb_colsample_bytree": 0.6023539138834082,
    "lgb_reg_alpha": 0.020342307985738006,
    "lgb_reg_lambda": 0.10211212486285313,
    "lgb_min_data_in_leaf": 19,
    "lgb_feature_fraction_bynode": 0.837019722210795,
    "lgb_bagging_freq": 2,
    "lgb_min_gain_to_split": 0.20845316131688946,
    "cat_iterations": 421,
    "cat_depth": 4,
    "cat_learning_rate": 0.012286589278470088,
    "cat_l2_leaf_reg": 3.749837406618693,
    "cat_subsample": 0.896888494150977,
    "cat_rsm": 0.7849648701599758,
    "cat_border_count": 172,
    "cat_random_strength": 0.8042085595339401,
    "cat_leaf_estimation_iterations": 12,
    "cat_bootstrap_type": "No"
  },
  "best_trial": {
    "number": 113,
    "value": 49.258681704928904,
    "state": "1"
  },
  "best_trial_number": 113,
  "best_trial_seed": 155,
  "n_trials": 1366,
  "pruned_count": 0,
  "avg_trial_time": 266.7040101463235,
  "top_k_trials": [
    {
      "number": 113,
      "value": 49.258681704928904,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.4933574857305613,
        "ml_loss_threshold": 0.00411893044760045,
        "ml_dir_penalty": 3.069965619158797,
        "ml_adaptive_k_1d": 2.0989957052332078,
        "ml_pattern_weight_scale_1d": 1.8604586083681058,
        "enable_talib_patterns_short": true,
        "external_min_days": 57,
        "external_smooth_alpha": 0.15563750336603444,
        "xgb_n_estimators": 344,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.025959726966413018,
        "xgb_subsample": 0.569953834757673,
        "xgb_colsample_bytree": 0.5845401160044714,
        "xgb_reg_alpha": 1.4239138906748826e-06,
        "xgb_reg_lambda": 0.003623700550031719,
        "xgb_min_child_weight": 14,
        "xgb_gamma": 0.007349401945790802,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 444,
        "lgb_n_estimators": 167,
        "lgb_max_depth": 3,
        "lgb_learning_rate": 0.018866121829124158,
        "lgb_num_leaves": 42,
        "lgb_subsample": 0.8038779765828155,
        "lgb_colsample_bytree": 0.6023539138834082,
        "lgb_reg_alpha": 0.020342307985738006,
        "lgb_reg_lambda": 0.10211212486285313,
        "lgb_min_data_in_leaf": 19,
        "lgb_feature_fraction_bynode": 0.837019722210795,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.20845316131688946,
        "cat_iterations": 421,
        "cat_depth": 4,
        "cat_learning_rate": 0.012286589278470088,
        "cat_l2_leaf_reg": 3.749837406618693,
        "cat_subsample": 0.896888494150977,
        "cat_rsm": 0.7849648701599758,
        "cat_border_count": 172,
        "cat_random_strength": 0.8042085595339401,
        "cat_leaf_estimation_iterations": 12,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 79.1875,
        "avg_nrmse": 1.0287613825118496,
        "model_choice": "all",
        "symbol_metrics": {
          "DOKTA_1d": {
            "symbol": "DOKTA",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 451,
                "test_days": 30,
                "train_end_idx": 451,
                "test_end_idx": 481,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-11T00:00:00",
                "test_start": "2025-06-12T00:00:00",
                "test_end": "2025-07-24T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -20.169704881953567,
                    "rmse": 0.12921990006524792,
                    "mape": 1.7692701231779777,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.0030249759595816586,
                    "rmse": 0.028256580710860273,
                    "mape": 1.9333154408046902,
                    "confidence": 0.622542253885902
                  },
                  "catboost": {
                    "raw_r2": 0.020406054673587953,
                    "rmse": 0.027945338290485282,
                    "mape": 1.7105115567038334,
                    "confidence": 0.6415655510556131
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.019656717999429845,
                "mape": 1217272.97360242,
                "nrmse": 1.0244423933378592,
                "mask_count": 2,
                "mask_pct": 6.896551724137931,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 2,
                "train_days": 481,
                "test_days": 30,
                "train_end_idx": 481,
                "test_end_idx": 511,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-24T00:00:00",
                "test_start": "2025-07-25T00:00:00",
                "test_end": "2025-09-04T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -22.690715984935906,
                    "rmse": 0.12999681724870793,
                    "mape": 1.7719797812036544,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.005138487887196878,
                    "rmse": 0.027730905405632653,
                    "mape": 1.8988130888909445,
                    "confidence": 0.6208252082379653
                  },
                  "catboost": {
                    "raw_r2": 0.01581255481407266,
                    "rmse": 0.027449180868615544,
                    "mape": 1.6903503096333554,
                    "confidence": 0.6378410124689993
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.04002368693455099,
                "mape": 96.6646876286449,
                "nrmse": 1.0057560017068556,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 3,
                "train_days": 511,
                "test_days": 30,
                "train_end_idx": 511,
                "test_end_idx": 541,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-04T00:00:00",
                "test_start": "2025-09-05T00:00:00",
                "test_end": "2025-10-16T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -23.027149242777938,
                    "rmse": 0.12891140525898612,
                    "mape": 1.7594427144971572,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.014154135588537434,
                    "rmse": 0.028566139641310204,
                    "mape": 1.8580687024813913,
                    "confidence": 0.6135045623314794
                  },
                  "catboost": {
                    "raw_r2": 0.011428898901491532,
                    "rmse": 0.02827853077621376,
                    "mape": 1.6936685823708006,
                    "confidence": 0.6342834542401772
                  }
                },
                "dirhit": 68.0,
                "rmse": 0.0416927972137407,
                "mape": 96.36059161798511,
                "nrmse": 1.0628447395901781,
                "mask_count": 25,
                "mask_pct": 86.20689655172413,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 4,
                "train_days": 541,
                "test_days": 30,
                "train_end_idx": 541,
                "test_end_idx": 571,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-16T00:00:00",
                "test_start": "2025-10-17T00:00:00",
                "test_end": "2025-11-27T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -20.351263889158087,
                    "rmse": 0.1295469672540791,
                    "mape": 1.7543697472458455,
                    "confidence": 0.3
                  },
                  "lightgbm": {
                    "raw_r2": -0.009482067368551839,
                    "rmse": 0.029945113533905887,
                    "mape": 1.804467032562041,
                    "confidence": 0.6172972630215301
                  },
                  "catboost": {
                    "raw_r2": 0.015234572334970312,
                    "rmse": 0.029721783884024647,
                    "mape": 1.7102220312945045,
                    "confidence": 0.6373721083718886
                  }
                },
                "dirhit": 68.75,
                "rmse": 0.02221010405031916,
                "mape": 12693599.669606574,
                "nrmse": 1.022002395412506,
                "mask_count": 16,
                "mask_pct": 55.172413793103445,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              }
            ],
            "avg_dirhit": 79.1875,
            "avg_nrmse": 1.0287613825118496,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -21.559708499706375,
                "rmse": 0.12941877245675526,
                "mape": 1.7637655915311587,
                "confidence": 0.3
              },
              "lightgbm": {
                "raw_r2": -0.007949916700966952,
                "rmse": 0.028624684822927255,
                "mape": 1.8736660661847668,
                "confidence": 0.6185423218692192
              },
              "catboost": {
                "raw_r2": 0.015720520181030616,
                "rmse": 0.02834870845483481,
                "mape": 1.7011881200006234,
                "confidence": 0.6377655315341695
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 788,
      "value": 48.93185505752845,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "n_seeds": 3,
        "meta_stacking_alpha": 5.5236587938483375,
        "ml_adaptive_k_1d": 1.8579849654654463,
        "ml_pattern_weight_scale_1d": 1.7311652371633,
        "enable_talib_patterns_short": true,
        "external_min_days": 45,
        "external_smooth_alpha": 0.26912739459985047,
        "smart_consensus_weight": 0.5966454896070436,
        "smart_performance_weight": 0.5866383440945299,
        "smart_sigma": 0.0019807843335968483,
        "smart_weight_xgb": 0.8708215614450221,
        "smart_weight_lgbm": 0.685887384723798,
        "smart_weight_cat": 1.0762206803738104,
        "fingpt_confidence_threshold": 0.4003915641444696,
        "xgb_n_estimators": 372,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.01558754275902297,
        "xgb_subsample": 0.5376896035058027,
        "xgb_colsample_bytree": 0.5422454009588588,
        "xgb_reg_alpha": 0.08805567015879219,
        "xgb_reg_lambda": 0.012042308728003086,
        "xgb_min_child_weight": 8,
        "xgb_gamma": 0.0021691075649542834,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 338,
        "lgb_n_estimators": 181,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.04281777391179464,
        "lgb_num_leaves": 52,
        "lgb_subsample": 0.5845909051302391,
        "lgb_colsample_bytree": 0.5079701319643145,
        "lgb_reg_alpha": 0.47820765205914245,
        "lgb_reg_lambda": 0.018773714964201015,
        "lgb_min_data_in_leaf": 85,
        "lgb_feature_fraction_bynode": 0.9324750553515943,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.1612911441621169,
        "cat_iterations": 227,
        "cat_depth": 5,
        "cat_learning_rate": 0.015573749869699253,
        "cat_l2_leaf_reg": 8.974723198785545,
        "cat_subsample": 0.9440667296700417,
        "cat_rsm": 0.845800768974167,
        "cat_border_count": 163,
        "cat_random_strength": 2.746608471016861,
        "cat_leaf_estimation_iterations": 13,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 78.48484848484848,
        "avg_nrmse": 1.001256480310914,
        "model_choice": "all",
        "symbol_metrics": {
          "DOKTA_1d": {
            "symbol": "DOKTA",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 452,
                "test_days": 30,
                "train_end_idx": 452,
                "test_end_idx": 482,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.011294570571230919,
                    "rmse": 0.028051098390101985,
                    "mape": 1.689978394073921,
                    "confidence": 0.6341744004817935
                  },
                  "lightgbm": {
                    "raw_r2": -0.0030249759595816586,
                    "rmse": 0.028256580710860273,
                    "mape": 1.9333154408046902,
                    "confidence": 0.622542253885902
                  },
                  "catboost": {
                    "raw_r2": 0.018851033494299545,
                    "rmse": 0.027964694394113965,
                    "mape": 1.6421250667006886,
                    "confidence": 0.6403051354428924
                  }
                },
                "dirhit": null,
                "rmse": 0.02012053141811645,
                "mape": 232544.2712435834,
                "nrmse": 1.0413130352159685,
                "mask_count": 1,
                "mask_pct": 3.4482758620689653,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 2,
                "train_days": 482,
                "test_days": 30,
                "train_end_idx": 482,
                "test_end_idx": 512,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.009426823884056653,
                    "rmse": 0.027533352768346574,
                    "mape": 1.724768646371641,
                    "confidence": 0.6326578767139557
                  },
                  "lightgbm": {
                    "raw_r2": -0.005138487887196878,
                    "rmse": 0.027730905405632653,
                    "mape": 1.8988130888909445,
                    "confidence": 0.6208252082379653
                  },
                  "catboost": {
                    "raw_r2": 0.02567908222677177,
                    "rmse": 0.027270359564268626,
                    "mape": 1.6024962992941287,
                    "confidence": 0.6458356385496571
                  }
                },
                "dirhit": null,
                "rmse": 0.04070004177241836,
                "mape": 113.99124784860884,
                "nrmse": 1.0008491616031328,
                "mask_count": 4,
                "mask_pct": 13.793103448275861,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 3,
                "train_days": 512,
                "test_days": 30,
                "train_end_idx": 512,
                "test_end_idx": 542,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.011465382405798382,
                    "rmse": 0.028218689042732278,
                    "mape": 1.6455716325330485,
                    "confidence": 0.6343130728237133
                  },
                  "lightgbm": {
                    "raw_r2": -0.014154135588537434,
                    "rmse": 0.028566139641310204,
                    "mape": 1.8580687024813913,
                    "confidence": 0.6135045623314794
                  },
                  "catboost": {
                    "raw_r2": 0.0032657839392302344,
                    "rmse": 0.028314333378767757,
                    "mape": 1.6744941444038597,
                    "confidence": 0.6276533904939607
                  }
                },
                "dirhit": 93.33333333333333,
                "rmse": 0.03801297077489934,
                "mape": 76.17303214154805,
                "nrmse": 0.9685135176275104,
                "mask_count": 15,
                "mask_pct": 51.724137931034484,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 4,
                "train_days": 542,
                "test_days": 30,
                "train_end_idx": 542,
                "test_end_idx": 572,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.0016443108090017737,
                    "rmse": 0.029839727218440356,
                    "mape": 1.765140911167337,
                    "confidence": 0.6263359950068907
                  },
                  "lightgbm": {
                    "raw_r2": -0.009482067368551839,
                    "rmse": 0.029945113533905887,
                    "mape": 1.804467032562041,
                    "confidence": 0.6172972630215301
                  },
                  "catboost": {
                    "raw_r2": 0.009307125910914574,
                    "rmse": 0.02976574007730109,
                    "mape": 1.7035203301890995,
                    "confidence": 0.6325606754241366
                  }
                },
                "dirhit": 63.63636363636363,
                "rmse": 0.021649823880809358,
                "mape": 5269033.950953553,
                "nrmse": 0.9943502067970446,
                "mask_count": 11,
                "mask_pct": 37.93103448275862,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              }
            ],
            "avg_dirhit": 78.48484848484848,
            "avg_nrmse": 1.001256480310914,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": 0.008457771917521931,
                "rmse": 0.0284107168549053,
                "mape": 1.7063648960364868,
                "confidence": 0.6318703362565883
              },
              "lightgbm": {
                "raw_r2": -0.007949916700966952,
                "rmse": 0.028624684822927255,
                "mape": 1.8736660661847668,
                "confidence": 0.6185423218692192
              },
              "catboost": {
                "raw_r2": 0.014275756392804031,
                "rmse": 0.02832878185361286,
                "mape": 1.655658960146944,
                "confidence": 0.6365887099776617
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 1035,
      "value": 47.11432924738483,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "meta_stacking_alpha": 2.862107465589893,
        "ml_adaptive_k_1d": 1.89389837768752,
        "ml_pattern_weight_scale_1d": 1.6677102394498438,
        "enable_talib_patterns_short": true,
        "external_min_days": 40,
        "external_smooth_alpha": 0.287499322194393,
        "smart_consensus_weight": 0.6093954703209595,
        "smart_performance_weight": 0.33661784637360564,
        "smart_sigma": 0.0022412095904078937,
        "smart_weight_xgb": 0.6756337266283238,
        "smart_weight_lgbm": 1.2680799757681795,
        "smart_weight_cat": 1.1441172023152653,
        "fingpt_confidence_threshold": 0.3389350549473885,
        "xgb_n_estimators": 362,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.014595397034290178,
        "xgb_subsample": 0.5523653580733688,
        "xgb_colsample_bytree": 0.5510060930645193,
        "xgb_reg_alpha": 1.5421451493336695e-05,
        "xgb_reg_lambda": 0.010173753820005637,
        "xgb_min_child_weight": 8,
        "xgb_gamma": 0.0028563495526315293,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 270,
        "lgb_n_estimators": 316,
        "lgb_max_depth": 8,
        "lgb_learning_rate": 0.03415043407842864,
        "lgb_num_leaves": 52,
        "lgb_subsample": 0.5450046532237496,
        "lgb_colsample_bytree": 0.6297122040504218,
        "lgb_reg_alpha": 0.5560258358418823,
        "lgb_reg_lambda": 0.022684821902030586,
        "lgb_min_data_in_leaf": 87,
        "lgb_feature_fraction_bynode": 0.9029375510032595,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.1848336806582926,
        "cat_iterations": 206,
        "cat_depth": 3,
        "cat_learning_rate": 0.016504399403940863,
        "cat_l2_leaf_reg": 9.671772937892802,
        "cat_subsample": 0.7429424765430924,
        "cat_rsm": 0.8026522307849707,
        "cat_border_count": 171,
        "cat_random_strength": 2.686800327196906,
        "cat_leaf_estimation_iterations": 18,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 76.0,
        "avg_nrmse": 1.0142784587691944,
        "model_choice": "all",
        "symbol_metrics": {
          "DOKTA_1d": {
            "symbol": "DOKTA",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 452,
                "test_days": 30,
                "train_end_idx": 452,
                "test_end_idx": 482,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.020720920285025073,
                    "rmse": 0.02792780727243832,
                    "mape": 1.618046414379711,
                    "confidence": 0.6418207044238338
                  },
                  "lightgbm": {
                    "raw_r2": -0.0030249759595816586,
                    "rmse": 0.028256580710860273,
                    "mape": 1.9333154408046902,
                    "confidence": 0.622542253885902
                  },
                  "catboost": {
                    "raw_r2": 0.010382009018168362,
                    "rmse": 0.02808272925625336,
                    "mape": 1.76750435215719,
                    "confidence": 0.6334334886353402
                  }
                },
                "dirhit": null,
                "rmse": 0.020863406207217626,
                "mape": 784266.5927891936,
                "nrmse": 1.079759594372346,
                "mask_count": 8,
                "mask_pct": 27.586206896551722,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 2,
                "train_days": 482,
                "test_days": 30,
                "train_end_idx": 482,
                "test_end_idx": 512,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.00970400708813953,
                    "rmse": 0.027539637088384614,
                    "mape": 1.6595776557478739,
                    "confidence": 0.632882959318601
                  },
                  "lightgbm": {
                    "raw_r2": -0.005138487887196878,
                    "rmse": 0.027730905405632653,
                    "mape": 1.8988130888909445,
                    "confidence": 0.6208252082379653
                  },
                  "catboost": {
                    "raw_r2": 0.006253724525795497,
                    "rmse": 0.027593026481534583,
                    "mape": 1.8216211277317844,
                    "confidence": 0.6300807372195589
                  }
                },
                "dirhit": null,
                "rmse": 0.04170559770911384,
                "mape": 128.82497727226075,
                "nrmse": 1.025576650135313,
                "mask_count": 9,
                "mask_pct": 31.03448275862069,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 3,
                "train_days": 512,
                "test_days": 30,
                "train_end_idx": 512,
                "test_end_idx": 542,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.0049126074303260285,
                    "rmse": 0.028329949090984734,
                    "mape": 1.736962284512064,
                    "confidence": 0.6289912928626755
                  },
                  "lightgbm": {
                    "raw_r2": -0.014154135588537434,
                    "rmse": 0.028566139641310204,
                    "mape": 1.8580687024813913,
                    "confidence": 0.6135045623314794
                  },
                  "catboost": {
                    "raw_r2": -0.005778123330507497,
                    "rmse": 0.0284674172902415,
                    "mape": 1.7783826680000059,
                    "confidence": 0.6203056013113455
                  }
                },
                "dirhit": 76.0,
                "rmse": 0.0385579203562261,
                "mape": 95.9019574004275,
                "nrmse": 0.9823980161337131,
                "mask_count": 25,
                "mask_pct": 86.20689655172413,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 4,
                "train_days": 542,
                "test_days": 30,
                "train_end_idx": 542,
                "test_end_idx": 572,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.0164199098319399,
                    "rmse": 0.029623223469606007,
                    "mape": 1.6556428011860063,
                    "confidence": 0.6383336881182022
                  },
                  "lightgbm": {
                    "raw_r2": -0.009482067368551839,
                    "rmse": 0.029945113533905887,
                    "mape": 1.804467032562041,
                    "confidence": 0.6172972630215301
                  },
                  "catboost": {
                    "raw_r2": 0.016380599881486657,
                    "rmse": 0.029676863853920626,
                    "mape": 1.6974086910289703,
                    "confidence": 0.6383018024150597
                  }
                },
                "dirhit": null,
                "rmse": 0.021106142400052895,
                "mape": 3126930.6540858583,
                "nrmse": 0.9693795744354061,
                "mask_count": 9,
                "mask_pct": 31.03448275862069,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              }
            ],
            "avg_dirhit": 76.0,
            "avg_nrmse": 1.0142784587691944,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": 0.012939361158857632,
                "rmse": 0.02835515423035342,
                "mape": 1.6675572889564139,
                "confidence": 0.6355071611808281
              },
              "lightgbm": {
                "raw_r2": -0.007949916700966952,
                "rmse": 0.028624684822927255,
                "mape": 1.8736660661847668,
                "confidence": 0.6185423218692192
              },
              "catboost": {
                "raw_r2": 0.006809552523735755,
                "rmse": 0.028455009220487517,
                "mape": 1.7662292097294876,
                "confidence": 0.6305304073953261
              }
            }
          }
        }
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_DOKTA_h1_c2",
  "symbols": [
    "DOKTA"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": true,
    "enable_meta_stacking": false,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.4933574857305613,
    "ml_loss_threshold": 0.00411893044760045,
    "ml_dir_penalty": 3.069965619158797,
    "ml_adaptive_k_1d": 2.0989957052332078,
    "ml_pattern_weight_scale_1d": 1.8604586083681058,
    "external_min_days": 57,
    "external_smooth_alpha": 0.15563750336603444
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 344,
    "xgb_max_depth": 6,
    "xgb_learning_rate": 0.025959726966413018,
    "xgb_subsample": 0.569953834757673,
    "xgb_colsample_bytree": 0.5845401160044714,
    "xgb_reg_alpha": 1.4239138906748826e-06,
    "xgb_reg_lambda": 0.003623700550031719,
    "xgb_min_child_weight": 14,
    "xgb_gamma": 0.007349401945790802,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 444,
    "lgb_n_estimators": 167,
    "lgb_max_depth": 3,
    "lgb_learning_rate": 0.018866121829124158,
    "lgb_num_leaves": 42,
    "lgb_subsample": 0.8038779765828155,
    "lgb_colsample_bytree": 0.6023539138834082,
    "lgb_reg_alpha": 0.020342307985738006,
    "lgb_reg_lambda": 0.10211212486285313,
    "lgb_min_data_in_leaf": 19,
    "lgb_feature_fraction_bynode": 0.837019722210795,
    "lgb_bagging_freq": 2,
    "lgb_min_gain_to_split": 0.20845316131688946,
    "cat_iterations": 421,
    "cat_depth": 4,
    "cat_learning_rate": 0.012286589278470088,
    "cat_l2_leaf_reg": 3.749837406618693,
    "cat_subsample": 0.896888494150977,
    "cat_rsm": 0.7849648701599758,
    "cat_border_count": 172,
    "cat_random_strength": 0.8042085595339401,
    "cat_leaf_estimation_iterations": 12,
    "cat_bootstrap_type": "No"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "0",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "DOKTA_1d": {
      "symbol": "DOKTA",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 451,
          "test_days": 30,
          "train_end_idx": 451,
          "test_end_idx": 481,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-11T00:00:00",
          "test_start": "2025-06-12T00:00:00",
          "test_end": "2025-07-24T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -20.169704881953567,
              "rmse": 0.12921990006524792,
              "mape": 1.7692701231779777,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.0030249759595816586,
              "rmse": 0.028256580710860273,
              "mape": 1.9333154408046902,
              "confidence": 0.622542253885902
            },
            "catboost": {
              "raw_r2": 0.020406054673587953,
              "rmse": 0.027945338290485282,
              "mape": 1.7105115567038334,
              "confidence": 0.6415655510556131
            }
          },
          "dirhit": 100.0,
          "rmse": 0.019656717999429845,
          "mape": 1217272.97360242,
          "nrmse": 1.0244423933378592,
          "mask_count": 2,
          "mask_pct": 6.896551724137931,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 2,
          "train_days": 481,
          "test_days": 30,
          "train_end_idx": 481,
          "test_end_idx": 511,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-24T00:00:00",
          "test_start": "2025-07-25T00:00:00",
          "test_end": "2025-09-04T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -22.690715984935906,
              "rmse": 0.12999681724870793,
              "mape": 1.7719797812036544,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.005138487887196878,
              "rmse": 0.027730905405632653,
              "mape": 1.8988130888909445,
              "confidence": 0.6208252082379653
            },
            "catboost": {
              "raw_r2": 0.01581255481407266,
              "rmse": 0.027449180868615544,
              "mape": 1.6903503096333554,
              "confidence": 0.6378410124689993
            }
          },
          "dirhit": 80.0,
          "rmse": 0.04002368693455099,
          "mape": 96.6646876286449,
          "nrmse": 1.0057560017068556,
          "mask_count": 5,
          "mask_pct": 17.24137931034483,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 3,
          "train_days": 511,
          "test_days": 30,
          "train_end_idx": 511,
          "test_end_idx": 541,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-04T00:00:00",
          "test_start": "2025-09-05T00:00:00",
          "test_end": "2025-10-16T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -23.027149242777938,
              "rmse": 0.12891140525898612,
              "mape": 1.7594427144971572,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.014154135588537434,
              "rmse": 0.028566139641310204,
              "mape": 1.8580687024813913,
              "confidence": 0.6135045623314794
            },
            "catboost": {
              "raw_r2": 0.011428898901491532,
              "rmse": 0.02827853077621376,
              "mape": 1.6936685823708006,
              "confidence": 0.6342834542401772
            }
          },
          "dirhit": 68.0,
          "rmse": 0.0416927972137407,
          "mape": 96.36059161798511,
          "nrmse": 1.0628447395901781,
          "mask_count": 25,
          "mask_pct": 86.20689655172413,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 4,
          "train_days": 541,
          "test_days": 30,
          "train_end_idx": 541,
          "test_end_idx": 571,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-16T00:00:00",
          "test_start": "2025-10-17T00:00:00",
          "test_end": "2025-11-27T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -20.351263889158087,
              "rmse": 0.1295469672540791,
              "mape": 1.7543697472458455,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.009482067368551839,
              "rmse": 0.029945113533905887,
              "mape": 1.804467032562041,
              "confidence": 0.6172972630215301
            },
            "catboost": {
              "raw_r2": 0.015234572334970312,
              "rmse": 0.029721783884024647,
              "mape": 1.7102220312945045,
              "confidence": 0.6373721083718886
            }
          },
          "dirhit": 68.75,
          "rmse": 0.02221010405031916,
          "mape": 12693599.669606574,
          "nrmse": 1.022002395412506,
          "mask_count": 16,
          "mask_pct": 55.172413793103445,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        }
      ],
      "avg_dirhit": 79.1875,
      "avg_nrmse": 1.0287613825118496,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -21.559708499706375,
          "rmse": 0.12941877245675526,
          "mape": 1.7637655915311587,
          "confidence": 0.3
        },
        "lightgbm": {
          "raw_r2": -0.007949916700966952,
          "rmse": 0.028624684822927255,
          "mape": 1.8736660661847668,
          "confidence": 0.6185423218692192
        },
        "catboost": {
          "raw_r2": 0.015720520181030616,
          "rmse": 0.02834870845483481,
          "mape": 1.7011881200006234,
          "confidence": 0.6377655315341695
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 0,
    "min_mask_pct": 0.0,
    "best_trial_number": 113,
    "best_trial_seed": 155,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "split_generation": {
      "type": "generate_walkforward_splits",
      "n_splits": 4
    },
    "symbol_specs": {
      "DOKTA_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 451,
            "test_end_idx": 481,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-11T00:00:00",
            "test_start": "2025-06-12T00:00:00",
            "test_end": "2025-07-24T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 481,
            "test_end_idx": 511,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-24T00:00:00",
            "test_start": "2025-07-25T00:00:00",
            "test_end": "2025-09-04T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 511,
            "test_end_idx": 541,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-04T00:00:00",
            "test_start": "2025-09-05T00:00:00",
            "test_end": "2025-10-16T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 541,
            "test_end_idx": 571,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-16T00:00:00",
            "test_start": "2025-10-17T00:00:00",
            "test_end": "2025-11-27T00:00:00"
          }
        ]
      }
    }
  }
}