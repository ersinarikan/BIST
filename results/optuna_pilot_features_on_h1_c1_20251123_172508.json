{
  "best_value": 55.25011353459468,
  "best_dirhit": 87.5,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "model_choice": "all",
    "meta_stacking_alpha": 6.73068137402908,
    "ml_adaptive_k_1d": 2.069518848239827,
    "ml_pattern_weight_scale_1d": 0.5754817959544606,
    "enable_talib_patterns_short": false,
    "external_min_days": 37,
    "external_smooth_alpha": 0.28155960519352885,
    "yolo_min_conf": 0.7144580560573007,
    "smart_consensus_weight": 0.44529053857765644,
    "smart_performance_weight": 0.40799800021555926,
    "smart_sigma": 0.002338771162633416,
    "smart_weight_xgb": 0.8516716398620596,
    "smart_weight_lgbm": 1.1840260500537287,
    "smart_weight_cat": 1.4117903591235508,
    "fingpt_confidence_threshold": 0.44455123946563874,
    "xgb_n_estimators": 361,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.08840752525754905,
    "xgb_subsample": 0.7487569824512019,
    "xgb_colsample_bytree": 0.6005757863828541,
    "xgb_reg_alpha": 0.00377620736114489,
    "xgb_reg_lambda": 0.09901475392157282,
    "xgb_min_child_weight": 15,
    "xgb_gamma": 0.00018407082441267863,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 210,
    "lgb_n_estimators": 271,
    "lgb_max_depth": 3,
    "lgb_learning_rate": 0.013357347398222185,
    "lgb_num_leaves": 51,
    "lgb_subsample": 0.6708557793028973,
    "lgb_colsample_bytree": 0.8922860894473928,
    "lgb_reg_alpha": 1.575873407810827e-05,
    "lgb_reg_lambda": 0.0022300796517920113,
    "lgb_min_data_in_leaf": 52,
    "lgb_feature_fraction_bynode": 0.6331134168023346,
    "lgb_bagging_freq": 0,
    "lgb_min_gain_to_split": 0.9725148043354467,
    "cat_iterations": 435,
    "cat_depth": 7,
    "cat_learning_rate": 0.16849365620908466,
    "cat_l2_leaf_reg": 3.5225978273200136,
    "cat_subsample": 0.558730690676913,
    "cat_rsm": 0.761060452544874,
    "cat_border_count": 22,
    "cat_random_strength": 0.6612726817171097,
    "cat_leaf_estimation_iterations": 8,
    "cat_bootstrap_type": "Bayesian"
  },
  "best_trial": {
    "number": 1310,
    "value": 55.25011353459468,
    "state": "1"
  },
  "n_trials": 1500,
  "pruned_count": 0,
  "avg_trial_time": 146.6381806904603,
  "top_k_trials": [
    {
      "number": 1310,
      "value": 55.25011353459468,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "meta_stacking_alpha": 6.73068137402908,
        "ml_adaptive_k_1d": 2.069518848239827,
        "ml_pattern_weight_scale_1d": 0.5754817959544606,
        "enable_talib_patterns_short": false,
        "external_min_days": 37,
        "external_smooth_alpha": 0.28155960519352885,
        "yolo_min_conf": 0.7144580560573007,
        "smart_consensus_weight": 0.44529053857765644,
        "smart_performance_weight": 0.40799800021555926,
        "smart_sigma": 0.002338771162633416,
        "smart_weight_xgb": 0.8516716398620596,
        "smart_weight_lgbm": 1.1840260500537287,
        "smart_weight_cat": 1.4117903591235508,
        "fingpt_confidence_threshold": 0.44455123946563874,
        "xgb_n_estimators": 361,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.08840752525754905,
        "xgb_subsample": 0.7487569824512019,
        "xgb_colsample_bytree": 0.6005757863828541,
        "xgb_reg_alpha": 0.00377620736114489,
        "xgb_reg_lambda": 0.09901475392157282,
        "xgb_min_child_weight": 15,
        "xgb_gamma": 0.00018407082441267863,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 210,
        "lgb_n_estimators": 271,
        "lgb_max_depth": 3,
        "lgb_learning_rate": 0.013357347398222185,
        "lgb_num_leaves": 51,
        "lgb_subsample": 0.6708557793028973,
        "lgb_colsample_bytree": 0.8922860894473928,
        "lgb_reg_alpha": 1.575873407810827e-05,
        "lgb_reg_lambda": 0.0022300796517920113,
        "lgb_min_data_in_leaf": 52,
        "lgb_feature_fraction_bynode": 0.6331134168023346,
        "lgb_bagging_freq": 0,
        "lgb_min_gain_to_split": 0.9725148043354467,
        "cat_iterations": 435,
        "cat_depth": 7,
        "cat_learning_rate": 0.16849365620908466,
        "cat_l2_leaf_reg": 3.5225978273200136,
        "cat_subsample": 0.558730690676913,
        "cat_rsm": 0.761060452544874,
        "cat_border_count": 22,
        "cat_random_strength": 0.6612726817171097,
        "cat_leaf_estimation_iterations": 8,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 87.5,
        "avg_nrmse": 0.9999810775675515,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 983,
      "value": 50.595676571000915,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "n_seeds": 3,
        "meta_stacking_alpha": 0.04041700425447872,
        "ml_adaptive_k_1d": 1.5673533900162415,
        "ml_pattern_weight_scale_1d": 1.8782032979176717,
        "enable_talib_patterns_short": false,
        "external_min_days": 39,
        "external_smooth_alpha": 0.3256133774651809,
        "yolo_min_conf": 0.7385085930112656,
        "fingpt_confidence_threshold": 0.4470620863364355,
        "xgb_n_estimators": 302,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.13325798133181366,
        "xgb_subsample": 0.5312585622331341,
        "xgb_colsample_bytree": 0.8748803377169004,
        "xgb_reg_alpha": 0.02346776147491021,
        "xgb_reg_lambda": 0.29188307009429065,
        "xgb_min_child_weight": 13,
        "xgb_gamma": 0.0007513870954784359,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 256,
        "lgb_n_estimators": 120,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.058746334234338685,
        "lgb_num_leaves": 43,
        "lgb_subsample": 0.5756342062455377,
        "lgb_colsample_bytree": 0.8698638645251523,
        "lgb_reg_alpha": 0.0076188820126127585,
        "lgb_reg_lambda": 0.007315694615619355,
        "lgb_min_data_in_leaf": 40,
        "lgb_feature_fraction_bynode": 0.7202523884439718,
        "lgb_bagging_freq": 3,
        "lgb_min_gain_to_split": 0.9408763140046097,
        "cat_iterations": 285,
        "cat_depth": 6,
        "cat_learning_rate": 0.026786790603154198,
        "cat_l2_leaf_reg": 3.9302207285341857,
        "cat_subsample": 0.776027332930814,
        "cat_rsm": 0.5353942538211869,
        "cat_border_count": 24,
        "cat_random_strength": 1.056471651146752,
        "cat_leaf_estimation_iterations": 6,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 81.28019323671498,
        "avg_nrmse": 1.050076449116594,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1134,
      "value": 50.268208086909056,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.23506415466546465,
        "ml_loss_threshold": 0.00497847496853599,
        "ml_dir_penalty": 4.306796551430536,
        "meta_stacking_alpha": 0.11487834202630559,
        "ml_adaptive_k_1d": 2.0980248914015456,
        "ml_pattern_weight_scale_1d": 1.7765933368361522,
        "enable_talib_patterns_short": false,
        "external_min_days": 41,
        "external_smooth_alpha": 0.3128005868185523,
        "regime_scale_low": 0.971254686572908,
        "regime_scale_high": 1.1632742382844787,
        "yolo_min_conf": 0.747374163080054,
        "smart_consensus_weight": 0.5231454467411507,
        "smart_performance_weight": 0.27019596130601686,
        "smart_sigma": 0.0017971775930150813,
        "smart_weight_xgb": 0.8922954584402372,
        "smart_weight_lgbm": 0.5645291675232695,
        "smart_weight_cat": 1.0770345196919273,
        "fingpt_confidence_threshold": 0.362215822159882,
        "xgb_n_estimators": 287,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.03599030367829171,
        "xgb_subsample": 0.746768333739751,
        "xgb_colsample_bytree": 0.8161233541940777,
        "xgb_reg_alpha": 0.010019439411416517,
        "xgb_reg_lambda": 0.24951727602737497,
        "xgb_min_child_weight": 8,
        "xgb_gamma": 0.016094264780210882,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 153,
        "lgb_n_estimators": 460,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.015553624804638863,
        "lgb_num_leaves": 34,
        "lgb_subsample": 0.6115260908424155,
        "lgb_colsample_bytree": 0.8913749969287046,
        "lgb_reg_alpha": 1.733502903517082e-05,
        "lgb_reg_lambda": 0.002075677119492511,
        "lgb_min_data_in_leaf": 52,
        "lgb_feature_fraction_bynode": 0.7371382638248577,
        "lgb_bagging_freq": 0,
        "lgb_min_gain_to_split": 0.9947425884657759,
        "cat_iterations": 573,
        "cat_depth": 7,
        "cat_learning_rate": 0.02746634823048722,
        "cat_l2_leaf_reg": 2.9799453518564363,
        "cat_subsample": 0.828453196161776,
        "cat_rsm": 0.8062056999496564,
        "cat_border_count": 67,
        "cat_random_strength": 0.8587230869458364,
        "cat_leaf_estimation_iterations": 1,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 80.68181818181819,
        "avg_nrmse": 1.0348441067272782,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_ALTNY_h1_c1",
  "symbols": [
    "ALTNY"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "meta_stacking_alpha": 6.73068137402908,
    "ml_adaptive_k_1d": 2.069518848239827,
    "ml_pattern_weight_scale_1d": 0.5754817959544606,
    "external_min_days": 37,
    "external_smooth_alpha": 0.28155960519352885,
    "yolo_min_conf": 0.7144580560573007,
    "smart_consensus_weight": 0.44529053857765644,
    "smart_performance_weight": 0.40799800021555926,
    "smart_sigma": 0.002338771162633416,
    "smart_weight_xgb": 0.8516716398620596,
    "smart_weight_lgbm": 1.1840260500537287,
    "smart_weight_cat": 1.4117903591235508,
    "fingpt_confidence_threshold": 0.44455123946563874
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 361,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.08840752525754905,
    "xgb_subsample": 0.7487569824512019,
    "xgb_colsample_bytree": 0.6005757863828541,
    "xgb_reg_alpha": 0.00377620736114489,
    "xgb_reg_lambda": 0.09901475392157282,
    "xgb_min_child_weight": 15,
    "xgb_gamma": 0.00018407082441267863,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 210,
    "lgb_n_estimators": 271,
    "lgb_max_depth": 3,
    "lgb_learning_rate": 0.013357347398222185,
    "lgb_num_leaves": 51,
    "lgb_subsample": 0.6708557793028973,
    "lgb_colsample_bytree": 0.8922860894473928,
    "lgb_reg_alpha": 1.575873407810827e-05,
    "lgb_reg_lambda": 0.0022300796517920113,
    "lgb_min_data_in_leaf": 52,
    "lgb_feature_fraction_bynode": 0.6331134168023346,
    "lgb_bagging_freq": 0,
    "lgb_min_gain_to_split": 0.9725148043354467,
    "cat_iterations": 435,
    "cat_depth": 7,
    "cat_learning_rate": 0.16849365620908466,
    "cat_l2_leaf_reg": 3.5225978273200136,
    "cat_subsample": 0.558730690676913,
    "cat_rsm": 0.761060452544874,
    "cat_border_count": 22,
    "cat_random_strength": 0.6612726817171097,
    "cat_leaf_estimation_iterations": 8,
    "cat_bootstrap_type": "Bayesian"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "ALTNY_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 261,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.27278194172120146,
              "rmse": 0.02939645424021316,
              "mape": 1.4582949356000876,
              "confidence": 0.43234364450124374
            },
            "lightgbm": {
              "raw_r2": -0.38975214956889476,
              "rmse": 0.031181994707899032,
              "mape": 1.4796701240396992,
              "confidence": 0.38104755678606217
            },
            "catboost": {
              "raw_r2": -0.327287530642713,
              "rmse": 0.02968009222103328,
              "mape": 1.5426688362674603,
              "confidence": 0.40591774357675003
            }
          },
          "dirhit": 52.94117647058824,
          "rmse": 0.04346199776991079,
          "mape": 373452.18483891065,
          "nrmse": 1.0338894216248629,
          "mask_count": 17,
          "mask_pct": 58.620689655172406
        },
        {
          "split_index": 2,
          "train_days": 291,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.16106163873131632,
              "rmse": 0.031522179861719596,
              "mape": 1.498493442293645,
              "confidence": 0.5007792743591879
            },
            "lightgbm": {
              "raw_r2": -0.2088718552892758,
              "rmse": 0.032213308585924715,
              "mape": 1.4584279755403884,
              "confidence": 0.46920133411596265
            },
            "catboost": {
              "raw_r2": -0.1177850430661304,
              "rmse": 0.031237526618956176,
              "mape": 1.5068144235686776,
              "confidence": 0.5319729735681163
            }
          },
          "dirhit": 33.33333333333333,
          "rmse": 0.03464361939175467,
          "mape": 145.25409205324928,
          "nrmse": 1.1131079588652504,
          "mask_count": 9,
          "mask_pct": 31.03448275862069
        },
        {
          "split_index": 3,
          "train_days": 321,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.12683758334390238,
              "rmse": 0.03101732920970712,
              "mape": 1.4957680768160702,
              "confidence": 0.5252650060897932
            },
            "lightgbm": {
              "raw_r2": -0.19242857517734038,
              "rmse": 0.03184081210914631,
              "mape": 1.503828790842993,
              "confidence": 0.4796920844042647
            },
            "catboost": {
              "raw_r2": -0.11244663480762056,
              "rmse": 0.030853582811049583,
              "mape": 1.5118245825694057,
              "confidence": 0.5359700875723763
            }
          },
          "dirhit": 70.0,
          "rmse": 0.02302640899994661,
          "mape": 111.83166225221888,
          "nrmse": 1.0444232156788076,
          "mask_count": 10,
          "mask_pct": 34.48275862068966
        },
        {
          "split_index": 4,
          "train_days": 351,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.18188606375746175,
              "rmse": 0.030654176494820346,
              "mape": 1.5913461630007173,
              "confidence": 0.48662567676246715
            },
            "lightgbm": {
              "raw_r2": -0.21109442845342796,
              "rmse": 0.030939107605188983,
              "mape": 1.520164365549099,
              "confidence": 0.4678141949804874
            },
            "catboost": {
              "raw_r2": -0.11997080273225576,
              "rmse": 0.030670278687066944,
              "mape": 1.5891471750210997,
              "confidence": 0.5303451110076872
            }
          },
          "dirhit": 100.0,
          "rmse": 0.02411631443756482,
          "mape": 1819554.9000933075,
          "nrmse": 0.9960322786776452,
          "mask_count": 1,
          "mask_pct": 3.4482758620689653
        }
      ],
      "avg_dirhit": 64.06862745098039,
      "avg_nrmse": 1.0468632187116413,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.18564180688847048,
          "rmse": 0.030647534951615055,
          "mape": 1.51097565442763,
          "confidence": 0.486253400428173
        },
        "lightgbm": {
          "raw_r2": -0.2505367521222347,
          "rmse": 0.03154380575203976,
          "mape": 1.4905228139930449,
          "confidence": 0.4494387925716943
        },
        "catboost": {
          "raw_r2": -0.16937250281217994,
          "rmse": 0.030610370084526495,
          "mape": 1.5376137543566608,
          "confidence": 0.5010514789312325
        }
      }
    }
  }
}