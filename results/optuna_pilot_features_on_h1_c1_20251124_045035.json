{
  "best_value": 43.20707072758422,
  "best_dirhit": 70.83333333333333,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_adaptive_k_1d": 1.1712883750350152,
    "ml_pattern_weight_scale_1d": 1.961765074090454,
    "enable_talib_patterns_short": true,
    "external_min_days": 49,
    "external_smooth_alpha": 0.33492570780235326,
    "regime_scale_low": 0.8318269929761535,
    "regime_scale_high": 1.0200075882129211,
    "yolo_min_conf": 0.6678541380084559,
    "smart_consensus_weight": 0.5336140879346506,
    "smart_performance_weight": 0.2456011888054028,
    "smart_sigma": 0.0012347352538190797,
    "smart_weight_xgb": 1.4380511139643906,
    "smart_weight_lgbm": 1.2885090571848765,
    "smart_weight_cat": 0.7709440006215803,
    "fingpt_confidence_threshold": 0.268414793860504,
    "xgb_n_estimators": 174,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.09139101996735946,
    "xgb_subsample": 0.7059926381944256,
    "xgb_colsample_bytree": 0.710451044393289,
    "xgb_reg_alpha": 0.002252802278867503,
    "xgb_reg_lambda": 2.8674959227814987,
    "xgb_min_child_weight": 15,
    "xgb_gamma": 0.016096195398983774,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 142,
    "lgb_n_estimators": 318,
    "lgb_max_depth": 6,
    "lgb_learning_rate": 0.012159673289837001,
    "lgb_num_leaves": 24,
    "lgb_subsample": 0.5122760631568959,
    "lgb_colsample_bytree": 0.6306620177695859,
    "lgb_reg_alpha": 0.0001489042621814671,
    "lgb_reg_lambda": 0.0006081389250713558,
    "lgb_min_data_in_leaf": 78,
    "lgb_feature_fraction_bynode": 0.9647682975374878,
    "lgb_bagging_freq": 0,
    "lgb_min_gain_to_split": 0.9689212522668093,
    "cat_iterations": 147,
    "cat_depth": 8,
    "cat_learning_rate": 0.01234703106082818,
    "cat_l2_leaf_reg": 9.01196267434223,
    "cat_subsample": 0.8879239364055469,
    "cat_rsm": 0.7144578950160503,
    "cat_border_count": 87,
    "cat_random_strength": 1.145138356773674,
    "cat_leaf_estimation_iterations": 1,
    "cat_bootstrap_type": "Bernoulli"
  },
  "best_trial": {
    "number": 1147,
    "value": 43.20707072758422,
    "state": "1"
  },
  "n_trials": 1306,
  "pruned_count": 0,
  "avg_trial_time": 200.01969898697317,
  "top_k_trials": [
    {
      "number": 1147,
      "value": 43.20707072758422,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 1.1712883750350152,
        "ml_pattern_weight_scale_1d": 1.961765074090454,
        "enable_talib_patterns_short": true,
        "external_min_days": 49,
        "external_smooth_alpha": 0.33492570780235326,
        "regime_scale_low": 0.8318269929761535,
        "regime_scale_high": 1.0200075882129211,
        "yolo_min_conf": 0.6678541380084559,
        "smart_consensus_weight": 0.5336140879346506,
        "smart_performance_weight": 0.2456011888054028,
        "smart_sigma": 0.0012347352538190797,
        "smart_weight_xgb": 1.4380511139643906,
        "smart_weight_lgbm": 1.2885090571848765,
        "smart_weight_cat": 0.7709440006215803,
        "fingpt_confidence_threshold": 0.268414793860504,
        "xgb_n_estimators": 174,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.09139101996735946,
        "xgb_subsample": 0.7059926381944256,
        "xgb_colsample_bytree": 0.710451044393289,
        "xgb_reg_alpha": 0.002252802278867503,
        "xgb_reg_lambda": 2.8674959227814987,
        "xgb_min_child_weight": 15,
        "xgb_gamma": 0.016096195398983774,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 142,
        "lgb_n_estimators": 318,
        "lgb_max_depth": 6,
        "lgb_learning_rate": 0.012159673289837001,
        "lgb_num_leaves": 24,
        "lgb_subsample": 0.5122760631568959,
        "lgb_colsample_bytree": 0.6306620177695859,
        "lgb_reg_alpha": 0.0001489042621814671,
        "lgb_reg_lambda": 0.0006081389250713558,
        "lgb_min_data_in_leaf": 78,
        "lgb_feature_fraction_bynode": 0.9647682975374878,
        "lgb_bagging_freq": 0,
        "lgb_min_gain_to_split": 0.9689212522668093,
        "cat_iterations": 147,
        "cat_depth": 8,
        "cat_learning_rate": 0.01234703106082818,
        "cat_l2_leaf_reg": 9.01196267434223,
        "cat_subsample": 0.8879239364055469,
        "cat_rsm": 0.7144578950160503,
        "cat_border_count": 87,
        "cat_random_strength": 1.145138356773674,
        "cat_leaf_estimation_iterations": 1,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 70.83333333333333,
        "avg_nrmse": 1.0627104342915188,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 399,
      "value": 43.19274269752173,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "n_seeds": 2,
        "ml_adaptive_k_1d": 1.1833522832534404,
        "ml_pattern_weight_scale_1d": 1.9289057789639312,
        "enable_talib_patterns_short": true,
        "external_min_days": 52,
        "external_smooth_alpha": 0.38508979659352355,
        "regime_scale_low": 0.8344789692368411,
        "regime_scale_high": 1.0368983317538414,
        "yolo_min_conf": 0.6121586502956599,
        "smart_consensus_weight": 0.4261164044085858,
        "smart_performance_weight": 0.24496314218673532,
        "smart_sigma": 0.005007724503735708,
        "smart_weight_xgb": 1.3380628463002933,
        "smart_weight_lgbm": 0.698039381080453,
        "smart_weight_cat": 0.5546426623602988,
        "fingpt_confidence_threshold": 0.2896530362110343,
        "xgb_n_estimators": 199,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.11436064462432656,
        "xgb_subsample": 0.7501974882966681,
        "xgb_colsample_bytree": 0.7543279600841392,
        "xgb_reg_alpha": 0.26259998601589263,
        "xgb_reg_lambda": 4.417595119522508,
        "xgb_min_child_weight": 14,
        "xgb_gamma": 0.0825838057184289,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 153,
        "lgb_n_estimators": 381,
        "lgb_max_depth": 4,
        "lgb_learning_rate": 0.022302792083761146,
        "lgb_num_leaves": 24,
        "lgb_subsample": 0.8565551209412574,
        "lgb_colsample_bytree": 0.6784396112566587,
        "lgb_reg_alpha": 3.196469731368343e-05,
        "lgb_reg_lambda": 0.0002674497437723651,
        "lgb_min_data_in_leaf": 71,
        "lgb_feature_fraction_bynode": 0.9429750464461143,
        "lgb_bagging_freq": 1,
        "lgb_min_gain_to_split": 0.9103736682052566,
        "cat_iterations": 128,
        "cat_depth": 8,
        "cat_learning_rate": 0.016249816412652045,
        "cat_l2_leaf_reg": 6.995698356900158,
        "cat_subsample": 0.7478305285904107,
        "cat_rsm": 0.8374872418306575,
        "cat_border_count": 62,
        "cat_random_strength": 4.056433499106655,
        "cat_leaf_estimation_iterations": 2,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 70.51948051948052,
        "avg_nrmse": 1.0284822776857732,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 446,
      "value": 42.82736952127303,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 1.212780483942224,
        "ml_pattern_weight_scale_1d": 1.8561010002942993,
        "enable_talib_patterns_short": true,
        "external_min_days": 26,
        "external_smooth_alpha": 0.1999761495835513,
        "regime_scale_low": 0.8308852529509946,
        "regime_scale_high": 1.0201550827187447,
        "yolo_min_conf": 0.6729619578775485,
        "smart_consensus_weight": 0.7820021202476602,
        "smart_performance_weight": 0.2293999026402662,
        "smart_sigma": 0.004425093783224762,
        "smart_weight_xgb": 1.3830044903730412,
        "smart_weight_lgbm": 0.6979796248182626,
        "smart_weight_cat": 0.6905519261672941,
        "fingpt_confidence_threshold": 0.292402337528203,
        "xgb_n_estimators": 164,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.017303384969913224,
        "xgb_subsample": 0.8384315195379656,
        "xgb_colsample_bytree": 0.6750540054373384,
        "xgb_reg_alpha": 0.004628643504658474,
        "xgb_reg_lambda": 3.940574790551349,
        "xgb_min_child_weight": 14,
        "xgb_gamma": 0.026437450184467807,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 347,
        "lgb_n_estimators": 372,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.019881169063896857,
        "lgb_num_leaves": 30,
        "lgb_subsample": 0.8897858469168552,
        "lgb_colsample_bytree": 0.6340918311873892,
        "lgb_reg_alpha": 0.00018319915013992547,
        "lgb_reg_lambda": 0.00022830368296038533,
        "lgb_min_data_in_leaf": 33,
        "lgb_feature_fraction_bynode": 0.9356233627214197,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.9683130190969556,
        "cat_iterations": 120,
        "cat_depth": 8,
        "cat_learning_rate": 0.019793874095759244,
        "cat_l2_leaf_reg": 8.86803735370205,
        "cat_subsample": 0.8259343513122814,
        "cat_rsm": 0.833743160630947,
        "cat_border_count": 77,
        "cat_random_strength": 3.535785201844348,
        "cat_leaf_estimation_iterations": 1,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 70.28985507246377,
        "avg_nrmse": 1.062588171575268,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_A1CAP_h1_c1",
  "symbols": [
    "A1CAP"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_adaptive_k_1d": 1.1712883750350152,
    "ml_pattern_weight_scale_1d": 1.961765074090454,
    "external_min_days": 49,
    "external_smooth_alpha": 0.33492570780235326,
    "regime_scale_low": 0.8318269929761535,
    "regime_scale_high": 1.0200075882129211,
    "yolo_min_conf": 0.6678541380084559,
    "smart_consensus_weight": 0.5336140879346506,
    "smart_performance_weight": 0.2456011888054028,
    "smart_sigma": 0.0012347352538190797,
    "smart_weight_xgb": 1.4380511139643906,
    "smart_weight_lgbm": 1.2885090571848765,
    "smart_weight_cat": 0.7709440006215803,
    "fingpt_confidence_threshold": 0.268414793860504
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 174,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.09139101996735946,
    "xgb_subsample": 0.7059926381944256,
    "xgb_colsample_bytree": 0.710451044393289,
    "xgb_reg_alpha": 0.002252802278867503,
    "xgb_reg_lambda": 2.8674959227814987,
    "xgb_min_child_weight": 15,
    "xgb_gamma": 0.016096195398983774,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 142,
    "lgb_n_estimators": 318,
    "lgb_max_depth": 6,
    "lgb_learning_rate": 0.012159673289837001,
    "lgb_num_leaves": 24,
    "lgb_subsample": 0.5122760631568959,
    "lgb_colsample_bytree": 0.6306620177695859,
    "lgb_reg_alpha": 0.0001489042621814671,
    "lgb_reg_lambda": 0.0006081389250713558,
    "lgb_min_data_in_leaf": 78,
    "lgb_feature_fraction_bynode": 0.9647682975374878,
    "lgb_bagging_freq": 0,
    "lgb_min_gain_to_split": 0.9689212522668093,
    "cat_iterations": 147,
    "cat_depth": 8,
    "cat_learning_rate": 0.01234703106082818,
    "cat_l2_leaf_reg": 9.01196267434223,
    "cat_subsample": 0.8879239364055469,
    "cat_rsm": 0.7144578950160503,
    "cat_border_count": 87,
    "cat_random_strength": 1.145138356773674,
    "cat_leaf_estimation_iterations": 1,
    "cat_bootstrap_type": "Bernoulli"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "A1CAP_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.017391360723376954,
              "rmse": 0.025770274237941915,
              "mape": 1.5944104549013447,
              "confidence": 0.610878416636929
            },
            "lightgbm": {
              "raw_r2": -0.013564767331687358,
              "rmse": 0.02557291928512329,
              "mape": 1.6251094006034754,
              "confidence": 0.6139828495271169
            },
            "catboost": {
              "raw_r2": -0.007186494609119946,
              "rmse": 0.025513375392299628,
              "mape": 1.6285464028175134,
              "confidence": 0.6191616013003549
            }
          },
          "dirhit": 80.0,
          "rmse": 0.04591581960145873,
          "mape": 120.28423414262058,
          "nrmse": 1.0147864339706025,
          "mask_count": 5,
          "mask_pct": 17.24137931034483
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0022200355420826843,
              "rmse": 0.02810781092539546,
              "mape": 1.6085718911066045,
              "confidence": 0.6231962396427222
            },
            "lightgbm": {
              "raw_r2": -0.014037898116229686,
              "rmse": 0.028061516928002826,
              "mape": 1.6570805252793674,
              "confidence": 0.6135988880891299
            },
            "catboost": {
              "raw_r2": -0.008282774482672894,
              "rmse": 0.028012442744180847,
              "mape": 1.651090677423687,
              "confidence": 0.6182712074229679
            }
          },
          "dirhit": 20.0,
          "rmse": 0.04399732775482308,
          "mape": 107.8194960670975,
          "nrmse": 1.0059374020386833,
          "mask_count": 5,
          "mask_pct": 17.24137931034483
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.005405053715135481,
              "rmse": 0.029558475709860456,
              "mape": 1.647525611593777,
              "confidence": 0.6206086611266022
            },
            "lightgbm": {
              "raw_r2": -0.01717474872596969,
              "rmse": 0.029745362899785213,
              "mape": 1.6666083215183944,
              "confidence": 0.6110540857198178
            },
            "catboost": {
              "raw_r2": -0.013870219720332496,
              "rmse": 0.029724183495818554,
              "mape": 1.6562131805495695,
              "confidence": 0.6137349611193498
            }
          },
          "dirhit": 52.63157894736842,
          "rmse": 0.05061059662638447,
          "mape": 138.6453258710857,
          "nrmse": 1.0811721976221444,
          "mask_count": 19,
          "mask_pct": 65.51724137931035
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.018778090050943625,
              "rmse": 0.031408628182385656,
              "mape": 1.650400419935981,
              "confidence": 0.609754000175135
            },
            "lightgbm": {
              "raw_r2": -0.019923924798675774,
              "rmse": 0.031328718886059814,
              "mape": 1.7009375725930165,
              "confidence": 0.6088251855542877
            },
            "catboost": {
              "raw_r2": -0.013783777844659747,
              "rmse": 0.03127202222673622,
              "mape": 1.6996178512282965,
              "confidence": 0.6138051112864036
            }
          },
          "dirhit": 35.0,
          "rmse": 0.034096863304297086,
          "mape": 139.63140426026825,
          "nrmse": 1.1536931679544347,
          "mask_count": 20,
          "mask_pct": 68.96551724137932
        }
      ],
      "avg_dirhit": 46.9078947368421,
      "avg_nrmse": 1.0638973003964662,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.010948635007884686,
          "rmse": 0.028711297263895874,
          "mape": 1.6252270943844267,
          "confidence": 0.6161093293953471
        },
        "lightgbm": {
          "raw_r2": -0.016175334743140625,
          "rmse": 0.028677129499742784,
          "mape": 1.6624339549985634,
          "confidence": 0.611865252222588
        },
        "catboost": {
          "raw_r2": -0.010780816664196271,
          "rmse": 0.028630505964758815,
          "mape": 1.6588670280047666,
          "confidence": 0.616243220282269
        }
      }
    }
  }
}