{
  "best_value": 51.16896926630967,
  "best_dirhit": 81.66666666666666,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.419383348939544,
    "ml_loss_threshold": 0.0022744286994229104,
    "ml_dir_penalty": 1.0665047836808372,
    "ml_adaptive_k_1d": 1.5738295112657967,
    "ml_pattern_weight_scale_1d": 1.823558129570197,
    "enable_talib_patterns_short": false,
    "external_min_days": 28,
    "external_smooth_alpha": 0.14991990142869713,
    "regime_scale_low": 0.8112002801215366,
    "regime_scale_high": 1.1115205590248056,
    "smart_consensus_weight": 0.66537087026941,
    "smart_performance_weight": 0.3815187695000105,
    "smart_sigma": 0.0010864072514670156,
    "smart_weight_xgb": 1.0994227688156424,
    "smart_weight_lgbm": 0.9180142944035243,
    "smart_weight_cat": 0.8956099032704596,
    "xgb_n_estimators": 599,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.08588745439702959,
    "xgb_subsample": 0.5666251942377805,
    "xgb_colsample_bytree": 0.5527858566295714,
    "xgb_reg_alpha": 1.1703956437358478e-06,
    "xgb_reg_lambda": 0.010178104390561608,
    "xgb_min_child_weight": 10,
    "xgb_gamma": 0.29052819145864306,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 495,
    "lgb_n_estimators": 236,
    "lgb_max_depth": 2,
    "lgb_learning_rate": 0.010945491120788176,
    "lgb_num_leaves": 32,
    "lgb_subsample": 0.7612872208412946,
    "lgb_colsample_bytree": 0.5001263880984779,
    "lgb_reg_alpha": 0.0013681179538264367,
    "lgb_reg_lambda": 0.1475713351581712,
    "lgb_min_data_in_leaf": 19,
    "lgb_feature_fraction_bynode": 0.9613250008922481,
    "lgb_bagging_freq": 6,
    "lgb_min_gain_to_split": 0.30282601402366105,
    "cat_iterations": 300,
    "cat_depth": 8,
    "cat_learning_rate": 0.014534310698410205,
    "cat_l2_leaf_reg": 8.794347174453604,
    "cat_subsample": 0.6638893250590266,
    "cat_rsm": 0.6174594464613371,
    "cat_border_count": 85,
    "cat_random_strength": 0.5857069637839374,
    "cat_leaf_estimation_iterations": 5,
    "cat_bootstrap_type": "Bayesian"
  },
  "best_trial": {
    "number": 257,
    "value": 51.16896926630967,
    "state": "1"
  },
  "best_trial_number": 257,
  "best_trial_seed": 299,
  "n_trials": 1363,
  "pruned_count": 0,
  "avg_trial_time": 267.37463335766967,
  "top_k_trials": [
    {
      "number": 257,
      "value": 51.16896926630967,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.419383348939544,
        "ml_loss_threshold": 0.0022744286994229104,
        "ml_dir_penalty": 1.0665047836808372,
        "ml_adaptive_k_1d": 1.5738295112657967,
        "ml_pattern_weight_scale_1d": 1.823558129570197,
        "enable_talib_patterns_short": false,
        "external_min_days": 28,
        "external_smooth_alpha": 0.14991990142869713,
        "regime_scale_low": 0.8112002801215366,
        "regime_scale_high": 1.1115205590248056,
        "smart_consensus_weight": 0.66537087026941,
        "smart_performance_weight": 0.3815187695000105,
        "smart_sigma": 0.0010864072514670156,
        "smart_weight_xgb": 1.0994227688156424,
        "smart_weight_lgbm": 0.9180142944035243,
        "smart_weight_cat": 0.8956099032704596,
        "xgb_n_estimators": 599,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.08588745439702959,
        "xgb_subsample": 0.5666251942377805,
        "xgb_colsample_bytree": 0.5527858566295714,
        "xgb_reg_alpha": 1.1703956437358478e-06,
        "xgb_reg_lambda": 0.010178104390561608,
        "xgb_min_child_weight": 10,
        "xgb_gamma": 0.29052819145864306,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 495,
        "lgb_n_estimators": 236,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.010945491120788176,
        "lgb_num_leaves": 32,
        "lgb_subsample": 0.7612872208412946,
        "lgb_colsample_bytree": 0.5001263880984779,
        "lgb_reg_alpha": 0.0013681179538264367,
        "lgb_reg_lambda": 0.1475713351581712,
        "lgb_min_data_in_leaf": 19,
        "lgb_feature_fraction_bynode": 0.9613250008922481,
        "lgb_bagging_freq": 6,
        "lgb_min_gain_to_split": 0.30282601402366105,
        "cat_iterations": 300,
        "cat_depth": 8,
        "cat_learning_rate": 0.014534310698410205,
        "cat_l2_leaf_reg": 8.794347174453604,
        "cat_subsample": 0.6638893250590266,
        "cat_rsm": 0.6174594464613371,
        "cat_border_count": 85,
        "cat_random_strength": 0.5857069637839374,
        "cat_leaf_estimation_iterations": 5,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 81.66666666666666,
        "avg_nrmse": 0.9996162333928315,
        "model_choice": "all",
        "symbol_metrics": {
          "BURCE_1d": {
            "symbol": "BURCE",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 453,
                "test_days": 30,
                "train_end_idx": 453,
                "test_end_idx": 483,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0454938052245882,
                    "rmse": 0.03633922708397974,
                    "mape": 1.5392051596241476,
                    "confidence": 0.5881948447463559
                  },
                  "lightgbm": {
                    "raw_r2": -0.010264144370609444,
                    "rmse": 0.03590433542994514,
                    "mape": 1.7469062752674238,
                    "confidence": 0.6166622126353747
                  },
                  "catboost": {
                    "raw_r2": -0.002551653079889656,
                    "rmse": 0.03579512285910393,
                    "mape": 1.7359469518436996,
                    "confidence": 0.6229268099941845
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.032912774215002924,
                "mape": 92.74694710002251,
                "nrmse": 0.9741614135246232,
                "mask_count": 2,
                "mask_pct": 6.896551724137931,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.0454938052245882,
                    "lightgbm": -0.010264144370609444,
                    "catboost": -0.002551653079889656
                  },
                  "ensemble_weights": {
                    "xgboost": 0.14067995007294232,
                    "lightgbm": 0.7422323875066764,
                    "catboost": 0.11708766242038136
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 2,
                "train_days": 483,
                "test_days": 30,
                "train_end_idx": 483,
                "test_end_idx": 513,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.03571922089987941,
                    "rmse": 0.0361871468675727,
                    "mape": 1.5199460270935807,
                    "confidence": 0.5960550292530071
                  },
                  "lightgbm": {
                    "raw_r2": -0.0038434814001030806,
                    "rmse": 0.035687926410688596,
                    "mape": 1.711537263372722,
                    "confidence": 0.6218772674661908
                  },
                  "catboost": {
                    "raw_r2": -0.0020007503505757493,
                    "rmse": 0.035658817371604236,
                    "mape": 1.7265643304872826,
                    "confidence": 0.6233744038969353
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.021472606317703598,
                "mape": 441679.6751233846,
                "nrmse": 0.9710896781311278,
                "mask_count": 2,
                "mask_pct": 6.896551724137931,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.03571922089987941,
                    "lightgbm": -0.0038434814001030806,
                    "catboost": -0.0020007503505757493
                  },
                  "ensemble_weights": {
                    "xgboost": 0.14314433671714852,
                    "lightgbm": 0.12144527319703652,
                    "catboost": 0.735410390085815
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 3,
                "train_days": 513,
                "test_days": 30,
                "train_end_idx": 513,
                "test_end_idx": 543,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.031260320319522826,
                    "rmse": 0.03515104452431924,
                    "mape": 1.5148266341535734,
                    "confidence": 0.5996525722821909
                  },
                  "lightgbm": {
                    "raw_r2": -0.003344361709190169,
                    "rmse": 0.03467962525925708,
                    "mape": 1.7377782403210167,
                    "confidence": 0.6222827694267357
                  },
                  "catboost": {
                    "raw_r2": -0.0029605570693414704,
                    "rmse": 0.034670934892200564,
                    "mape": 1.7567734743853813,
                    "confidence": 0.6225945913042543
                  }
                },
                "dirhit": 66.66666666666666,
                "rmse": 0.05341703733150715,
                "mape": 105.44469746617855,
                "nrmse": 1.0564891633339735,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.031260320319522826,
                    "lightgbm": -0.003344361709190169,
                    "catboost": -0.0029605570693414704
                  },
                  "ensemble_weights": {
                    "xgboost": 0.7896796611639907,
                    "lightgbm": 0.10644916436935527,
                    "catboost": 0.103871174466654
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 4,
                "train_days": 543,
                "test_days": 30,
                "train_end_idx": 543,
                "test_end_idx": 573,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.039443566993729716,
                    "rmse": 0.036384151824440485,
                    "mape": 1.5044374146243733,
                    "confidence": 0.5930555742959448
                  },
                  "lightgbm": {
                    "raw_r2": -0.01227454909081338,
                    "rmse": 0.035995498748091125,
                    "mape": 1.7220697381449672,
                    "confidence": 0.6150300580774166
                  },
                  "catboost": {
                    "raw_r2": 8.412903321926753e-05,
                    "rmse": 0.03580959403243488,
                    "mape": 1.6798404760964314,
                    "confidence": 0.6250683548384828
                  }
                },
                "dirhit": 60.0,
                "rmse": 0.060615114765720915,
                "mape": 5707125.954196498,
                "nrmse": 0.9967246785816015,
                "mask_count": 25,
                "mask_pct": 86.20689655172413,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.039443566993729716,
                    "lightgbm": -0.01227454909081338,
                    "catboost": 8.412903321926753e-05
                  },
                  "ensemble_weights": {
                    "xgboost": 0.375991982144339,
                    "lightgbm": 0.315505820675439,
                    "catboost": 0.308502197180222
                  },
                  "source": "model"
                }
              }
            ],
            "avg_dirhit": 81.66666666666666,
            "avg_nrmse": 0.9996162333928315,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.03797922835943004,
                "rmse": 0.03601539257507804,
                "mape": 1.5196038088739188,
                "confidence": 0.5942395051443746
              },
              "lightgbm": {
                "raw_r2": -0.007431634142679018,
                "rmse": 0.03556684646199548,
                "mape": 1.7295728792765326,
                "confidence": 0.6189630769014294
              },
              "catboost": {
                "raw_r2": -0.001857207866646902,
                "rmse": 0.0354836172888359,
                "mape": 1.7247813082031986,
                "confidence": 0.6234910400084642
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 640,
      "value": 49.94219203821312,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "cat",
        "ml_loss_mse_weight": 0.7227176669057421,
        "ml_loss_threshold": 0.0024688441715750983,
        "ml_dir_penalty": 1.1320340199934584,
        "ml_adaptive_k_1d": 1.632482584875058,
        "ml_pattern_weight_scale_1d": 1.8365825341328132,
        "enable_talib_patterns_short": false,
        "external_min_days": 30,
        "external_smooth_alpha": 0.19324928588540977,
        "cat_iterations": 269,
        "cat_depth": 8,
        "cat_learning_rate": 0.016951411362800217,
        "cat_l2_leaf_reg": 8.330684432236295,
        "cat_subsample": 0.5156091704620287,
        "cat_rsm": 0.7265834093562048,
        "cat_border_count": 144,
        "cat_random_strength": 0.617391902697564,
        "cat_leaf_estimation_iterations": 5,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 80.0,
        "avg_nrmse": 1.0096346602978132,
        "model_choice": "cat",
        "symbol_metrics": {
          "BURCE_1d": {
            "symbol": "BURCE",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 453,
                "test_days": 30,
                "train_end_idx": 453,
                "test_end_idx": 483,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.04754911429934946,
                    "rmse": 0.03636719379947271,
                    "mape": 1.5344603967499983,
                    "confidence": 0.5865472959462343
                  },
                  "catboost": {
                    "raw_r2": -0.005358821217377481,
                    "rmse": 0.035827686087979385,
                    "mape": 1.7362020960552564,
                    "confidence": 0.62064621823151
                  }
                },
                "dirhit": null,
                "rmse": 0.03289932099685087,
                "mape": 95.92824575330263,
                "nrmse": 0.9737632214449811,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 2,
                "train_days": 483,
                "test_days": 30,
                "train_end_idx": 483,
                "test_end_idx": 513,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.037616872477043595,
                    "rmse": 0.03621835212316493,
                    "mape": 1.5152420692531634,
                    "confidence": 0.594526074629479
                  },
                  "catboost": {
                    "raw_r2": 0.0016974386570837163,
                    "rmse": 0.03561307778641789,
                    "mape": 1.7313946463849574,
                    "confidence": 0.6263791606301972
                  }
                },
                "dirhit": null,
                "rmse": 0.021741061212698264,
                "mape": 536514.2587523996,
                "nrmse": 0.9832304389552184,
                "mask_count": 9,
                "mask_pct": 31.03448275862069,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 3,
                "train_days": 513,
                "test_days": 30,
                "train_end_idx": 513,
                "test_end_idx": 543,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.03323392325384197,
                    "rmse": 0.03518708211836228,
                    "mape": 1.509726664904778,
                    "confidence": 0.5980593999334933
                  },
                  "catboost": {
                    "raw_r2": 0.002171680814743097,
                    "rmse": 0.034592985150419815,
                    "mape": 1.7273586803229868,
                    "confidence": 0.6267644733253361
                  }
                },
                "dirhit": null,
                "rmse": 0.05471141050022608,
                "mape": 105.35886308175515,
                "nrmse": 1.082089445460725,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 4,
                "train_days": 543,
                "test_days": 30,
                "train_end_idx": 543,
                "test_end_idx": 573,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.04098432114732723,
                    "rmse": 0.03641004344336387,
                    "mape": 1.5000634964178297,
                    "confidence": 0.5918162811605441
                  },
                  "catboost": {
                    "raw_r2": -0.006352072969521301,
                    "rmse": 0.035910996873292814,
                    "mape": 1.7158527162007484,
                    "confidence": 0.6198393745074833
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.06062647699036305,
                "mape": 4532084.277064764,
                "nrmse": 0.9994555353303282,
                "mask_count": 15,
                "mask_pct": 51.724137931034484,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              }
            ],
            "avg_dirhit": 80.0,
            "avg_nrmse": 1.0096346602978132,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.039846057794390564,
                "rmse": 0.036045667871090946,
                "mape": 1.5148731568314424,
                "confidence": 0.5927372629174377
              },
              "catboost": {
                "raw_r2": -0.0019604436787679924,
                "rmse": 0.035486186474527476,
                "mape": 1.7277020347409873,
                "confidence": 0.6234073066736316
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 213,
      "value": 49.63845824784638,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.7176736139836547,
        "ml_loss_threshold": 0.0027217246902395313,
        "ml_dir_penalty": 1.1887204370497884,
        "ml_adaptive_k_1d": 1.7427114090625186,
        "ml_pattern_weight_scale_1d": 1.8097720474833674,
        "enable_talib_patterns_short": false,
        "external_min_days": 30,
        "external_smooth_alpha": 0.181587356372653,
        "xgb_n_estimators": 585,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.07539771209017848,
        "xgb_subsample": 0.5847170927197931,
        "xgb_colsample_bytree": 0.8054074057422231,
        "xgb_reg_alpha": 4.679700352731481e-06,
        "xgb_reg_lambda": 0.004503266769510533,
        "xgb_min_child_weight": 11,
        "xgb_gamma": 0.29959345472754445,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 512,
        "lgb_n_estimators": 269,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.01094916125871608,
        "lgb_num_leaves": 37,
        "lgb_subsample": 0.7506386249304275,
        "lgb_colsample_bytree": 0.5102462951081159,
        "lgb_reg_alpha": 4.8225148400098064e-05,
        "lgb_reg_lambda": 0.3194429592770686,
        "lgb_min_data_in_leaf": 22,
        "lgb_feature_fraction_bynode": 0.5764149149285616,
        "lgb_bagging_freq": 6,
        "lgb_min_gain_to_split": 0.19028082238024963,
        "cat_iterations": 308,
        "cat_depth": 8,
        "cat_learning_rate": 0.01566333691954047,
        "cat_l2_leaf_reg": 8.034896451261409,
        "cat_subsample": 0.9385158268008501,
        "cat_rsm": 0.7311661520911519,
        "cat_border_count": 107,
        "cat_random_strength": 0.6131833186172265,
        "cat_leaf_estimation_iterations": 4,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 79.42193675889328,
        "avg_nrmse": 0.9928162472298198,
        "model_choice": "all",
        "symbol_metrics": {
          "BURCE_1d": {
            "symbol": "BURCE",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 453,
                "test_days": 30,
                "train_end_idx": 453,
                "test_end_idx": 483,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.102874747208708,
                    "rmse": 0.037121020364974236,
                    "mape": 1.4776738515464525,
                    "confidence": 0.5432097074643558
                  },
                  "lightgbm": {
                    "raw_r2": -0.010264144370609444,
                    "rmse": 0.03590433542994514,
                    "mape": 1.7469062752674238,
                    "confidence": 0.6166622126353747
                  },
                  "catboost": {
                    "raw_r2": -0.0053009570718391226,
                    "rmse": 0.03581709367371669,
                    "mape": 1.7520752580658685,
                    "confidence": 0.6206932245033032
                  }
                },
                "dirhit": 81.81818181818183,
                "rmse": 0.03246836002138804,
                "mape": 96.33290805348662,
                "nrmse": 0.961007519045411,
                "mask_count": 11,
                "mask_pct": 37.93103448275862,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 2,
                "train_days": 483,
                "test_days": 30,
                "train_end_idx": 483,
                "test_end_idx": 513,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0886215372874984,
                    "rmse": 0.03702194909433086,
                    "mape": 1.4615501586212867,
                    "confidence": 0.5541504676269555
                  },
                  "lightgbm": {
                    "raw_r2": -0.0038434814001030806,
                    "rmse": 0.035687926410688596,
                    "mape": 1.711537263372722,
                    "confidence": 0.6218772674661908
                  },
                  "catboost": {
                    "raw_r2": -0.002048241934524353,
                    "rmse": 0.035649515693822686,
                    "mape": 1.7074930174286729,
                    "confidence": 0.6233358179734538
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.02103094784044951,
                "mape": 513544.37826809817,
                "nrmse": 0.9511158574325688,
                "mask_count": 7,
                "mask_pct": 24.137931034482758,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 3,
                "train_days": 513,
                "test_days": 30,
                "train_end_idx": 513,
                "test_end_idx": 543,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.08270759804468757,
                    "rmse": 0.03599293403669038,
                    "mape": 1.4482864974805496,
                    "confidence": 0.5587416530726723
                  },
                  "lightgbm": {
                    "raw_r2": -0.003344361709190169,
                    "rmse": 0.03467962525925708,
                    "mape": 1.7377782403210167,
                    "confidence": 0.6222827694267357
                  },
                  "catboost": {
                    "raw_r2": 0.0059349328257113365,
                    "rmse": 0.03455617456755267,
                    "mape": 1.6980596936812897,
                    "confidence": 0.6298217790936104
                  }
                },
                "dirhit": 75.0,
                "rmse": 0.05377331943932775,
                "mape": 106.99252522230218,
                "nrmse": 1.0635357575444733,
                "mask_count": 8,
                "mask_pct": 27.586206896551722,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 4,
                "train_days": 543,
                "test_days": 30,
                "train_end_idx": 543,
                "test_end_idx": 573,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.08841694956007433,
                    "rmse": 0.0371344702567885,
                    "mape": 1.4421077181108057,
                    "confidence": 0.5543088131043481
                  },
                  "lightgbm": {
                    "raw_r2": -0.01227454909081338,
                    "rmse": 0.035995498748091125,
                    "mape": 1.7220697381449672,
                    "confidence": 0.6150300580774166
                  },
                  "catboost": {
                    "raw_r2": -0.0028312195971747314,
                    "rmse": 0.0358320703928914,
                    "mape": 1.6939736701678085,
                    "confidence": 0.6226996724916992
                  }
                },
                "dirhit": 60.86956521739131,
                "rmse": 0.060799029036185954,
                "mape": 5516375.788550337,
                "nrmse": 0.995605854896826,
                "mask_count": 23,
                "mask_pct": 79.3103448275862,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              }
            ],
            "avg_dirhit": 79.42193675889328,
            "avg_nrmse": 0.9928162472298198,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.09065520802524207,
                "rmse": 0.036817593438195996,
                "mape": 1.4574045564397735,
                "confidence": 0.5526026603170829
              },
              "lightgbm": {
                "raw_r2": -0.007431634142679018,
                "rmse": 0.03556684646199548,
                "mape": 1.7295728792765326,
                "confidence": 0.6189630769014294
              },
              "catboost": {
                "raw_r2": -0.0010613714444567177,
                "rmse": 0.03546371358199586,
                "mape": 1.71290040983591,
                "confidence": 0.6241376235155166
              }
            }
          }
        }
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_BURCE_h1_c2",
  "symbols": [
    "BURCE"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.419383348939544,
    "ml_loss_threshold": 0.0022744286994229104,
    "ml_dir_penalty": 1.0665047836808372,
    "ml_adaptive_k_1d": 1.5738295112657967,
    "ml_pattern_weight_scale_1d": 1.823558129570197,
    "external_min_days": 28,
    "external_smooth_alpha": 0.14991990142869713,
    "regime_scale_low": 0.8112002801215366,
    "regime_scale_high": 1.1115205590248056,
    "smart_consensus_weight": 0.66537087026941,
    "smart_performance_weight": 0.3815187695000105,
    "smart_sigma": 0.0010864072514670156,
    "smart_weight_xgb": 1.0994227688156424,
    "smart_weight_lgbm": 0.9180142944035243,
    "smart_weight_cat": 0.8956099032704596
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 599,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.08588745439702959,
    "xgb_subsample": 0.5666251942377805,
    "xgb_colsample_bytree": 0.5527858566295714,
    "xgb_reg_alpha": 1.1703956437358478e-06,
    "xgb_reg_lambda": 0.010178104390561608,
    "xgb_min_child_weight": 10,
    "xgb_gamma": 0.29052819145864306,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 495,
    "lgb_n_estimators": 236,
    "lgb_max_depth": 2,
    "lgb_learning_rate": 0.010945491120788176,
    "lgb_num_leaves": 32,
    "lgb_subsample": 0.7612872208412946,
    "lgb_colsample_bytree": 0.5001263880984779,
    "lgb_reg_alpha": 0.0013681179538264367,
    "lgb_reg_lambda": 0.1475713351581712,
    "lgb_min_data_in_leaf": 19,
    "lgb_feature_fraction_bynode": 0.9613250008922481,
    "lgb_bagging_freq": 6,
    "lgb_min_gain_to_split": 0.30282601402366105,
    "cat_iterations": 300,
    "cat_depth": 8,
    "cat_learning_rate": 0.014534310698410205,
    "cat_l2_leaf_reg": 8.794347174453604,
    "cat_subsample": 0.6638893250590266,
    "cat_rsm": 0.6174594464613371,
    "cat_border_count": 85,
    "cat_random_strength": 0.5857069637839374,
    "cat_leaf_estimation_iterations": 5,
    "cat_bootstrap_type": "Bayesian"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "BURCE_1d": {
      "symbol": "BURCE",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 453,
          "test_days": 30,
          "train_end_idx": 453,
          "test_end_idx": 483,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-12T00:00:00",
          "test_start": "2025-06-13T00:00:00",
          "test_end": "2025-07-25T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0454938052245882,
              "rmse": 0.03633922708397974,
              "mape": 1.5392051596241476,
              "confidence": 0.5881948447463559
            },
            "lightgbm": {
              "raw_r2": -0.010264144370609444,
              "rmse": 0.03590433542994514,
              "mape": 1.7469062752674238,
              "confidence": 0.6166622126353747
            },
            "catboost": {
              "raw_r2": -0.002551653079889656,
              "rmse": 0.03579512285910393,
              "mape": 1.7359469518436996,
              "confidence": 0.6229268099941845
            }
          },
          "dirhit": 100.0,
          "rmse": 0.032912774215002924,
          "mape": 92.74694710002251,
          "nrmse": 0.9741614135246232,
          "mask_count": 2,
          "mask_pct": 6.896551724137931,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.0454938052245882,
              "lightgbm": -0.010264144370609444,
              "catboost": -0.002551653079889656
            },
            "ensemble_weights": {
              "xgboost": 0.14067995007294232,
              "lightgbm": 0.7422323875066764,
              "catboost": 0.11708766242038136
            },
            "source": "model"
          }
        },
        {
          "split_index": 2,
          "train_days": 483,
          "test_days": 30,
          "train_end_idx": 483,
          "test_end_idx": 513,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-25T00:00:00",
          "test_start": "2025-07-28T00:00:00",
          "test_end": "2025-09-05T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.03571922089987941,
              "rmse": 0.0361871468675727,
              "mape": 1.5199460270935807,
              "confidence": 0.5960550292530071
            },
            "lightgbm": {
              "raw_r2": -0.0038434814001030806,
              "rmse": 0.035687926410688596,
              "mape": 1.711537263372722,
              "confidence": 0.6218772674661908
            },
            "catboost": {
              "raw_r2": -0.0020007503505757493,
              "rmse": 0.035658817371604236,
              "mape": 1.7265643304872826,
              "confidence": 0.6233744038969353
            }
          },
          "dirhit": 100.0,
          "rmse": 0.021472606317703598,
          "mape": 441679.6751233846,
          "nrmse": 0.9710896781311278,
          "mask_count": 2,
          "mask_pct": 6.896551724137931,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.03571922089987941,
              "lightgbm": -0.0038434814001030806,
              "catboost": -0.0020007503505757493
            },
            "ensemble_weights": {
              "xgboost": 0.14314433671714852,
              "lightgbm": 0.12144527319703652,
              "catboost": 0.735410390085815
            },
            "source": "model"
          }
        },
        {
          "split_index": 3,
          "train_days": 513,
          "test_days": 30,
          "train_end_idx": 513,
          "test_end_idx": 543,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-05T00:00:00",
          "test_start": "2025-09-08T00:00:00",
          "test_end": "2025-10-17T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.031260320319522826,
              "rmse": 0.03515104452431924,
              "mape": 1.5148266341535734,
              "confidence": 0.5996525722821909
            },
            "lightgbm": {
              "raw_r2": -0.003344361709190169,
              "rmse": 0.03467962525925708,
              "mape": 1.7377782403210167,
              "confidence": 0.6222827694267357
            },
            "catboost": {
              "raw_r2": -0.0029605570693414704,
              "rmse": 0.034670934892200564,
              "mape": 1.7567734743853813,
              "confidence": 0.6225945913042543
            }
          },
          "dirhit": 66.66666666666666,
          "rmse": 0.05341703733150715,
          "mape": 105.44469746617855,
          "nrmse": 1.0564891633339735,
          "mask_count": 6,
          "mask_pct": 20.689655172413794,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.031260320319522826,
              "lightgbm": -0.003344361709190169,
              "catboost": -0.0029605570693414704
            },
            "ensemble_weights": {
              "xgboost": 0.7896796611639907,
              "lightgbm": 0.10644916436935527,
              "catboost": 0.103871174466654
            },
            "source": "model"
          }
        },
        {
          "split_index": 4,
          "train_days": 543,
          "test_days": 30,
          "train_end_idx": 543,
          "test_end_idx": 573,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-17T00:00:00",
          "test_start": "2025-10-20T00:00:00",
          "test_end": "2025-11-28T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.039443566993729716,
              "rmse": 0.036384151824440485,
              "mape": 1.5044374146243733,
              "confidence": 0.5930555742959448
            },
            "lightgbm": {
              "raw_r2": -0.01227454909081338,
              "rmse": 0.035995498748091125,
              "mape": 1.7220697381449672,
              "confidence": 0.6150300580774166
            },
            "catboost": {
              "raw_r2": 8.412903321926753e-05,
              "rmse": 0.03580959403243488,
              "mape": 1.6798404760964314,
              "confidence": 0.6250683548384828
            }
          },
          "dirhit": 60.0,
          "rmse": 0.060615114765720915,
          "mape": 5707125.954196498,
          "nrmse": 0.9967246785816015,
          "mask_count": 25,
          "mask_pct": 86.20689655172413,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.039443566993729716,
              "lightgbm": -0.01227454909081338,
              "catboost": 8.412903321926753e-05
            },
            "ensemble_weights": {
              "xgboost": 0.375991982144339,
              "lightgbm": 0.315505820675439,
              "catboost": 0.308502197180222
            },
            "source": "model"
          }
        }
      ],
      "avg_dirhit": 81.66666666666666,
      "avg_nrmse": 0.9996162333928315,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.03797922835943004,
          "rmse": 0.03601539257507804,
          "mape": 1.5196038088739188,
          "confidence": 0.5942395051443746
        },
        "lightgbm": {
          "raw_r2": -0.007431634142679018,
          "rmse": 0.03556684646199548,
          "mape": 1.7295728792765326,
          "confidence": 0.6189630769014294
        },
        "catboost": {
          "raw_r2": -0.001857207866646902,
          "rmse": 0.0354836172888359,
          "mape": 1.7247813082031986,
          "confidence": 0.6234910400084642
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 0,
    "min_mask_pct": 0.0,
    "best_trial_number": 257,
    "best_trial_seed": 299,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "split_generation": {
      "type": "generate_walkforward_splits",
      "n_splits": 4
    },
    "symbol_specs": {
      "BURCE_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 453,
            "test_end_idx": 483,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-12T00:00:00",
            "test_start": "2025-06-13T00:00:00",
            "test_end": "2025-07-25T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 483,
            "test_end_idx": 513,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-25T00:00:00",
            "test_start": "2025-07-28T00:00:00",
            "test_end": "2025-09-05T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 513,
            "test_end_idx": 543,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-05T00:00:00",
            "test_start": "2025-09-08T00:00:00",
            "test_end": "2025-10-17T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 543,
            "test_end_idx": 573,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-17T00:00:00",
            "test_start": "2025-10-20T00:00:00",
            "test_end": "2025-11-28T00:00:00"
          }
        ]
      }
    }
  }
}