{
  "best_value": 45.1698706622969,
  "best_dirhit": 73.68421052631578,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "model_choice": "all",
    "meta_stacking_alpha": 0.4635716335442988,
    "ml_adaptive_k_1d": 1.1529845544163568,
    "ml_pattern_weight_scale_1d": 1.0742695433171472,
    "enable_talib_patterns_short": true,
    "external_min_days": 58,
    "external_smooth_alpha": 0.11043983664477852,
    "regime_scale_low": 0.82863947933467,
    "regime_scale_high": 1.0469123318285638,
    "yolo_min_conf": 0.3558664168305301,
    "fingpt_confidence_threshold": 0.4573563380302905,
    "xgb_n_estimators": 582,
    "xgb_max_depth": 2,
    "xgb_learning_rate": 0.05684177764368198,
    "xgb_subsample": 0.6117366505416335,
    "xgb_colsample_bytree": 0.8926998463338194,
    "xgb_reg_alpha": 7.390280641192317e-05,
    "xgb_reg_lambda": 12.49708945536372,
    "xgb_min_child_weight": 5,
    "xgb_gamma": 0.0809784039137572,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 364,
    "lgb_n_estimators": 208,
    "lgb_max_depth": 5,
    "lgb_learning_rate": 0.013971506314112016,
    "lgb_num_leaves": 26,
    "lgb_subsample": 0.5674977082932157,
    "lgb_colsample_bytree": 0.8816186070881015,
    "lgb_reg_alpha": 0.0034571967224907613,
    "lgb_reg_lambda": 0.11117685273970959,
    "lgb_min_data_in_leaf": 79,
    "lgb_feature_fraction_bynode": 0.6921518485316355,
    "lgb_bagging_freq": 0,
    "lgb_min_gain_to_split": 0.9735113985219981,
    "cat_iterations": 141,
    "cat_depth": 5,
    "cat_learning_rate": 0.02301023509082029,
    "cat_l2_leaf_reg": 9.995028480068806,
    "cat_subsample": 0.6267825312813763,
    "cat_rsm": 0.8116959244778196,
    "cat_border_count": 89,
    "cat_random_strength": 2.2551172284786287,
    "cat_leaf_estimation_iterations": 11,
    "cat_bootstrap_type": "Bayesian"
  },
  "best_trial": {
    "number": 1251,
    "value": 73.68421052631578,
    "state": "1"
  },
  "best_trial_number": 1251,
  "best_trial_seed": 1293,
  "n_trials": 1360,
  "pruned_count": 0,
  "avg_trial_time": 268.01184252106435,
  "top_k_trials": [
    {
      "number": 1251,
      "value": 45.1698706622969,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "all",
        "meta_stacking_alpha": 0.4635716335442988,
        "ml_adaptive_k_1d": 1.1529845544163568,
        "ml_pattern_weight_scale_1d": 1.0742695433171472,
        "enable_talib_patterns_short": true,
        "external_min_days": 58,
        "external_smooth_alpha": 0.11043983664477852,
        "regime_scale_low": 0.82863947933467,
        "regime_scale_high": 1.0469123318285638,
        "yolo_min_conf": 0.3558664168305301,
        "fingpt_confidence_threshold": 0.4573563380302905,
        "xgb_n_estimators": 582,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.05684177764368198,
        "xgb_subsample": 0.6117366505416335,
        "xgb_colsample_bytree": 0.8926998463338194,
        "xgb_reg_alpha": 7.390280641192317e-05,
        "xgb_reg_lambda": 12.49708945536372,
        "xgb_min_child_weight": 5,
        "xgb_gamma": 0.0809784039137572,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 364,
        "lgb_n_estimators": 208,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.013971506314112016,
        "lgb_num_leaves": 26,
        "lgb_subsample": 0.5674977082932157,
        "lgb_colsample_bytree": 0.8816186070881015,
        "lgb_reg_alpha": 0.0034571967224907613,
        "lgb_reg_lambda": 0.11117685273970959,
        "lgb_min_data_in_leaf": 79,
        "lgb_feature_fraction_bynode": 0.6921518485316355,
        "lgb_bagging_freq": 0,
        "lgb_min_gain_to_split": 0.9735113985219981,
        "cat_iterations": 141,
        "cat_depth": 5,
        "cat_learning_rate": 0.02301023509082029,
        "cat_l2_leaf_reg": 9.995028480068806,
        "cat_subsample": 0.6267825312813763,
        "cat_rsm": 0.8116959244778196,
        "cat_border_count": 89,
        "cat_random_strength": 2.2551172284786287,
        "cat_leaf_estimation_iterations": 11,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 73.68421052631578,
        "avg_nrmse": 1.06817945102069,
        "model_choice": "all",
        "symbol_metrics": {
          "BRKSN_1d": {
            "symbol": "BRKSN",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 454,
                "test_days": 30,
                "train_end_idx": 454,
                "test_end_idx": 484,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-13T00:00:00",
                "test_start": "2025-06-16T00:00:00",
                "test_end": "2025-07-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.014695970823414783,
                    "rmse": 0.030845588751411697,
                    "mape": 1.69009688396593,
                    "confidence": 0.6369351066863917
                  },
                  "lightgbm": {
                    "raw_r2": -0.015183527558436808,
                    "rmse": 0.03127618521550111,
                    "mape": 1.7585167977459293,
                    "confidence": 0.6126693056071124
                  },
                  "catboost": {
                    "raw_r2": 0.020662244545983127,
                    "rmse": 0.0306589628543628,
                    "mape": 1.6808570980481659,
                    "confidence": 0.6417731577289538
                  }
                },
                "dirhit": null,
                "rmse": 0.020838999921295183,
                "mape": 125.11299053719452,
                "nrmse": 1.1065510402314664,
                "mask_count": 8,
                "mask_pct": 27.586206896551722,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 2,
                "train_days": 484,
                "test_days": 30,
                "train_end_idx": 484,
                "test_end_idx": 514,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-28T00:00:00",
                "test_start": "2025-07-29T00:00:00",
                "test_end": "2025-09-08T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.011270823402449745,
                    "rmse": 0.03044035885538976,
                    "mape": 1.716653578280715,
                    "confidence": 0.6341551212501813
                  },
                  "lightgbm": {
                    "raw_r2": -0.006033901078434785,
                    "rmse": 0.030738068558266194,
                    "mape": 1.7806363102513634,
                    "confidence": 0.6200978271975525
                  },
                  "catboost": {
                    "raw_r2": 0.016632861948895832,
                    "rmse": 0.03022374660448189,
                    "mape": 1.7532666685571623,
                    "confidence": 0.6385064166921347
                  }
                },
                "dirhit": null,
                "rmse": 0.03968319025578982,
                "mape": 124.26740272910921,
                "nrmse": 1.0371649166713641,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 3,
                "train_days": 514,
                "test_days": 30,
                "train_end_idx": 514,
                "test_end_idx": 544,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-08T00:00:00",
                "test_start": "2025-09-09T00:00:00",
                "test_end": "2025-10-20T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.009185272675840572,
                    "rmse": 0.03064553645736868,
                    "mape": 1.773794842851248,
                    "confidence": 0.6324617225539382
                  },
                  "lightgbm": {
                    "raw_r2": -0.010418846434114393,
                    "rmse": 0.030974806213992376,
                    "mape": 1.7752293055238673,
                    "confidence": 0.6165366011897234
                  },
                  "catboost": {
                    "raw_r2": 0.006496697470923444,
                    "rmse": 0.03069092901102618,
                    "mape": 1.7030702427762712,
                    "confidence": 0.6302781025922706
                  }
                },
                "dirhit": 47.368421052631575,
                "rmse": 0.03964770196026874,
                "mape": 9952254.4865292,
                "nrmse": 1.1099566762473758,
                "mask_count": 19,
                "mask_pct": 65.51724137931035,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 4,
                "train_days": 544,
                "test_days": 30,
                "train_end_idx": 544,
                "test_end_idx": 574,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-20T00:00:00",
                "test_start": "2025-10-21T00:00:00",
                "test_end": "2025-12-01T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0003954486647741821,
                    "rmse": 0.030802872825169643,
                    "mape": 1.741134010206392,
                    "confidence": 0.6246786980645482
                  },
                  "lightgbm": {
                    "raw_r2": -0.012749532341231514,
                    "rmse": 0.03100909521036654,
                    "mape": 1.7773507999573246,
                    "confidence": 0.6146445115906604
                  },
                  "catboost": {
                    "raw_r2": 0.010681829447573232,
                    "rmse": 0.03060731783250368,
                    "mape": 1.7241015787221137,
                    "confidence": 0.6336769239203237
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.01715934318621349,
                "mape": 4793000.385862506,
                "nrmse": 1.0190451709325528,
                "mask_count": 10,
                "mask_pct": 34.48275862068966,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              }
            ],
            "avg_dirhit": 73.68421052631578,
            "avg_nrmse": 1.06817945102069,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": 0.00868915455923273,
                "rmse": 0.030683589222334946,
                "mape": 1.7304198288260713,
                "confidence": 0.6320576621387648
              },
              "lightgbm": {
                "raw_r2": -0.011096451853054376,
                "rmse": 0.030999538799531556,
                "mape": 1.772933303369621,
                "confidence": 0.6159870613962621
              },
              "catboost": {
                "raw_r2": 0.013618408353343908,
                "rmse": 0.030545239075593637,
                "mape": 1.7153238970259284,
                "confidence": 0.6360586502334207
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 344,
      "value": 42.75329449533236,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "xgb",
        "n_seeds": 5,
        "ml_adaptive_k_1d": 1.6655406899521408,
        "ml_pattern_weight_scale_1d": 1.2390600800033387,
        "enable_talib_patterns_short": false,
        "external_min_days": 59,
        "external_smooth_alpha": 0.454428698607741,
        "regime_scale_low": 0.979914099378441,
        "regime_scale_high": 1.1826935735326833,
        "yolo_min_conf": 0.7726292612705777,
        "xgb_n_estimators": 288,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.04520970528029204,
        "xgb_subsample": 0.6121448696346513,
        "xgb_colsample_bytree": 0.8370719198625701,
        "xgb_reg_alpha": 0.0018746601691367259,
        "xgb_reg_lambda": 15.378199690371574,
        "xgb_min_child_weight": 5,
        "xgb_gamma": 0.00017314325706243436,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 360
      },
      "attrs": {
        "avg_dirhit": 70.0,
        "avg_nrmse": 1.0411175841112734,
        "model_choice": "xgb",
        "symbol_metrics": {
          "BRKSN_1d": {
            "symbol": "BRKSN",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 453,
                "test_days": 30,
                "train_end_idx": 453,
                "test_end_idx": 483,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.017677181295685,
                    "rmse": 0.030692323697049825,
                    "mape": 1.6986981461898827,
                    "confidence": 0.6393533668953937
                  }
                },
                "dirhit": null,
                "rmse": 0.019370036617943565,
                "mape": 116.00046978541233,
                "nrmse": 1.0502965885927096,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 2,
                "train_days": 483,
                "test_days": 30,
                "train_end_idx": 483,
                "test_end_idx": 513,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.012560147167109478,
                    "rmse": 0.030496893021241863,
                    "mape": 1.642725180216227,
                    "confidence": 0.6352017668703911
                  }
                },
                "dirhit": 70.0,
                "rmse": 0.03964989745659673,
                "mape": 157.0254943297504,
                "nrmse": 1.03892223295552,
                "mask_count": 10,
                "mask_pct": 34.48275862068966,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 3,
                "train_days": 513,
                "test_days": 30,
                "train_end_idx": 513,
                "test_end_idx": 543,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.011930995422083904,
                    "rmse": 0.03065842810864937,
                    "mape": 1.664976707673037,
                    "confidence": 0.6346910599731372
                  }
                },
                "dirhit": null,
                "rmse": 0.03568860525598372,
                "mape": 4484379.101605316,
                "nrmse": 1.0025745020600005,
                "mask_count": 8,
                "mask_pct": 27.586206896551722,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 4,
                "train_days": 543,
                "test_days": 30,
                "train_end_idx": 543,
                "test_end_idx": 573,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.009006682204738844,
                    "rmse": 0.030650432012224893,
                    "mape": 1.6668301229470466,
                    "confidence": 0.6323166928071147
                  }
                },
                "dirhit": null,
                "rmse": 0.018054997937599408,
                "mape": 3329539.4725274835,
                "nrmse": 1.072677012836864,
                "mask_count": 4,
                "mask_pct": 13.793103448275861,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              }
            ],
            "avg_dirhit": 70.0,
            "avg_nrmse": 1.0411175841112734,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": 0.012793751522404306,
                "rmse": 0.030624519209791486,
                "mape": 1.6683075392565483,
                "confidence": 0.6353907216365091
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 416,
      "value": 42.305998689440266,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.7235070521536233,
        "ml_loss_threshold": 0.00372418311522856,
        "ml_dir_penalty": 2.0830687587753625,
        "ml_adaptive_k_1d": 1.5874103918863598,
        "ml_pattern_weight_scale_1d": 0.9889668097203054,
        "enable_talib_patterns_short": false,
        "external_min_days": 26,
        "external_smooth_alpha": 0.1310803031439026,
        "regime_scale_low": 0.8271680139184113,
        "regime_scale_high": 1.1835444393360657,
        "yolo_min_conf": 0.36539814682719823,
        "fingpt_confidence_threshold": 0.22723760337499657,
        "xgb_n_estimators": 579,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.04431992089396602,
        "xgb_subsample": 0.6300667058455414,
        "xgb_colsample_bytree": 0.5865928749365535,
        "xgb_reg_alpha": 7.03879978901955e-05,
        "xgb_reg_lambda": 0.1315567307102835,
        "xgb_min_child_weight": 6,
        "xgb_gamma": 0.015375780421613515,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 319,
        "lgb_n_estimators": 239,
        "lgb_max_depth": 6,
        "lgb_learning_rate": 0.013921801058712272,
        "lgb_num_leaves": 28,
        "lgb_subsample": 0.5305367837553341,
        "lgb_colsample_bytree": 0.7474479338339285,
        "lgb_reg_alpha": 0.00042424652866588134,
        "lgb_reg_lambda": 0.05536922998610929,
        "lgb_min_data_in_leaf": 78,
        "lgb_feature_fraction_bynode": 0.8395770768963835,
        "lgb_bagging_freq": 0,
        "lgb_min_gain_to_split": 0.3042156138829745,
        "cat_iterations": 196,
        "cat_depth": 6,
        "cat_learning_rate": 0.04767661833504118,
        "cat_l2_leaf_reg": 8.901863345263752,
        "cat_subsample": 0.6265681180789454,
        "cat_rsm": 0.7518577182598738,
        "cat_border_count": 82,
        "cat_random_strength": 1.8022811497106865,
        "cat_leaf_estimation_iterations": 12,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 69.28571428571429,
        "avg_nrmse": 1.0323335517599561,
        "model_choice": "all",
        "symbol_metrics": {
          "BRKSN_1d": {
            "symbol": "BRKSN",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 453,
                "test_days": 30,
                "train_end_idx": 453,
                "test_end_idx": 483,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -2.946797953606892,
                    "rmse": 0.05915859876944954,
                    "mape": 1.4914535018783728,
                    "confidence": 0.30000025943151426
                  },
                  "lightgbm": {
                    "raw_r2": -0.015183527558436808,
                    "rmse": 0.03127618521550111,
                    "mape": 1.7585167977459293,
                    "confidence": 0.6126693056071124
                  },
                  "catboost": {
                    "raw_r2": -0.0016347035585007053,
                    "rmse": 0.031115125673297456,
                    "mape": 1.6678122557017891,
                    "confidence": 0.6236718107530044
                  }
                },
                "dirhit": null,
                "rmse": 0.018941598631394968,
                "mape": 98.30316732455428,
                "nrmse": 1.0270655041827466,
                "mask_count": 1,
                "mask_pct": 3.4482758620689653,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 2,
                "train_days": 483,
                "test_days": 30,
                "train_end_idx": 483,
                "test_end_idx": 513,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -2.9039074768970354,
                    "rmse": 0.05772283967569108,
                    "mape": 1.4905421017409866,
                    "confidence": 0.30000032148312106
                  },
                  "lightgbm": {
                    "raw_r2": -0.006033901078434785,
                    "rmse": 0.030738068558266194,
                    "mape": 1.7806363102513634,
                    "confidence": 0.6200978271975525
                  },
                  "catboost": {
                    "raw_r2": 0.017837785176483673,
                    "rmse": 0.030264616831481884,
                    "mape": 1.6800141771661945,
                    "confidence": 0.6394836007131641
                  }
                },
                "dirhit": 65.0,
                "rmse": 0.040972797133856265,
                "mape": 279.4443212441212,
                "nrmse": 1.0735853714460826,
                "mask_count": 20,
                "mask_pct": 68.96551724137932,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 3,
                "train_days": 513,
                "test_days": 30,
                "train_end_idx": 513,
                "test_end_idx": 543,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -2.646764297207406,
                    "rmse": 0.058072979463840685,
                    "mape": 1.5076262013827826,
                    "confidence": 0.30000116288544226
                  },
                  "lightgbm": {
                    "raw_r2": -0.010418846434114393,
                    "rmse": 0.030974806213992376,
                    "mape": 1.7752293055238673,
                    "confidence": 0.6165366011897234
                  },
                  "catboost": {
                    "raw_r2": 0.02666674328712367,
                    "rmse": 0.030302665648483156,
                    "mape": 1.6297403689425678,
                    "confidence": 0.6466346868414886
                  }
                },
                "dirhit": 42.857142857142854,
                "rmse": 0.03755923822226952,
                "mape": 5618388.706229139,
                "nrmse": 1.055124858154305,
                "mask_count": 14,
                "mask_pct": 48.275862068965516,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 4,
                "train_days": 543,
                "test_days": 30,
                "train_end_idx": 543,
                "test_end_idx": 573,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -2.526706998391227,
                    "rmse": 0.05765371097447897,
                    "mape": 1.5119303617998945,
                    "confidence": 0.3000021195194514
                  },
                  "lightgbm": {
                    "raw_r2": -0.012749532341231514,
                    "rmse": 0.03100909521036654,
                    "mape": 1.7773507999573246,
                    "confidence": 0.6146445115906604
                  },
                  "catboost": {
                    "raw_r2": 0.0003550741640827952,
                    "rmse": 0.030762356544664988,
                    "mape": 1.7951097664630444,
                    "confidence": 0.6252884976825399
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.01638666254280517,
                "mape": 4277981.753616336,
                "nrmse": 0.9735584732566906,
                "mask_count": 10,
                "mask_pct": 34.48275862068966,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              }
            ],
            "avg_dirhit": 69.28571428571429,
            "avg_nrmse": 1.0323335517599561,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -2.75604418152564,
                "rmse": 0.05815203222086507,
                "mape": 1.500388041700509,
                "confidence": 0.3000009658298822
              },
              "lightgbm": {
                "raw_r2": -0.011096451853054376,
                "rmse": 0.030999538799531556,
                "mape": 1.772933303369621,
                "confidence": 0.6159870613962621
              },
              "catboost": {
                "raw_r2": 0.010806224767297357,
                "rmse": 0.030611191174481873,
                "mape": 1.693169142068399,
                "confidence": 0.6337696489975493
              }
            }
          }
        }
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_BRKSN_h1_c2",
  "symbols": [
    "BRKSN"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "enable_talib_patterns_short": true
  },
  "feature_params": {},
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 582,
    "xgb_max_depth": 2,
    "xgb_learning_rate": 0.05684177764368198,
    "xgb_subsample": 0.6117366505416335,
    "xgb_colsample_bytree": 0.8926998463338194,
    "xgb_reg_alpha": 7.390280641192317e-05,
    "xgb_reg_lambda": 12.49708945536372,
    "xgb_min_child_weight": 5,
    "xgb_gamma": 0.0809784039137572,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 364,
    "lgb_n_estimators": 208,
    "lgb_max_depth": 5,
    "lgb_learning_rate": 0.013971506314112016,
    "lgb_num_leaves": 26,
    "lgb_subsample": 0.5674977082932157,
    "lgb_colsample_bytree": 0.8816186070881015,
    "lgb_reg_alpha": 0.0034571967224907613,
    "lgb_reg_lambda": 0.11117685273970959,
    "lgb_min_data_in_leaf": 79,
    "lgb_feature_fraction_bynode": 0.6921518485316355,
    "lgb_bagging_freq": 0,
    "lgb_min_gain_to_split": 0.9735113985219981,
    "cat_iterations": 141,
    "cat_depth": 5,
    "cat_learning_rate": 0.02301023509082029,
    "cat_l2_leaf_reg": 9.995028480068806,
    "cat_subsample": 0.6267825312813763,
    "cat_rsm": 0.8116959244778196,
    "cat_border_count": 89,
    "cat_random_strength": 2.2551172284786287,
    "cat_leaf_estimation_iterations": 11,
    "cat_bootstrap_type": "Bayesian"
  },
  "features_enabled": {},
  "best_trial_metrics": {
    "BRKSN_1d": {
      "symbol": "BRKSN",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 454,
          "test_days": 30,
          "train_end_idx": 454,
          "test_end_idx": 484,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-13T00:00:00",
          "test_start": "2025-06-16T00:00:00",
          "test_end": "2025-07-28T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.014695970823414783,
              "rmse": 0.030845588751411697,
              "mape": 1.69009688396593,
              "confidence": 0.6369351066863917
            },
            "lightgbm": {
              "raw_r2": -0.015183527558436808,
              "rmse": 0.03127618521550111,
              "mape": 1.7585167977459293,
              "confidence": 0.6126693056071124
            },
            "catboost": {
              "raw_r2": 0.020662244545983127,
              "rmse": 0.0306589628543628,
              "mape": 1.6808570980481659,
              "confidence": 0.6417731577289538
            }
          },
          "dirhit": null,
          "rmse": 0.020838999921295183,
          "mape": 125.11299053719452,
          "nrmse": 1.1065510402314664,
          "mask_count": 8,
          "mask_pct": 27.586206896551722,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0
        },
        {
          "split_index": 2,
          "train_days": 484,
          "test_days": 30,
          "train_end_idx": 484,
          "test_end_idx": 514,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-28T00:00:00",
          "test_start": "2025-07-29T00:00:00",
          "test_end": "2025-09-08T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.011270823402449745,
              "rmse": 0.03044035885538976,
              "mape": 1.716653578280715,
              "confidence": 0.6341551212501813
            },
            "lightgbm": {
              "raw_r2": -0.006033901078434785,
              "rmse": 0.030738068558266194,
              "mape": 1.7806363102513634,
              "confidence": 0.6200978271975525
            },
            "catboost": {
              "raw_r2": 0.016632861948895832,
              "rmse": 0.03022374660448189,
              "mape": 1.7532666685571623,
              "confidence": 0.6385064166921347
            }
          },
          "dirhit": null,
          "rmse": 0.03968319025578982,
          "mape": 124.26740272910921,
          "nrmse": 1.0371649166713641,
          "mask_count": 6,
          "mask_pct": 20.689655172413794,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0
        },
        {
          "split_index": 3,
          "train_days": 514,
          "test_days": 30,
          "train_end_idx": 514,
          "test_end_idx": 544,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-08T00:00:00",
          "test_start": "2025-09-09T00:00:00",
          "test_end": "2025-10-20T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.009185272675840572,
              "rmse": 0.03064553645736868,
              "mape": 1.773794842851248,
              "confidence": 0.6324617225539382
            },
            "lightgbm": {
              "raw_r2": -0.010418846434114393,
              "rmse": 0.030974806213992376,
              "mape": 1.7752293055238673,
              "confidence": 0.6165366011897234
            },
            "catboost": {
              "raw_r2": 0.006496697470923444,
              "rmse": 0.03069092901102618,
              "mape": 1.7030702427762712,
              "confidence": 0.6302781025922706
            }
          },
          "dirhit": 47.368421052631575,
          "rmse": 0.03964770196026874,
          "mape": 9952254.4865292,
          "nrmse": 1.1099566762473758,
          "mask_count": 19,
          "mask_pct": 65.51724137931035,
          "low_support": false,
          "min_mask_count": 10,
          "min_mask_pct": 5.0
        },
        {
          "split_index": 4,
          "train_days": 544,
          "test_days": 30,
          "train_end_idx": 544,
          "test_end_idx": 574,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-20T00:00:00",
          "test_start": "2025-10-21T00:00:00",
          "test_end": "2025-12-01T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0003954486647741821,
              "rmse": 0.030802872825169643,
              "mape": 1.741134010206392,
              "confidence": 0.6246786980645482
            },
            "lightgbm": {
              "raw_r2": -0.012749532341231514,
              "rmse": 0.03100909521036654,
              "mape": 1.7773507999573246,
              "confidence": 0.6146445115906604
            },
            "catboost": {
              "raw_r2": 0.010681829447573232,
              "rmse": 0.03060731783250368,
              "mape": 1.7241015787221137,
              "confidence": 0.6336769239203237
            }
          },
          "dirhit": 100.0,
          "rmse": 0.01715934318621349,
          "mape": 4793000.385862506,
          "nrmse": 1.0190451709325528,
          "mask_count": 10,
          "mask_pct": 34.48275862068966,
          "low_support": false,
          "min_mask_count": 10,
          "min_mask_pct": 5.0
        }
      ],
      "avg_dirhit": 73.68421052631578,
      "avg_nrmse": 1.06817945102069,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": 0.00868915455923273,
          "rmse": 0.030683589222334946,
          "mape": 1.7304198288260713,
          "confidence": 0.6320576621387648
        },
        "lightgbm": {
          "raw_r2": -0.011096451853054376,
          "rmse": 0.030999538799531556,
          "mape": 1.772933303369621,
          "confidence": 0.6159870613962621
        },
        "catboost": {
          "raw_r2": 0.013618408353343908,
          "rmse": 0.030545239075593637,
          "mape": 1.7153238970259284,
          "confidence": 0.6360586502334207
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 10,
    "min_mask_pct": 5.0,
    "best_trial_number": 1251,
    "best_trial_seed": 1293,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "split_generation": {
      "type": "generate_walkforward_splits",
      "n_splits": 4
    },
    "symbol_specs": {
      "BRKSN_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 454,
            "test_end_idx": 484,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-13T00:00:00",
            "test_start": "2025-06-16T00:00:00",
            "test_end": "2025-07-28T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 484,
            "test_end_idx": 514,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-28T00:00:00",
            "test_start": "2025-07-29T00:00:00",
            "test_end": "2025-09-08T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 514,
            "test_end_idx": 544,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-08T00:00:00",
            "test_start": "2025-09-09T00:00:00",
            "test_end": "2025-10-20T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 544,
            "test_end_idx": 574,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-20T00:00:00",
            "test_start": "2025-10-21T00:00:00",
            "test_end": "2025-12-01T00:00:00"
          }
        ]
      }
    }
  },
  "_updated_at": "2025-12-02T19:56:14.219841",
  "_updated_reason": "filtered_best_params_from_study",
  "_filter_used": {
    "min_mask_count": 10,
    "min_mask_pct": 5.0
  }
}