{
  "best_value": 52.58913666958581,
  "best_dirhit": 84.05797101449275,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.4924181327038585,
    "ml_loss_threshold": 0.008833451978842529,
    "ml_dir_penalty": 2.725953970871382,
    "n_seeds": 3,
    "meta_stacking_alpha": 0.01028960577542248,
    "ml_adaptive_k_1d": 2.5081217563000897,
    "ml_pattern_weight_scale_1d": 1.1119104752886855,
    "enable_talib_patterns_short": false,
    "external_min_days": 50,
    "external_smooth_alpha": 0.16984462511075352,
    "smart_consensus_weight": 0.48559176473916854,
    "smart_performance_weight": 0.4730786841035325,
    "smart_sigma": 0.002911190386514388,
    "smart_weight_xgb": 1.1949516569680938,
    "smart_weight_lgbm": 0.9120184368347103,
    "smart_weight_cat": 1.4334702948258846,
    "xgb_n_estimators": 207,
    "xgb_max_depth": 2,
    "xgb_learning_rate": 0.08180599050757625,
    "xgb_subsample": 0.8910890185405699,
    "xgb_colsample_bytree": 0.5435708872982875,
    "xgb_reg_alpha": 0.0007374782668014779,
    "xgb_reg_lambda": 0.6063469414248425,
    "xgb_min_child_weight": 15,
    "xgb_gamma": 0.0013077106635220987,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 194,
    "lgb_n_estimators": 180,
    "lgb_max_depth": 6,
    "lgb_learning_rate": 0.023296868332999203,
    "lgb_num_leaves": 36,
    "lgb_subsample": 0.8864272132175612,
    "lgb_colsample_bytree": 0.8155050348019122,
    "lgb_reg_alpha": 0.16910298114264033,
    "lgb_reg_lambda": 0.00012604005097498433,
    "lgb_min_data_in_leaf": 93,
    "lgb_feature_fraction_bynode": 0.9062305534737584,
    "lgb_bagging_freq": 3,
    "lgb_min_gain_to_split": 0.7848438684783487,
    "cat_iterations": 507,
    "cat_depth": 5,
    "cat_learning_rate": 0.1463781436206994,
    "cat_l2_leaf_reg": 2.1366059459782014,
    "cat_subsample": 0.53437423210231,
    "cat_rsm": 0.6574814962024647,
    "cat_border_count": 67,
    "cat_random_strength": 0.9438146726274799,
    "cat_leaf_estimation_iterations": 20,
    "cat_bootstrap_type": "No"
  },
  "best_trial": {
    "number": 141,
    "value": 52.58913666958581,
    "state": "1"
  },
  "n_trials": 1394,
  "pruned_count": 0,
  "avg_trial_time": 187.4133622311558,
  "top_k_trials": [
    {
      "number": 141,
      "value": 52.58913666958581,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.4924181327038585,
        "ml_loss_threshold": 0.008833451978842529,
        "ml_dir_penalty": 2.725953970871382,
        "n_seeds": 3,
        "meta_stacking_alpha": 0.01028960577542248,
        "ml_adaptive_k_1d": 2.5081217563000897,
        "ml_pattern_weight_scale_1d": 1.1119104752886855,
        "enable_talib_patterns_short": false,
        "external_min_days": 50,
        "external_smooth_alpha": 0.16984462511075352,
        "smart_consensus_weight": 0.48559176473916854,
        "smart_performance_weight": 0.4730786841035325,
        "smart_sigma": 0.002911190386514388,
        "smart_weight_xgb": 1.1949516569680938,
        "smart_weight_lgbm": 0.9120184368347103,
        "smart_weight_cat": 1.4334702948258846,
        "xgb_n_estimators": 207,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.08180599050757625,
        "xgb_subsample": 0.8910890185405699,
        "xgb_colsample_bytree": 0.5435708872982875,
        "xgb_reg_alpha": 0.0007374782668014779,
        "xgb_reg_lambda": 0.6063469414248425,
        "xgb_min_child_weight": 15,
        "xgb_gamma": 0.0013077106635220987,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 194,
        "lgb_n_estimators": 180,
        "lgb_max_depth": 6,
        "lgb_learning_rate": 0.023296868332999203,
        "lgb_num_leaves": 36,
        "lgb_subsample": 0.8864272132175612,
        "lgb_colsample_bytree": 0.8155050348019122,
        "lgb_reg_alpha": 0.16910298114264033,
        "lgb_reg_lambda": 0.00012604005097498433,
        "lgb_min_data_in_leaf": 93,
        "lgb_feature_fraction_bynode": 0.9062305534737584,
        "lgb_bagging_freq": 3,
        "lgb_min_gain_to_split": 0.7848438684783487,
        "cat_iterations": 507,
        "cat_depth": 5,
        "cat_learning_rate": 0.1463781436206994,
        "cat_l2_leaf_reg": 2.1366059459782014,
        "cat_subsample": 0.53437423210231,
        "cat_rsm": 0.6574814962024647,
        "cat_border_count": 67,
        "cat_random_strength": 0.9438146726274799,
        "cat_leaf_estimation_iterations": 20,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 84.05797101449275,
        "avg_nrmse": 1.0419071734265186,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 637,
      "value": 51.14446181013813,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.4703329369708178,
        "ml_loss_threshold": 0.006948484107027322,
        "ml_dir_penalty": 2.0915091723793964,
        "n_seeds": 3,
        "meta_stacking_alpha": 0.023055306421384533,
        "ml_adaptive_k_1d": 2.05669324905738,
        "ml_pattern_weight_scale_1d": 0.9963061210922769,
        "enable_talib_patterns_short": false,
        "external_min_days": 47,
        "external_smooth_alpha": 0.1287565721690717,
        "regime_scale_low": 0.8473463656586857,
        "regime_scale_high": 1.0353830620532432,
        "xgb_n_estimators": 363,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.04865869804685278,
        "xgb_subsample": 0.8033746518856791,
        "xgb_colsample_bytree": 0.525760271070034,
        "xgb_reg_alpha": 0.0016847106209762904,
        "xgb_reg_lambda": 0.16512026004893735,
        "xgb_min_child_weight": 13,
        "xgb_gamma": 0.0018562053687310627,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 180,
        "lgb_n_estimators": 204,
        "lgb_max_depth": 4,
        "lgb_learning_rate": 0.013965956643268227,
        "lgb_num_leaves": 22,
        "lgb_subsample": 0.8777170208234153,
        "lgb_colsample_bytree": 0.6770159592115705,
        "lgb_reg_alpha": 0.00035783294434562946,
        "lgb_reg_lambda": 0.0002528632637537616,
        "lgb_min_data_in_leaf": 84,
        "lgb_feature_fraction_bynode": 0.9690151702279677,
        "lgb_bagging_freq": 3,
        "lgb_min_gain_to_split": 0.549731221675729,
        "cat_iterations": 258,
        "cat_depth": 8,
        "cat_learning_rate": 0.16776938570251962,
        "cat_l2_leaf_reg": 8.213849019089695,
        "cat_subsample": 0.8589430244264181,
        "cat_rsm": 0.6718086411111903,
        "cat_border_count": 96,
        "cat_random_strength": 0.10482353569162188,
        "cat_leaf_estimation_iterations": 18,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 81.79347826086956,
        "avg_nrmse": 1.0184954954117593,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 225,
      "value": 47.96891892291339,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "n_seeds": 3,
        "meta_stacking_alpha": 0.021012274364381543,
        "ml_adaptive_k_1d": 2.4682849862882192,
        "ml_pattern_weight_scale_1d": 0.7222720502158134,
        "enable_talib_patterns_short": false,
        "external_min_days": 60,
        "external_smooth_alpha": 0.20595741331141512,
        "smart_consensus_weight": 0.49525940653062955,
        "smart_performance_weight": 0.5901521414589023,
        "smart_sigma": 0.01751888218668738,
        "smart_weight_xgb": 0.8647956204721267,
        "smart_weight_lgbm": 0.6769683557397085,
        "smart_weight_cat": 0.9407116538755866,
        "xgb_n_estimators": 194,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.018136737309939543,
        "xgb_subsample": 0.8994546930454964,
        "xgb_colsample_bytree": 0.5983031613136044,
        "xgb_reg_alpha": 0.014622191637977199,
        "xgb_reg_lambda": 0.1350137672347809,
        "xgb_min_child_weight": 10,
        "xgb_gamma": 0.0007056476307598691,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 278,
        "lgb_n_estimators": 129,
        "lgb_max_depth": 3,
        "lgb_learning_rate": 0.014361208800221188,
        "lgb_num_leaves": 39,
        "lgb_subsample": 0.8789993959525597,
        "lgb_colsample_bytree": 0.7764845165097932,
        "lgb_reg_alpha": 0.00017589821850531794,
        "lgb_reg_lambda": 0.03642097333136978,
        "lgb_min_data_in_leaf": 20,
        "lgb_feature_fraction_bynode": 0.8549810909221595,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.6674009937613185,
        "cat_iterations": 314,
        "cat_depth": 5,
        "cat_learning_rate": 0.09598615465518678,
        "cat_l2_leaf_reg": 8.267190762054126,
        "cat_subsample": 0.8448609744996096,
        "cat_rsm": 0.6436203604877577,
        "cat_border_count": 76,
        "cat_random_strength": 1.0352273318735177,
        "cat_leaf_estimation_iterations": 16,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 77.38095238095238,
        "avg_nrmse": 1.0329579572922125,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_AYES_h1_c1",
  "symbols": [
    "AYES"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.4924181327038585,
    "ml_loss_threshold": 0.008833451978842529,
    "ml_dir_penalty": 2.725953970871382,
    "n_seeds": 3,
    "meta_stacking_alpha": 0.01028960577542248,
    "ml_adaptive_k_1d": 2.5081217563000897,
    "ml_pattern_weight_scale_1d": 1.1119104752886855,
    "external_min_days": 50,
    "external_smooth_alpha": 0.16984462511075352,
    "smart_consensus_weight": 0.48559176473916854,
    "smart_performance_weight": 0.4730786841035325,
    "smart_sigma": 0.002911190386514388,
    "smart_weight_xgb": 1.1949516569680938,
    "smart_weight_lgbm": 0.9120184368347103,
    "smart_weight_cat": 1.4334702948258846
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 207,
    "xgb_max_depth": 2,
    "xgb_learning_rate": 0.08180599050757625,
    "xgb_subsample": 0.8910890185405699,
    "xgb_colsample_bytree": 0.5435708872982875,
    "xgb_reg_alpha": 0.0007374782668014779,
    "xgb_reg_lambda": 0.6063469414248425,
    "xgb_min_child_weight": 15,
    "xgb_gamma": 0.0013077106635220987,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 194,
    "lgb_n_estimators": 180,
    "lgb_max_depth": 6,
    "lgb_learning_rate": 0.023296868332999203,
    "lgb_num_leaves": 36,
    "lgb_subsample": 0.8864272132175612,
    "lgb_colsample_bytree": 0.8155050348019122,
    "lgb_reg_alpha": 0.16910298114264033,
    "lgb_reg_lambda": 0.00012604005097498433,
    "lgb_min_data_in_leaf": 93,
    "lgb_feature_fraction_bynode": 0.9062305534737584,
    "lgb_bagging_freq": 3,
    "lgb_min_gain_to_split": 0.7848438684783487,
    "cat_iterations": 507,
    "cat_depth": 5,
    "cat_learning_rate": 0.1463781436206994,
    "cat_l2_leaf_reg": 2.1366059459782014,
    "cat_subsample": 0.53437423210231,
    "cat_rsm": 0.6574814962024647,
    "cat_border_count": 67,
    "cat_random_strength": 0.9438146726274799,
    "cat_leaf_estimation_iterations": 20,
    "cat_bootstrap_type": "No"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "1",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "AYES_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 449,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.35889837231178207,
              "rmse": 0.03978809052528804,
              "mape": 1.566807419922681,
              "confidence": 0.39263987888602714
            },
            "lightgbm": {
              "raw_r2": -0.008502716662620147,
              "rmse": 0.03346468615966837,
              "mape": 1.7135352649129731,
              "confidence": 0.6180925830551418
            },
            "catboost": {
              "raw_r2": -0.008320077271058324,
              "rmse": 0.033219038811916006,
              "mape": 1.6267251025198153,
              "confidence": 0.6182409119578736
            }
          },
          "dirhit": 56.52173913043478,
          "rmse": 0.04823533517288493,
          "mape": 389.0379506008881,
          "nrmse": 1.1804428379591951,
          "mask_count": 23,
          "mask_pct": 79.3103448275862
        },
        {
          "split_index": 2,
          "train_days": 479,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.151769749016899,
              "rmse": 0.03559070866628349,
              "mape": 1.5501209009551202,
              "confidence": 0.5072825743835302
            },
            "lightgbm": {
              "raw_r2": -0.012549747198514613,
              "rmse": 0.03365828439996372,
              "mape": 1.7232851255691635,
              "confidence": 0.6148066747849212
            },
            "catboost": {
              "raw_r2": -0.011302183036177546,
              "rmse": 0.03348225542604042,
              "mape": 1.7002130446256118,
              "confidence": 0.6158194193225146
            }
          },
          "dirhit": 50.0,
          "rmse": 0.042397624261219444,
          "mape": 4130542.5119948913,
          "nrmse": 1.126717026479827,
          "mask_count": 22,
          "mask_pct": 75.86206896551724
        },
        {
          "split_index": 3,
          "train_days": 509,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.19933187183343967,
              "rmse": 0.037693591505402295,
              "mape": 1.5562632506125667,
              "confidence": 0.47523917968901114
            },
            "lightgbm": {
              "raw_r2": -0.007931247446900361,
              "rmse": 0.03479446720870769,
              "mape": 1.7253406764211725,
              "confidence": 0.6185567058301726
            },
            "catboost": {
              "raw_r2": -0.04441003048739767,
              "rmse": 0.03519296201107932,
              "mape": 1.7080405559186345,
              "confidence": 0.589064383302123
            }
          },
          "dirhit": 53.333333333333336,
          "rmse": 0.03291421478424828,
          "mape": 1057441.74783243,
          "nrmse": 1.0132029149308732,
          "mask_count": 15,
          "mask_pct": 51.724137931034484
        },
        {
          "split_index": 4,
          "train_days": 539,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.29235181977852936,
              "rmse": 0.03830737855753746,
              "mape": 1.5343887820303725,
              "confidence": 0.42232897498718297
            },
            "lightgbm": {
              "raw_r2": -0.008113038778897982,
              "rmse": 0.03437442015894647,
              "mape": 1.7280992512376492,
              "confidence": 0.6184090597692374
            },
            "catboost": {
              "raw_r2": -0.010379138264829576,
              "rmse": 0.03441486369767873,
              "mape": 1.698279407488488,
              "confidence": 0.6165688422815763
            }
          },
          "dirhit": 55.55555555555556,
          "rmse": 0.02920493203789928,
          "mape": 4262852.550594742,
          "nrmse": 0.9790193157804278,
          "mask_count": 9,
          "mask_pct": 31.03448275862069
        }
      ],
      "avg_dirhit": 53.85265700483092,
      "avg_nrmse": 1.0748455237875807,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.25058795323516253,
          "rmse": 0.037844942313627825,
          "mape": 1.5518950883801852,
          "confidence": 0.4493726519864379
        },
        "lightgbm": {
          "raw_r2": -0.009274187521733276,
          "rmse": 0.034072964481821566,
          "mape": 1.7225650795352396,
          "confidence": 0.6174662558598683
        },
        "catboost": {
          "raw_r2": -0.01860285726486578,
          "rmse": 0.03407727998667862,
          "mape": 1.6833145276381374,
          "confidence": 0.6099233892160218
        }
      }
    }
  }
}