{
  "best_value": 44.23488632696484,
  "best_dirhit": 72.22222222222221,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "model_choice": "all",
    "meta_stacking_alpha": 0.028011493961301873,
    "ml_adaptive_k_1d": 2.1988661810012804,
    "ml_pattern_weight_scale_1d": 1.993016817608932,
    "enable_talib_patterns_short": true,
    "external_min_days": 58,
    "external_smooth_alpha": 0.06593028369694987,
    "yolo_min_conf": 0.6641448767525987,
    "xgb_n_estimators": 151,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.036637259270732705,
    "xgb_subsample": 0.8883165755406552,
    "xgb_colsample_bytree": 0.8344381904771706,
    "xgb_reg_alpha": 2.0122231831181586e-05,
    "xgb_reg_lambda": 11.846620598733754,
    "xgb_min_child_weight": 9,
    "xgb_gamma": 0.036123729966028174,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 287,
    "lgb_n_estimators": 311,
    "lgb_max_depth": 2,
    "lgb_learning_rate": 0.021181305516224946,
    "lgb_num_leaves": 57,
    "lgb_subsample": 0.6397178291402742,
    "lgb_colsample_bytree": 0.7160343916091078,
    "lgb_reg_alpha": 0.0006302020895847782,
    "lgb_reg_lambda": 0.08746269252553328,
    "lgb_min_data_in_leaf": 17,
    "lgb_feature_fraction_bynode": 0.5868179619757854,
    "lgb_bagging_freq": 9,
    "lgb_min_gain_to_split": 0.9136232981255855,
    "cat_iterations": 559,
    "cat_depth": 3,
    "cat_learning_rate": 0.032349904817506644,
    "cat_l2_leaf_reg": 9.5583380436966,
    "cat_subsample": 0.6790372820199287,
    "cat_rsm": 0.7532036105047957,
    "cat_border_count": 145,
    "cat_random_strength": 0.14784671531101917,
    "cat_leaf_estimation_iterations": 4,
    "cat_bootstrap_type": "Bernoulli"
  },
  "best_trial": {
    "number": 246,
    "value": 44.23488632696484,
    "state": "1"
  },
  "best_trial_number": 246,
  "best_trial_seed": 288,
  "n_trials": 1499,
  "pruned_count": 0,
  "avg_trial_time": 280.2841114822505,
  "top_k_trials": [
    {
      "number": 246,
      "value": 44.23488632696484,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "meta_stacking_alpha": 0.028011493961301873,
        "ml_adaptive_k_1d": 2.1988661810012804,
        "ml_pattern_weight_scale_1d": 1.993016817608932,
        "enable_talib_patterns_short": true,
        "external_min_days": 58,
        "external_smooth_alpha": 0.06593028369694987,
        "yolo_min_conf": 0.6641448767525987,
        "xgb_n_estimators": 151,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.036637259270732705,
        "xgb_subsample": 0.8883165755406552,
        "xgb_colsample_bytree": 0.8344381904771706,
        "xgb_reg_alpha": 2.0122231831181586e-05,
        "xgb_reg_lambda": 11.846620598733754,
        "xgb_min_child_weight": 9,
        "xgb_gamma": 0.036123729966028174,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 287,
        "lgb_n_estimators": 311,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.021181305516224946,
        "lgb_num_leaves": 57,
        "lgb_subsample": 0.6397178291402742,
        "lgb_colsample_bytree": 0.7160343916091078,
        "lgb_reg_alpha": 0.0006302020895847782,
        "lgb_reg_lambda": 0.08746269252553328,
        "lgb_min_data_in_leaf": 17,
        "lgb_feature_fraction_bynode": 0.5868179619757854,
        "lgb_bagging_freq": 9,
        "lgb_min_gain_to_split": 0.9136232981255855,
        "cat_iterations": 559,
        "cat_depth": 3,
        "cat_learning_rate": 0.032349904817506644,
        "cat_l2_leaf_reg": 9.5583380436966,
        "cat_subsample": 0.6790372820199287,
        "cat_rsm": 0.7532036105047957,
        "cat_border_count": 145,
        "cat_random_strength": 0.14784671531101917,
        "cat_leaf_estimation_iterations": 4,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 72.22222222222221,
        "avg_nrmse": 1.0534448714317852,
        "model_choice": "all",
        "symbol_metrics": {
          "AKCNS_1d": {
            "symbol": "AKCNS",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 455,
                "test_days": 30,
                "train_end_idx": 455,
                "test_end_idx": 485,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-17T00:00:00",
                "test_start": "2025-06-18T00:00:00",
                "test_end": "2025-07-30T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.001079100949745948,
                    "rmse": 0.0247497935840016,
                    "mape": 1.917401087127175,
                    "confidence": 0.6241232326053294
                  },
                  "lightgbm": {
                    "raw_r2": -0.00561013397185232,
                    "rmse": 0.024817973422307564,
                    "mape": 1.7978226205547057,
                    "confidence": 0.6204420650077784
                  },
                  "catboost": {
                    "raw_r2": 0.02001965003018602,
                    "rmse": 0.02455579406676106,
                    "mape": 1.6803852330474691,
                    "confidence": 0.6412523976240447
                  }
                },
                "dirhit": 66.66666666666666,
                "rmse": 0.020766788259413572,
                "mape": 884297.1442102648,
                "nrmse": 1.005446763360863,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 2,
                "train_days": 485,
                "test_days": 30,
                "train_end_idx": 485,
                "test_end_idx": 515,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-30T00:00:00",
                "test_start": "2025-07-31T00:00:00",
                "test_end": "2025-09-10T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.007914444352322173,
                    "rmse": 0.0243100738526424,
                    "mape": 1.8564640834230148,
                    "confidence": 0.6185703529897371
                  },
                  "lightgbm": {
                    "raw_r2": -0.015359937431434675,
                    "rmse": 0.024393800671426845,
                    "mape": 1.7867105899687226,
                    "confidence": 0.6125261813157488
                  },
                  "catboost": {
                    "raw_r2": -0.0015594689355374152,
                    "rmse": 0.024251120044548897,
                    "mape": 1.700489991722945,
                    "confidence": 0.6237329379095011
                  }
                },
                "dirhit": null,
                "rmse": 0.017945895201374285,
                "mape": 137.6595848642229,
                "nrmse": 1.1100811021624253,
                "mask_count": 4,
                "mask_pct": 13.793103448275861,
                "low_support": true,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 3,
                "train_days": 515,
                "test_days": 30,
                "train_end_idx": 515,
                "test_end_idx": 545,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-10T00:00:00",
                "test_start": "2025-09-11T00:00:00",
                "test_end": "2025-10-22T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0023681153917983013,
                    "rmse": 0.023788866329345477,
                    "mape": 1.793918601432603,
                    "confidence": 0.6230759287235592
                  },
                  "lightgbm": {
                    "raw_r2": -0.013146770980662303,
                    "rmse": 0.02390441643188263,
                    "mape": 1.7530719440542484,
                    "confidence": 0.6143220931839541
                  },
                  "catboost": {
                    "raw_r2": -0.0047346452412186935,
                    "rmse": 0.023815524735129007,
                    "mape": 1.7725256992554765,
                    "confidence": 0.6211532803885743
                  }
                },
                "dirhit": 66.66666666666666,
                "rmse": 0.02621360035666276,
                "mape": 143.71918647054446,
                "nrmse": 0.9856924407904263,
                "mask_count": 12,
                "mask_pct": 41.37931034482759,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 4,
                "train_days": 545,
                "test_days": 30,
                "train_end_idx": 545,
                "test_end_idx": 575,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-22T00:00:00",
                "test_start": "2025-10-23T00:00:00",
                "test_end": "2025-12-03T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.0029034491797707007,
                    "rmse": 0.0239637960495216,
                    "mape": 1.882396543223016,
                    "confidence": 0.6273590110284938
                  },
                  "lightgbm": {
                    "raw_r2": -0.005605228404460982,
                    "rmse": 0.024055841825392957,
                    "mape": 1.7798280095926815,
                    "confidence": 0.6204460499980303
                  },
                  "catboost": {
                    "raw_r2": -0.0009742738483884406,
                    "rmse": 0.02401314801159963,
                    "mape": 1.780713523680832,
                    "confidence": 0.6242084040635805
                  }
                },
                "dirhit": 83.33333333333334,
                "rmse": 0.017861858777631814,
                "mape": 9958959.401176807,
                "nrmse": 1.1125591794134269,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              }
            ],
            "avg_dirhit": 72.22222222222221,
            "avg_nrmse": 1.0534448714317852,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.0021145528785239303,
                "rmse": 0.02420313245387777,
                "mape": 1.8625450788014521,
                "confidence": 0.6232821313367799
              },
              "lightgbm": {
                "raw_r2": -0.00993051769710257,
                "rmse": 0.0242930080877525,
                "mape": 1.7793582910425896,
                "confidence": 0.6169340973763779
              },
              "catboost": {
                "raw_r2": 0.0031878155012603675,
                "rmse": 0.024158896714509645,
                "mape": 1.7335286119266806,
                "confidence": 0.6275867549964251
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 651,
      "value": 43.84781009892739,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "meta_stacking_alpha": 0.2429832626814164,
        "ml_adaptive_k_1d": 2.4803686655384256,
        "ml_pattern_weight_scale_1d": 1.9320660095295232,
        "enable_talib_patterns_short": true,
        "external_min_days": 57,
        "external_smooth_alpha": 0.07174470353629524,
        "yolo_min_conf": 0.598959721288513,
        "xgb_n_estimators": 235,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.040898718423218114,
        "xgb_subsample": 0.8317265476919959,
        "xgb_colsample_bytree": 0.8411083004191561,
        "xgb_reg_alpha": 0.00032312959020195785,
        "xgb_reg_lambda": 0.09973931592188294,
        "xgb_min_child_weight": 5,
        "xgb_gamma": 0.022831888073107477,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 268,
        "lgb_n_estimators": 280,
        "lgb_max_depth": 6,
        "lgb_learning_rate": 0.01416218067265779,
        "lgb_num_leaves": 63,
        "lgb_subsample": 0.620043688003028,
        "lgb_colsample_bytree": 0.7255608676631902,
        "lgb_reg_alpha": 0.011068051651763956,
        "lgb_reg_lambda": 0.08369749839996954,
        "lgb_min_data_in_leaf": 17,
        "lgb_feature_fraction_bynode": 0.6180124436577304,
        "lgb_bagging_freq": 9,
        "lgb_min_gain_to_split": 0.11066509566246682,
        "cat_iterations": 507,
        "cat_depth": 3,
        "cat_learning_rate": 0.027992134207919614,
        "cat_l2_leaf_reg": 9.761632151115451,
        "cat_subsample": 0.6599809542105537,
        "cat_rsm": 0.7527189181875841,
        "cat_border_count": 148,
        "cat_random_strength": 0.33588927897945614,
        "cat_leaf_estimation_iterations": 10,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 71.42857142857143,
        "avg_nrmse": 1.025364983512102,
        "model_choice": "all",
        "symbol_metrics": {
          "AKCNS_1d": {
            "symbol": "AKCNS",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 457,
                "test_days": 30,
                "train_end_idx": 457,
                "test_end_idx": 487,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-19T00:00:00",
                "test_start": "2025-06-20T00:00:00",
                "test_end": "2025-08-01T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.015148613628633808,
                    "rmse": 0.024295800392524818,
                    "mape": 1.6973568379853625,
                    "confidence": 0.6373023675659881
                  },
                  "lightgbm": {
                    "raw_r2": -0.009272300466007577,
                    "rmse": 0.02459374960722373,
                    "mape": 1.7968829916504947,
                    "confidence": 0.6174676049935568
                  },
                  "catboost": {
                    "raw_r2": 0.0072965426313833515,
                    "rmse": 0.024425155629750474,
                    "mape": 1.7382864281724177,
                    "confidence": 0.6309277834183564
                  }
                },
                "dirhit": 71.42857142857143,
                "rmse": 0.021378831651545464,
                "mape": 337568.3919857465,
                "nrmse": 1.0741994249756344,
                "mask_count": 7,
                "mask_pct": 24.137931034482758,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 2,
                "train_days": 487,
                "test_days": 30,
                "train_end_idx": 487,
                "test_end_idx": 517,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-08-01T00:00:00",
                "test_start": "2025-08-04T00:00:00",
                "test_end": "2025-09-12T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.006598925299499385,
                    "rmse": 0.02412940875781601,
                    "mape": 1.7074549422446996,
                    "confidence": 0.6303611404496035
                  },
                  "lightgbm": {
                    "raw_r2": -0.015359937431434675,
                    "rmse": 0.024393800671426845,
                    "mape": 1.7867105899687226,
                    "confidence": 0.6125261813157488
                  },
                  "catboost": {
                    "raw_r2": 0.005963098403076257,
                    "rmse": 0.024187433033060885,
                    "mape": 1.7654777615307602,
                    "confidence": 0.6298446585640713
                  }
                },
                "dirhit": null,
                "rmse": 0.016874365938708485,
                "mape": 142.03013135010747,
                "nrmse": 1.0494786514697503,
                "mask_count": 4,
                "mask_pct": 13.793103448275861,
                "low_support": true,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 3,
                "train_days": 517,
                "test_days": 30,
                "train_end_idx": 517,
                "test_end_idx": 547,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-12T00:00:00",
                "test_start": "2025-09-15T00:00:00",
                "test_end": "2025-10-24T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.0012279424694789192,
                    "rmse": 0.02373384799370803,
                    "mape": 1.8123430013095243,
                    "confidence": 0.6259977001223394
                  },
                  "lightgbm": {
                    "raw_r2": -0.01290612901584313,
                    "rmse": 0.023895209210560826,
                    "mape": 1.7624228285797807,
                    "confidence": 0.6145174075601036
                  },
                  "catboost": {
                    "raw_r2": -0.002830136298712168,
                    "rmse": 0.02379317716268033,
                    "mape": 1.7486649358151911,
                    "confidence": 0.6227005526276226
                  }
                },
                "dirhit": 71.42857142857143,
                "rmse": 0.024714606824123957,
                "mape": 121.0940762258525,
                "nrmse": 0.9509944802709565,
                "mask_count": 7,
                "mask_pct": 24.137931034482758,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 4,
                "train_days": 547,
                "test_days": 30,
                "train_end_idx": 547,
                "test_end_idx": 577,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-24T00:00:00",
                "test_start": "2025-10-27T00:00:00",
                "test_end": "2025-12-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.00841560313742551,
                    "rmse": 0.023876085275409017,
                    "mape": 1.7437380587135871,
                    "confidence": 0.6318366688515631
                  },
                  "lightgbm": {
                    "raw_r2": -0.005605228404460982,
                    "rmse": 0.024055841825392957,
                    "mape": 1.7798280095926815,
                    "confidence": 0.6204460499980303
                  },
                  "catboost": {
                    "raw_r2": 0.0038341376654431603,
                    "rmse": 0.023947521281035326,
                    "mape": 1.739269647964746,
                    "confidence": 0.6281151414485806
                  }
                },
                "dirhit": null,
                "rmse": 0.016724293591634763,
                "mape": 45200.040464100064,
                "nrmse": 1.0267873773320668,
                "mask_count": 0,
                "mask_pct": 0.0,
                "low_support": true,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              }
            ],
            "avg_dirhit": 71.42857142857143,
            "avg_nrmse": 1.025364983512102,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": 0.007847771133759406,
                "rmse": 0.02400878560486447,
                "mape": 1.7402232100632935,
                "confidence": 0.6313744692473735
              },
              "lightgbm": {
                "raw_r2": -0.010785898829436591,
                "rmse": 0.024234650328651092,
                "mape": 1.7814611049479199,
                "confidence": 0.6162393109668599
              },
              "catboost": {
                "raw_r2": 0.00356591060029765,
                "rmse": 0.024088321776631755,
                "mape": 1.7479246933707788,
                "confidence": 0.6278970340146577
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 602,
      "value": 43.676760661795555,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "meta_stacking_alpha": 0.03324636270942861,
        "ml_adaptive_k_1d": 2.526252399703477,
        "ml_pattern_weight_scale_1d": 1.9972983608885915,
        "enable_talib_patterns_short": true,
        "external_min_days": 56,
        "external_smooth_alpha": 0.05041436697741909,
        "yolo_min_conf": 0.6024961769386953,
        "xgb_n_estimators": 361,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.03677390445797213,
        "xgb_subsample": 0.8999320352766018,
        "xgb_colsample_bytree": 0.765292501172496,
        "xgb_reg_alpha": 3.4104748328961085e-05,
        "xgb_reg_lambda": 4.129281466687799,
        "xgb_min_child_weight": 11,
        "xgb_gamma": 0.04230917236478057,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 299,
        "lgb_n_estimators": 315,
        "lgb_max_depth": 3,
        "lgb_learning_rate": 0.01862365106280725,
        "lgb_num_leaves": 60,
        "lgb_subsample": 0.6579813645517644,
        "lgb_colsample_bytree": 0.7332693653613136,
        "lgb_reg_alpha": 0.0015268216373253455,
        "lgb_reg_lambda": 0.070675877092799,
        "lgb_min_data_in_leaf": 50,
        "lgb_feature_fraction_bynode": 0.5955292747609038,
        "lgb_bagging_freq": 9,
        "lgb_min_gain_to_split": 0.823983879562039,
        "cat_iterations": 552,
        "cat_depth": 3,
        "cat_learning_rate": 0.03848767398294698,
        "cat_l2_leaf_reg": 9.596636666039446,
        "cat_subsample": 0.6847033817531505,
        "cat_rsm": 0.7680657431215296,
        "cat_border_count": 155,
        "cat_random_strength": 0.13459152026757062,
        "cat_leaf_estimation_iterations": 20,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 71.25,
        "avg_nrmse": 1.0330398897007407,
        "model_choice": "all",
        "symbol_metrics": {
          "AKCNS_1d": {
            "symbol": "AKCNS",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 457,
                "test_days": 30,
                "train_end_idx": 457,
                "test_end_idx": 487,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-19T00:00:00",
                "test_start": "2025-06-20T00:00:00",
                "test_end": "2025-08-01T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0048085857447346765,
                    "rmse": 0.024542709725295278,
                    "mape": 1.8966751193867533,
                    "confidence": 0.6210932122778542
                  },
                  "lightgbm": {
                    "raw_r2": -0.009272300466007577,
                    "rmse": 0.02459374960722373,
                    "mape": 1.7968829916504947,
                    "confidence": 0.6174676049935568
                  },
                  "catboost": {
                    "raw_r2": 0.003777373603264319,
                    "rmse": 0.02444924049841007,
                    "mape": 1.742776949754961,
                    "confidence": 0.6280690248229066
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.01940492331661838,
                "mape": 865875.9979990126,
                "nrmse": 0.9750185514417897,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 2,
                "train_days": 487,
                "test_days": 30,
                "train_end_idx": 487,
                "test_end_idx": 517,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-08-01T00:00:00",
                "test_start": "2025-08-04T00:00:00",
                "test_end": "2025-09-12T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.009177400708243985,
                    "rmse": 0.02432687309795106,
                    "mape": 1.857186482404189,
                    "confidence": 0.6175446700511606
                  },
                  "lightgbm": {
                    "raw_r2": -0.015359937431434675,
                    "rmse": 0.024393800671426845,
                    "mape": 1.7867105899687226,
                    "confidence": 0.6125261813157488
                  },
                  "catboost": {
                    "raw_r2": -0.004643193424730592,
                    "rmse": 0.02428687265353045,
                    "mape": 1.7604965641159236,
                    "confidence": 0.6212275747797182
                  }
                },
                "dirhit": 62.5,
                "rmse": 0.019914913733915802,
                "mape": 288.2320792245668,
                "nrmse": 1.238581460513592,
                "mask_count": 16,
                "mask_pct": 55.172413793103445,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 3,
                "train_days": 517,
                "test_days": 30,
                "train_end_idx": 517,
                "test_end_idx": 547,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-12T00:00:00",
                "test_start": "2025-09-15T00:00:00",
                "test_end": "2025-10-24T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0023110604067707596,
                    "rmse": 0.02377997708838932,
                    "mape": 1.8208888641675285,
                    "confidence": 0.623122284312952
                  },
                  "lightgbm": {
                    "raw_r2": -0.01290612901584313,
                    "rmse": 0.023895209210560826,
                    "mape": 1.7624228285797807,
                    "confidence": 0.6145174075601036
                  },
                  "catboost": {
                    "raw_r2": -0.005842136657400891,
                    "rmse": 0.02381875280159395,
                    "mape": 1.6559596914834793,
                    "confidence": 0.6202536014553202
                  }
                },
                "dirhit": 62.5,
                "rmse": 0.0250329056616072,
                "mape": 161.58665644754092,
                "nrmse": 0.9632423157181205,
                "mask_count": 16,
                "mask_pct": 55.172413793103445,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              },
              {
                "split_index": 4,
                "train_days": 547,
                "test_days": 30,
                "train_end_idx": 547,
                "test_end_idx": 577,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-24T00:00:00",
                "test_start": "2025-10-27T00:00:00",
                "test_end": "2025-12-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0010988712971981747,
                    "rmse": 0.024007767593215015,
                    "mape": 1.8726669601839334,
                    "confidence": 0.6241071693170863
                  },
                  "lightgbm": {
                    "raw_r2": -0.005605228404460982,
                    "rmse": 0.024055841825392957,
                    "mape": 1.7798280095926815,
                    "confidence": 0.6204460499980303
                  },
                  "catboost": {
                    "raw_r2": -0.0015286750284927801,
                    "rmse": 0.024024481991336416,
                    "mape": 1.7798266160039198,
                    "confidence": 0.6237579575861427
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.01556018918743454,
                "mape": 2091518.6915525256,
                "nrmse": 0.9553172311294602,
                "mask_count": 10,
                "mask_pct": 34.48275862068966,
                "low_support": false,
                "min_mask_count": 5,
                "min_mask_pct": 2.5
              }
            ],
            "avg_dirhit": 71.25,
            "avg_nrmse": 1.0330398897007407,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.004348979539236898,
                "rmse": 0.02416433187621267,
                "mape": 1.8618543565356012,
                "confidence": 0.6214668339897633
              },
              "lightgbm": {
                "raw_r2": -0.010785898829436591,
                "rmse": 0.024234650328651092,
                "mape": 1.7814611049479199,
                "confidence": 0.6162393109668599
              },
              "catboost": {
                "raw_r2": -0.002059157876839986,
                "rmse": 0.02414483698621772,
                "mape": 1.734764955339571,
                "confidence": 0.623327039661022
              }
            }
          }
        }
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_AKCNS_h1_c3",
  "symbols": [
    "AKCNS"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "meta_stacking_alpha": 0.028011493961301873,
    "ml_adaptive_k_1d": 2.1988661810012804,
    "ml_pattern_weight_scale_1d": 1.993016817608932,
    "external_min_days": 58,
    "external_smooth_alpha": 0.06593028369694987,
    "yolo_min_conf": 0.6641448767525987
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 151,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.036637259270732705,
    "xgb_subsample": 0.8883165755406552,
    "xgb_colsample_bytree": 0.8344381904771706,
    "xgb_reg_alpha": 2.0122231831181586e-05,
    "xgb_reg_lambda": 11.846620598733754,
    "xgb_min_child_weight": 9,
    "xgb_gamma": 0.036123729966028174,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 287,
    "lgb_n_estimators": 311,
    "lgb_max_depth": 2,
    "lgb_learning_rate": 0.021181305516224946,
    "lgb_num_leaves": 57,
    "lgb_subsample": 0.6397178291402742,
    "lgb_colsample_bytree": 0.7160343916091078,
    "lgb_reg_alpha": 0.0006302020895847782,
    "lgb_reg_lambda": 0.08746269252553328,
    "lgb_min_data_in_leaf": 17,
    "lgb_feature_fraction_bynode": 0.5868179619757854,
    "lgb_bagging_freq": 9,
    "lgb_min_gain_to_split": 0.9136232981255855,
    "cat_iterations": 559,
    "cat_depth": 3,
    "cat_learning_rate": 0.032349904817506644,
    "cat_l2_leaf_reg": 9.5583380436966,
    "cat_subsample": 0.6790372820199287,
    "cat_rsm": 0.7532036105047957,
    "cat_border_count": 145,
    "cat_random_strength": 0.14784671531101917,
    "cat_leaf_estimation_iterations": 4,
    "cat_bootstrap_type": "Bernoulli"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "0",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "AKCNS_1d": {
      "symbol": "AKCNS",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 455,
          "test_days": 30,
          "train_end_idx": 455,
          "test_end_idx": 485,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-17T00:00:00",
          "test_start": "2025-06-18T00:00:00",
          "test_end": "2025-07-30T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.001079100949745948,
              "rmse": 0.0247497935840016,
              "mape": 1.917401087127175,
              "confidence": 0.6241232326053294
            },
            "lightgbm": {
              "raw_r2": -0.00561013397185232,
              "rmse": 0.024817973422307564,
              "mape": 1.7978226205547057,
              "confidence": 0.6204420650077784
            },
            "catboost": {
              "raw_r2": 0.02001965003018602,
              "rmse": 0.02455579406676106,
              "mape": 1.6803852330474691,
              "confidence": 0.6412523976240447
            }
          },
          "dirhit": 66.66666666666666,
          "rmse": 0.020766788259413572,
          "mape": 884297.1442102648,
          "nrmse": 1.005446763360863,
          "mask_count": 6,
          "mask_pct": 20.689655172413794,
          "low_support": false,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        },
        {
          "split_index": 2,
          "train_days": 485,
          "test_days": 30,
          "train_end_idx": 485,
          "test_end_idx": 515,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-30T00:00:00",
          "test_start": "2025-07-31T00:00:00",
          "test_end": "2025-09-10T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.007914444352322173,
              "rmse": 0.0243100738526424,
              "mape": 1.8564640834230148,
              "confidence": 0.6185703529897371
            },
            "lightgbm": {
              "raw_r2": -0.015359937431434675,
              "rmse": 0.024393800671426845,
              "mape": 1.7867105899687226,
              "confidence": 0.6125261813157488
            },
            "catboost": {
              "raw_r2": -0.0015594689355374152,
              "rmse": 0.024251120044548897,
              "mape": 1.700489991722945,
              "confidence": 0.6237329379095011
            }
          },
          "dirhit": null,
          "rmse": 0.017945895201374285,
          "mape": 137.6595848642229,
          "nrmse": 1.1100811021624253,
          "mask_count": 4,
          "mask_pct": 13.793103448275861,
          "low_support": true,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        },
        {
          "split_index": 3,
          "train_days": 515,
          "test_days": 30,
          "train_end_idx": 515,
          "test_end_idx": 545,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-10T00:00:00",
          "test_start": "2025-09-11T00:00:00",
          "test_end": "2025-10-22T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0023681153917983013,
              "rmse": 0.023788866329345477,
              "mape": 1.793918601432603,
              "confidence": 0.6230759287235592
            },
            "lightgbm": {
              "raw_r2": -0.013146770980662303,
              "rmse": 0.02390441643188263,
              "mape": 1.7530719440542484,
              "confidence": 0.6143220931839541
            },
            "catboost": {
              "raw_r2": -0.0047346452412186935,
              "rmse": 0.023815524735129007,
              "mape": 1.7725256992554765,
              "confidence": 0.6211532803885743
            }
          },
          "dirhit": 66.66666666666666,
          "rmse": 0.02621360035666276,
          "mape": 143.71918647054446,
          "nrmse": 0.9856924407904263,
          "mask_count": 12,
          "mask_pct": 41.37931034482759,
          "low_support": false,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        },
        {
          "split_index": 4,
          "train_days": 545,
          "test_days": 30,
          "train_end_idx": 545,
          "test_end_idx": 575,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-22T00:00:00",
          "test_start": "2025-10-23T00:00:00",
          "test_end": "2025-12-03T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.0029034491797707007,
              "rmse": 0.0239637960495216,
              "mape": 1.882396543223016,
              "confidence": 0.6273590110284938
            },
            "lightgbm": {
              "raw_r2": -0.005605228404460982,
              "rmse": 0.024055841825392957,
              "mape": 1.7798280095926815,
              "confidence": 0.6204460499980303
            },
            "catboost": {
              "raw_r2": -0.0009742738483884406,
              "rmse": 0.02401314801159963,
              "mape": 1.780713523680832,
              "confidence": 0.6242084040635805
            }
          },
          "dirhit": 83.33333333333334,
          "rmse": 0.017861858777631814,
          "mape": 9958959.401176807,
          "nrmse": 1.1125591794134269,
          "mask_count": 6,
          "mask_pct": 20.689655172413794,
          "low_support": false,
          "min_mask_count": 5,
          "min_mask_pct": 2.5
        }
      ],
      "avg_dirhit": 72.22222222222221,
      "avg_nrmse": 1.0534448714317852,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.0021145528785239303,
          "rmse": 0.02420313245387777,
          "mape": 1.8625450788014521,
          "confidence": 0.6232821313367799
        },
        "lightgbm": {
          "raw_r2": -0.00993051769710257,
          "rmse": 0.0242930080877525,
          "mape": 1.7793582910425896,
          "confidence": 0.6169340973763779
        },
        "catboost": {
          "raw_r2": 0.0031878155012603675,
          "rmse": 0.024158896714509645,
          "mape": 1.7335286119266806,
          "confidence": 0.6275867549964251
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 5,
    "min_mask_pct": 2.5,
    "best_trial_number": 246,
    "best_trial_seed": 288,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "split_generation": {
      "type": "generate_walkforward_splits",
      "n_splits": 4
    },
    "symbol_specs": {
      "AKCNS_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 455,
            "test_end_idx": 485,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-17T00:00:00",
            "test_start": "2025-06-18T00:00:00",
            "test_end": "2025-07-30T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 485,
            "test_end_idx": 515,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-30T00:00:00",
            "test_start": "2025-07-31T00:00:00",
            "test_end": "2025-09-10T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 515,
            "test_end_idx": 545,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-10T00:00:00",
            "test_start": "2025-09-11T00:00:00",
            "test_end": "2025-10-22T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 545,
            "test_end_idx": 575,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-22T00:00:00",
            "test_start": "2025-10-23T00:00:00",
            "test_end": "2025-12-03T00:00:00"
          }
        ]
      }
    }
  }
}