{
  "best_value": 52.29384361566862,
  "best_dirhit": 83.33333333333333,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.5503132008962958,
    "ml_loss_threshold": 0.005808104951041914,
    "ml_dir_penalty": 3.425553009117815,
    "n_seeds": 3,
    "ml_adaptive_k_1d": 2.9956893924948096,
    "ml_pattern_weight_scale_1d": 1.8534520817868987,
    "enable_talib_patterns_short": true,
    "external_min_days": 25,
    "external_smooth_alpha": 0.09647895557123451,
    "regime_scale_low": 0.8210183733526834,
    "regime_scale_high": 1.1673356617656199,
    "yolo_min_conf": 0.41158579852080757,
    "smart_consensus_weight": 0.6395744190179993,
    "smart_performance_weight": 0.6711326049286896,
    "smart_sigma": 0.0030717521516259003,
    "smart_weight_xgb": 0.8899407170560862,
    "smart_weight_lgbm": 0.5068550813392377,
    "smart_weight_cat": 0.6213038424379915,
    "xgb_n_estimators": 184,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.06432546891484102,
    "xgb_subsample": 0.5265774258732555,
    "xgb_colsample_bytree": 0.7162972917458765,
    "xgb_reg_alpha": 0.01518853524378654,
    "xgb_reg_lambda": 0.028433688527000792,
    "xgb_min_child_weight": 9,
    "xgb_gamma": 0.7395329258845992,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 218,
    "lgb_n_estimators": 132,
    "lgb_max_depth": 4,
    "lgb_learning_rate": 0.014347954367824364,
    "lgb_num_leaves": 15,
    "lgb_subsample": 0.6000929675300123,
    "lgb_colsample_bytree": 0.6952763336340679,
    "lgb_reg_alpha": 0.007147419634642301,
    "lgb_reg_lambda": 0.013196503609850653,
    "lgb_min_data_in_leaf": 56,
    "lgb_feature_fraction_bynode": 0.6941889108050997,
    "lgb_bagging_freq": 7,
    "lgb_min_gain_to_split": 0.15735105187060477,
    "cat_iterations": 333,
    "cat_depth": 7,
    "cat_learning_rate": 0.013739779642951803,
    "cat_l2_leaf_reg": 3.7123971704875562,
    "cat_subsample": 0.5358163420126347,
    "cat_rsm": 0.7208221087606553,
    "cat_border_count": 33,
    "cat_random_strength": 0.10946692007721263,
    "cat_leaf_estimation_iterations": 15,
    "cat_bootstrap_type": "MVS"
  },
  "best_trial": {
    "number": 994,
    "value": 52.29384361566862,
    "state": "1"
  },
  "n_trials": 1500,
  "pruned_count": 0,
  "avg_trial_time": 133.24171731754504,
  "top_k_trials": [
    {
      "number": 994,
      "value": 52.29384361566862,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.5503132008962958,
        "ml_loss_threshold": 0.005808104951041914,
        "ml_dir_penalty": 3.425553009117815,
        "n_seeds": 3,
        "ml_adaptive_k_1d": 2.9956893924948096,
        "ml_pattern_weight_scale_1d": 1.8534520817868987,
        "enable_talib_patterns_short": true,
        "external_min_days": 25,
        "external_smooth_alpha": 0.09647895557123451,
        "regime_scale_low": 0.8210183733526834,
        "regime_scale_high": 1.1673356617656199,
        "yolo_min_conf": 0.41158579852080757,
        "smart_consensus_weight": 0.6395744190179993,
        "smart_performance_weight": 0.6711326049286896,
        "smart_sigma": 0.0030717521516259003,
        "smart_weight_xgb": 0.8899407170560862,
        "smart_weight_lgbm": 0.5068550813392377,
        "smart_weight_cat": 0.6213038424379915,
        "xgb_n_estimators": 184,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.06432546891484102,
        "xgb_subsample": 0.5265774258732555,
        "xgb_colsample_bytree": 0.7162972917458765,
        "xgb_reg_alpha": 0.01518853524378654,
        "xgb_reg_lambda": 0.028433688527000792,
        "xgb_min_child_weight": 9,
        "xgb_gamma": 0.7395329258845992,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 218,
        "lgb_n_estimators": 132,
        "lgb_max_depth": 4,
        "lgb_learning_rate": 0.014347954367824364,
        "lgb_num_leaves": 15,
        "lgb_subsample": 0.6000929675300123,
        "lgb_colsample_bytree": 0.6952763336340679,
        "lgb_reg_alpha": 0.007147419634642301,
        "lgb_reg_lambda": 0.013196503609850653,
        "lgb_min_data_in_leaf": 56,
        "lgb_feature_fraction_bynode": 0.6941889108050997,
        "lgb_bagging_freq": 7,
        "lgb_min_gain_to_split": 0.15735105187060477,
        "cat_iterations": 333,
        "cat_depth": 7,
        "cat_learning_rate": 0.013739779642951803,
        "cat_l2_leaf_reg": 3.7123971704875562,
        "cat_subsample": 0.5358163420126347,
        "cat_rsm": 0.7208221087606553,
        "cat_border_count": 33,
        "cat_random_strength": 0.10946692007721263,
        "cat_leaf_estimation_iterations": 15,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 83.33333333333333,
        "avg_nrmse": 1.0065816196107849,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1291,
      "value": 52.287437089329735,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.6883916253501454,
        "ml_loss_threshold": 0.004703243208122391,
        "ml_dir_penalty": 3.432847171862174,
        "n_seeds": 3,
        "ml_adaptive_k_1d": 2.8184558239268287,
        "ml_pattern_weight_scale_1d": 1.4603849571917449,
        "enable_talib_patterns_short": false,
        "external_min_days": 27,
        "external_smooth_alpha": 0.06432774444683287,
        "regime_scale_low": 0.8317268621998618,
        "regime_scale_high": 1.188965529609318,
        "yolo_min_conf": 0.48884792379477515,
        "smart_consensus_weight": 0.6292665669933388,
        "smart_performance_weight": 0.6364682834232332,
        "smart_sigma": 0.00921474415189944,
        "smart_weight_xgb": 0.5740576264138991,
        "smart_weight_lgbm": 0.523911537676145,
        "smart_weight_cat": 0.5012402827056952,
        "xgb_n_estimators": 248,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.07269264491107826,
        "xgb_subsample": 0.5432662773581782,
        "xgb_colsample_bytree": 0.6563569203992247,
        "xgb_reg_alpha": 0.0551745117433756,
        "xgb_reg_lambda": 0.020443594334278947,
        "xgb_min_child_weight": 7,
        "xgb_gamma": 0.1768966873316213,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 182,
        "lgb_n_estimators": 120,
        "lgb_max_depth": 8,
        "lgb_learning_rate": 0.015492960404167396,
        "lgb_num_leaves": 35,
        "lgb_subsample": 0.6174675049583499,
        "lgb_colsample_bytree": 0.566589799072203,
        "lgb_reg_alpha": 0.1380738592898805,
        "lgb_reg_lambda": 0.0038152041616731215,
        "lgb_min_data_in_leaf": 19,
        "lgb_feature_fraction_bynode": 0.7601917463088655,
        "lgb_bagging_freq": 8,
        "lgb_min_gain_to_split": 0.3214669290820597,
        "cat_iterations": 306,
        "cat_depth": 2,
        "cat_learning_rate": 0.013683210612758729,
        "cat_l2_leaf_reg": 2.778098220794237,
        "cat_subsample": 0.5279943740770148,
        "cat_rsm": 0.7238052319592889,
        "cat_border_count": 20,
        "cat_random_strength": 0.18301820262450183,
        "cat_leaf_estimation_iterations": 9,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 83.33333333333333,
        "avg_nrmse": 1.0076493740005992,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1226,
      "value": 51.472432099553394,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.6307569361923523,
        "ml_loss_threshold": 0.006332157956425174,
        "ml_dir_penalty": 2.711381418122007,
        "n_seeds": 3,
        "ml_adaptive_k_1d": 2.903775341299826,
        "ml_pattern_weight_scale_1d": 1.6787704567940906,
        "enable_talib_patterns_short": false,
        "external_min_days": 25,
        "external_smooth_alpha": 0.06622376297780096,
        "regime_scale_low": 0.8267922115662213,
        "regime_scale_high": 1.1902426238602248,
        "yolo_min_conf": 0.49845057530772063,
        "smart_consensus_weight": 0.61268099778191,
        "smart_performance_weight": 0.5236539810445334,
        "smart_sigma": 0.0017028223996693398,
        "smart_weight_xgb": 0.6815592388485177,
        "smart_weight_lgbm": 0.6529558799896136,
        "smart_weight_cat": 0.5020475874946877,
        "xgb_n_estimators": 248,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.07178022026895474,
        "xgb_subsample": 0.5078182902330823,
        "xgb_colsample_bytree": 0.6754956833393466,
        "xgb_reg_alpha": 0.052549645492381065,
        "xgb_reg_lambda": 0.02304842912931808,
        "xgb_min_child_weight": 9,
        "xgb_gamma": 0.37900824492170104,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 198,
        "lgb_n_estimators": 120,
        "lgb_max_depth": 8,
        "lgb_learning_rate": 0.012481896638467696,
        "lgb_num_leaves": 38,
        "lgb_subsample": 0.5928555457020621,
        "lgb_colsample_bytree": 0.6151652571334336,
        "lgb_reg_alpha": 0.03110270612917096,
        "lgb_reg_lambda": 0.004248181468056018,
        "lgb_min_data_in_leaf": 51,
        "lgb_feature_fraction_bynode": 0.7215543059262991,
        "lgb_bagging_freq": 8,
        "lgb_min_gain_to_split": 0.20958638920115796,
        "cat_iterations": 309,
        "cat_depth": 7,
        "cat_learning_rate": 0.01048337552472683,
        "cat_l2_leaf_reg": 3.0878224874871387,
        "cat_subsample": 0.528686828738046,
        "cat_rsm": 0.7600111648342363,
        "cat_border_count": 24,
        "cat_random_strength": 0.2119665048029394,
        "cat_leaf_estimation_iterations": 11,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 82.14285714285714,
        "avg_nrmse": 1.004594650074433,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_BAHKM_h1_c1",
  "symbols": [
    "BAHKM"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.5503132008962958,
    "ml_loss_threshold": 0.005808104951041914,
    "ml_dir_penalty": 3.425553009117815,
    "n_seeds": 3,
    "ml_adaptive_k_1d": 2.9956893924948096,
    "ml_pattern_weight_scale_1d": 1.8534520817868987,
    "external_min_days": 25,
    "external_smooth_alpha": 0.09647895557123451,
    "regime_scale_low": 0.8210183733526834,
    "regime_scale_high": 1.1673356617656199,
    "yolo_min_conf": 0.41158579852080757,
    "smart_consensus_weight": 0.6395744190179993,
    "smart_performance_weight": 0.6711326049286896,
    "smart_sigma": 0.0030717521516259003,
    "smart_weight_xgb": 0.8899407170560862,
    "smart_weight_lgbm": 0.5068550813392377,
    "smart_weight_cat": 0.6213038424379915
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 184,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.06432546891484102,
    "xgb_subsample": 0.5265774258732555,
    "xgb_colsample_bytree": 0.7162972917458765,
    "xgb_reg_alpha": 0.01518853524378654,
    "xgb_reg_lambda": 0.028433688527000792,
    "xgb_min_child_weight": 9,
    "xgb_gamma": 0.7395329258845992,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 218,
    "lgb_n_estimators": 132,
    "lgb_max_depth": 4,
    "lgb_learning_rate": 0.014347954367824364,
    "lgb_num_leaves": 15,
    "lgb_subsample": 0.6000929675300123,
    "lgb_colsample_bytree": 0.6952763336340679,
    "lgb_reg_alpha": 0.007147419634642301,
    "lgb_reg_lambda": 0.013196503609850653,
    "lgb_min_data_in_leaf": 56,
    "lgb_feature_fraction_bynode": 0.6941889108050997,
    "lgb_bagging_freq": 7,
    "lgb_min_gain_to_split": 0.15735105187060477,
    "cat_iterations": 333,
    "cat_depth": 7,
    "cat_learning_rate": 0.013739779642951803,
    "cat_l2_leaf_reg": 3.7123971704875562,
    "cat_subsample": 0.5358163420126347,
    "cat_rsm": 0.7208221087606553,
    "cat_border_count": 33,
    "cat_random_strength": 0.10946692007721263,
    "cat_leaf_estimation_iterations": 15,
    "cat_bootstrap_type": "MVS"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "1",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "BAHKM_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 202,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.17493835306205652,
              "rmse": 0.023938408434248763,
              "mape": 1.596729068575291,
              "confidence": 0.4912813382567184
            },
            "lightgbm": {
              "raw_r2": -0.03827700949877596,
              "rmse": 0.022726748140465776,
              "mape": 1.6539580480010678,
              "confidence": 0.5939945117539399
            },
            "catboost": {
              "raw_r2": -0.02386757946705187,
              "rmse": 0.022561224083554068,
              "mape": 1.648001160426644,
              "confidence": 0.6056305737566903
            }
          },
          "dirhit": 100.0,
          "rmse": 0.022463547397855867,
          "mape": 98.19927677045665,
          "nrmse": 1.026905999079541,
          "mask_count": 1,
          "mask_pct": 3.4482758620689653
        },
        {
          "split_index": 2,
          "train_days": 232,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.11509845809644292,
              "rmse": 0.023564294050316823,
              "mape": 1.5737018538602576,
              "confidence": 0.5339808092624564
            },
            "lightgbm": {
              "raw_r2": -0.03260007272772144,
              "rmse": 0.022697857759075027,
              "mape": 1.7313964681491356,
              "confidence": 0.5985709314342611
            },
            "catboost": {
              "raw_r2": -0.02597093177090763,
              "rmse": 0.022620261927188853,
              "mape": 1.7180589208738275,
              "confidence": 0.6039282193898863
            }
          },
          "dirhit": 100.0,
          "rmse": 0.037798347710216916,
          "mape": 311375.9789965652,
          "nrmse": 1.0017533011334194,
          "mask_count": 1,
          "mask_pct": 3.4482758620689653
        },
        {
          "split_index": 3,
          "train_days": 262,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.061289573927148476,
              "rmse": 0.02669072362224019,
              "mape": 1.520877446081821,
              "confidence": 0.5755883062023204
            },
            "lightgbm": {
              "raw_r2": -0.028580043617482342,
              "rmse": 0.026293132316069886,
              "mape": 1.7003916417740947,
              "confidence": 0.6018181498354565
            },
            "catboost": {
              "raw_r2": 0.006115256859789346,
              "rmse": 0.025851375933706285,
              "mape": 1.725045453987302,
              "confidence": 0.6299682591320284
            }
          },
          "dirhit": 50.0,
          "rmse": 0.036760940919800346,
          "mape": 108.75265529753118,
          "nrmse": 1.002313003549578,
          "mask_count": 2,
          "mask_pct": 6.896551724137931
        },
        {
          "split_index": 4,
          "train_days": 292,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.07303745417122716,
              "rmse": 0.028711466446953857,
              "mape": 1.5044786126542127,
              "confidence": 0.5663078967007829
            },
            "lightgbm": {
              "raw_r2": -0.018529751457388704,
              "rmse": 0.028086901446299377,
              "mape": 1.7264399966615906,
              "confidence": 0.6099553370899632
            },
            "catboost": {
              "raw_r2": -0.0041128864998438335,
              "rmse": 0.027919338585957805,
              "mape": 1.7014855076360367,
              "confidence": 0.6216583974805429
            }
          },
          "dirhit": 30.0,
          "rmse": 0.04237339250270754,
          "mape": 119.1320160527384,
          "nrmse": 1.007647172048353,
          "mask_count": 10,
          "mask_pct": 34.48275862068966
        }
      ],
      "avg_dirhit": 70.0,
      "avg_nrmse": 1.009654868952723,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.10609095981421876,
          "rmse": 0.02572622313843991,
          "mape": 1.5489467452928956,
          "confidence": 0.5417895876055695
        },
        "lightgbm": {
          "raw_r2": -0.029496719325342112,
          "rmse": 0.024951159915477514,
          "mape": 1.7030465386464722,
          "confidence": 0.6010847325284051
        },
        "catboost": {
          "raw_r2": -0.011959035219503499,
          "rmse": 0.024738050132601754,
          "mape": 1.6981477607309525,
          "confidence": 0.6152963624397869
        }
      }
    }
  }
}