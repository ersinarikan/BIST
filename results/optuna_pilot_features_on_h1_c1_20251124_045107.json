{
  "best_value": 64.0331744444778,
  "best_dirhit": 100.0,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "model_choice": "all",
    "n_seeds": 5,
    "ml_adaptive_k_1d": 2.45098847099353,
    "ml_pattern_weight_scale_1d": 1.4761902580064623,
    "enable_talib_patterns_short": false,
    "external_min_days": 59,
    "external_smooth_alpha": 0.1153318486938584,
    "regime_scale_low": 0.8221721742664374,
    "regime_scale_high": 1.1935416216823467,
    "yolo_min_conf": 0.3294908521263239,
    "smart_consensus_weight": 0.698103008386381,
    "smart_performance_weight": 0.37349085422645967,
    "smart_sigma": 0.010428075384994136,
    "smart_weight_xgb": 1.0263552750514824,
    "smart_weight_lgbm": 0.5174961330121699,
    "smart_weight_cat": 1.1306909440847979,
    "fingpt_confidence_threshold": 0.21789857236027632,
    "xgb_n_estimators": 330,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.016486469061601425,
    "xgb_subsample": 0.7151921458320188,
    "xgb_colsample_bytree": 0.7084203057074876,
    "xgb_reg_alpha": 2.2214565224447595e-06,
    "xgb_reg_lambda": 0.047048710550842206,
    "xgb_min_child_weight": 14,
    "xgb_gamma": 0.2272936139071206,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 136,
    "lgb_n_estimators": 273,
    "lgb_max_depth": 4,
    "lgb_learning_rate": 0.01697955564017246,
    "lgb_num_leaves": 56,
    "lgb_subsample": 0.8428195068194979,
    "lgb_colsample_bytree": 0.5417663310829758,
    "lgb_reg_alpha": 4.011337570716193e-05,
    "lgb_reg_lambda": 3.1670736849640346,
    "lgb_min_data_in_leaf": 16,
    "lgb_feature_fraction_bynode": 0.6674506573046538,
    "lgb_bagging_freq": 6,
    "lgb_min_gain_to_split": 0.5511030320264498,
    "cat_iterations": 520,
    "cat_depth": 5,
    "cat_learning_rate": 0.19087664798301293,
    "cat_l2_leaf_reg": 4.838553513901468,
    "cat_subsample": 0.8868334627086655,
    "cat_rsm": 0.6468256213264549,
    "cat_border_count": 125,
    "cat_random_strength": 0.15660706779680256,
    "cat_leaf_estimation_iterations": 14,
    "cat_bootstrap_type": "Bayesian"
  },
  "best_trial": {
    "number": 1172,
    "value": 64.0331744444778,
    "state": "1"
  },
  "n_trials": 1331,
  "pruned_count": 0,
  "avg_trial_time": 196.25871475263156,
  "top_k_trials": [
    {
      "number": 1172,
      "value": 64.0331744444778,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "n_seeds": 5,
        "ml_adaptive_k_1d": 2.45098847099353,
        "ml_pattern_weight_scale_1d": 1.4761902580064623,
        "enable_talib_patterns_short": false,
        "external_min_days": 59,
        "external_smooth_alpha": 0.1153318486938584,
        "regime_scale_low": 0.8221721742664374,
        "regime_scale_high": 1.1935416216823467,
        "yolo_min_conf": 0.3294908521263239,
        "smart_consensus_weight": 0.698103008386381,
        "smart_performance_weight": 0.37349085422645967,
        "smart_sigma": 0.010428075384994136,
        "smart_weight_xgb": 1.0263552750514824,
        "smart_weight_lgbm": 0.5174961330121699,
        "smart_weight_cat": 1.1306909440847979,
        "fingpt_confidence_threshold": 0.21789857236027632,
        "xgb_n_estimators": 330,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.016486469061601425,
        "xgb_subsample": 0.7151921458320188,
        "xgb_colsample_bytree": 0.7084203057074876,
        "xgb_reg_alpha": 2.2214565224447595e-06,
        "xgb_reg_lambda": 0.047048710550842206,
        "xgb_min_child_weight": 14,
        "xgb_gamma": 0.2272936139071206,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 136,
        "lgb_n_estimators": 273,
        "lgb_max_depth": 4,
        "lgb_learning_rate": 0.01697955564017246,
        "lgb_num_leaves": 56,
        "lgb_subsample": 0.8428195068194979,
        "lgb_colsample_bytree": 0.5417663310829758,
        "lgb_reg_alpha": 4.011337570716193e-05,
        "lgb_reg_lambda": 3.1670736849640346,
        "lgb_min_data_in_leaf": 16,
        "lgb_feature_fraction_bynode": 0.6674506573046538,
        "lgb_bagging_freq": 6,
        "lgb_min_gain_to_split": 0.5511030320264498,
        "cat_iterations": 520,
        "cat_depth": 5,
        "cat_learning_rate": 0.19087664798301293,
        "cat_l2_leaf_reg": 4.838553513901468,
        "cat_subsample": 0.8868334627086655,
        "cat_rsm": 0.6468256213264549,
        "cat_border_count": 125,
        "cat_random_strength": 0.15660706779680256,
        "cat_leaf_estimation_iterations": 14,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 100.0,
        "avg_nrmse": 0.9944709259203675,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 533,
      "value": 64.02754300434694,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "n_seeds": 5,
        "ml_adaptive_k_1d": 2.165438518431395,
        "ml_pattern_weight_scale_1d": 0.795599072036904,
        "enable_talib_patterns_short": false,
        "external_min_days": 57,
        "external_smooth_alpha": 0.1436096213382142,
        "regime_scale_low": 0.8319448000898133,
        "regime_scale_high": 1.1791715497309618,
        "yolo_min_conf": 0.3028366642414376,
        "smart_consensus_weight": 0.7437575765171085,
        "smart_performance_weight": 0.3803184736821606,
        "smart_sigma": 0.012162263421942408,
        "smart_weight_xgb": 1.0800495265254197,
        "smart_weight_lgbm": 0.7039770736217397,
        "smart_weight_cat": 1.1378789247714234,
        "fingpt_confidence_threshold": 0.4008495333505066,
        "xgb_n_estimators": 245,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.017604964784035396,
        "xgb_subsample": 0.7545761331435106,
        "xgb_colsample_bytree": 0.5973985520603275,
        "xgb_reg_alpha": 3.3194748747682524e-06,
        "xgb_reg_lambda": 0.043479716758886275,
        "xgb_min_child_weight": 7,
        "xgb_gamma": 0.3612744100649707,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 433,
        "lgb_n_estimators": 311,
        "lgb_max_depth": 4,
        "lgb_learning_rate": 0.01419575720183624,
        "lgb_num_leaves": 56,
        "lgb_subsample": 0.515799747963615,
        "lgb_colsample_bytree": 0.6093767210545794,
        "lgb_reg_alpha": 1.0357498346049654e-06,
        "lgb_reg_lambda": 2.5785328601263497,
        "lgb_min_data_in_leaf": 10,
        "lgb_feature_fraction_bynode": 0.7062537720666742,
        "lgb_bagging_freq": 5,
        "lgb_min_gain_to_split": 0.13926173405635753,
        "cat_iterations": 526,
        "cat_depth": 4,
        "cat_learning_rate": 0.011229999831292588,
        "cat_l2_leaf_reg": 5.379726256240908,
        "cat_subsample": 0.9226737036299868,
        "cat_rsm": 0.6418604227265239,
        "cat_border_count": 122,
        "cat_random_strength": 0.17734785798466193,
        "cat_leaf_estimation_iterations": 13,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 100.0,
        "avg_nrmse": 0.9954094992755115,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 555,
      "value": 64.02372339695319,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "n_seeds": 5,
        "ml_adaptive_k_1d": 2.2634907403111426,
        "ml_pattern_weight_scale_1d": 1.5208730806600448,
        "enable_talib_patterns_short": false,
        "external_min_days": 58,
        "external_smooth_alpha": 0.10933690647245173,
        "regime_scale_low": 0.8000002940500379,
        "regime_scale_high": 1.197480413261105,
        "yolo_min_conf": 0.3125026441641419,
        "smart_consensus_weight": 0.714135233588195,
        "smart_performance_weight": 0.38870457976325345,
        "smart_sigma": 0.010619215054640476,
        "smart_weight_xgb": 1.0854072236859096,
        "smart_weight_lgbm": 0.5223581933381223,
        "smart_weight_cat": 1.1800367211372578,
        "fingpt_confidence_threshold": 0.22505397380950598,
        "xgb_n_estimators": 240,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.02172102918197258,
        "xgb_subsample": 0.723478830203693,
        "xgb_colsample_bytree": 0.5100655087472551,
        "xgb_reg_alpha": 2.53118244814593e-06,
        "xgb_reg_lambda": 0.035590894409725946,
        "xgb_min_child_weight": 12,
        "xgb_gamma": 0.3620328415533061,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 131,
        "lgb_n_estimators": 311,
        "lgb_max_depth": 4,
        "lgb_learning_rate": 0.017383076340366684,
        "lgb_num_leaves": 56,
        "lgb_subsample": 0.8808170636910843,
        "lgb_colsample_bytree": 0.5658729478595913,
        "lgb_reg_alpha": 1.4083036237610236e-06,
        "lgb_reg_lambda": 5.8934463255454475,
        "lgb_min_data_in_leaf": 59,
        "lgb_feature_fraction_bynode": 0.6639202939310221,
        "lgb_bagging_freq": 5,
        "lgb_min_gain_to_split": 0.5949432775331839,
        "cat_iterations": 455,
        "cat_depth": 4,
        "cat_learning_rate": 0.1896993208743978,
        "cat_l2_leaf_reg": 5.188975975247875,
        "cat_subsample": 0.9029643944368863,
        "cat_rsm": 0.6706648521270341,
        "cat_border_count": 112,
        "cat_random_strength": 0.14672560265420095,
        "cat_leaf_estimation_iterations": 14,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 100.0,
        "avg_nrmse": 0.9960461005078023,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_AGESA_h1_c1",
  "symbols": [
    "AGESA"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "n_seeds": 5,
    "ml_adaptive_k_1d": 2.45098847099353,
    "ml_pattern_weight_scale_1d": 1.4761902580064623,
    "external_min_days": 59,
    "external_smooth_alpha": 0.1153318486938584,
    "regime_scale_low": 0.8221721742664374,
    "regime_scale_high": 1.1935416216823467,
    "yolo_min_conf": 0.3294908521263239,
    "smart_consensus_weight": 0.698103008386381,
    "smart_performance_weight": 0.37349085422645967,
    "smart_sigma": 0.010428075384994136,
    "smart_weight_xgb": 1.0263552750514824,
    "smart_weight_lgbm": 0.5174961330121699,
    "smart_weight_cat": 1.1306909440847979,
    "fingpt_confidence_threshold": 0.21789857236027632
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 330,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.016486469061601425,
    "xgb_subsample": 0.7151921458320188,
    "xgb_colsample_bytree": 0.7084203057074876,
    "xgb_reg_alpha": 2.2214565224447595e-06,
    "xgb_reg_lambda": 0.047048710550842206,
    "xgb_min_child_weight": 14,
    "xgb_gamma": 0.2272936139071206,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 136,
    "lgb_n_estimators": 273,
    "lgb_max_depth": 4,
    "lgb_learning_rate": 0.01697955564017246,
    "lgb_num_leaves": 56,
    "lgb_subsample": 0.8428195068194979,
    "lgb_colsample_bytree": 0.5417663310829758,
    "lgb_reg_alpha": 4.011337570716193e-05,
    "lgb_reg_lambda": 3.1670736849640346,
    "lgb_min_data_in_leaf": 16,
    "lgb_feature_fraction_bynode": 0.6674506573046538,
    "lgb_bagging_freq": 6,
    "lgb_min_gain_to_split": 0.5511030320264498,
    "cat_iterations": 520,
    "cat_depth": 5,
    "cat_learning_rate": 0.19087664798301293,
    "cat_l2_leaf_reg": 4.838553513901468,
    "cat_subsample": 0.8868334627086655,
    "cat_rsm": 0.6468256213264549,
    "cat_border_count": 125,
    "cat_random_strength": 0.15660706779680256,
    "cat_leaf_estimation_iterations": 14,
    "cat_bootstrap_type": "Bayesian"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "1",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "AGESA_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.026401719987432976,
              "rmse": 0.027253431959765654,
              "mape": 1.697378341549324,
              "confidence": 0.6035796998082044
            },
            "lightgbm": {
              "raw_r2": -0.020955134830415556,
              "rmse": 0.02718053572413727,
              "mape": 1.6774895863405126,
              "confidence": 0.6079895117830474
            },
            "catboost": {
              "raw_r2": 0.020225680548722202,
              "rmse": 0.026612909665923872,
              "mape": 1.5916114375867192,
              "confidence": 0.6414193744816675
            }
          },
          "dirhit": 83.33333333333334,
          "rmse": 0.0226658934353415,
          "mape": 635527.0975683884,
          "nrmse": 1.0307329861421652,
          "mask_count": 6,
          "mask_pct": 20.689655172413794
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.02297973440214422,
              "rmse": 0.027006153688221082,
              "mape": 1.6690325214388544,
              "confidence": 0.6063494795072901
            },
            "lightgbm": {
              "raw_r2": -0.018677482671013212,
              "rmse": 0.026948243833860745,
              "mape": 1.663104515222183,
              "confidence": 0.6098355647455922
            },
            "catboost": {
              "raw_r2": 0.026034465278964913,
              "rmse": 0.026342470414778506,
              "mape": 1.5204388724088667,
              "confidence": 0.6461231840545056
            }
          },
          "dirhit": 50.0,
          "rmse": 0.014653105335076948,
          "mape": 157.81383647892616,
          "nrmse": 1.0015934824971575,
          "mask_count": 6,
          "mask_pct": 20.689655172413794
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0036397837538191258,
              "rmse": 0.02636997034685599,
              "mape": 1.6472218130547158,
              "confidence": 0.6220427573196281
            },
            "lightgbm": {
              "raw_r2": -0.0027430810959996332,
              "rmse": 0.026358062017906882,
              "mape": 1.654924023010063,
              "confidence": 0.6227712815468458
            },
            "catboost": {
              "raw_r2": 0.012601818012820823,
              "rmse": 0.026179633499663346,
              "mape": 1.6227627385029597,
              "confidence": 0.635235590960747
            }
          },
          "dirhit": 60.0,
          "rmse": 0.028095339466239638,
          "mape": 180.45129994678874,
          "nrmse": 1.0109775718423095,
          "mask_count": 10,
          "mask_pct": 34.48275862068966
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.011242333071971903,
              "rmse": 0.0264776799535299,
              "mape": 1.6644174771515738,
              "confidence": 0.6158680088208355
            },
            "lightgbm": {
              "raw_r2": -0.00980663732810679,
              "rmse": 0.026456808681452733,
              "mape": 1.6610366960799967,
              "confidence": 0.6170337031899712
            },
            "catboost": {
              "raw_r2": 0.02437405768729391,
              "rmse": 0.026015795478468204,
              "mape": 1.5734277596131157,
              "confidence": 0.6447794469613433
            }
          },
          "dirhit": 50.0,
          "rmse": 0.022174787317233345,
          "mape": 777497.9980712959,
          "nrmse": 1.0819615414874404,
          "mask_count": 10,
          "mask_pct": 34.48275862068966
        }
      ],
      "avg_dirhit": 60.833333333333336,
      "avg_nrmse": 1.0313163954922682,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.016065892803842057,
          "rmse": 0.026776808987093156,
          "mape": 1.669512538298617,
          "confidence": 0.6119599863639895
        },
        "lightgbm": {
          "raw_r2": -0.013045583981383798,
          "rmse": 0.02673591256433941,
          "mape": 1.6641387051631886,
          "confidence": 0.6144075153163642
        },
        "catboost": {
          "raw_r2": 0.020809005381950463,
          "rmse": 0.026287702264708484,
          "mape": 1.5770602020279152,
          "confidence": 0.6418893991145658
        }
      }
    }
  }
}