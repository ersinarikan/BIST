{
  "best_value": 50.525098140378596,
  "best_dirhit": 84.78260869565217,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "model_choice": "cat",
    "ml_loss_mse_weight": 0.4354970831065695,
    "ml_loss_threshold": 0.0013719366346321474,
    "ml_dir_penalty": 1.8760162487395635,
    "n_seeds": 3,
    "meta_stacking_alpha": 0.5586027542923505,
    "ml_adaptive_k_1d": 2.154187232301002,
    "ml_pattern_weight_scale_1d": 0.8525420121689905,
    "enable_talib_patterns_short": false,
    "external_min_days": 38,
    "external_smooth_alpha": 0.297587646961557,
    "fingpt_confidence_threshold": 0.38228758033654586,
    "cat_iterations": 492,
    "cat_depth": 8,
    "cat_learning_rate": 0.014818705933159468,
    "cat_l2_leaf_reg": 5.111880661962484,
    "cat_subsample": 0.5565866470814562,
    "cat_rsm": 0.5934732075107423,
    "cat_border_count": 20,
    "cat_random_strength": 0.8248916254990171,
    "cat_leaf_estimation_iterations": 11,
    "cat_bootstrap_type": "MVS"
  },
  "best_trial": {
    "number": 611,
    "value": 50.525098140378596,
    "state": "1"
  },
  "n_trials": 1277,
  "pruned_count": 0,
  "avg_trial_time": 204.65234760109718,
  "top_k_trials": [
    {
      "number": 611,
      "value": 50.525098140378596,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "cat",
        "ml_loss_mse_weight": 0.4354970831065695,
        "ml_loss_threshold": 0.0013719366346321474,
        "ml_dir_penalty": 1.8760162487395635,
        "n_seeds": 3,
        "meta_stacking_alpha": 0.5586027542923505,
        "ml_adaptive_k_1d": 2.154187232301002,
        "ml_pattern_weight_scale_1d": 0.8525420121689905,
        "enable_talib_patterns_short": false,
        "external_min_days": 38,
        "external_smooth_alpha": 0.297587646961557,
        "fingpt_confidence_threshold": 0.38228758033654586,
        "cat_iterations": 492,
        "cat_depth": 8,
        "cat_learning_rate": 0.014818705933159468,
        "cat_l2_leaf_reg": 5.111880661962484,
        "cat_subsample": 0.5565866470814562,
        "cat_rsm": 0.5934732075107423,
        "cat_border_count": 20,
        "cat_random_strength": 0.8248916254990171,
        "cat_leaf_estimation_iterations": 11,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 84.78260869565217,
        "avg_nrmse": 1.4704546577629867,
        "model_choice": "cat"
      },
      "state": "1"
    },
    {
      "number": 350,
      "value": 46.88558541666937,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "cat",
        "ml_loss_mse_weight": 0.34448092026137717,
        "ml_loss_threshold": 0.0014374284188461576,
        "ml_dir_penalty": 1.7759153145283446,
        "n_seeds": 3,
        "meta_stacking_alpha": 0.36271580159645994,
        "ml_adaptive_k_1d": 2.2796171444419007,
        "ml_pattern_weight_scale_1d": 1.330685003822209,
        "enable_talib_patterns_short": false,
        "external_min_days": 34,
        "external_smooth_alpha": 0.26029502684088013,
        "regime_scale_low": 0.8003922019927238,
        "regime_scale_high": 1.1724499989412749,
        "fingpt_confidence_threshold": 0.4591387973771669,
        "cat_iterations": 570,
        "cat_depth": 8,
        "cat_learning_rate": 0.012008844973156229,
        "cat_l2_leaf_reg": 6.097628658045022,
        "cat_subsample": 0.5635739848462524,
        "cat_rsm": 0.6686345775125694,
        "cat_border_count": 18,
        "cat_random_strength": 0.8753664004637784,
        "cat_leaf_estimation_iterations": 11,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 79.52898550724638,
        "avg_nrmse": 1.4641174064005145,
        "model_choice": "cat"
      },
      "state": "1"
    },
    {
      "number": 948,
      "value": 46.85581618731481,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "cat",
        "ml_loss_mse_weight": 0.3021199966679733,
        "ml_loss_threshold": 0.0017549196377902789,
        "ml_dir_penalty": 1.612623117766706,
        "n_seeds": 3,
        "ml_adaptive_k_1d": 2.146215208565686,
        "ml_pattern_weight_scale_1d": 0.6536315300889103,
        "enable_talib_patterns_short": false,
        "external_min_days": 36,
        "external_smooth_alpha": 0.3081365095631986,
        "fingpt_confidence_threshold": 0.361796850196994,
        "cat_iterations": 579,
        "cat_depth": 8,
        "cat_learning_rate": 0.010993336844273553,
        "cat_l2_leaf_reg": 6.181905366655018,
        "cat_subsample": 0.5501770508254251,
        "cat_rsm": 0.6266812485580295,
        "cat_border_count": 23,
        "cat_random_strength": 1.104336363118005,
        "cat_leaf_estimation_iterations": 11,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 78.125,
        "avg_nrmse": 1.3052806354475321,
        "model_choice": "cat"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_ANSGR_h1_c1",
  "symbols": [
    "ANSGR"
  ],
  "horizon": 1,
  "best_model_choice": "cat",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.4354970831065695,
    "ml_loss_threshold": 0.0013719366346321474,
    "ml_dir_penalty": 1.8760162487395635,
    "n_seeds": 3,
    "meta_stacking_alpha": 0.5586027542923505,
    "ml_adaptive_k_1d": 2.154187232301002,
    "ml_pattern_weight_scale_1d": 0.8525420121689905,
    "external_min_days": 38,
    "external_smooth_alpha": 0.297587646961557,
    "fingpt_confidence_threshold": 0.38228758033654586
  },
  "hyperparameters": {
    "model_choice": "cat",
    "cat_iterations": 492,
    "cat_depth": 8,
    "cat_learning_rate": 0.014818705933159468,
    "cat_l2_leaf_reg": 5.111880661962484,
    "cat_subsample": 0.5565866470814562,
    "cat_rsm": 0.5934732075107423,
    "cat_border_count": 20,
    "cat_random_strength": 0.8248916254990171,
    "cat_leaf_estimation_iterations": 11,
    "cat_bootstrap_type": "MVS"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "1",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "0",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "0",
    "ENABLE_LIGHTGBM": "0",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "ANSGR_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 449,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -36.48242944853935,
              "rmse": 0.25699932301689854,
              "mape": 1.830731517409839,
              "confidence": 0.3
            },
            "catboost": {
              "raw_r2": -0.012671002589901356,
              "rmse": 0.16671891249714554,
              "mape": 1.5261017020218308,
              "confidence": 0.6147082526328563
            }
          },
          "dirhit": 66.66666666666666,
          "rmse": 0.019083612224062872,
          "mape": 616560.211118883,
          "nrmse": 1.0317070285533385,
          "mask_count": 3,
          "mask_pct": 10.344827586206897
        },
        {
          "split_index": 2,
          "train_days": 479,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -38.15537201381262,
              "rmse": 0.2539584712198368,
              "mape": 1.8328951285221293,
              "confidence": 0.3
            },
            "catboost": {
              "raw_r2": -0.002866231821253747,
              "rmse": 0.16173901686143866,
              "mape": 1.5234775356109045,
              "confidence": 0.622671226502465
            }
          },
          "dirhit": 40.0,
          "rmse": 0.14195470641272873,
          "mape": 2932773.482766925,
          "nrmse": 1.0302494674541511,
          "mask_count": 5,
          "mask_pct": 17.24137931034483
        },
        {
          "split_index": 3,
          "train_days": 509,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -42.27183126556617,
              "rmse": 0.25503955678330054,
              "mape": 1.838240459768646,
              "confidence": 0.3
            },
            "catboost": {
              "raw_r2": -0.008279035785845398,
              "rmse": 0.16128986924126298,
              "mape": 1.531160909246071,
              "confidence": 0.6182742438126072
            }
          },
          "dirhit": 39.130434782608695,
          "rmse": 0.04339032973878809,
          "mape": 760.3997037802739,
          "nrmse": 2.2861097326566293,
          "mask_count": 23,
          "mask_pct": 79.3103448275862
        },
        {
          "split_index": 4,
          "train_days": 539,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -38.78390198572059,
              "rmse": 0.2525833953082489,
              "mape": 1.8404177535290904,
              "confidence": 0.3
            },
            "catboost": {
              "raw_r2": -8.078792487838568e-06,
              "rmse": 0.15704429628677014,
              "mape": 1.5698581470655264,
              "confidence": 0.6249934359811045
            }
          },
          "dirhit": 77.77777777777779,
          "rmse": 0.015652708901232302,
          "mape": 7239137.67175482,
          "nrmse": 1.0968173587825936,
          "mask_count": 9,
          "mask_pct": 31.03448275862069
        }
      ],
      "avg_dirhit": 55.893719806763286,
      "avg_nrmse": 1.3612208968616781,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -38.92338367840968,
          "rmse": 0.25464518658207125,
          "mape": 1.8355712148074261,
          "confidence": 0.3
        },
        "catboost": {
          "raw_r2": -0.005956087247372084,
          "rmse": 0.16169802372165432,
          "mape": 1.537649573486083,
          "confidence": 0.6201617897322582
        }
      }
    }
  }
}