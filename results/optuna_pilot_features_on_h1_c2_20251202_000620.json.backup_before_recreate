{
  "best_value": 52.28718345670981,
  "best_dirhit": 83.33333333333334,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "model_choice": "lgbm",
    "meta_stacking_alpha": 0.057636306107838986,
    "ml_adaptive_k_1d": 1.0617198665784802,
    "ml_pattern_weight_scale_1d": 1.3406533278225887,
    "enable_talib_patterns_short": true,
    "external_min_days": 32,
    "external_smooth_alpha": 0.16657602292617488,
    "yolo_min_conf": 0.3248087277025897,
    "smart_consensus_weight": 0.37797168882862275,
    "smart_performance_weight": 0.6246876549604587,
    "smart_sigma": 0.0041661207626316026,
    "smart_weight_xgb": 0.7571992037137288,
    "smart_weight_lgbm": 0.771238172705488,
    "smart_weight_cat": 1.0031681704670727,
    "lgb_n_estimators": 167,
    "lgb_max_depth": 2,
    "lgb_learning_rate": 0.023579178166162458,
    "lgb_num_leaves": 57,
    "lgb_subsample": 0.6549930220930186,
    "lgb_colsample_bytree": 0.5136909771400046,
    "lgb_reg_alpha": 0.49455044742223603,
    "lgb_reg_lambda": 0.22937523712496496,
    "lgb_min_data_in_leaf": 61,
    "lgb_feature_fraction_bynode": 0.552075001428954,
    "lgb_bagging_freq": 3,
    "lgb_min_gain_to_split": 0.3095746379141021
  },
  "best_trial": {
    "number": 1314,
    "value": 52.28718345670981,
    "state": "1"
  },
  "best_trial_number": 1314,
  "best_trial_seed": 1356,
  "n_trials": 1362,
  "pruned_count": 0,
  "avg_trial_time": 267.26042895870205,
  "top_k_trials": [
    {
      "number": 1314,
      "value": 52.28718345670981,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "lgbm",
        "meta_stacking_alpha": 0.057636306107838986,
        "ml_adaptive_k_1d": 1.0617198665784802,
        "ml_pattern_weight_scale_1d": 1.3406533278225887,
        "enable_talib_patterns_short": true,
        "external_min_days": 32,
        "external_smooth_alpha": 0.16657602292617488,
        "yolo_min_conf": 0.3248087277025897,
        "smart_consensus_weight": 0.37797168882862275,
        "smart_performance_weight": 0.6246876549604587,
        "smart_sigma": 0.0041661207626316026,
        "smart_weight_xgb": 0.7571992037137288,
        "smart_weight_lgbm": 0.771238172705488,
        "smart_weight_cat": 1.0031681704670727,
        "lgb_n_estimators": 167,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.023579178166162458,
        "lgb_num_leaves": 57,
        "lgb_subsample": 0.6549930220930186,
        "lgb_colsample_bytree": 0.5136909771400046,
        "lgb_reg_alpha": 0.49455044742223603,
        "lgb_reg_lambda": 0.22937523712496496,
        "lgb_min_data_in_leaf": 61,
        "lgb_feature_fraction_bynode": 0.552075001428954,
        "lgb_bagging_freq": 3,
        "lgb_min_gain_to_split": 0.3095746379141021
      },
      "attrs": {
        "avg_dirhit": 83.33333333333334,
        "avg_nrmse": 1.00769164610392,
        "model_choice": "lgbm",
        "symbol_metrics": {
          "DOBUR_1d": {
            "symbol": "DOBUR",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 452,
                "test_days": 30,
                "train_end_idx": 452,
                "test_end_idx": 482,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.044781691175385406,
                    "rmse": 0.04588389054480368,
                    "mape": 1.685395472779683,
                    "confidence": 0.5887661316507229
                  },
                  "lightgbm": {
                    "raw_r2": -0.043792912766731584,
                    "rmse": 0.045827824940581845,
                    "mape": 1.6670939874171757,
                    "confidence": 0.5895597453570259
                  }
                },
                "dirhit": null,
                "rmse": 0.027343911023430634,
                "mape": 2914072.777110102,
                "nrmse": 1.0726003980488368,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 2,
                "train_days": 482,
                "test_days": 30,
                "train_end_idx": 482,
                "test_end_idx": 512,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.03268254312096045,
                    "rmse": 0.044864699973412275,
                    "mape": 1.6708291351989084,
                    "confidence": 0.5985043684737273
                  },
                  "lightgbm": {
                    "raw_r2": -0.032636971199303234,
                    "rmse": 0.04483618311978323,
                    "mape": 1.6589961862857296,
                    "confidence": 0.5985411499066868
                  }
                },
                "dirhit": null,
                "rmse": 0.04450985107190601,
                "mape": 142723.15547433318,
                "nrmse": 0.9954017869418732,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 3,
                "train_days": 512,
                "test_days": 30,
                "train_end_idx": 512,
                "test_end_idx": 542,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.01219445216425504,
                    "rmse": 0.044406962179002786,
                    "mape": 1.6528320830424912,
                    "confidence": 0.6150950759855838
                  },
                  "lightgbm": {
                    "raw_r2": -0.012354775169023688,
                    "rmse": 0.0443890797499475,
                    "mape": 1.6435487689579567,
                    "confidence": 0.6149649361323533
                  }
                },
                "dirhit": null,
                "rmse": 0.0639033750489818,
                "mape": 98.61498665032006,
                "nrmse": 1.0000263707951074,
                "mask_count": 9,
                "mask_pct": 31.03448275862069,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 4,
                "train_days": 542,
                "test_days": 30,
                "train_end_idx": 542,
                "test_end_idx": 572,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.00978740500563576,
                    "rmse": 0.04573443738226432,
                    "mape": 1.6776398669596533,
                    "confidence": 0.6170493200817609
                  },
                  "lightgbm": {
                    "raw_r2": -0.012354042223414519,
                    "rmse": 0.04577107783459003,
                    "mape": 1.624834597611679,
                    "confidence": 0.6149655310829293
                  }
                },
                "dirhit": 83.33333333333334,
                "rmse": 0.056520020845020356,
                "mape": 1596086.1106816067,
                "nrmse": 0.962738028629863,
                "mask_count": 12,
                "mask_pct": 41.37931034482759,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              }
            ],
            "avg_dirhit": 83.33333333333334,
            "avg_nrmse": 1.00769164610392,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.02486152286655916,
                "rmse": 0.045222497519870765,
                "mape": 1.671674139495184,
                "confidence": 0.6048537240479487
              },
              "lightgbm": {
                "raw_r2": -0.025284675339618253,
                "rmse": 0.045206041411225646,
                "mape": 1.6486183850681353,
                "confidence": 0.6045078406197488
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 843,
      "value": 50.61249494318285,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 2.574848156205154,
        "ml_pattern_weight_scale_1d": 1.4214064060462708,
        "enable_talib_patterns_short": true,
        "external_min_days": 20,
        "external_smooth_alpha": 0.10526088380823662,
        "regime_scale_low": 0.9149636831064617,
        "regime_scale_high": 1.191370750389383,
        "yolo_min_conf": 0.43255845123820325,
        "smart_consensus_weight": 0.4453305997935382,
        "smart_performance_weight": 0.6308455220587457,
        "smart_sigma": 0.0030124762147531224,
        "smart_weight_xgb": 0.8285457787939501,
        "smart_weight_lgbm": 0.7848692368480822,
        "smart_weight_cat": 1.261263272182247,
        "xgb_n_estimators": 351,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.09454809811308384,
        "xgb_subsample": 0.6037541897019113,
        "xgb_colsample_bytree": 0.6362985089024127,
        "xgb_reg_alpha": 0.0003377207213550804,
        "xgb_reg_lambda": 22.712995536677056,
        "xgb_min_child_weight": 12,
        "xgb_gamma": 0.20680026916786326,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 292,
        "lgb_n_estimators": 454,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.01700163162700087,
        "lgb_num_leaves": 53,
        "lgb_subsample": 0.6803338099183552,
        "lgb_colsample_bytree": 0.5163810724415582,
        "lgb_reg_alpha": 0.4374264477829711,
        "lgb_reg_lambda": 0.0038183386608039676,
        "lgb_min_data_in_leaf": 96,
        "lgb_feature_fraction_bynode": 0.6707511228758856,
        "lgb_bagging_freq": 6,
        "lgb_min_gain_to_split": 0.05860493907333304,
        "cat_iterations": 215,
        "cat_depth": 8,
        "cat_learning_rate": 0.03506800380253219,
        "cat_l2_leaf_reg": 4.921161096372145,
        "cat_subsample": 0.7755187641345674,
        "cat_rsm": 0.5519951910836546,
        "cat_border_count": 37,
        "cat_random_strength": 0.11603698928431003,
        "cat_leaf_estimation_iterations": 13,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 80.9090909090909,
        "avg_nrmse": 1.0039781155301295,
        "model_choice": "all",
        "symbol_metrics": {
          "DOBUR_1d": {
            "symbol": "DOBUR",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 452,
                "test_days": 30,
                "train_end_idx": 452,
                "test_end_idx": 482,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.03740974813171194,
                    "rmse": 0.045738647611066885,
                    "mape": 1.67441244272267,
                    "confidence": 0.5946928916436901
                  },
                  "lightgbm": {
                    "raw_r2": -0.043792912766731584,
                    "rmse": 0.045827824940581845,
                    "mape": 1.6670939874171757,
                    "confidence": 0.5895597453570259
                  },
                  "catboost": {
                    "raw_r2": -0.03749031786041879,
                    "rmse": 0.045786757230076865,
                    "mape": 1.6174952435661138,
                    "confidence": 0.5946279992279138
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.026057177924014054,
                "mape": 4879120.978356686,
                "nrmse": 1.0221266222442635,
                "mask_count": 10,
                "mask_pct": 34.48275862068966,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.03740974813171194,
                    "lightgbm": -0.043792912766731584,
                    "catboost": -0.03749031786041879
                  },
                  "ensemble_weights": {
                    "xgboost": 0.28837220937148855,
                    "lightgbm": 0.27266027296976736,
                    "catboost": 0.4389675176587442
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 2,
                "train_days": 482,
                "test_days": 30,
                "train_end_idx": 482,
                "test_end_idx": 512,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.027008836407558173,
                    "rmse": 0.0447537305552987,
                    "mape": 1.65365024949774,
                    "confidence": 0.6030886100109756
                  },
                  "lightgbm": {
                    "raw_r2": -0.032636971199303234,
                    "rmse": 0.04483618311978323,
                    "mape": 1.6589961862857296,
                    "confidence": 0.5985411499066868
                  },
                  "catboost": {
                    "raw_r2": -0.016177755625672623,
                    "rmse": 0.04452869005058335,
                    "mape": 1.6435193852651915,
                    "confidence": 0.6118627358602997
                  }
                },
                "dirhit": null,
                "rmse": 0.0447419491491492,
                "mape": 2005495.45337179,
                "nrmse": 1.000592342184586,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.027008836407558173,
                    "lightgbm": -0.032636971199303234,
                    "catboost": -0.016177755625672623
                  },
                  "ensemble_weights": {
                    "xgboost": 0.2879495393852071,
                    "lightgbm": 0.2723212033674194,
                    "catboost": 0.43972925724737344
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 3,
                "train_days": 512,
                "test_days": 30,
                "train_end_idx": 512,
                "test_end_idx": 542,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.00866318060531183,
                    "rmse": 0.0443280832907152,
                    "mape": 1.6409611067196008,
                    "confidence": 0.6179622661130293
                  },
                  "lightgbm": {
                    "raw_r2": -0.012354775169023688,
                    "rmse": 0.0443890797499475,
                    "mape": 1.6435487689579567,
                    "confidence": 0.6149649361323533
                  },
                  "catboost": {
                    "raw_r2": -0.005934562837146773,
                    "rmse": 0.04422061302859218,
                    "mape": 1.6520130418802925,
                    "confidence": 0.6201785214559327
                  }
                },
                "dirhit": null,
                "rmse": 0.06563047689110373,
                "mape": 101.0382058055568,
                "nrmse": 1.0270538538638323,
                "mask_count": 7,
                "mask_pct": 24.137931034482758,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.00866318060531183,
                    "lightgbm": -0.012354775169023688,
                    "catboost": -0.005934562837146773
                  },
                  "ensemble_weights": {
                    "xgboost": 0.2882059516193164,
                    "lightgbm": 0.2727181164678864,
                    "catboost": 0.43907593191279715
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 4,
                "train_days": 542,
                "test_days": 30,
                "train_end_idx": 542,
                "test_end_idx": 572,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0087235018427545,
                    "rmse": 0.045713330870705504,
                    "mape": 1.627618480700022,
                    "confidence": 0.6179132782502035
                  },
                  "lightgbm": {
                    "raw_r2": -0.012354042223414519,
                    "rmse": 0.04577107783459003,
                    "mape": 1.624834597611679,
                    "confidence": 0.6149655310829293
                  },
                  "catboost": {
                    "raw_r2": -0.0044229187593094466,
                    "rmse": 0.04563002601779895,
                    "mape": 1.6233141072069155,
                    "confidence": 0.6214065249575229
                  }
                },
                "dirhit": 81.81818181818183,
                "rmse": 0.05671972144495388,
                "mape": 2407681.938203026,
                "nrmse": 0.9661396438278366,
                "mask_count": 11,
                "mask_pct": 37.93103448275862,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.0087235018427545,
                    "lightgbm": -0.012354042223414519,
                    "catboost": -0.0044229187593094466
                  },
                  "ensemble_weights": {
                    "xgboost": 0.28814620374860167,
                    "lightgbm": 0.2726664879854714,
                    "catboost": 0.4391873082659269
                  },
                  "source": "model"
                }
              }
            ],
            "avg_dirhit": 80.9090909090909,
            "avg_nrmse": 1.0039781155301295,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.020451316746834113,
                "rmse": 0.045133448081946574,
                "mape": 1.6491605699100083,
                "confidence": 0.6084142615044746
              },
              "lightgbm": {
                "raw_r2": -0.025284675339618253,
                "rmse": 0.045206041411225646,
                "mape": 1.6486183850681353,
                "confidence": 0.6045078406197488
              },
              "catboost": {
                "raw_r2": -0.01600638877063691,
                "rmse": 0.04504152158176283,
                "mape": 1.6340854444796284,
                "confidence": 0.6120189453754172
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 904,
      "value": 49.957994004827356,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 2.7916823440284824,
        "ml_pattern_weight_scale_1d": 1.242602144835307,
        "enable_talib_patterns_short": true,
        "external_min_days": 21,
        "external_smooth_alpha": 0.06629970895591393,
        "regime_scale_low": 0.9355947120482493,
        "regime_scale_high": 1.174426112131022,
        "smart_consensus_weight": 0.33065352523806296,
        "smart_performance_weight": 0.6812602384009281,
        "smart_sigma": 0.0024175700078229766,
        "smart_weight_xgb": 1.3866285762498836,
        "smart_weight_lgbm": 0.7485798220730061,
        "smart_weight_cat": 1.4389327506247171,
        "xgb_n_estimators": 353,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.12010847462315444,
        "xgb_subsample": 0.6396771377245601,
        "xgb_colsample_bytree": 0.6162504328561947,
        "xgb_reg_alpha": 1.3994651763645736e-05,
        "xgb_reg_lambda": 32.32648533271549,
        "xgb_min_child_weight": 12,
        "xgb_gamma": 0.4389653757186672,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 296,
        "lgb_n_estimators": 453,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.013075899869229166,
        "lgb_num_leaves": 49,
        "lgb_subsample": 0.7449882289474149,
        "lgb_colsample_bytree": 0.5429902859070089,
        "lgb_reg_alpha": 0.02425787892465644,
        "lgb_reg_lambda": 0.008946383802422608,
        "lgb_min_data_in_leaf": 30,
        "lgb_feature_fraction_bynode": 0.663369879802448,
        "lgb_bagging_freq": 5,
        "lgb_min_gain_to_split": 0.059341674322937604,
        "cat_iterations": 209,
        "cat_depth": 6,
        "cat_learning_rate": 0.03305970819295422,
        "cat_l2_leaf_reg": 3.58762426508282,
        "cat_subsample": 0.7927843440772211,
        "cat_rsm": 0.5580607828358161,
        "cat_border_count": 18,
        "cat_random_strength": 0.11747884222486402,
        "cat_leaf_estimation_iterations": 11,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 80.0,
        "avg_nrmse": 1.0070009991954412,
        "model_choice": "all",
        "symbol_metrics": {
          "DOBUR_1d": {
            "symbol": "DOBUR",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 452,
                "test_days": 30,
                "train_end_idx": 452,
                "test_end_idx": 482,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.03560306374719424,
                    "rmse": 0.04571765450937241,
                    "mape": 1.666528365224541,
                    "confidence": 0.5961486607602077
                  },
                  "lightgbm": {
                    "raw_r2": -0.043792912766731584,
                    "rmse": 0.045827824940581845,
                    "mape": 1.6670939874171757,
                    "confidence": 0.5895597453570259
                  },
                  "catboost": {
                    "raw_r2": -0.03178115019326733,
                    "rmse": 0.04562558867682225,
                    "mape": 1.6574439938143162,
                    "confidence": 0.5992320150254813
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.0257650580309249,
                "mape": 4105482.654734497,
                "nrmse": 1.0106678403115354,
                "mask_count": 10,
                "mask_pct": 34.48275862068966,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.03560306374719424,
                    "lightgbm": -0.043792912766731584,
                    "catboost": -0.03178115019326733
                  },
                  "ensemble_weights": {
                    "xgboost": 0.38798375903691157,
                    "lightgbm": 0.20887898260316168,
                    "catboost": 0.40313725835992664
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 2,
                "train_days": 482,
                "test_days": 30,
                "train_end_idx": 482,
                "test_end_idx": 512,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.02468303175158515,
                    "rmse": 0.044719500738646674,
                    "mape": 1.6524776709130937,
                    "confidence": 0.6049704532557185
                  },
                  "lightgbm": {
                    "raw_r2": -0.032636971199303234,
                    "rmse": 0.04483618311978323,
                    "mape": 1.6589961862857296,
                    "confidence": 0.5985411499066868
                  },
                  "catboost": {
                    "raw_r2": -0.009062228345447417,
                    "rmse": 0.04449785047025392,
                    "mape": 1.6009743982387798,
                    "confidence": 0.6176381989687676
                  }
                },
                "dirhit": null,
                "rmse": 0.045720242799528625,
                "mape": 1619120.34078479,
                "nrmse": 1.0224705382308588,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.02468303175158515,
                    "lightgbm": -0.032636971199303234,
                    "catboost": -0.009062228345447417
                  },
                  "ensemble_weights": {
                    "xgboost": 0.38735515520165736,
                    "lightgbm": 0.2085574720900893,
                    "catboost": 0.40408737270825323
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 3,
                "train_days": 512,
                "test_days": 30,
                "train_end_idx": 512,
                "test_end_idx": 542,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.00798780640918014,
                    "rmse": 0.0443199646133965,
                    "mape": 1.6416000441699519,
                    "confidence": 0.6185107698647371
                  },
                  "lightgbm": {
                    "raw_r2": -0.012354775169023688,
                    "rmse": 0.0443890797499475,
                    "mape": 1.6435487689579567,
                    "confidence": 0.6149649361323533
                  },
                  "catboost": {
                    "raw_r2": -0.006621452995519343,
                    "rmse": 0.044295417770496316,
                    "mape": 1.6301917678996678,
                    "confidence": 0.61962056079507
                  }
                },
                "dirhit": null,
                "rmse": 0.06482933721336047,
                "mape": 95.59901629108457,
                "nrmse": 1.0145167882734865,
                "mask_count": 9,
                "mask_pct": 31.03448275862069,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.00798780640918014,
                    "lightgbm": -0.012354775169023688,
                    "catboost": -0.006621452995519343
                  },
                  "ensemble_weights": {
                    "xgboost": 0.3880088028540187,
                    "lightgbm": 0.20916126341180458,
                    "catboost": 0.40282993373417675
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 4,
                "train_days": 542,
                "test_days": 30,
                "train_end_idx": 542,
                "test_end_idx": 572,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.008049629516487281,
                    "rmse": 0.045702186759974,
                    "mape": 1.6284759418049513,
                    "confidence": 0.6184605587713854
                  },
                  "lightgbm": {
                    "raw_r2": -0.012354042223414519,
                    "rmse": 0.04577107783459003,
                    "mape": 1.624834597611679,
                    "confidence": 0.6149655310829293
                  },
                  "catboost": {
                    "raw_r2": -0.007170070253256185,
                    "rmse": 0.04569080219502811,
                    "mape": 1.6461536262581584,
                    "confidence": 0.6191749417927473
                  }
                },
                "dirhit": null,
                "rmse": 0.05755390839179772,
                "mape": 2388830.2360180793,
                "nrmse": 0.9803488299658838,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.008049629516487281,
                    "lightgbm": -0.012354042223414519,
                    "catboost": -0.007170070253256185
                  },
                  "ensemble_weights": {
                    "xgboost": 0.38803271698849623,
                    "lightgbm": 0.20917854997702573,
                    "catboost": 0.4027887330344781
                  },
                  "source": "model"
                }
              }
            ],
            "avg_dirhit": 80.0,
            "avg_nrmse": 1.0070009991954412,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.019080882856111703,
                "rmse": 0.0451148266553474,
                "mape": 1.6472705055281345,
                "confidence": 0.6095226106630122
              },
              "lightgbm": {
                "raw_r2": -0.025284675339618253,
                "rmse": 0.045206041411225646,
                "mape": 1.6486183850681353,
                "confidence": 0.6045078406197488
              },
              "catboost": {
                "raw_r2": -0.013658725446872568,
                "rmse": 0.04502741477815015,
                "mape": 1.6336909465527305,
                "confidence": 0.6139164291455166
              }
            }
          }
        }
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_DOBUR_h1_c2",
  "symbols": [
    "DOBUR"
  ],
  "horizon": 1,
  "best_model_choice": "lgbm",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "meta_stacking_alpha": 0.057636306107838986,
    "ml_adaptive_k_1d": 1.0617198665784802,
    "ml_pattern_weight_scale_1d": 1.3406533278225887,
    "external_min_days": 32,
    "external_smooth_alpha": 0.16657602292617488,
    "yolo_min_conf": 0.3248087277025897,
    "smart_consensus_weight": 0.37797168882862275,
    "smart_performance_weight": 0.6246876549604587,
    "smart_sigma": 0.0041661207626316026,
    "smart_weight_xgb": 0.7571992037137288,
    "smart_weight_lgbm": 0.771238172705488,
    "smart_weight_cat": 1.0031681704670727
  },
  "hyperparameters": {
    "model_choice": "lgbm",
    "lgb_n_estimators": 167,
    "lgb_max_depth": 2,
    "lgb_learning_rate": 0.023579178166162458,
    "lgb_num_leaves": 57,
    "lgb_subsample": 0.6549930220930186,
    "lgb_colsample_bytree": 0.5136909771400046,
    "lgb_reg_alpha": 0.49455044742223603,
    "lgb_reg_lambda": 0.22937523712496496,
    "lgb_min_data_in_leaf": 61,
    "lgb_feature_fraction_bynode": 0.552075001428954,
    "lgb_bagging_freq": 3,
    "lgb_min_gain_to_split": 0.3095746379141021
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "0",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "0"
  },
  "best_trial_metrics": {
    "DOBUR_1d": {
      "symbol": "DOBUR",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 452,
          "test_days": 30,
          "train_end_idx": 452,
          "test_end_idx": 482,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-12T00:00:00",
          "test_start": "2025-06-13T00:00:00",
          "test_end": "2025-07-25T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.044781691175385406,
              "rmse": 0.04588389054480368,
              "mape": 1.685395472779683,
              "confidence": 0.5887661316507229
            },
            "lightgbm": {
              "raw_r2": -0.043792912766731584,
              "rmse": 0.045827824940581845,
              "mape": 1.6670939874171757,
              "confidence": 0.5895597453570259
            }
          },
          "dirhit": null,
          "rmse": 0.027343911023430634,
          "mape": 2914072.777110102,
          "nrmse": 1.0726003980488368,
          "mask_count": 5,
          "mask_pct": 17.24137931034483,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0
        },
        {
          "split_index": 2,
          "train_days": 482,
          "test_days": 30,
          "train_end_idx": 482,
          "test_end_idx": 512,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-25T00:00:00",
          "test_start": "2025-07-28T00:00:00",
          "test_end": "2025-09-05T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.03268254312096045,
              "rmse": 0.044864699973412275,
              "mape": 1.6708291351989084,
              "confidence": 0.5985043684737273
            },
            "lightgbm": {
              "raw_r2": -0.032636971199303234,
              "rmse": 0.04483618311978323,
              "mape": 1.6589961862857296,
              "confidence": 0.5985411499066868
            }
          },
          "dirhit": null,
          "rmse": 0.04450985107190601,
          "mape": 142723.15547433318,
          "nrmse": 0.9954017869418732,
          "mask_count": 6,
          "mask_pct": 20.689655172413794,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0
        },
        {
          "split_index": 3,
          "train_days": 512,
          "test_days": 30,
          "train_end_idx": 512,
          "test_end_idx": 542,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-05T00:00:00",
          "test_start": "2025-09-08T00:00:00",
          "test_end": "2025-10-17T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.01219445216425504,
              "rmse": 0.044406962179002786,
              "mape": 1.6528320830424912,
              "confidence": 0.6150950759855838
            },
            "lightgbm": {
              "raw_r2": -0.012354775169023688,
              "rmse": 0.0443890797499475,
              "mape": 1.6435487689579567,
              "confidence": 0.6149649361323533
            }
          },
          "dirhit": null,
          "rmse": 0.0639033750489818,
          "mape": 98.61498665032006,
          "nrmse": 1.0000263707951074,
          "mask_count": 9,
          "mask_pct": 31.03448275862069,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0
        },
        {
          "split_index": 4,
          "train_days": 542,
          "test_days": 30,
          "train_end_idx": 542,
          "test_end_idx": 572,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-17T00:00:00",
          "test_start": "2025-10-20T00:00:00",
          "test_end": "2025-11-28T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.00978740500563576,
              "rmse": 0.04573443738226432,
              "mape": 1.6776398669596533,
              "confidence": 0.6170493200817609
            },
            "lightgbm": {
              "raw_r2": -0.012354042223414519,
              "rmse": 0.04577107783459003,
              "mape": 1.624834597611679,
              "confidence": 0.6149655310829293
            }
          },
          "dirhit": 83.33333333333334,
          "rmse": 0.056520020845020356,
          "mape": 1596086.1106816067,
          "nrmse": 0.962738028629863,
          "mask_count": 12,
          "mask_pct": 41.37931034482759,
          "low_support": false,
          "min_mask_count": 10,
          "min_mask_pct": 5.0
        }
      ],
      "avg_dirhit": 83.33333333333334,
      "avg_nrmse": 1.00769164610392,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.02486152286655916,
          "rmse": 0.045222497519870765,
          "mape": 1.671674139495184,
          "confidence": 0.6048537240479487
        },
        "lightgbm": {
          "raw_r2": -0.025284675339618253,
          "rmse": 0.045206041411225646,
          "mape": 1.6486183850681353,
          "confidence": 0.6045078406197488
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 10,
    "min_mask_pct": 5.0,
    "best_trial_number": 1314,
    "best_trial_seed": 1356,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "split_generation": {
      "type": "generate_walkforward_splits",
      "n_splits": 4
    },
    "symbol_specs": {
      "DOBUR_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 452,
            "test_end_idx": 482,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-12T00:00:00",
            "test_start": "2025-06-13T00:00:00",
            "test_end": "2025-07-25T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 482,
            "test_end_idx": 512,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-25T00:00:00",
            "test_start": "2025-07-28T00:00:00",
            "test_end": "2025-09-05T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 512,
            "test_end_idx": 542,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-05T00:00:00",
            "test_start": "2025-09-08T00:00:00",
            "test_end": "2025-10-17T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 542,
            "test_end_idx": 572,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-17T00:00:00",
            "test_start": "2025-10-20T00:00:00",
            "test_end": "2025-11-28T00:00:00"
          }
        ]
      }
    }
  }
}