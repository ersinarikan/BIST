{
  "best_value": 57.46328639096763,
  "best_dirhit": 90.9090909090909,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_adaptive_k_1d": 2.4828442181987995,
    "ml_pattern_weight_scale_1d": 0.6750478220846776,
    "enable_talib_patterns_short": false,
    "external_min_days": 59,
    "external_smooth_alpha": 0.11215626198784684,
    "yolo_min_conf": 0.7090455524520669,
    "smart_consensus_weight": 0.4601058623304116,
    "smart_performance_weight": 0.376593473719844,
    "smart_sigma": 0.00592795899139485,
    "smart_weight_xgb": 1.0415013624502207,
    "smart_weight_lgbm": 1.4666095574345126,
    "smart_weight_cat": 0.5797392280411173,
    "xgb_n_estimators": 586,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.04551422595360807,
    "xgb_subsample": 0.8068266514446512,
    "xgb_colsample_bytree": 0.5609789474613426,
    "xgb_reg_alpha": 1.8879784475126497e-05,
    "xgb_reg_lambda": 0.4101377689961653,
    "xgb_min_child_weight": 10,
    "xgb_gamma": 0.06272947106338078,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 134,
    "lgb_n_estimators": 136,
    "lgb_max_depth": 8,
    "lgb_learning_rate": 0.012970333225029891,
    "lgb_num_leaves": 37,
    "lgb_subsample": 0.6565503968486207,
    "lgb_colsample_bytree": 0.6047922984865641,
    "lgb_reg_alpha": 0.002539802135626717,
    "lgb_reg_lambda": 0.00010195011874077082,
    "lgb_min_data_in_leaf": 55,
    "lgb_feature_fraction_bynode": 0.7154366577206227,
    "lgb_bagging_freq": 3,
    "lgb_min_gain_to_split": 0.9478641241733106,
    "cat_iterations": 129,
    "cat_depth": 6,
    "cat_learning_rate": 0.16039879991500416,
    "cat_l2_leaf_reg": 2.867323175038132,
    "cat_subsample": 0.543508685316513,
    "cat_rsm": 0.6740039356843222,
    "cat_border_count": 71,
    "cat_random_strength": 1.1567847693273794,
    "cat_leaf_estimation_iterations": 4,
    "cat_bootstrap_type": "MVS"
  },
  "best_trial": {
    "number": 1332,
    "value": 57.46328639096763,
    "state": "1"
  },
  "best_trial_number": 1332,
  "best_trial_seed": 1374,
  "n_trials": 1381,
  "pruned_count": 0,
  "avg_trial_time": 263.9478949184862,
  "top_k_trials": [
    {
      "number": 1332,
      "value": 57.46328639096763,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 2.4828442181987995,
        "ml_pattern_weight_scale_1d": 0.6750478220846776,
        "enable_talib_patterns_short": false,
        "external_min_days": 59,
        "external_smooth_alpha": 0.11215626198784684,
        "yolo_min_conf": 0.7090455524520669,
        "smart_consensus_weight": 0.4601058623304116,
        "smart_performance_weight": 0.376593473719844,
        "smart_sigma": 0.00592795899139485,
        "smart_weight_xgb": 1.0415013624502207,
        "smart_weight_lgbm": 1.4666095574345126,
        "smart_weight_cat": 0.5797392280411173,
        "xgb_n_estimators": 586,
        "xgb_max_depth": 5,
        "xgb_learning_rate": 0.04551422595360807,
        "xgb_subsample": 0.8068266514446512,
        "xgb_colsample_bytree": 0.5609789474613426,
        "xgb_reg_alpha": 1.8879784475126497e-05,
        "xgb_reg_lambda": 0.4101377689961653,
        "xgb_min_child_weight": 10,
        "xgb_gamma": 0.06272947106338078,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 134,
        "lgb_n_estimators": 136,
        "lgb_max_depth": 8,
        "lgb_learning_rate": 0.012970333225029891,
        "lgb_num_leaves": 37,
        "lgb_subsample": 0.6565503968486207,
        "lgb_colsample_bytree": 0.6047922984865641,
        "lgb_reg_alpha": 0.002539802135626717,
        "lgb_reg_lambda": 0.00010195011874077082,
        "lgb_min_data_in_leaf": 55,
        "lgb_feature_fraction_bynode": 0.7154366577206227,
        "lgb_bagging_freq": 3,
        "lgb_min_gain_to_split": 0.9478641241733106,
        "cat_iterations": 129,
        "cat_depth": 6,
        "cat_learning_rate": 0.16039879991500416,
        "cat_l2_leaf_reg": 2.867323175038132,
        "cat_subsample": 0.543508685316513,
        "cat_rsm": 0.6740039356843222,
        "cat_border_count": 71,
        "cat_random_strength": 1.1567847693273794,
        "cat_leaf_estimation_iterations": 4,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 90.9090909090909,
        "avg_nrmse": 1.0288462075660005,
        "model_choice": "all",
        "symbol_metrics": {
          "DESA_1d": {
            "symbol": "DESA",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 454,
                "test_days": 30,
                "train_end_idx": 454,
                "test_end_idx": 484,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-13T00:00:00",
                "test_start": "2025-06-16T00:00:00",
                "test_end": "2025-07-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.006861765049414196,
                    "rmse": 0.028472625897069337,
                    "mape": 1.7922126832136844,
                    "confidence": 0.6194253627099912
                  },
                  "lightgbm": {
                    "raw_r2": -0.006436087838670668,
                    "rmse": 0.0284723304514409,
                    "mape": 1.8420352146174013,
                    "confidence": 0.6197711298663602
                  },
                  "catboost": {
                    "raw_r2": -0.02246518675715603,
                    "rmse": 0.02868566610385307,
                    "mape": 1.7332765177578786,
                    "confidence": 0.6067662032227169
                  }
                },
                "dirhit": null,
                "rmse": 0.019997754766158386,
                "mape": 2823053.782095405,
                "nrmse": 1.0149470067974369,
                "mask_count": 8,
                "mask_pct": 27.586206896551722,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.006861765049414196,
                    "lightgbm": -0.006436087838670668,
                    "catboost": -0.02246518675715603
                  },
                  "ensemble_weights": {
                    "xgboost": 0.20016482990709078,
                    "lightgbm": 0.28193004104691227,
                    "catboost": 0.517905129045997
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 2,
                "train_days": 484,
                "test_days": 30,
                "train_end_idx": 484,
                "test_end_idx": 514,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-28T00:00:00",
                "test_start": "2025-07-29T00:00:00",
                "test_end": "2025-09-08T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.0019557755203573426,
                    "rmse": 0.027893325581667325,
                    "mape": 1.8475001938746551,
                    "confidence": 0.6265890549473372
                  },
                  "lightgbm": {
                    "raw_r2": -0.0018455721207450981,
                    "rmse": 0.027935755245375567,
                    "mape": 1.8520281227640725,
                    "confidence": 0.6235004832926265
                  },
                  "catboost": {
                    "raw_r2": 0.007118594529620455,
                    "rmse": 0.027882833166595188,
                    "mape": 1.7436500645995636,
                    "confidence": 0.6307832475212716
                  }
                },
                "dirhit": 90.9090909090909,
                "rmse": 0.024495688171614835,
                "mape": 81.11407605200931,
                "nrmse": 1.0048277561427614,
                "mask_count": 11,
                "mask_pct": 37.93103448275862,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": 0.0019557755203573426,
                    "lightgbm": -0.0018455721207450981,
                    "catboost": 0.007118594529620455
                  },
                  "ensemble_weights": {
                    "xgboost": 0.1998294384888902,
                    "lightgbm": 0.2808592192918122,
                    "catboost": 0.5193113422192976
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 3,
                "train_days": 514,
                "test_days": 30,
                "train_end_idx": 514,
                "test_end_idx": 544,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-08T00:00:00",
                "test_start": "2025-09-09T00:00:00",
                "test_end": "2025-10-20T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.013159267866805546,
                    "rmse": 0.027938968431830576,
                    "mape": 1.8915831651291513,
                    "confidence": 0.614311950434886
                  },
                  "lightgbm": {
                    "raw_r2": -0.012171246375143255,
                    "rmse": 0.027920828838032322,
                    "mape": 1.8791019418314152,
                    "confidence": 0.6151139132097341
                  },
                  "catboost": {
                    "raw_r2": -0.008738871798480504,
                    "rmse": 0.027917035072371598,
                    "mape": 1.6969572075192965,
                    "confidence": 0.617900796109365
                  }
                },
                "dirhit": null,
                "rmse": 0.03083405507155714,
                "mape": 108.86980539497108,
                "nrmse": 0.9881749478053936,
                "mask_count": 3,
                "mask_pct": 10.344827586206897,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.013159267866805546,
                    "lightgbm": -0.012171246375143255,
                    "catboost": -0.008738871798480504
                  },
                  "ensemble_weights": {
                    "xgboost": 0.7035958960595773,
                    "lightgbm": 0.21232824985901036,
                    "catboost": 0.08407585408141238
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 4,
                "train_days": 544,
                "test_days": 30,
                "train_end_idx": 544,
                "test_end_idx": 574,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-20T00:00:00",
                "test_start": "2025-10-21T00:00:00",
                "test_end": "2025-12-01T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.014260519812056819,
                    "rmse": 0.028240290096595257,
                    "mape": 1.9094316966705471,
                    "confidence": 0.6134182341036449
                  },
                  "lightgbm": {
                    "raw_r2": -0.013164230281106434,
                    "rmse": 0.028221885787689995,
                    "mape": 1.9134720744644256,
                    "confidence": 0.6143079228355133
                  },
                  "catboost": {
                    "raw_r2": -0.028638721830156033,
                    "rmse": 0.028398872723706496,
                    "mape": 1.683613129762768,
                    "confidence": 0.6017707168502006
                  }
                },
                "dirhit": null,
                "rmse": 0.028947723553452764,
                "mape": 1908175.4890149499,
                "nrmse": 1.1074351195184102,
                "mask_count": 9,
                "mask_pct": 31.03448275862069,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.014260519812056819,
                    "lightgbm": -0.013164230281106434,
                    "catboost": -0.028638721830156033
                  },
                  "ensemble_weights": {
                    "xgboost": 0.12328127489371989,
                    "lightgbm": 0.8085872525720473,
                    "catboost": 0.06813147253423268
                  },
                  "source": "model"
                }
              }
            ],
            "avg_dirhit": 90.9090909090909,
            "avg_nrmse": 1.0288462075660005,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.008081444301979804,
                "rmse": 0.028136302501790625,
                "mape": 1.8601819347220094,
                "confidence": 0.6184361505489648
              },
              "lightgbm": {
                "raw_r2": -0.008404284153916364,
                "rmse": 0.028137700080634695,
                "mape": 1.8716593384193285,
                "confidence": 0.6181733623010586
              },
              "catboost": {
                "raw_r2": -0.013181046464043028,
                "rmse": 0.02822110176663159,
                "mape": 1.7143742299098765,
                "confidence": 0.6143052409258885
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 783,
      "value": 56.9398693554559,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "n_seeds": 5,
        "ml_adaptive_k_1d": 2.385630635786518,
        "ml_pattern_weight_scale_1d": 0.5878886921138079,
        "enable_talib_patterns_short": false,
        "external_min_days": 48,
        "external_smooth_alpha": 0.3075427554119873,
        "smart_consensus_weight": 0.5679091625590295,
        "smart_performance_weight": 0.6264729145766053,
        "smart_sigma": 0.004572646809633196,
        "smart_weight_xgb": 1.1228749333358856,
        "smart_weight_lgbm": 1.408992932312926,
        "smart_weight_cat": 0.5621239280980094,
        "fingpt_confidence_threshold": 0.4206099557483617,
        "xgb_n_estimators": 526,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.018723592523849357,
        "xgb_subsample": 0.5491575367609897,
        "xgb_colsample_bytree": 0.5839258177973624,
        "xgb_reg_alpha": 0.00022629756762714289,
        "xgb_reg_lambda": 0.2438112668672347,
        "xgb_min_child_weight": 12,
        "xgb_gamma": 0.15253594325027653,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 307,
        "lgb_n_estimators": 139,
        "lgb_max_depth": 8,
        "lgb_learning_rate": 0.01982673503575327,
        "lgb_num_leaves": 48,
        "lgb_subsample": 0.822420587656035,
        "lgb_colsample_bytree": 0.6048224624010774,
        "lgb_reg_alpha": 0.0022092735056435248,
        "lgb_reg_lambda": 0.003313558987297283,
        "lgb_min_data_in_leaf": 19,
        "lgb_feature_fraction_bynode": 0.831203392919545,
        "lgb_bagging_freq": 4,
        "lgb_min_gain_to_split": 0.8168399854160906,
        "cat_iterations": 272,
        "cat_depth": 4,
        "cat_learning_rate": 0.16769414311423114,
        "cat_l2_leaf_reg": 4.458951249542058,
        "cat_subsample": 0.5285600683154779,
        "cat_rsm": 0.6833733239296075,
        "cat_border_count": 208,
        "cat_random_strength": 0.172044025468767,
        "cat_leaf_estimation_iterations": 4,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 90.0,
        "avg_nrmse": 1.0100217740906827,
        "model_choice": "all",
        "symbol_metrics": {
          "DESA_1d": {
            "symbol": "DESA",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 453,
                "test_days": 30,
                "train_end_idx": 453,
                "test_end_idx": 483,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.007395898152107542,
                    "rmse": 0.028479665653952182,
                    "mape": 1.79355460557304,
                    "confidence": 0.6189915174438219
                  },
                  "lightgbm": {
                    "raw_r2": -0.006436087838670668,
                    "rmse": 0.0284723304514409,
                    "mape": 1.8420352146174013,
                    "confidence": 0.6197711298663602
                  },
                  "catboost": {
                    "raw_r2": -0.0038840713011641568,
                    "rmse": 0.028445373383973113,
                    "mape": 1.720825908941303,
                    "confidence": 0.6218442912485419
                  }
                },
                "dirhit": null,
                "rmse": 0.01848322058410221,
                "mape": 18511.97783986786,
                "nrmse": 0.9359536810977415,
                "mask_count": 9,
                "mask_pct": 31.03448275862069,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.007395898152107542,
                    "lightgbm": -0.006436087838670668,
                    "catboost": -0.0038840713011641568
                  },
                  "ensemble_weights": {
                    "xgboost": 0.6793088110914618,
                    "lightgbm": 0.22915290168297325,
                    "catboost": 0.09153828722556495
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 2,
                "train_days": 483,
                "test_days": 30,
                "train_end_idx": 483,
                "test_end_idx": 513,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0024400760409245916,
                    "rmse": 0.02794208352426443,
                    "mape": 1.8390299268647121,
                    "confidence": 0.6230174628082901
                  },
                  "lightgbm": {
                    "raw_r2": -0.0018455721207450981,
                    "rmse": 0.027935755245375567,
                    "mape": 1.8520281227640725,
                    "confidence": 0.6235004832926265
                  },
                  "catboost": {
                    "raw_r2": 0.0005007432542239268,
                    "rmse": 0.02793221051270096,
                    "mape": 1.6657103484719433,
                    "confidence": 0.6254068536815236
                  }
                },
                "dirhit": 90.0,
                "rmse": 0.024694938609784695,
                "mape": 84.71040114487631,
                "nrmse": 1.0032640970845186,
                "mask_count": 10,
                "mask_pct": 34.48275862068966,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.0024400760409245916,
                    "lightgbm": -0.0018455721207450981,
                    "catboost": 0.0005007432542239268
                  },
                  "ensemble_weights": {
                    "xgboost": 0.5585794246554914,
                    "lightgbm": 0.352295648741679,
                    "catboost": 0.08912492660282961
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 3,
                "train_days": 513,
                "test_days": 30,
                "train_end_idx": 513,
                "test_end_idx": 543,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.011994336603632435,
                    "rmse": 0.027918858219583266,
                    "mape": 1.8766095597798484,
                    "confidence": 0.6152575213200089
                  },
                  "lightgbm": {
                    "raw_r2": -0.012171246375143255,
                    "rmse": 0.027920828838032322,
                    "mape": 1.8791019418314152,
                    "confidence": 0.6151139132097341
                  },
                  "catboost": {
                    "raw_r2": -0.012887498577219528,
                    "rmse": 0.02802410768021771,
                    "mape": 1.6738183837944411,
                    "confidence": 0.614532529066491
                  }
                },
                "dirhit": null,
                "rmse": 0.03187393943485494,
                "mape": 156.2126300042921,
                "nrmse": 0.9905185075602384,
                "mask_count": 7,
                "mask_pct": 24.137931034482758,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.011994336603632435,
                    "lightgbm": -0.012171246375143255,
                    "catboost": -0.012887498577219528
                  },
                  "ensemble_weights": {
                    "xgboost": 0.16215347068170366,
                    "lightgbm": 0.7567069061368005,
                    "catboost": 0.08113962318149591
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 4,
                "train_days": 543,
                "test_days": 30,
                "train_end_idx": 543,
                "test_end_idx": 573,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.013000169293879557,
                    "rmse": 0.028220652222294272,
                    "mape": 1.918307288509153,
                    "confidence": 0.6144410799035639
                  },
                  "lightgbm": {
                    "raw_r2": -0.013164230281106434,
                    "rmse": 0.028221885787689995,
                    "mape": 1.9134720744644256,
                    "confidence": 0.6143079228355133
                  },
                  "catboost": {
                    "raw_r2": -0.015256113441331598,
                    "rmse": 0.028253643541194397,
                    "mape": 1.762042439738269,
                    "confidence": 0.6126104148787077
                  }
                },
                "dirhit": null,
                "rmse": 0.02881932782710616,
                "mape": 508769.1890636892,
                "nrmse": 1.110350810620232,
                "mask_count": 9,
                "mask_pct": 31.03448275862069,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.013000169293879557,
                    "lightgbm": -0.013164230281106434,
                    "catboost": -0.015256113441331598
                  },
                  "ensemble_weights": {
                    "xgboost": 0.24297535797244482,
                    "lightgbm": 0.3048625184450418,
                    "catboost": 0.45216212358251334
                  },
                  "source": "model"
                }
              }
            ],
            "avg_dirhit": 90.0,
            "avg_nrmse": 1.0100217740906827,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.008707620022636031,
                "rmse": 0.028140314905023542,
                "mape": 1.8568753451816884,
                "confidence": 0.6179268953689212
              },
              "lightgbm": {
                "raw_r2": -0.008404284153916364,
                "rmse": 0.028137700080634695,
                "mape": 1.8716593384193285,
                "confidence": 0.6181733623010586
              },
              "catboost": {
                "raw_r2": -0.007881735016372838,
                "rmse": 0.028163833779521544,
                "mape": 1.705599270236489,
                "confidence": 0.6185985222188162
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 570,
      "value": 56.79230049272024,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "n_seeds": 5,
        "ml_adaptive_k_1d": 2.518950378605766,
        "ml_pattern_weight_scale_1d": 0.7280131485914901,
        "enable_talib_patterns_short": false,
        "external_min_days": 47,
        "external_smooth_alpha": 0.09850473655616632,
        "xgb_n_estimators": 449,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.0181528001543476,
        "xgb_subsample": 0.8379805835434064,
        "xgb_colsample_bytree": 0.5623955152291527,
        "xgb_reg_alpha": 6.0892308556562624e-05,
        "xgb_reg_lambda": 0.11587050809233251,
        "xgb_min_child_weight": 14,
        "xgb_gamma": 0.09994093049540154,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 128,
        "lgb_n_estimators": 163,
        "lgb_max_depth": 8,
        "lgb_learning_rate": 0.012668034105785413,
        "lgb_num_leaves": 60,
        "lgb_subsample": 0.6405939438261667,
        "lgb_colsample_bytree": 0.595003323587222,
        "lgb_reg_alpha": 0.0026147710681203693,
        "lgb_reg_lambda": 0.00411782204848637,
        "lgb_min_data_in_leaf": 22,
        "lgb_feature_fraction_bynode": 0.6705562195780406,
        "lgb_bagging_freq": 3,
        "lgb_min_gain_to_split": 0.7513846007153852,
        "cat_iterations": 240,
        "cat_depth": 8,
        "cat_learning_rate": 0.1639835540358196,
        "cat_l2_leaf_reg": 2.4403400655655325,
        "cat_subsample": 0.5997702074444067,
        "cat_rsm": 0.6626829380339336,
        "cat_border_count": 159,
        "cat_random_strength": 0.1529499968594651,
        "cat_leaf_estimation_iterations": 3,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 90.0,
        "avg_nrmse": 1.034616584546626,
        "model_choice": "all",
        "symbol_metrics": {
          "DESA_1d": {
            "symbol": "DESA",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 453,
                "test_days": 30,
                "train_end_idx": 453,
                "test_end_idx": 483,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.00757478903456225,
                    "rmse": 0.028483835782665834,
                    "mape": 1.8072329229229425,
                    "confidence": 0.6188462194920485
                  },
                  "lightgbm": {
                    "raw_r2": -0.006436087838670668,
                    "rmse": 0.0284723304514409,
                    "mape": 1.8420352146174013,
                    "confidence": 0.6197711298663602
                  },
                  "catboost": {
                    "raw_r2": -0.00033682097949938594,
                    "rmse": 0.028481343998019614,
                    "mape": 1.6487239710719097,
                    "confidence": 0.6247263330188382
                  }
                },
                "dirhit": null,
                "rmse": 0.020241295907032893,
                "mape": 72171.81042550688,
                "nrmse": 1.0249791332724225,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 2,
                "train_days": 483,
                "test_days": 30,
                "train_end_idx": 483,
                "test_end_idx": 513,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0027592294921476856,
                    "rmse": 0.027946155594327036,
                    "mape": 1.8277949332270955,
                    "confidence": 0.6227581615956309
                  },
                  "lightgbm": {
                    "raw_r2": -0.0018455721207450981,
                    "rmse": 0.027935755245375567,
                    "mape": 1.8520281227640725,
                    "confidence": 0.6235004832926265
                  },
                  "catboost": {
                    "raw_r2": 0.006225588681917249,
                    "rmse": 0.027877542773881818,
                    "mape": 1.6877588135698418,
                    "confidence": 0.630057882408203
                  }
                },
                "dirhit": null,
                "rmse": 0.02526812345477773,
                "mape": 88.12680959055189,
                "nrmse": 1.0265504791671456,
                "mask_count": 6,
                "mask_pct": 20.689655172413794,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 3,
                "train_days": 513,
                "test_days": 30,
                "train_end_idx": 513,
                "test_end_idx": 543,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.01372334334561994,
                    "rmse": 0.027945218027406415,
                    "mape": 1.8534128854327019,
                    "confidence": 0.6138541563103151
                  },
                  "lightgbm": {
                    "raw_r2": -0.012171246375143255,
                    "rmse": 0.027920828838032322,
                    "mape": 1.8791019418314152,
                    "confidence": 0.6151139132097341
                  },
                  "catboost": {
                    "raw_r2": -0.0017267977545422457,
                    "rmse": 0.02776612248982076,
                    "mape": 1.6338136017079332,
                    "confidence": 0.6235969855401554
                  }
                },
                "dirhit": 90.0,
                "rmse": 0.030723991948486275,
                "mape": 119.55539146197904,
                "nrmse": 0.9547825964000081,
                "mask_count": 10,
                "mask_pct": 34.48275862068966,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 4,
                "train_days": 543,
                "test_days": 30,
                "train_end_idx": 543,
                "test_end_idx": 573,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.014878890770619288,
                    "rmse": 0.028246952448738614,
                    "mape": 1.8796839284174747,
                    "confidence": 0.612916473792857
                  },
                  "lightgbm": {
                    "raw_r2": -0.013164230281106434,
                    "rmse": 0.028221885787689995,
                    "mape": 1.9134720744644256,
                    "confidence": 0.6143079228355133
                  },
                  "catboost": {
                    "raw_r2": 0.012883152897674685,
                    "rmse": 0.027758381547034045,
                    "mape": 1.691171598930489,
                    "confidence": 0.6354639437303153
                  }
                },
                "dirhit": null,
                "rmse": 0.029431524390908754,
                "mape": 1162917.8696172766,
                "nrmse": 1.1321541293469275,
                "mask_count": 7,
                "mask_pct": 24.137931034482758,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              }
            ],
            "avg_dirhit": 90.0,
            "avg_nrmse": 1.034616584546626,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.009734063160737291,
                "rmse": 0.028155540463284473,
                "mape": 1.8420311675000536,
                "confidence": 0.617093752797713
              },
              "lightgbm": {
                "raw_r2": -0.008404284153916364,
                "rmse": 0.028137700080634695,
                "mape": 1.8716593384193285,
                "confidence": 0.6181733623010586
              },
              "catboost": {
                "raw_r2": 0.004261280711387576,
                "rmse": 0.027970847702189057,
                "mape": 1.6653669963200435,
                "confidence": 0.628461286174378
              }
            }
          }
        }
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_DESA_h1_c2",
  "symbols": [
    "DESA"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_adaptive_k_1d": 2.4828442181987995,
    "ml_pattern_weight_scale_1d": 0.6750478220846776,
    "external_min_days": 59,
    "external_smooth_alpha": 0.11215626198784684,
    "yolo_min_conf": 0.7090455524520669,
    "smart_consensus_weight": 0.4601058623304116,
    "smart_performance_weight": 0.376593473719844,
    "smart_sigma": 0.00592795899139485,
    "smart_weight_xgb": 1.0415013624502207,
    "smart_weight_lgbm": 1.4666095574345126,
    "smart_weight_cat": 0.5797392280411173
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 586,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.04551422595360807,
    "xgb_subsample": 0.8068266514446512,
    "xgb_colsample_bytree": 0.5609789474613426,
    "xgb_reg_alpha": 1.8879784475126497e-05,
    "xgb_reg_lambda": 0.4101377689961653,
    "xgb_min_child_weight": 10,
    "xgb_gamma": 0.06272947106338078,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 134,
    "lgb_n_estimators": 136,
    "lgb_max_depth": 8,
    "lgb_learning_rate": 0.012970333225029891,
    "lgb_num_leaves": 37,
    "lgb_subsample": 0.6565503968486207,
    "lgb_colsample_bytree": 0.6047922984865641,
    "lgb_reg_alpha": 0.002539802135626717,
    "lgb_reg_lambda": 0.00010195011874077082,
    "lgb_min_data_in_leaf": 55,
    "lgb_feature_fraction_bynode": 0.7154366577206227,
    "lgb_bagging_freq": 3,
    "lgb_min_gain_to_split": 0.9478641241733106,
    "cat_iterations": 129,
    "cat_depth": 6,
    "cat_learning_rate": 0.16039879991500416,
    "cat_l2_leaf_reg": 2.867323175038132,
    "cat_subsample": 0.543508685316513,
    "cat_rsm": 0.6740039356843222,
    "cat_border_count": 71,
    "cat_random_strength": 1.1567847693273794,
    "cat_leaf_estimation_iterations": 4,
    "cat_bootstrap_type": "MVS"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "DESA_1d": {
      "symbol": "DESA",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 454,
          "test_days": 30,
          "train_end_idx": 454,
          "test_end_idx": 484,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-13T00:00:00",
          "test_start": "2025-06-16T00:00:00",
          "test_end": "2025-07-28T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.006861765049414196,
              "rmse": 0.028472625897069337,
              "mape": 1.7922126832136844,
              "confidence": 0.6194253627099912
            },
            "lightgbm": {
              "raw_r2": -0.006436087838670668,
              "rmse": 0.0284723304514409,
              "mape": 1.8420352146174013,
              "confidence": 0.6197711298663602
            },
            "catboost": {
              "raw_r2": -0.02246518675715603,
              "rmse": 0.02868566610385307,
              "mape": 1.7332765177578786,
              "confidence": 0.6067662032227169
            }
          },
          "dirhit": null,
          "rmse": 0.019997754766158386,
          "mape": 2823053.782095405,
          "nrmse": 1.0149470067974369,
          "mask_count": 8,
          "mask_pct": 27.586206896551722,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.006861765049414196,
              "lightgbm": -0.006436087838670668,
              "catboost": -0.02246518675715603
            },
            "ensemble_weights": {
              "xgboost": 0.20016482990709078,
              "lightgbm": 0.28193004104691227,
              "catboost": 0.517905129045997
            },
            "source": "model"
          }
        },
        {
          "split_index": 2,
          "train_days": 484,
          "test_days": 30,
          "train_end_idx": 484,
          "test_end_idx": 514,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-28T00:00:00",
          "test_start": "2025-07-29T00:00:00",
          "test_end": "2025-09-08T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.0019557755203573426,
              "rmse": 0.027893325581667325,
              "mape": 1.8475001938746551,
              "confidence": 0.6265890549473372
            },
            "lightgbm": {
              "raw_r2": -0.0018455721207450981,
              "rmse": 0.027935755245375567,
              "mape": 1.8520281227640725,
              "confidence": 0.6235004832926265
            },
            "catboost": {
              "raw_r2": 0.007118594529620455,
              "rmse": 0.027882833166595188,
              "mape": 1.7436500645995636,
              "confidence": 0.6307832475212716
            }
          },
          "dirhit": 90.9090909090909,
          "rmse": 0.024495688171614835,
          "mape": 81.11407605200931,
          "nrmse": 1.0048277561427614,
          "mask_count": 11,
          "mask_pct": 37.93103448275862,
          "low_support": false,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": 0.0019557755203573426,
              "lightgbm": -0.0018455721207450981,
              "catboost": 0.007118594529620455
            },
            "ensemble_weights": {
              "xgboost": 0.1998294384888902,
              "lightgbm": 0.2808592192918122,
              "catboost": 0.5193113422192976
            },
            "source": "model"
          }
        },
        {
          "split_index": 3,
          "train_days": 514,
          "test_days": 30,
          "train_end_idx": 514,
          "test_end_idx": 544,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-08T00:00:00",
          "test_start": "2025-09-09T00:00:00",
          "test_end": "2025-10-20T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.013159267866805546,
              "rmse": 0.027938968431830576,
              "mape": 1.8915831651291513,
              "confidence": 0.614311950434886
            },
            "lightgbm": {
              "raw_r2": -0.012171246375143255,
              "rmse": 0.027920828838032322,
              "mape": 1.8791019418314152,
              "confidence": 0.6151139132097341
            },
            "catboost": {
              "raw_r2": -0.008738871798480504,
              "rmse": 0.027917035072371598,
              "mape": 1.6969572075192965,
              "confidence": 0.617900796109365
            }
          },
          "dirhit": null,
          "rmse": 0.03083405507155714,
          "mape": 108.86980539497108,
          "nrmse": 0.9881749478053936,
          "mask_count": 3,
          "mask_pct": 10.344827586206897,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.013159267866805546,
              "lightgbm": -0.012171246375143255,
              "catboost": -0.008738871798480504
            },
            "ensemble_weights": {
              "xgboost": 0.7035958960595773,
              "lightgbm": 0.21232824985901036,
              "catboost": 0.08407585408141238
            },
            "source": "model"
          }
        },
        {
          "split_index": 4,
          "train_days": 544,
          "test_days": 30,
          "train_end_idx": 544,
          "test_end_idx": 574,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-20T00:00:00",
          "test_start": "2025-10-21T00:00:00",
          "test_end": "2025-12-01T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.014260519812056819,
              "rmse": 0.028240290096595257,
              "mape": 1.9094316966705471,
              "confidence": 0.6134182341036449
            },
            "lightgbm": {
              "raw_r2": -0.013164230281106434,
              "rmse": 0.028221885787689995,
              "mape": 1.9134720744644256,
              "confidence": 0.6143079228355133
            },
            "catboost": {
              "raw_r2": -0.028638721830156033,
              "rmse": 0.028398872723706496,
              "mape": 1.683613129762768,
              "confidence": 0.6017707168502006
            }
          },
          "dirhit": null,
          "rmse": 0.028947723553452764,
          "mape": 1908175.4890149499,
          "nrmse": 1.1074351195184102,
          "mask_count": 9,
          "mask_pct": 31.03448275862069,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.014260519812056819,
              "lightgbm": -0.013164230281106434,
              "catboost": -0.028638721830156033
            },
            "ensemble_weights": {
              "xgboost": 0.12328127489371989,
              "lightgbm": 0.8085872525720473,
              "catboost": 0.06813147253423268
            },
            "source": "model"
          }
        }
      ],
      "avg_dirhit": 90.9090909090909,
      "avg_nrmse": 1.0288462075660005,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.008081444301979804,
          "rmse": 0.028136302501790625,
          "mape": 1.8601819347220094,
          "confidence": 0.6184361505489648
        },
        "lightgbm": {
          "raw_r2": -0.008404284153916364,
          "rmse": 0.028137700080634695,
          "mape": 1.8716593384193285,
          "confidence": 0.6181733623010586
        },
        "catboost": {
          "raw_r2": -0.013181046464043028,
          "rmse": 0.02822110176663159,
          "mape": 1.7143742299098765,
          "confidence": 0.6143052409258885
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 10,
    "min_mask_pct": 5.0,
    "best_trial_number": 1332,
    "best_trial_seed": 1374,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "split_generation": {
      "type": "generate_walkforward_splits",
      "n_splits": 4
    },
    "symbol_specs": {
      "DESA_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 454,
            "test_end_idx": 484,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-13T00:00:00",
            "test_start": "2025-06-16T00:00:00",
            "test_end": "2025-07-28T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 484,
            "test_end_idx": 514,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-28T00:00:00",
            "test_start": "2025-07-29T00:00:00",
            "test_end": "2025-09-08T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 514,
            "test_end_idx": 544,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-08T00:00:00",
            "test_start": "2025-09-09T00:00:00",
            "test_end": "2025-10-20T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 544,
            "test_end_idx": 574,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-20T00:00:00",
            "test_start": "2025-10-21T00:00:00",
            "test_end": "2025-12-01T00:00:00"
          }
        ]
      }
    }
  }
}