{
  "best_value": 52.5928914319254,
  "best_dirhit": 83.75,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.26367880352420003,
    "ml_loss_threshold": 0.002052693149289131,
    "ml_dir_penalty": 2.82902128382184,
    "n_seeds": 5,
    "meta_stacking_alpha": 0.011444150444875956,
    "ml_adaptive_k_1d": 1.3598047552256993,
    "ml_pattern_weight_scale_1d": 1.6724240085106088,
    "enable_talib_patterns_short": false,
    "external_min_days": 56,
    "external_smooth_alpha": 0.47026293452120044,
    "yolo_min_conf": 0.5623109469873302,
    "smart_consensus_weight": 0.637366165717286,
    "smart_performance_weight": 0.40640569360870266,
    "smart_sigma": 0.009355418647340146,
    "smart_weight_xgb": 1.2666396169972773,
    "smart_weight_lgbm": 1.1178261261463094,
    "smart_weight_cat": 0.6394168066173753,
    "xgb_n_estimators": 475,
    "xgb_max_depth": 2,
    "xgb_learning_rate": 0.0510205799056137,
    "xgb_subsample": 0.8341989395289628,
    "xgb_colsample_bytree": 0.6438570156354246,
    "xgb_reg_alpha": 0.012414613005457972,
    "xgb_reg_lambda": 9.203121698971074,
    "xgb_min_child_weight": 6,
    "xgb_gamma": 0.13166037954189114,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 282,
    "lgb_n_estimators": 228,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.018972216837502973,
    "lgb_num_leaves": 43,
    "lgb_subsample": 0.6354785549138267,
    "lgb_colsample_bytree": 0.790797996073841,
    "lgb_reg_alpha": 0.645029435464305,
    "lgb_reg_lambda": 0.0015171279979421582,
    "lgb_min_data_in_leaf": 47,
    "lgb_feature_fraction_bynode": 0.7582104555304743,
    "lgb_bagging_freq": 5,
    "lgb_min_gain_to_split": 0.7141201125078352,
    "cat_iterations": 202,
    "cat_depth": 6,
    "cat_learning_rate": 0.023786345745186913,
    "cat_l2_leaf_reg": 5.960992413529624,
    "cat_subsample": 0.527740414284509,
    "cat_rsm": 0.5182673546960943,
    "cat_border_count": 40,
    "cat_random_strength": 0.1914878714213584,
    "cat_leaf_estimation_iterations": 18,
    "cat_bootstrap_type": "No"
  },
  "best_trial": {
    "number": 1305,
    "value": 52.5928914319254,
    "state": "1"
  },
  "n_trials": 1357,
  "pruned_count": 0,
  "avg_trial_time": 192.52301838126843,
  "top_k_trials": [
    {
      "number": 1305,
      "value": 52.5928914319254,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.26367880352420003,
        "ml_loss_threshold": 0.002052693149289131,
        "ml_dir_penalty": 2.82902128382184,
        "n_seeds": 5,
        "meta_stacking_alpha": 0.011444150444875956,
        "ml_adaptive_k_1d": 1.3598047552256993,
        "ml_pattern_weight_scale_1d": 1.6724240085106088,
        "enable_talib_patterns_short": false,
        "external_min_days": 56,
        "external_smooth_alpha": 0.47026293452120044,
        "yolo_min_conf": 0.5623109469873302,
        "smart_consensus_weight": 0.637366165717286,
        "smart_performance_weight": 0.40640569360870266,
        "smart_sigma": 0.009355418647340146,
        "smart_weight_xgb": 1.2666396169972773,
        "smart_weight_lgbm": 1.1178261261463094,
        "smart_weight_cat": 0.6394168066173753,
        "xgb_n_estimators": 475,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.0510205799056137,
        "xgb_subsample": 0.8341989395289628,
        "xgb_colsample_bytree": 0.6438570156354246,
        "xgb_reg_alpha": 0.012414613005457972,
        "xgb_reg_lambda": 9.203121698971074,
        "xgb_min_child_weight": 6,
        "xgb_gamma": 0.13166037954189114,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 282,
        "lgb_n_estimators": 228,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.018972216837502973,
        "lgb_num_leaves": 43,
        "lgb_subsample": 0.6354785549138267,
        "lgb_colsample_bytree": 0.790797996073841,
        "lgb_reg_alpha": 0.645029435464305,
        "lgb_reg_lambda": 0.0015171279979421582,
        "lgb_min_data_in_leaf": 47,
        "lgb_feature_fraction_bynode": 0.7582104555304743,
        "lgb_bagging_freq": 5,
        "lgb_min_gain_to_split": 0.7141201125078352,
        "cat_iterations": 202,
        "cat_depth": 6,
        "cat_learning_rate": 0.023786345745186913,
        "cat_l2_leaf_reg": 5.960992413529624,
        "cat_subsample": 0.527740414284509,
        "cat_rsm": 0.5182673546960943,
        "cat_border_count": 40,
        "cat_random_strength": 0.1914878714213584,
        "cat_leaf_estimation_iterations": 18,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 83.75,
        "avg_nrmse": 1.0053514280124314,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1228,
      "value": 52.240873530605285,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.2114506965230099,
        "ml_loss_threshold": 0.005556808870119515,
        "ml_dir_penalty": 2.780117812421577,
        "n_seeds": 3,
        "ml_adaptive_k_1d": 1.3143056591025712,
        "ml_pattern_weight_scale_1d": 1.7227233831911242,
        "enable_talib_patterns_short": false,
        "external_min_days": 48,
        "external_smooth_alpha": 0.48685355075559617,
        "regime_scale_low": 0.9046637832995464,
        "regime_scale_high": 1.0820772486582158,
        "smart_consensus_weight": 0.35612964406918807,
        "smart_performance_weight": 0.42095172237926937,
        "smart_sigma": 0.016047587380541333,
        "smart_weight_xgb": 1.390848144891143,
        "smart_weight_lgbm": 1.231455362411582,
        "smart_weight_cat": 0.6540291961989945,
        "xgb_n_estimators": 479,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.04641590169359194,
        "xgb_subsample": 0.8360953208818808,
        "xgb_colsample_bytree": 0.6477209335586062,
        "xgb_reg_alpha": 0.014502658960801156,
        "xgb_reg_lambda": 7.083709573226757,
        "xgb_min_child_weight": 6,
        "xgb_gamma": 0.26755424003427764,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 257,
        "lgb_n_estimators": 200,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.02074882075935429,
        "lgb_num_leaves": 39,
        "lgb_subsample": 0.8399461557796624,
        "lgb_colsample_bytree": 0.827396952400134,
        "lgb_reg_alpha": 0.6426125499278078,
        "lgb_reg_lambda": 0.002120475763896521,
        "lgb_min_data_in_leaf": 46,
        "lgb_feature_fraction_bynode": 0.6820644506491012,
        "lgb_bagging_freq": 4,
        "lgb_min_gain_to_split": 0.688415281982355,
        "cat_iterations": 205,
        "cat_depth": 3,
        "cat_learning_rate": 0.023698252238434803,
        "cat_l2_leaf_reg": 5.93644401747818,
        "cat_subsample": 0.5545311950316216,
        "cat_rsm": 0.75766469998754,
        "cat_border_count": 23,
        "cat_random_strength": 0.23453685951014558,
        "cat_leaf_estimation_iterations": 20,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 83.23529411764706,
        "avg_nrmse": 1.0039720586246084,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1319,
      "value": 49.64202834766572,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.24182366260441307,
        "ml_loss_threshold": 0.0022092821098580813,
        "ml_dir_penalty": 2.679307166218541,
        "n_seeds": 5,
        "meta_stacking_alpha": 0.014521947054981929,
        "ml_adaptive_k_1d": 1.4081102553611125,
        "ml_pattern_weight_scale_1d": 1.2661154613183558,
        "enable_talib_patterns_short": false,
        "external_min_days": 57,
        "external_smooth_alpha": 0.47223044141955833,
        "yolo_min_conf": 0.5695415190258765,
        "smart_consensus_weight": 0.6545471710403546,
        "smart_performance_weight": 0.36858293871786485,
        "smart_sigma": 0.007489297409196571,
        "smart_weight_xgb": 1.3830566409409026,
        "smart_weight_lgbm": 1.1697161665710298,
        "smart_weight_cat": 0.5916975515547256,
        "xgb_n_estimators": 475,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.0471578748443301,
        "xgb_subsample": 0.8336020412412491,
        "xgb_colsample_bytree": 0.6357165358300839,
        "xgb_reg_alpha": 0.028710078403078827,
        "xgb_reg_lambda": 5.200070025041866,
        "xgb_min_child_weight": 5,
        "xgb_gamma": 0.17249778318151862,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 282,
        "lgb_n_estimators": 236,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.019877503670800278,
        "lgb_num_leaves": 44,
        "lgb_subsample": 0.8307015194546001,
        "lgb_colsample_bytree": 0.7866325184497952,
        "lgb_reg_alpha": 0.6765670487858501,
        "lgb_reg_lambda": 0.0015023003367761688,
        "lgb_min_data_in_leaf": 47,
        "lgb_feature_fraction_bynode": 0.7745344832692908,
        "lgb_bagging_freq": 5,
        "lgb_min_gain_to_split": 0.5942817702455849,
        "cat_iterations": 197,
        "cat_depth": 6,
        "cat_learning_rate": 0.023568509328865343,
        "cat_l2_leaf_reg": 5.952240745696333,
        "cat_subsample": 0.7766035660890827,
        "cat_rsm": 0.7113211131000645,
        "cat_border_count": 39,
        "cat_random_strength": 0.1972292006858905,
        "cat_leaf_estimation_iterations": 9,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 79.71014492753622,
        "avg_nrmse": 1.025845516934938,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_AYDEM_h1_c1",
  "symbols": [
    "AYDEM"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.26367880352420003,
    "ml_loss_threshold": 0.002052693149289131,
    "ml_dir_penalty": 2.82902128382184,
    "n_seeds": 5,
    "meta_stacking_alpha": 0.011444150444875956,
    "ml_adaptive_k_1d": 1.3598047552256993,
    "ml_pattern_weight_scale_1d": 1.6724240085106088,
    "external_min_days": 56,
    "external_smooth_alpha": 0.47026293452120044,
    "yolo_min_conf": 0.5623109469873302,
    "smart_consensus_weight": 0.637366165717286,
    "smart_performance_weight": 0.40640569360870266,
    "smart_sigma": 0.009355418647340146,
    "smart_weight_xgb": 1.2666396169972773,
    "smart_weight_lgbm": 1.1178261261463094,
    "smart_weight_cat": 0.6394168066173753
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 475,
    "xgb_max_depth": 2,
    "xgb_learning_rate": 0.0510205799056137,
    "xgb_subsample": 0.8341989395289628,
    "xgb_colsample_bytree": 0.6438570156354246,
    "xgb_reg_alpha": 0.012414613005457972,
    "xgb_reg_lambda": 9.203121698971074,
    "xgb_min_child_weight": 6,
    "xgb_gamma": 0.13166037954189114,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 282,
    "lgb_n_estimators": 228,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.018972216837502973,
    "lgb_num_leaves": 43,
    "lgb_subsample": 0.6354785549138267,
    "lgb_colsample_bytree": 0.790797996073841,
    "lgb_reg_alpha": 0.645029435464305,
    "lgb_reg_lambda": 0.0015171279979421582,
    "lgb_min_data_in_leaf": 47,
    "lgb_feature_fraction_bynode": 0.7582104555304743,
    "lgb_bagging_freq": 5,
    "lgb_min_gain_to_split": 0.7141201125078352,
    "cat_iterations": 202,
    "cat_depth": 6,
    "cat_learning_rate": 0.023786345745186913,
    "cat_l2_leaf_reg": 5.960992413529624,
    "cat_subsample": 0.527740414284509,
    "cat_rsm": 0.5182673546960943,
    "cat_border_count": 40,
    "cat_random_strength": 0.1914878714213584,
    "cat_leaf_estimation_iterations": 18,
    "cat_bootstrap_type": "No"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "1",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "AYDEM_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -1.740778157876817,
              "rmse": 0.04106393334074734,
              "mape": 1.4288376373101546,
              "confidence": 0.3001078424027203
            },
            "lightgbm": {
              "raw_r2": -0.04615957457555031,
              "rmse": 0.026227248422095596,
              "mape": 1.6260039948978362,
              "confidence": 0.5876609456927978
            },
            "catboost": {
              "raw_r2": -0.027713028076413366,
              "rmse": 0.02601415051910817,
              "mape": 1.6340091473926326,
              "confidence": 0.6025191231440937
            }
          },
          "dirhit": 57.14285714285714,
          "rmse": 0.0223698057924403,
          "mape": 143.0821798369566,
          "nrmse": 1.021474295588682,
          "mask_count": 21,
          "mask_pct": 72.41379310344827
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -1.7557434478671883,
              "rmse": 0.04105302700735029,
              "mape": 1.4277001429060925,
              "confidence": 0.30010006864884536
            },
            "lightgbm": {
              "raw_r2": -0.026505667829685775,
              "rmse": 0.025891549616007446,
              "mape": 1.6228506584800955,
              "confidence": 0.6034956105078384
            },
            "catboost": {
              "raw_r2": -0.01078149374204973,
              "rmse": 0.025682323583746128,
              "mape": 1.5833358250257827,
              "confidence": 0.6162421571005733
            }
          },
          "dirhit": 66.66666666666666,
          "rmse": 0.01979491133868091,
          "mape": 140.9400821530991,
          "nrmse": 0.9933798148076617,
          "mask_count": 9,
          "mask_pct": 31.03448275862069
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -1.729797966280594,
              "rmse": 0.0402677164008778,
              "mape": 1.4349322338287143,
              "confidence": 0.30011392752743565
            },
            "lightgbm": {
              "raw_r2": -0.02096301126115326,
              "rmse": 0.025121200347893367,
              "mape": 1.6320546772585098,
              "confidence": 0.6079831297211751
            },
            "catboost": {
              "raw_r2": -0.0004163312256834084,
              "rmse": 0.024920446259307106,
              "mape": 1.581692777316306,
              "confidence": 0.6246617310012837
            }
          },
          "dirhit": 100.0,
          "rmse": 0.020663115528852912,
          "mape": 361311.3394126134,
          "nrmse": 0.9600738642930358,
          "mask_count": 6,
          "mask_pct": 20.689655172413794
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -1.6881978442832752,
              "rmse": 0.04004224507932321,
              "mape": 1.4526623607532985,
              "confidence": 0.30014026347345585
            },
            "lightgbm": {
              "raw_r2": -0.0170848772139048,
              "rmse": 0.024979936796456142,
              "mape": 1.673271499685736,
              "confidence": 0.6111269725711763
            },
            "catboost": {
              "raw_r2": -0.00018555031098033137,
              "rmse": 0.024796381222947406,
              "mape": 1.677346424403009,
              "confidence": 0.624849240383142
            }
          },
          "dirhit": 0.0,
          "rmse": 0.020935533862133156,
          "mape": 501077.46732447756,
          "nrmse": 0.9943431888713461,
          "mask_count": 0,
          "mask_pct": 0.0
        }
      ],
      "avg_dirhit": 55.95238095238095,
      "avg_nrmse": 0.9923177908901815,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -1.7286293540769686,
          "rmse": 0.040606730457074657,
          "mape": 1.4360330936995649,
          "confidence": 0.30011552551311427
        },
        "lightgbm": {
          "raw_r2": -0.027678282720073534,
          "rmse": 0.025554983795613138,
          "mape": 1.6385452075805444,
          "confidence": 0.6025666646232468
        },
        "catboost": {
          "raw_r2": -0.009774100838781708,
          "rmse": 0.0253533253962772,
          "mape": 1.6190960435344326,
          "confidence": 0.6170680629072732
        }
      }
    }
  }
}