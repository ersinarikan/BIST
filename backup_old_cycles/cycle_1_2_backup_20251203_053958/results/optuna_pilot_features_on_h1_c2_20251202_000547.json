{
  "best_value": 70.0,
  "best_dirhit": 70.0,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "model_choice": "cat",
    "ml_adaptive_k_1d": 1.8983262520205875,
    "ml_pattern_weight_scale_1d": 0.9063975755434617,
    "enable_talib_patterns_short": false,
    "external_min_days": 57,
    "external_smooth_alpha": 0.0724247883074821,
    "regime_scale_low": 0.9427988076619066,
    "regime_scale_high": 1.0488293470772456,
    "smart_consensus_weight": 0.4086016786985057,
    "smart_performance_weight": 0.4659746285307732,
    "smart_sigma": 0.001166512765985897,
    "smart_weight_xgb": 0.6141763972436195,
    "smart_weight_lgbm": 1.1113622106754504,
    "smart_weight_cat": 0.5972700264241673,
    "fingpt_confidence_threshold": 0.3436148154394832,
    "cat_iterations": 444,
    "cat_depth": 6,
    "cat_learning_rate": 0.019527432215854755,
    "cat_l2_leaf_reg": 9.537321736107625,
    "cat_subsample": 0.8419454908468076,
    "cat_rsm": 0.7881691950828319,
    "cat_border_count": 66,
    "cat_random_strength": 0.6807683721413568,
    "cat_leaf_estimation_iterations": 20,
    "cat_bootstrap_type": "Bernoulli"
  },
  "best_trial": {
    "number": 1161,
    "value": 70.0,
    "state": "1"
  },
  "best_trial_number": 1161,
  "best_trial_seed": 255,
  "n_trials": 1430,
  "pruned_count": 0,
  "avg_trial_time": 254.81475833942378,
  "top_k_trials": [
    {
      "number": 213,
      "value": 53.84508284446861,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "cat",
        "ml_adaptive_k_1d": 1.878790991182928,
        "ml_pattern_weight_scale_1d": 0.8553360637682954,
        "enable_talib_patterns_short": false,
        "external_min_days": 60,
        "external_smooth_alpha": 0.05047635031914937,
        "regime_scale_low": 0.9307260681675341,
        "regime_scale_high": 1.0448111741272892,
        "yolo_min_conf": 0.5638929230548394,
        "smart_consensus_weight": 0.40138847088328766,
        "smart_performance_weight": 0.5059739523963783,
        "smart_sigma": 0.0011683022764947088,
        "smart_weight_xgb": 0.5278011406145277,
        "smart_weight_lgbm": 0.7812590283291168,
        "smart_weight_cat": 1.3638403897917792,
        "fingpt_confidence_threshold": 0.3339574956919324,
        "cat_iterations": 307,
        "cat_depth": 6,
        "cat_learning_rate": 0.016861488839392202,
        "cat_l2_leaf_reg": 9.380200274560444,
        "cat_subsample": 0.8588889181707543,
        "cat_rsm": 0.6697142500773642,
        "cat_border_count": 195,
        "cat_random_strength": 1.145854810304763,
        "cat_leaf_estimation_iterations": 20,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 85.625,
        "avg_nrmse": 1.0154028592552313,
        "model_choice": "cat",
        "symbol_metrics": {
          "BRLSM_1d": {
            "symbol": "BRLSM",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 452,
                "test_days": 30,
                "train_end_idx": 452,
                "test_end_idx": 482,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.00635601991296179,
                    "rmse": 0.030399194647666144,
                    "mape": 1.5198733957928405,
                    "confidence": 0.6301638315749811
                  },
                  "catboost": {
                    "raw_r2": 0.013866780014680483,
                    "rmse": 0.03029598827968209,
                    "mape": 1.6591796394684053,
                    "confidence": 0.636262247476687
                  }
                },
                "dirhit": 62.5,
                "rmse": 0.022009911018217483,
                "mape": 1827794.404959519,
                "nrmse": 1.024445018061068,
                "mask_count": 8,
                "mask_pct": 27.586206896551722,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 2,
                "train_days": 482,
                "test_days": 30,
                "train_end_idx": 482,
                "test_end_idx": 512,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.02320682843266338,
                    "rmse": 0.029157785464505818,
                    "mape": 1.515030428886551,
                    "confidence": 0.6438344207441519
                  },
                  "catboost": {
                    "raw_r2": 0.00032023174938555776,
                    "rmse": 0.029480574141621956,
                    "mape": 1.7477197276151144,
                    "confidence": 0.6252601882407884
                  }
                },
                "dirhit": 80.0,
                "rmse": 0.028942807498617502,
                "mape": 155.46539068067793,
                "nrmse": 0.9925110081475796,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 3,
                "train_days": 512,
                "test_days": 30,
                "train_end_idx": 512,
                "test_end_idx": 542,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": 0.0035602165516822235,
                    "rmse": 0.029100060109539163,
                    "mape": 1.5676569069472164,
                    "confidence": 0.6278925995650828
                  },
                  "catboost": {
                    "raw_r2": 0.009615823116852829,
                    "rmse": 0.02898381209442746,
                    "mape": 1.6097605058072626,
                    "confidence": 0.6328113516128306
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.018699596384837012,
                "mape": 978202.6608004433,
                "nrmse": 1.0288952014713106,
                "mask_count": 1,
                "mask_pct": 3.4482758620689653,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 4,
                "train_days": 542,
                "test_days": 30,
                "train_end_idx": 542,
                "test_end_idx": 572,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.008558002405499088,
                    "rmse": 0.029291975932095874,
                    "mape": 1.5771265943600943,
                    "confidence": 0.6180476838121245
                  },
                  "catboost": {
                    "raw_r2": -0.008975725338186987,
                    "rmse": 0.02930745710107818,
                    "mape": 1.689457624965613,
                    "confidence": 0.6177084469426739
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.02062268206042456,
                "mape": 2200948.090203527,
                "nrmse": 1.0157602093409672,
                "mask_count": 1,
                "mask_pct": 3.4482758620689653,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              }
            ],
            "avg_dirhit": 85.625,
            "avg_nrmse": 1.0154028592552313,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": 0.006141265622952077,
                "rmse": 0.02948725403845175,
                "mape": 1.5449218314966755,
                "confidence": 0.6299846339240851
              },
              "catboost": {
                "raw_r2": 0.00370677738568297,
                "rmse": 0.02951695790420242,
                "mape": 1.6765293744640988,
                "confidence": 0.628010558568245
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 1,
      "value": 53.51685679587109,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 1.3993475643167195,
        "ml_pattern_weight_scale_1d": 1.2713516576204174,
        "enable_talib_patterns_short": true,
        "external_min_days": 44,
        "external_smooth_alpha": 0.1267358556592812,
        "regime_scale_low": 0.8117092867373503,
        "regime_scale_high": 1.1907993967055999,
        "yolo_min_conf": 0.7828160165372797,
        "smart_consensus_weight": 0.7041986740582306,
        "smart_performance_weight": 0.35230688458668535,
        "smart_sigma": 0.0013399060561509793,
        "smart_weight_xgb": 1.1842330265121568,
        "smart_weight_lgbm": 0.9401524937396013,
        "smart_weight_cat": 0.6220382348447788,
        "fingpt_confidence_threshold": 0.34855307303338107,
        "xgb_n_estimators": 165,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.020153425505297702,
        "xgb_subsample": 0.7650089137415927,
        "xgb_colsample_bytree": 0.6246844304357644,
        "xgb_reg_alpha": 0.0013194961490425666,
        "xgb_reg_lambda": 0.37065955814875856,
        "xgb_min_child_weight": 7,
        "xgb_gamma": 0.755681014127442,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 472,
        "lgb_n_estimators": 407,
        "lgb_max_depth": 8,
        "lgb_learning_rate": 0.01303561122512888,
        "lgb_num_leaves": 18,
        "lgb_subsample": 0.5180909155642153,
        "lgb_colsample_bytree": 0.6301321323053057,
        "lgb_reg_alpha": 0.0003292379844056765,
        "lgb_reg_lambda": 0.001979459933014259,
        "lgb_min_data_in_leaf": 85,
        "lgb_feature_fraction_bynode": 0.6783766633467947,
        "lgb_bagging_freq": 3,
        "lgb_min_gain_to_split": 0.5426960831582485,
        "cat_iterations": 187,
        "cat_depth": 7,
        "cat_learning_rate": 0.012502377950801122,
        "cat_l2_leaf_reg": 9.881982429404655,
        "cat_subsample": 0.8475101461834957,
        "cat_rsm": 0.5894220566903776,
        "cat_border_count": 17,
        "cat_random_strength": 2.429095036825495,
        "cat_leaf_estimation_iterations": 15,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 85.0,
        "avg_nrmse": 0.9971905340214834,
        "model_choice": "all",
        "symbol_metrics": {
          "BRLSM_1d": {
            "symbol": "BRLSM",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 451,
                "test_days": 30,
                "train_end_idx": 451,
                "test_end_idx": 481,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-11T00:00:00",
                "test_start": "2025-06-12T00:00:00",
                "test_end": "2025-07-24T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.007981419709352547,
                    "rmse": 0.030610727845994664,
                    "mape": 1.570406254671121,
                    "confidence": 0.6185159569911955
                  },
                  "lightgbm": {
                    "raw_r2": -0.0044317225736638655,
                    "rmse": 0.030564138438008714,
                    "mape": 1.716259768579798,
                    "confidence": 0.6213993727345957
                  },
                  "catboost": {
                    "raw_r2": 0.02132958217661,
                    "rmse": 0.030167767129887026,
                    "mape": 1.603203989775591,
                    "confidence": 0.6423138782793851
                  }
                },
                "dirhit": 40.0,
                "rmse": 0.02580645708668518,
                "mape": 1468430.6605630536,
                "nrmse": 1.022598581328796,
                "mask_count": 5,
                "mask_pct": 17.24137931034483,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.007981419709352547,
                    "lightgbm": -0.0044317225736638655,
                    "catboost": 0.02132958217661
                  },
                  "ensemble_weights": {
                    "xgboost": 0.18196929797669106,
                    "lightgbm": 0.14472050194329597,
                    "catboost": 0.673310200080013
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 2,
                "train_days": 481,
                "test_days": 30,
                "train_end_idx": 481,
                "test_end_idx": 511,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-24T00:00:00",
                "test_start": "2025-07-25T00:00:00",
                "test_end": "2025-09-04T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.008888790352195327,
                    "rmse": 0.02961654904239636,
                    "mape": 1.5713985325036488,
                    "confidence": 0.6177790464076963
                  },
                  "lightgbm": {
                    "raw_r2": -0.01272523321599787,
                    "rmse": 0.02968864097531134,
                    "mape": 1.786024921388828,
                    "confidence": 0.6146642346238769
                  },
                  "catboost": {
                    "raw_r2": 0.007856015103197741,
                    "rmse": 0.02938043799338007,
                    "mape": 1.7081248597831764,
                    "confidence": 0.6313821916892118
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.02879998568637646,
                "mape": 144.9368997123263,
                "nrmse": 0.9764984487557574,
                "mask_count": 1,
                "mask_pct": 3.4482758620689653,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.008888790352195327,
                    "lightgbm": -0.01272523321599787,
                    "catboost": 0.007856015103197741
                  },
                  "ensemble_weights": {
                    "xgboost": 0.7416239070893623,
                    "lightgbm": 0.10399331372839382,
                    "catboost": 0.1543827791822439
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 3,
                "train_days": 511,
                "test_days": 30,
                "train_end_idx": 511,
                "test_end_idx": 541,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-04T00:00:00",
                "test_start": "2025-09-05T00:00:00",
                "test_end": "2025-10-16T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.017169429602176933,
                    "rmse": 0.029419207062798214,
                    "mape": 1.59424998563275,
                    "confidence": 0.6110583995526027
                  },
                  "lightgbm": {
                    "raw_r2": -0.02434437073172413,
                    "rmse": 0.029536912222553238,
                    "mape": 1.7408029305499955,
                    "confidence": 0.6052445844576028
                  },
                  "catboost": {
                    "raw_r2": -0.017926938112307427,
                    "rmse": 0.029430694620580074,
                    "mape": 1.7101680338498986,
                    "confidence": 0.6104441071075002
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.020327907719117033,
                "mape": 849073.2688468521,
                "nrmse": 0.9950505681028632,
                "mask_count": 3,
                "mask_pct": 10.344827586206897,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.017169429602176933,
                    "lightgbm": -0.02434437073172413,
                    "catboost": -0.017926938112307427
                  },
                  "ensemble_weights": {
                    "xgboost": 0.4313797781391409,
                    "lightgbm": 0.34205940539430035,
                    "catboost": 0.2265608164665587
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 4,
                "train_days": 541,
                "test_days": 30,
                "train_end_idx": 541,
                "test_end_idx": 571,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-16T00:00:00",
                "test_start": "2025-10-17T00:00:00",
                "test_end": "2025-11-27T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.012767978105387249,
                    "rmse": 0.02935210309227654,
                    "mape": 1.5814872677150738,
                    "confidence": 0.6146295396450823
                  },
                  "lightgbm": {
                    "raw_r2": -0.01476274005500485,
                    "rmse": 0.029384422246637034,
                    "mape": 1.7436248695463719,
                    "confidence": 0.6130107168075569
                  },
                  "catboost": {
                    "raw_r2": -0.003088370029801816,
                    "rmse": 0.029226497573372496,
                    "mape": 1.7143536705295328,
                    "confidence": 0.622490749211646
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.022732755649292995,
                "mape": 1134026.0583241307,
                "nrmse": 0.9946145378985168,
                "mask_count": 1,
                "mask_pct": 3.4482758620689653,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.012767978105387249,
                    "lightgbm": -0.01476274005500485,
                    "catboost": -0.003088370029801816
                  },
                  "ensemble_weights": {
                    "xgboost": 0.18265820786147643,
                    "lightgbm": 0.14486623354911907,
                    "catboost": 0.6724755585894044
                  },
                  "source": "model"
                }
              }
            ],
            "avg_dirhit": 85.0,
            "avg_nrmse": 0.9971905340214834,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.011701904442278014,
                "rmse": 0.029749646760866444,
                "mape": 1.5793855101306487,
                "confidence": 0.6154957356491442
              },
              "lightgbm": {
                "raw_r2": -0.014066016644097679,
                "rmse": 0.02979352847062758,
                "mape": 1.7466781225162484,
                "confidence": 0.613579727155908
              },
              "catboost": {
                "raw_r2": 0.0020425722844246244,
                "rmse": 0.029551349329304918,
                "mape": 1.6839626384845499,
                "confidence": 0.6266577315719357
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 181,
      "value": 53.056897414924094,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "cat",
        "ml_loss_mse_weight": 0.2764296409094106,
        "ml_loss_threshold": 0.006887970179583467,
        "ml_dir_penalty": 4.533277880257574,
        "meta_stacking_alpha": 0.03487336169909606,
        "ml_adaptive_k_1d": 1.6473295445617722,
        "ml_pattern_weight_scale_1d": 0.8076359890554041,
        "enable_talib_patterns_short": false,
        "external_min_days": 57,
        "external_smooth_alpha": 0.0595383173759938,
        "regime_scale_low": 0.9211474075866353,
        "regime_scale_high": 1.0519760212152012,
        "yolo_min_conf": 0.4951572363819651,
        "fingpt_confidence_threshold": 0.37717508779161546,
        "cat_iterations": 279,
        "cat_depth": 6,
        "cat_learning_rate": 0.016908149450469027,
        "cat_l2_leaf_reg": 9.459410656017909,
        "cat_subsample": 0.8482558528029028,
        "cat_rsm": 0.8138174147260261,
        "cat_border_count": 199,
        "cat_random_strength": 1.125098244876547,
        "cat_leaf_estimation_iterations": 20,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 84.375,
        "avg_nrmse": 1.000933764179316,
        "model_choice": "cat",
        "symbol_metrics": {
          "BRLSM_1d": {
            "symbol": "BRLSM",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 451,
                "test_days": 30,
                "train_end_idx": 451,
                "test_end_idx": 481,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-11T00:00:00",
                "test_start": "2025-06-12T00:00:00",
                "test_end": "2025-07-24T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -11.328858541342948,
                    "rmse": 0.10630616828833832,
                    "mape": 1.7099454606875781,
                    "confidence": 0.3
                  },
                  "catboost": {
                    "raw_r2": 0.01949304935494482,
                    "rmse": 0.030187873273304324,
                    "mape": 1.650860187987901,
                    "confidence": 0.6408255766956201
                  }
                },
                "dirhit": 37.5,
                "rmse": 0.026276139058779586,
                "mape": 675302.503049141,
                "nrmse": 1.0412100519667884,
                "mask_count": 8,
                "mask_pct": 27.586206896551722,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 2,
                "train_days": 481,
                "test_days": 30,
                "train_end_idx": 481,
                "test_end_idx": 511,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-24T00:00:00",
                "test_start": "2025-07-25T00:00:00",
                "test_end": "2025-09-04T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -12.587606309793843,
                    "rmse": 0.10703482478125081,
                    "mape": 1.7194833354582153,
                    "confidence": 0.3
                  },
                  "catboost": {
                    "raw_r2": 0.008257330449216468,
                    "rmse": 0.02939097757106066,
                    "mape": 1.7484598030728704,
                    "confidence": 0.6317081281343587
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.02919237268603025,
                "mape": 160.79614304296342,
                "nrmse": 0.9898028059400427,
                "mask_count": 1,
                "mask_pct": 3.4482758620689653,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 3,
                "train_days": 511,
                "test_days": 30,
                "train_end_idx": 511,
                "test_end_idx": 541,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-04T00:00:00",
                "test_start": "2025-09-05T00:00:00",
                "test_end": "2025-10-16T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -13.068564789328937,
                    "rmse": 0.10668538595227746,
                    "mape": 1.7086817539162846,
                    "confidence": 0.3
                  },
                  "catboost": {
                    "raw_r2": -0.012437087535497696,
                    "rmse": 0.029329896895231498,
                    "mape": 1.700879171879856,
                    "confidence": 0.6148981215220837
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.020084029046672062,
                "mape": 637607.63726599,
                "nrmse": 0.9831127132622332,
                "mask_count": 2,
                "mask_pct": 6.896551724137931,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              },
              {
                "split_index": 4,
                "train_days": 541,
                "test_days": 30,
                "train_end_idx": 541,
                "test_end_idx": 571,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-16T00:00:00",
                "test_start": "2025-10-17T00:00:00",
                "test_end": "2025-11-27T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -12.509168027484854,
                    "rmse": 0.10696138505302913,
                    "mape": 1.7139912913585296,
                    "confidence": 0.3
                  },
                  "catboost": {
                    "raw_r2": 0.0012773178940612324,
                    "rmse": 0.02916011591207023,
                    "mape": 1.6412021261650862,
                    "confidence": 0.6260378172613408
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.02007436042862665,
                "mape": 1890913.5266908023,
                "nrmse": 0.9896094855481997,
                "mask_count": 3,
                "mask_pct": 10.344827586206897,
                "low_support": false,
                "min_mask_count": 0,
                "min_mask_pct": 0.0
              }
            ],
            "avg_dirhit": 84.375,
            "avg_nrmse": 1.000933764179316,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -12.373549416987645,
                "rmse": 0.10674694101872392,
                "mape": 1.7130254603551518,
                "confidence": 0.3
              },
              "catboost": {
                "raw_r2": 0.0041476525406812055,
                "rmse": 0.029517215912916676,
                "mape": 1.6853503222764283,
                "confidence": 0.6283674109033508
              }
            }
          }
        }
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_BRLSM_h1_c2",
  "symbols": [
    "BRLSM"
  ],
  "horizon": 1,
  "best_model_choice": "cat",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_adaptive_k_1d": 1.8983262520205875,
    "ml_pattern_weight_scale_1d": 0.9063975755434617,
    "external_min_days": 57,
    "external_smooth_alpha": 0.0724247883074821
  },
  "hyperparameters": {
    "model_choice": "cat",
    "regime_scale_low": 0.9427988076619066,
    "regime_scale_high": 1.0488293470772456,
    "smart_consensus_weight": 0.4086016786985057,
    "smart_performance_weight": 0.4659746285307732,
    "smart_sigma": 0.001166512765985897,
    "smart_weight_xgb": 0.6141763972436195,
    "smart_weight_lgbm": 1.1113622106754504,
    "smart_weight_cat": 0.5972700264241673,
    "fingpt_confidence_threshold": 0.3436148154394832,
    "cat_iterations": 444,
    "cat_depth": 6,
    "cat_learning_rate": 0.019527432215854755,
    "cat_l2_leaf_reg": 9.537321736107625,
    "cat_subsample": 0.8419454908468076,
    "cat_rsm": 0.7881691950828319,
    "cat_border_count": 66,
    "cat_random_strength": 0.6807683721413568,
    "cat_leaf_estimation_iterations": 20,
    "cat_bootstrap_type": "Bernoulli"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "0",
    "ENABLE_LIGHTGBM": "0",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "BRLSM_1d": {
      "symbol": "BRLSM",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 452,
          "test_days": 30,
          "train_end_idx": 452,
          "test_end_idx": 482,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-12T00:00:00",
          "test_start": "2025-06-13T00:00:00",
          "test_end": "2025-07-25T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.00635601991296179,
              "rmse": 0.030399194647666144,
              "mape": 1.5198733957928405,
              "confidence": 0.6301638315749811
            },
            "catboost": {
              "raw_r2": 0.013866780014680483,
              "rmse": 0.03029598827968209,
              "mape": 1.6591796394684053,
              "confidence": 0.636262247476687
            }
          },
          "dirhit": 62.5,
          "rmse": 0.022009911018217483,
          "mape": 1827794.404959519,
          "nrmse": 1.024445018061068,
          "mask_count": 8,
          "mask_pct": 27.586206896551722,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 2,
          "train_days": 482,
          "test_days": 30,
          "train_end_idx": 482,
          "test_end_idx": 512,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-25T00:00:00",
          "test_start": "2025-07-28T00:00:00",
          "test_end": "2025-09-05T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.02320682843266338,
              "rmse": 0.029157785464505818,
              "mape": 1.515030428886551,
              "confidence": 0.6438344207441519
            },
            "catboost": {
              "raw_r2": 0.00032023174938555776,
              "rmse": 0.029480574141621956,
              "mape": 1.7477197276151144,
              "confidence": 0.6252601882407884
            }
          },
          "dirhit": 80.0,
          "rmse": 0.028942807498617502,
          "mape": 155.46539068067793,
          "nrmse": 0.9925110081475796,
          "mask_count": 5,
          "mask_pct": 17.24137931034483,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 3,
          "train_days": 512,
          "test_days": 30,
          "train_end_idx": 512,
          "test_end_idx": 542,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-05T00:00:00",
          "test_start": "2025-09-08T00:00:00",
          "test_end": "2025-10-17T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.0035602165516822235,
              "rmse": 0.029100060109539163,
              "mape": 1.5676569069472164,
              "confidence": 0.6278925995650828
            },
            "catboost": {
              "raw_r2": 0.009615823116852829,
              "rmse": 0.02898381209442746,
              "mape": 1.6097605058072626,
              "confidence": 0.6328113516128306
            }
          },
          "dirhit": 100.0,
          "rmse": 0.018699596384837012,
          "mape": 978202.6608004433,
          "nrmse": 1.0288952014713106,
          "mask_count": 1,
          "mask_pct": 3.4482758620689653,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 4,
          "train_days": 542,
          "test_days": 30,
          "train_end_idx": 542,
          "test_end_idx": 572,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-17T00:00:00",
          "test_start": "2025-10-20T00:00:00",
          "test_end": "2025-11-28T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.008558002405499088,
              "rmse": 0.029291975932095874,
              "mape": 1.5771265943600943,
              "confidence": 0.6180476838121245
            },
            "catboost": {
              "raw_r2": -0.008975725338186987,
              "rmse": 0.02930745710107818,
              "mape": 1.689457624965613,
              "confidence": 0.6177084469426739
            }
          },
          "dirhit": 100.0,
          "rmse": 0.02062268206042456,
          "mape": 2200948.090203527,
          "nrmse": 1.0157602093409672,
          "mask_count": 1,
          "mask_pct": 3.4482758620689653,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        }
      ],
      "avg_dirhit": 85.625,
      "avg_nrmse": 1.0154028592552313,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": 0.006141265622952077,
          "rmse": 0.02948725403845175,
          "mape": 1.5449218314966755,
          "confidence": 0.6299846339240851
        },
        "catboost": {
          "raw_r2": 0.00370677738568297,
          "rmse": 0.02951695790420242,
          "mape": 1.6765293744640988,
          "confidence": 0.628010558568245
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 10,
    "min_mask_pct": 5.0,
    "best_trial_number": 1161,
    "best_trial_seed": 1203
  },
  "_updated_at": "2025-12-02T23:57:42.053647",
  "_updated_reason": "Updated with 10/5.0 filter - best trial #1161",
  "_filter_used": {
    "min_mask_count": 0,
    "min_mask_pct": 0.0
  },
  "_filter_applied": {
    "min_mask_count": 10,
    "min_mask_pct": 5.0
  }
}