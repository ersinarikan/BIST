{
  "best_value": 71.972049689441,
  "best_dirhit": 71.972049689441,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.20802774142860186,
    "ml_loss_threshold": 0.002327932474781107,
    "ml_dir_penalty": 3.1396658129996644,
    "n_seeds": 4,
    "ml_adaptive_k_1d": 2.3315132801117455,
    "ml_pattern_weight_scale_1d": 1.5331618503852884,
    "enable_talib_patterns_short": false,
    "external_min_days": 47,
    "external_smooth_alpha": 0.24147449520100175,
    "regime_scale_low": 0.8030435502940392,
    "regime_scale_high": 1.14919753109441,
    "smart_consensus_weight": 0.5055788351098947,
    "smart_performance_weight": 0.5267311149514113,
    "smart_sigma": 0.0015546865742994082,
    "smart_weight_xgb": 1.4272785125567873,
    "smart_weight_lgbm": 1.2808952455563927,
    "smart_weight_cat": 0.915169034743336,
    "xgb_n_estimators": 203,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.13067005015257857,
    "xgb_subsample": 0.880237725370767,
    "xgb_colsample_bytree": 0.6764481746054667,
    "xgb_reg_alpha": 0.003112288404813994,
    "xgb_reg_lambda": 0.03086845509194217,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.005207475789442055,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 454,
    "lgb_n_estimators": 148,
    "lgb_max_depth": 3,
    "lgb_learning_rate": 0.026137542551169516,
    "lgb_num_leaves": 40,
    "lgb_subsample": 0.8826839729943483,
    "lgb_colsample_bytree": 0.8744294921585184,
    "lgb_reg_alpha": 0.0035982635359152393,
    "lgb_reg_lambda": 0.0015785596415247185,
    "lgb_min_data_in_leaf": 43,
    "lgb_feature_fraction_bynode": 0.5284016492184739,
    "lgb_bagging_freq": 1,
    "lgb_min_gain_to_split": 0.6110020829532438,
    "cat_iterations": 196,
    "cat_depth": 2,
    "cat_learning_rate": 0.18514682812391806,
    "cat_l2_leaf_reg": 6.031241802297672,
    "cat_subsample": 0.8832115440451229,
    "cat_rsm": 0.7809940517230489,
    "cat_border_count": 133,
    "cat_random_strength": 0.3300837970131743,
    "cat_leaf_estimation_iterations": 11,
    "cat_bootstrap_type": "Bayesian"
  },
  "best_trial": {
    "number": 109,
    "value": 44.14310834082418,
    "state": "1"
  },
  "best_trial_number": 109,
  "best_trial_seed": 151,
  "n_trials": 307,
  "pruned_count": 0,
  "avg_trial_time": 0.0,
  "top_k_trials": [],
  "study_name": "hpo_with_features_DENGE_h1_c2",
  "symbols": [
    "DENGE"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.20802774142860186,
    "ml_loss_threshold": 0.002327932474781107,
    "ml_dir_penalty": 3.1396658129996644,
    "n_seeds": 4,
    "ml_adaptive_k_1d": 2.3315132801117455,
    "ml_pattern_weight_scale_1d": 1.5331618503852884,
    "external_min_days": 47,
    "external_smooth_alpha": 0.24147449520100175,
    "regime_scale_low": 0.8030435502940392,
    "regime_scale_high": 1.14919753109441,
    "smart_consensus_weight": 0.5055788351098947,
    "smart_performance_weight": 0.5267311149514113,
    "smart_sigma": 0.0015546865742994082,
    "smart_weight_xgb": 1.4272785125567873,
    "smart_weight_lgbm": 1.2808952455563927,
    "smart_weight_cat": 0.915169034743336
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 203,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.13067005015257857,
    "xgb_subsample": 0.880237725370767,
    "xgb_colsample_bytree": 0.6764481746054667,
    "xgb_reg_alpha": 0.003112288404813994,
    "xgb_reg_lambda": 0.03086845509194217,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.005207475789442055,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 454,
    "lgb_n_estimators": 148,
    "lgb_max_depth": 3,
    "lgb_learning_rate": 0.026137542551169516,
    "lgb_num_leaves": 40,
    "lgb_subsample": 0.8826839729943483,
    "lgb_colsample_bytree": 0.8744294921585184,
    "lgb_reg_alpha": 0.0035982635359152393,
    "lgb_reg_lambda": 0.0015785596415247185,
    "lgb_min_data_in_leaf": 43,
    "lgb_feature_fraction_bynode": 0.5284016492184739,
    "lgb_bagging_freq": 1,
    "lgb_min_gain_to_split": 0.6110020829532438,
    "cat_iterations": 196,
    "cat_depth": 2,
    "cat_learning_rate": 0.18514682812391806,
    "cat_l2_leaf_reg": 6.031241802297672,
    "cat_subsample": 0.8832115440451229,
    "cat_rsm": 0.7809940517230489,
    "cat_border_count": 133,
    "cat_random_strength": 0.3300837970131743,
    "cat_leaf_estimation_iterations": 11,
    "cat_bootstrap_type": "Bayesian"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "1",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "DENGE_1d": {
      "symbol": "DENGE",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 451,
          "test_days": 30,
          "train_end_idx": 451,
          "test_end_idx": 481,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-11T00:00:00",
          "test_start": "2025-06-12T00:00:00",
          "test_end": "2025-07-24T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.118140202541874,
              "rmse": 0.048295936224339336,
              "mape": 1.572048201517791,
              "confidence": 0.5317081166455515
            },
            "lightgbm": {
              "raw_r2": -0.021872320206899998,
              "rmse": 0.04624578528659431,
              "mape": 1.7995856009054754,
              "confidence": 0.6072464306371351
            },
            "catboost": {
              "raw_r2": 0.00035114334586424284,
              "rmse": 0.04572347599909382,
              "mape": 1.733090821658581,
              "confidence": 0.6252853038952263
            }
          },
          "dirhit": 78.57142857142857,
          "rmse": 0.028604107796912,
          "mape": 1525768.3929783949,
          "nrmse": 1.0176075554187254,
          "mask_count": 14,
          "mask_pct": 48.275862068965516,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 2,
          "train_days": 481,
          "test_days": 30,
          "train_end_idx": 481,
          "test_end_idx": 511,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-24T00:00:00",
          "test_start": "2025-07-25T00:00:00",
          "test_end": "2025-09-04T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.17155861899935854,
              "rmse": 0.04843873259879607,
              "mape": 1.544214909107607,
              "confidence": 0.49357041436549154
            },
            "lightgbm": {
              "raw_r2": -0.0302914729879451,
              "rmse": 0.045518392869174404,
              "mape": 1.7508474959345235,
              "confidence": 0.6004351187538748
            },
            "catboost": {
              "raw_r2": -0.016101175720164267,
              "rmse": 0.04521121193056243,
              "mape": 1.6652315268648206,
              "confidence": 0.6119248558461925
            }
          },
          "dirhit": 52.17391304347826,
          "rmse": 0.040188289148186715,
          "mape": 37942568.22479259,
          "nrmse": 1.1028921491745414,
          "mask_count": 23,
          "mask_pct": 79.3103448275862,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 3,
          "train_days": 511,
          "test_days": 30,
          "train_end_idx": 511,
          "test_end_idx": 541,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-04T00:00:00",
          "test_start": "2025-09-05T00:00:00",
          "test_end": "2025-10-16T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.17231366602776385,
              "rmse": 0.048198306575933415,
              "mape": 1.5433253826159583,
              "confidence": 0.4930576574694321
            },
            "lightgbm": {
              "raw_r2": -0.01186034774768944,
              "rmse": 0.045075716209661505,
              "mape": 1.7455491489901374,
              "confidence": 0.6153662905253476
            },
            "catboost": {
              "raw_r2": 0.0023807041377923075,
              "rmse": 0.04476916230112243,
              "mape": 1.63562174990666,
              "confidence": 0.6269342992721583
            }
          },
          "dirhit": 100.0,
          "rmse": 0.026339205066662475,
          "mape": 4283595.652828178,
          "nrmse": 0.9640875513437182,
          "mask_count": 8,
          "mask_pct": 27.586206896551722,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 4,
          "train_days": 541,
          "test_days": 30,
          "train_end_idx": 541,
          "test_end_idx": 571,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-16T00:00:00",
          "test_start": "2025-10-17T00:00:00",
          "test_end": "2025-11-27T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.09363300509623122,
              "rmse": 0.045561496453377294,
              "mape": 1.5478889837546914,
              "confidence": 0.5502829220588765
            },
            "lightgbm": {
              "raw_r2": -0.012958197061845977,
              "rmse": 0.04389084244840542,
              "mape": 1.7710669105214658,
              "confidence": 0.6144751464618139
            },
            "catboost": {
              "raw_r2": 0.017553442018870064,
              "rmse": 0.04333669311968169,
              "mape": 1.6521563386563927,
              "confidence": 0.6392530234626599
            }
          },
          "dirhit": 57.14285714285714,
          "rmse": 0.048874231228414215,
          "mape": 15913111.28977771,
          "nrmse": 1.073630371919362,
          "mask_count": 21,
          "mask_pct": 72.41379310344827,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        }
      ],
      "avg_dirhit": 71.972049689441,
      "avg_nrmse": 1.0395544069640867,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.1389113731663069,
          "rmse": 0.04762361796311153,
          "mape": 1.551869369249012,
          "confidence": 0.517154777634838
        },
        "lightgbm": {
          "raw_r2": -0.01924558450109513,
          "rmse": 0.0451826842034589,
          "mape": 1.7667622890879005,
          "confidence": 0.6093807465945429
        },
        "catboost": {
          "raw_r2": 0.0010460284455905866,
          "rmse": 0.044760135837615095,
          "mape": 1.6715251092716135,
          "confidence": 0.6258493706190593
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 5,
    "min_mask_pct": 2.5,
    "best_trial_number": 109,
    "best_trial_seed": 151,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "symbol_specs": {
      "DENGE_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 451,
            "test_end_idx": 481,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-11T00:00:00",
            "test_start": "2025-06-12T00:00:00",
            "test_end": "2025-07-24T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 481,
            "test_end_idx": 511,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-24T00:00:00",
            "test_start": "2025-07-25T00:00:00",
            "test_end": "2025-09-04T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 511,
            "test_end_idx": 541,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-04T00:00:00",
            "test_start": "2025-09-05T00:00:00",
            "test_end": "2025-10-16T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 541,
            "test_end_idx": 571,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-16T00:00:00",
            "test_start": "2025-10-17T00:00:00",
            "test_end": "2025-11-27T00:00:00"
          }
        ]
      }
    }
  },
  "_created_at": "2025-12-03T03:50:58.415311",
  "_created_from": "study_database",
  "_filter_applied": {
    "min_mask_count": 5,
    "min_mask_pct": 2.5
  }
}