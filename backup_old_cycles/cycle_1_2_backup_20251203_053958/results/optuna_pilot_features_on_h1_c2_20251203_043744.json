{
  "best_value": 59.82905982905983,
  "best_dirhit": 59.82905982905983,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_adaptive_k_1d": 1.4985844582977499,
    "ml_pattern_weight_scale_1d": 1.1155743845534447,
    "enable_talib_patterns_short": true,
    "external_min_days": 23,
    "external_smooth_alpha": 0.1803881538111956,
    "regime_scale_low": 0.8290198317057208,
    "regime_scale_high": 1.187345577421663,
    "fingpt_confidence_threshold": 0.4424361138693251,
    "xgb_n_estimators": 435,
    "xgb_max_depth": 6,
    "xgb_learning_rate": 0.08814378684431647,
    "xgb_subsample": 0.5746280235544143,
    "xgb_colsample_bytree": 0.8570235993959912,
    "xgb_reg_alpha": 0.0017220805097801957,
    "xgb_reg_lambda": 6.224967228399989,
    "xgb_min_child_weight": 14,
    "xgb_gamma": 0.001870742013766027,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 292,
    "lgb_n_estimators": 513,
    "lgb_max_depth": 8,
    "lgb_learning_rate": 0.010210451114512976,
    "lgb_num_leaves": 36,
    "lgb_subsample": 0.6669644012595116,
    "lgb_colsample_bytree": 0.5888431241882921,
    "lgb_reg_alpha": 5.9756137575514945e-06,
    "lgb_reg_lambda": 0.00410370707852986,
    "lgb_min_data_in_leaf": 95,
    "lgb_feature_fraction_bynode": 0.6616014660103776,
    "lgb_bagging_freq": 5,
    "lgb_min_gain_to_split": 0.7030189588951778,
    "cat_iterations": 294,
    "cat_depth": 8,
    "cat_learning_rate": 0.17871985357940612,
    "cat_l2_leaf_reg": 3.2660406624282774,
    "cat_subsample": 0.7237618276515734,
    "cat_rsm": 0.6353952394175464,
    "cat_border_count": 84,
    "cat_random_strength": 0.1155233613914713,
    "cat_leaf_estimation_iterations": 13,
    "cat_bootstrap_type": "No"
  },
  "best_trial": {
    "number": 15,
    "value": 35.654929488637286,
    "state": "1"
  },
  "best_trial_number": 15,
  "best_trial_seed": 57,
  "n_trials": 33,
  "pruned_count": 0,
  "avg_trial_time": 0.0,
  "top_k_trials": [],
  "study_name": "hpo_with_features_GLRYH_h1_c2",
  "symbols": [
    "GLRYH"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_adaptive_k_1d": 1.4985844582977499,
    "ml_pattern_weight_scale_1d": 1.1155743845534447,
    "external_min_days": 23,
    "external_smooth_alpha": 0.1803881538111956,
    "regime_scale_low": 0.8290198317057208,
    "regime_scale_high": 1.187345577421663,
    "fingpt_confidence_threshold": 0.4424361138693251
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 435,
    "xgb_max_depth": 6,
    "xgb_learning_rate": 0.08814378684431647,
    "xgb_subsample": 0.5746280235544143,
    "xgb_colsample_bytree": 0.8570235993959912,
    "xgb_reg_alpha": 0.0017220805097801957,
    "xgb_reg_lambda": 6.224967228399989,
    "xgb_min_child_weight": 14,
    "xgb_gamma": 0.001870742013766027,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 292,
    "lgb_n_estimators": 513,
    "lgb_max_depth": 8,
    "lgb_learning_rate": 0.010210451114512976,
    "lgb_num_leaves": 36,
    "lgb_subsample": 0.6669644012595116,
    "lgb_colsample_bytree": 0.5888431241882921,
    "lgb_reg_alpha": 5.9756137575514945e-06,
    "lgb_reg_lambda": 0.00410370707852986,
    "lgb_min_data_in_leaf": 95,
    "lgb_feature_fraction_bynode": 0.6616014660103776,
    "lgb_bagging_freq": 5,
    "lgb_min_gain_to_split": 0.7030189588951778,
    "cat_iterations": 294,
    "cat_depth": 8,
    "cat_learning_rate": 0.17871985357940612,
    "cat_l2_leaf_reg": 3.2660406624282774,
    "cat_subsample": 0.7237618276515734,
    "cat_rsm": 0.6353952394175464,
    "cat_border_count": 84,
    "cat_random_strength": 0.1155233613914713,
    "cat_leaf_estimation_iterations": 13,
    "cat_bootstrap_type": "No"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "0",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "GLRYH_1d": {
      "symbol": "GLRYH",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 455,
          "test_days": 30,
          "train_end_idx": 455,
          "test_end_idx": 485,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-16T00:00:00",
          "test_start": "2025-06-17T00:00:00",
          "test_end": "2025-07-29T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.0060154104763979754,
              "rmse": 0.0345258614023261,
              "mape": 1.6502046410261442,
              "confidence": 0.6298871525959315
            },
            "lightgbm": {
              "raw_r2": -0.003652384741369863,
              "rmse": 0.034826606893415483,
              "mape": 1.8583765687837752,
              "confidence": 0.6220325198678675
            },
            "catboost": {
              "raw_r2": 0.08736322954481945,
              "rmse": 0.03316857226705378,
              "mape": 1.4935047853953058,
              "confidence": 0.6948750790025398
            }
          },
          "dirhit": 50.0,
          "rmse": 0.04821564413605573,
          "mape": 5412374.452482645,
          "nrmse": 1.0549771414100186,
          "mask_count": 18,
          "mask_pct": 62.06896551724138,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 2,
          "train_days": 485,
          "test_days": 30,
          "train_end_idx": 485,
          "test_end_idx": 515,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-29T00:00:00",
          "test_start": "2025-07-30T00:00:00",
          "test_end": "2025-09-09T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.01383995829384795,
              "rmse": 0.03529523092260814,
              "mape": 1.6571551301865055,
              "confidence": 0.6362404809473448
            },
            "lightgbm": {
              "raw_r2": -0.005497354094996076,
              "rmse": 0.03574120176030265,
              "mape": 1.8676345254652214,
              "confidence": 0.6205336809946689
            },
            "catboost": {
              "raw_r2": -0.005195248783817719,
              "rmse": 0.03570788654910388,
              "mape": 1.6544285126210807,
              "confidence": 0.6207790977036611
            }
          },
          "dirhit": 50.0,
          "rmse": 0.026865478334998902,
          "mape": 1669387.7181247794,
          "nrmse": 1.0878039787332656,
          "mask_count": 18,
          "mask_pct": 62.06896551724138,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 3,
          "train_days": 515,
          "test_days": 30,
          "train_end_idx": 515,
          "test_end_idx": 545,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-09T00:00:00",
          "test_start": "2025-09-10T00:00:00",
          "test_end": "2025-10-21T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.013092267331508404,
              "rmse": 0.03414819309209462,
              "mape": 1.625743133494496,
              "confidence": 0.6356336702062695
            },
            "lightgbm": {
              "raw_r2": -0.00818580828124508,
              "rmse": 0.03455301338267012,
              "mape": 1.9511171136840417,
              "confidence": 0.6183499590837624
            },
            "catboost": {
              "raw_r2": -0.002852391672807486,
              "rmse": 0.034337232500071195,
              "mape": 1.6463997283918275,
              "confidence": 0.622682471048494
            }
          },
          "dirhit": 61.53846153846154,
          "rmse": 0.027851266550254886,
          "mape": 93.61378741056865,
          "nrmse": 1.0374935134240197,
          "mask_count": 13,
          "mask_pct": 44.827586206896555,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 4,
          "train_days": 545,
          "test_days": 30,
          "train_end_idx": 545,
          "test_end_idx": 575,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-21T00:00:00",
          "test_start": "2025-10-22T00:00:00",
          "test_end": "2025-12-02T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0009519664950528398,
              "rmse": 0.034110706393666215,
              "mape": 1.6526109210363575,
              "confidence": 0.6242265286830833
            },
            "lightgbm": {
              "raw_r2": -0.006763344804685841,
              "rmse": 0.0342404011020856,
              "mape": 1.9088474269763902,
              "confidence": 0.6195053059671947
            },
            "catboost": {
              "raw_r2": 0.013451776503027904,
              "rmse": 0.03387760196939176,
              "mape": 1.6201761725431447,
              "confidence": 0.6359254500455289
            }
          },
          "dirhit": 77.77777777777779,
          "rmse": 0.02763161601049473,
          "mape": 5120130.740007604,
          "nrmse": 0.9700002942357586,
          "mask_count": 9,
          "mask_pct": 31.03448275862069,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        }
      ],
      "avg_dirhit": 59.82905982905983,
      "avg_nrmse": 1.0375687319507656,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": 0.007998917401675373,
          "rmse": 0.03451999795267377,
          "mape": 1.6464284564358758,
          "confidence": 0.6314969581081573
        },
        "lightgbm": {
          "raw_r2": -0.006024722980574214,
          "rmse": 0.03484030578461846,
          "mape": 1.8964939087273571,
          "confidence": 0.6201053664783733
        },
        "catboost": {
          "raw_r2": 0.02319184139780554,
          "rmse": 0.03427282332140516,
          "mape": 1.6036272997378398,
          "confidence": 0.643565524450056
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 5,
    "min_mask_pct": 2.5,
    "best_trial_number": 15,
    "best_trial_seed": 57,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "symbol_specs": {
      "GLRYH_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 455,
            "test_end_idx": 485,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-16T00:00:00",
            "test_start": "2025-06-17T00:00:00",
            "test_end": "2025-07-29T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 485,
            "test_end_idx": 515,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-29T00:00:00",
            "test_start": "2025-07-30T00:00:00",
            "test_end": "2025-09-09T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 515,
            "test_end_idx": 545,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-09T00:00:00",
            "test_start": "2025-09-10T00:00:00",
            "test_end": "2025-10-21T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 545,
            "test_end_idx": 575,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-21T00:00:00",
            "test_start": "2025-10-22T00:00:00",
            "test_end": "2025-12-02T00:00:00"
          }
        ]
      }
    }
  },
  "_created_at": "2025-12-03T04:37:44.896438",
  "_created_from": "study_database",
  "_filter_applied": {
    "min_mask_count": 5,
    "min_mask_pct": 2.5
  }
}