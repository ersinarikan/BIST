{
  "best_value": 80.55555555555556,
  "best_dirhit": 52.77777777777778,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "model_choice": "all",
    "meta_stacking_alpha": 0.48523676172093955,
    "ml_adaptive_k_1d": 1.4781997877287596,
    "ml_pattern_weight_scale_1d": 1.6064400647883879,
    "enable_talib_patterns_short": false,
    "external_min_days": 20,
    "external_smooth_alpha": 0.10910698014814804,
    "regime_scale_low": 0.971267034820465,
    "regime_scale_high": 1.1245139152668686,
    "yolo_min_conf": 0.4861564481779426,
    "smart_consensus_weight": 0.49562133705612554,
    "smart_performance_weight": 0.5804510710256295,
    "smart_sigma": 0.0014809744162894648,
    "smart_weight_xgb": 1.49945531355033,
    "smart_weight_lgbm": 1.0728676384217415,
    "smart_weight_cat": 0.946288494330014,
    "fingpt_confidence_threshold": 0.49913535132482073,
    "xgb_n_estimators": 577,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.04578579003154134,
    "xgb_subsample": 0.732031070906919,
    "xgb_colsample_bytree": 0.6862160192868778,
    "xgb_reg_alpha": 0.16961207210633633,
    "xgb_reg_lambda": 24.797431796554292,
    "xgb_min_child_weight": 10,
    "xgb_gamma": 0.048857247665198666,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 451,
    "lgb_n_estimators": 401,
    "lgb_max_depth": 3,
    "lgb_learning_rate": 0.01756505752869214,
    "lgb_num_leaves": 30,
    "lgb_subsample": 0.5697678474607802,
    "lgb_colsample_bytree": 0.6317950932955199,
    "lgb_reg_alpha": 0.5053436343058328,
    "lgb_reg_lambda": 0.1496355707171406,
    "lgb_min_data_in_leaf": 11,
    "lgb_feature_fraction_bynode": 0.9997965494686769,
    "lgb_bagging_freq": 9,
    "lgb_min_gain_to_split": 0.3465857371409853,
    "cat_iterations": 225,
    "cat_depth": 2,
    "cat_learning_rate": 0.01929539383360279,
    "cat_l2_leaf_reg": 6.933360827967042,
    "cat_subsample": 0.6719416401944968,
    "cat_rsm": 0.8425505300282904,
    "cat_border_count": 94,
    "cat_random_strength": 0.1118832341392019,
    "cat_leaf_estimation_iterations": 3,
    "cat_bootstrap_type": "No"
  },
  "best_trial": {
    "number": 169,
    "value": 30.69261341472465,
    "state": "1"
  },
  "best_trial_number": 169,
  "best_trial_seed": 211,
  "n_trials": 846,
  "pruned_count": 0,
  "avg_trial_time": 0.0,
  "top_k_trials": [],
  "study_name": "hpo_with_features_AYGAZ_h1_c2",
  "symbols": [
    "AYGAZ"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "meta_stacking_alpha": 0.48523676172093955,
    "ml_adaptive_k_1d": 1.4781997877287596,
    "ml_pattern_weight_scale_1d": 1.6064400647883879,
    "external_min_days": 20,
    "external_smooth_alpha": 0.10910698014814804,
    "regime_scale_low": 0.971267034820465,
    "regime_scale_high": 1.1245139152668686,
    "yolo_min_conf": 0.4861564481779426,
    "smart_consensus_weight": 0.49562133705612554,
    "smart_performance_weight": 0.5804510710256295,
    "smart_sigma": 0.0014809744162894648,
    "smart_weight_xgb": 1.49945531355033,
    "smart_weight_lgbm": 1.0728676384217415,
    "smart_weight_cat": 0.946288494330014,
    "fingpt_confidence_threshold": 0.49913535132482073
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 577,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.04578579003154134,
    "xgb_subsample": 0.732031070906919,
    "xgb_colsample_bytree": 0.6862160192868778,
    "xgb_reg_alpha": 0.16961207210633633,
    "xgb_reg_lambda": 24.797431796554292,
    "xgb_min_child_weight": 10,
    "xgb_gamma": 0.048857247665198666,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 451,
    "lgb_n_estimators": 401,
    "lgb_max_depth": 3,
    "lgb_learning_rate": 0.01756505752869214,
    "lgb_num_leaves": 30,
    "lgb_subsample": 0.5697678474607802,
    "lgb_colsample_bytree": 0.6317950932955199,
    "lgb_reg_alpha": 0.5053436343058328,
    "lgb_reg_lambda": 0.1496355707171406,
    "lgb_min_data_in_leaf": 11,
    "lgb_feature_fraction_bynode": 0.9997965494686769,
    "lgb_bagging_freq": 9,
    "lgb_min_gain_to_split": 0.3465857371409853,
    "cat_iterations": 225,
    "cat_depth": 2,
    "cat_learning_rate": 0.01929539383360279,
    "cat_l2_leaf_reg": 6.933360827967042,
    "cat_subsample": 0.6719416401944968,
    "cat_rsm": 0.8425505300282904,
    "cat_border_count": 94,
    "cat_random_strength": 0.1118832341392019,
    "cat_leaf_estimation_iterations": 3,
    "cat_bootstrap_type": "No"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "AYGAZ_1d": {
      "symbol": "AYGAZ",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 449,
          "test_days": 30,
          "train_end_idx": 449,
          "test_end_idx": 479,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-05T00:00:00",
          "test_start": "2025-06-10T00:00:00",
          "test_end": "2025-07-22T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0008101249331244897,
              "rmse": 0.021701758411602816,
              "mape": 1.80665113484558,
              "confidence": 0.6243417743918258
            },
            "lightgbm": {
              "raw_r2": -0.013416185952017656,
              "rmse": 0.0218324844978401,
              "mape": 1.769621332958162,
              "confidence": 0.6141034346843921
            },
            "catboost": {
              "raw_r2": 0.035138593158663745,
              "rmse": 0.021311642523559618,
              "mape": 1.6782388228889424,
              "confidence": 0.6534768924964681
            }
          },
          "dirhit": 61.111111111111114,
          "rmse": 0.028292454871807357,
          "mape": 2283583.139557168,
          "nrmse": 1.123449157757385,
          "mask_count": 18,
          "mask_pct": 62.06896551724138,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 2,
          "train_days": 479,
          "test_days": 30,
          "train_end_idx": 479,
          "test_end_idx": 509,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-22T00:00:00",
          "test_start": "2025-07-23T00:00:00",
          "test_end": "2025-09-02T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.007894028640068088,
              "rmse": 0.022145401077977127,
              "mape": 1.815328406667403,
              "confidence": 0.6314130657195813
            },
            "lightgbm": {
              "raw_r2": -0.005121230823492621,
              "rmse": 0.02225742890213752,
              "mape": 1.7614639398439902,
              "confidence": 0.6208392272963594
            },
            "catboost": {
              "raw_r2": 0.02523117976713966,
              "rmse": 0.021954410644719976,
              "mape": 1.6850464595581804,
              "confidence": 0.6454731876651567
            }
          },
          "dirhit": 0.0,
          "rmse": 0.018617434918240257,
          "mape": 91514.57287691203,
          "nrmse": 1.008327668379744,
          "mask_count": 0,
          "mask_pct": 0.0,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 3,
          "train_days": 509,
          "test_days": 30,
          "train_end_idx": 509,
          "test_end_idx": 539,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-02T00:00:00",
          "test_start": "2025-09-03T00:00:00",
          "test_end": "2025-10-14T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.004985982191153093,
              "rmse": 0.021793591751092984,
              "mape": 1.8069525832959148,
              "confidence": 0.6290509007294294
            },
            "lightgbm": {
              "raw_r2": -0.0036261220439828268,
              "rmse": 0.021864830025923706,
              "mape": 1.77602997845269,
              "confidence": 0.6220538565432727
            },
            "catboost": {
              "raw_r2": 0.01333582908237004,
              "rmse": 0.02170546744335257,
              "mape": 1.7377962972971646,
              "confidence": 0.6358313483143498
            }
          },
          "dirhit": 50.0,
          "rmse": 0.020078617898584967,
          "mape": 603658.9769270488,
          "nrmse": 1.0555508896880614,
          "mask_count": 2,
          "mask_pct": 6.896551724137931,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 4,
          "train_days": 539,
          "test_days": 30,
          "train_end_idx": 539,
          "test_end_idx": 569,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-14T00:00:00",
          "test_start": "2025-10-15T00:00:00",
          "test_end": "2025-11-25T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.005663300372777143,
              "rmse": 0.02176866170824389,
              "mape": 1.7926753313098125,
              "confidence": 0.6296011241159047
            },
            "lightgbm": {
              "raw_r2": -0.002183534167644089,
              "rmse": 0.021843304950418106,
              "mape": 1.7763666377646017,
              "confidence": 0.6232258961108595
            },
            "catboost": {
              "raw_r2": 0.02155669255212907,
              "rmse": 0.021609501145044615,
              "mape": 1.6911538426701718,
              "confidence": 0.6424978761745439
            }
          },
          "dirhit": 100.0,
          "rmse": 0.014762934722970786,
          "mape": 2883373.1455780296,
          "nrmse": 0.9805596373213372,
          "mask_count": 5,
          "mask_pct": 17.24137931034483,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        }
      ],
      "avg_dirhit": 52.77777777777778,
      "avg_nrmse": 1.0419718382866319,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": 0.004433296567718459,
          "rmse": 0.021852353237229203,
          "mape": 1.8054018640296776,
          "confidence": 0.6286017162391853
        },
        "lightgbm": {
          "raw_r2": -0.006086768246784299,
          "rmse": 0.02194951209407986,
          "mape": 1.770870472254861,
          "confidence": 0.6200556036587209
        },
        "catboost": {
          "raw_r2": 0.023815573640075628,
          "rmse": 0.021645255439169196,
          "mape": 1.6980588556036147,
          "confidence": 0.6443198261626297
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 5,
    "min_mask_pct": 2.5,
    "best_trial_number": 169,
    "best_trial_seed": 211,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "symbol_specs": {
      "AYGAZ_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 449,
            "test_end_idx": 479,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-05T00:00:00",
            "test_start": "2025-06-10T00:00:00",
            "test_end": "2025-07-22T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 479,
            "test_end_idx": 509,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-22T00:00:00",
            "test_start": "2025-07-23T00:00:00",
            "test_end": "2025-09-02T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 509,
            "test_end_idx": 539,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-02T00:00:00",
            "test_start": "2025-09-03T00:00:00",
            "test_end": "2025-10-14T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 539,
            "test_end_idx": 569,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-14T00:00:00",
            "test_start": "2025-10-15T00:00:00",
            "test_end": "2025-11-25T00:00:00"
          }
        ]
      }
    }
  },
  "_created_at": "2025-12-03T03:21:05.648322",
  "_created_from": "study_database",
  "_filter_applied": {
    "min_mask_count": 5,
    "min_mask_pct": 2.5
  }
}