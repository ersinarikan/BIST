{
  "best_value": 80.15873015873017,
  "best_dirhit": 85.11904761904762,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.242303657416993,
    "ml_loss_threshold": 0.0013985972214142057,
    "ml_dir_penalty": 2.2057587694383614,
    "ml_adaptive_k_1d": 1.7644794201238738,
    "ml_pattern_weight_scale_1d": 0.6135153929296513,
    "enable_talib_patterns_short": true,
    "external_min_days": 32,
    "external_smooth_alpha": 0.4177141918499695,
    "regime_scale_low": 0.8517080189048044,
    "regime_scale_high": 1.0582984295416853,
    "fingpt_confidence_threshold": 0.3718053549194364,
    "xgb_n_estimators": 391,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.09853882345426516,
    "xgb_subsample": 0.7139248084997447,
    "xgb_colsample_bytree": 0.5288272364654129,
    "xgb_reg_alpha": 0.9863470076068013,
    "xgb_reg_lambda": 40.005235306344495,
    "xgb_min_child_weight": 12,
    "xgb_gamma": 0.002462404332501498,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 325,
    "lgb_n_estimators": 293,
    "lgb_max_depth": 3,
    "lgb_learning_rate": 0.029713138375703562,
    "lgb_num_leaves": 46,
    "lgb_subsample": 0.7234180632538079,
    "lgb_colsample_bytree": 0.6633207267620523,
    "lgb_reg_alpha": 0.7372388613845248,
    "lgb_reg_lambda": 2.486857315372633,
    "lgb_min_data_in_leaf": 97,
    "lgb_feature_fraction_bynode": 0.5112977543223036,
    "lgb_bagging_freq": 8,
    "lgb_min_gain_to_split": 0.7512145580799627,
    "cat_iterations": 316,
    "cat_depth": 6,
    "cat_learning_rate": 0.01380302931418572,
    "cat_l2_leaf_reg": 5.908043051181075,
    "cat_subsample": 0.7774898721330827,
    "cat_rsm": 0.9270513399647617,
    "cat_border_count": 33,
    "cat_random_strength": 0.4802279148886812,
    "cat_leaf_estimation_iterations": 17,
    "cat_bootstrap_type": "Bernoulli"
  },
  "best_trial": {
    "number": 108,
    "value": 53.61964736758737,
    "state": "1"
  },
  "best_trial_number": 108,
  "best_trial_seed": 150,
  "n_trials": 1416,
  "pruned_count": 0,
  "avg_trial_time": 0.0,
  "top_k_trials": [],
  "study_name": "hpo_with_features_BYDNR_h1_c2",
  "symbols": [
    "BYDNR"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.242303657416993,
    "ml_loss_threshold": 0.0013985972214142057,
    "ml_dir_penalty": 2.2057587694383614,
    "ml_adaptive_k_1d": 1.7644794201238738,
    "ml_pattern_weight_scale_1d": 0.6135153929296513,
    "external_min_days": 32,
    "external_smooth_alpha": 0.4177141918499695,
    "regime_scale_low": 0.8517080189048044,
    "regime_scale_high": 1.0582984295416853,
    "fingpt_confidence_threshold": 0.3718053549194364
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 391,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.09853882345426516,
    "xgb_subsample": 0.7139248084997447,
    "xgb_colsample_bytree": 0.5288272364654129,
    "xgb_reg_alpha": 0.9863470076068013,
    "xgb_reg_lambda": 40.005235306344495,
    "xgb_min_child_weight": 12,
    "xgb_gamma": 0.002462404332501498,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 325,
    "lgb_n_estimators": 293,
    "lgb_max_depth": 3,
    "lgb_learning_rate": 0.029713138375703562,
    "lgb_num_leaves": 46,
    "lgb_subsample": 0.7234180632538079,
    "lgb_colsample_bytree": 0.6633207267620523,
    "lgb_reg_alpha": 0.7372388613845248,
    "lgb_reg_lambda": 2.486857315372633,
    "lgb_min_data_in_leaf": 97,
    "lgb_feature_fraction_bynode": 0.5112977543223036,
    "lgb_bagging_freq": 8,
    "lgb_min_gain_to_split": 0.7512145580799627,
    "cat_iterations": 316,
    "cat_depth": 6,
    "cat_learning_rate": 0.01380302931418572,
    "cat_l2_leaf_reg": 5.908043051181075,
    "cat_subsample": 0.7774898721330827,
    "cat_rsm": 0.9270513399647617,
    "cat_border_count": 33,
    "cat_random_strength": 0.4802279148886812,
    "cat_leaf_estimation_iterations": 17,
    "cat_bootstrap_type": "Bernoulli"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "0",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "BYDNR_1d": {
      "symbol": "BYDNR",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 445,
          "test_days": 30,
          "train_end_idx": 445,
          "test_end_idx": 475,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-10T00:00:00",
          "test_start": "2025-06-11T00:00:00",
          "test_end": "2025-07-23T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.27613526482638995,
              "rmse": 0.030972500614967875,
              "mape": 1.5960173903698343,
              "confidence": 0.43058526071229564
            },
            "lightgbm": {
              "raw_r2": -0.011889725175147007,
              "rmse": 0.02750757022107319,
              "mape": 1.7336795621137078,
              "confidence": 0.6153424423903516
            },
            "catboost": {
              "raw_r2": 0.01810544360705098,
              "rmse": 0.027114419338751933,
              "mape": 1.6465000636404619,
              "confidence": 0.639700634776138
            }
          },
          "dirhit": 100.0,
          "rmse": 0.0303746980087862,
          "mape": 486227.7723815913,
          "nrmse": 0.9806226479937791,
          "mask_count": 5,
          "mask_pct": 17.24137931034483,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 2,
          "train_days": 475,
          "test_days": 30,
          "train_end_idx": 475,
          "test_end_idx": 505,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-23T00:00:00",
          "test_start": "2025-07-24T00:00:00",
          "test_end": "2025-09-03T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.34963220725181315,
              "rmse": 0.032150037984525745,
              "mape": 1.5459639496815887,
              "confidence": 0.3963815419176982
            },
            "lightgbm": {
              "raw_r2": -0.0259670669329084,
              "rmse": 0.02799627602577783,
              "mape": 1.6840245408290426,
              "confidence": 0.6039313463722185
            },
            "catboost": {
              "raw_r2": -0.00909186554456054,
              "rmse": 0.027759638400572606,
              "mape": 1.70145248363122,
              "confidence": 0.6176141311404726
            }
          },
          "dirhit": 57.14285714285714,
          "rmse": 0.02750362810378128,
          "mape": 130.94650611729867,
          "nrmse": 1.0304009611215905,
          "mask_count": 7,
          "mask_pct": 24.137931034482758,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 3,
          "train_days": 505,
          "test_days": 30,
          "train_end_idx": 505,
          "test_end_idx": 535,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-03T00:00:00",
          "test_start": "2025-09-04T00:00:00",
          "test_end": "2025-10-15T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.34587744237687973,
              "rmse": 0.03190917865934798,
              "mape": 1.6222200830223972,
              "confidence": 0.39793288625013973
            },
            "lightgbm": {
              "raw_r2": -0.027253572700508027,
              "rmse": 0.027791681511989495,
              "mape": 1.7357652462928337,
              "confidence": 0.6028906738094602
            },
            "catboost": {
              "raw_r2": -0.02652212138703784,
              "rmse": 0.027782423913780677,
              "mape": 1.7462059302282085,
              "confidence": 0.6034823005576678
            }
          },
          "dirhit": 100.0,
          "rmse": 0.02468868585099366,
          "mape": 484583.9574236683,
          "nrmse": 1.0091044710813706,
          "mask_count": 1,
          "mask_pct": 3.4482758620689653,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 4,
          "train_days": 535,
          "test_days": 30,
          "train_end_idx": 535,
          "test_end_idx": 565,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-15T00:00:00",
          "test_start": "2025-10-16T00:00:00",
          "test_end": "2025-11-27T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.355362214910707,
              "rmse": 0.032103980591423054,
              "mape": 1.6104640646838912,
              "confidence": 0.3940532765861017
            },
            "lightgbm": {
              "raw_r2": -0.023124482513174005,
              "rmse": 0.027657627970984408,
              "mape": 1.7662298810236003,
              "confidence": 0.606232261409928
            },
            "catboost": {
              "raw_r2": -0.013379948752322105,
              "rmse": 0.027529816396557827,
              "mape": 1.718241312131943,
              "confidence": 0.6141328444012483
            }
          },
          "dirhit": 83.33333333333334,
          "rmse": 0.021898845675052233,
          "mape": 108.56865910681617,
          "nrmse": 0.9556625636339008,
          "mask_count": 6,
          "mask_pct": 20.689655172413794,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        }
      ],
      "avg_dirhit": 85.11904761904762,
      "avg_nrmse": 0.9939476609576602,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.3317517823414475,
          "rmse": 0.031783924462566164,
          "mape": 1.593666371939428,
          "confidence": 0.4047382413665588
        },
        "lightgbm": {
          "raw_r2": -0.02205871183043436,
          "rmse": 0.02773828893245623,
          "mape": 1.729924807564796,
          "confidence": 0.6070991809954895
        },
        "catboost": {
          "raw_r2": -0.007722123019217375,
          "rmse": 0.02754657451241576,
          "mape": 1.7030999474079584,
          "confidence": 0.6187324777188816
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 5,
    "min_mask_pct": 2.5,
    "best_trial_number": 108,
    "best_trial_seed": 150,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "symbol_specs": {
      "BYDNR_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 445,
            "test_end_idx": 475,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-10T00:00:00",
            "test_start": "2025-06-11T00:00:00",
            "test_end": "2025-07-23T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 475,
            "test_end_idx": 505,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-23T00:00:00",
            "test_start": "2025-07-24T00:00:00",
            "test_end": "2025-09-03T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 505,
            "test_end_idx": 535,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-03T00:00:00",
            "test_start": "2025-09-04T00:00:00",
            "test_end": "2025-10-15T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 535,
            "test_end_idx": 565,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-15T00:00:00",
            "test_start": "2025-10-16T00:00:00",
            "test_end": "2025-11-27T00:00:00"
          }
        ]
      }
    }
  },
  "_created_at": "2025-12-03T03:43:06.595664",
  "_created_from": "study_database",
  "_filter_applied": {
    "min_mask_count": 5,
    "min_mask_pct": 2.5
  }
}