{
  "best_value": 76.38888888888889,
  "best_dirhit": 56.94444444444444,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "model_choice": "cat",
    "ml_loss_mse_weight": 0.2559321997464455,
    "ml_loss_threshold": 0.004431948758514521,
    "ml_dir_penalty": 2.8812763189335198,
    "n_seeds": 3,
    "ml_adaptive_k_1d": 1.7730628192392175,
    "ml_pattern_weight_scale_1d": 0.7780326606353619,
    "enable_talib_patterns_short": false,
    "external_min_days": 35,
    "external_smooth_alpha": 0.4243872570356996,
    "regime_scale_low": 0.949826069742916,
    "regime_scale_high": 1.061334269993813,
    "cat_iterations": 138,
    "cat_depth": 8,
    "cat_learning_rate": 0.04251184449480781,
    "cat_l2_leaf_reg": 8.53190582533191,
    "cat_subsample": 0.8810881757098176,
    "cat_rsm": 0.7018624619697708,
    "cat_border_count": 193,
    "cat_random_strength": 1.0289700610051895,
    "cat_leaf_estimation_iterations": 14,
    "cat_bootstrap_type": "No"
  },
  "best_trial": {
    "number": 571,
    "value": 33.624693080084604,
    "state": "1"
  },
  "best_trial_number": 571,
  "best_trial_seed": 613,
  "n_trials": 689,
  "pruned_count": 0,
  "avg_trial_time": 0.0,
  "top_k_trials": [],
  "study_name": "hpo_with_features_AKFGY_h1_c2",
  "symbols": [
    "AKFGY"
  ],
  "horizon": 1,
  "best_model_choice": "cat",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.2559321997464455,
    "ml_loss_threshold": 0.004431948758514521,
    "ml_dir_penalty": 2.8812763189335198,
    "n_seeds": 3,
    "ml_adaptive_k_1d": 1.7730628192392175,
    "ml_pattern_weight_scale_1d": 0.7780326606353619,
    "external_min_days": 35,
    "external_smooth_alpha": 0.4243872570356996,
    "regime_scale_low": 0.949826069742916,
    "regime_scale_high": 1.061334269993813
  },
  "hyperparameters": {
    "model_choice": "cat",
    "cat_iterations": 138,
    "cat_depth": 8,
    "cat_learning_rate": 0.04251184449480781,
    "cat_l2_leaf_reg": 8.53190582533191,
    "cat_subsample": 0.8810881757098176,
    "cat_rsm": 0.7018624619697708,
    "cat_border_count": 193,
    "cat_random_strength": 1.0289700610051895,
    "cat_leaf_estimation_iterations": 14,
    "cat_bootstrap_type": "No"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "1",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "0",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "0",
    "ENABLE_LIGHTGBM": "0",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "AKFGY_1d": {
      "symbol": "AKFGY",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 450,
          "test_days": 30,
          "train_end_idx": 450,
          "test_end_idx": 480,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-10T00:00:00",
          "test_start": "2025-06-11T00:00:00",
          "test_end": "2025-07-23T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -6.66079790909573,
              "rmse": 0.06438035382297312,
              "mape": 1.5738160128309846,
              "confidence": 0.3000000000000022
            },
            "catboost": {
              "raw_r2": 0.022907626187328816,
              "rmse": 0.024186829674491022,
              "mape": 1.6560598802471933,
              "confidence": 0.6435921249051577
            }
          },
          "dirhit": 25.0,
          "rmse": 0.03675603078685204,
          "mape": 3625813.3249074193,
          "nrmse": 1.0772105356221537,
          "mask_count": 4,
          "mask_pct": 13.793103448275861,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 2,
          "train_days": 480,
          "test_days": 30,
          "train_end_idx": 480,
          "test_end_idx": 510,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-23T00:00:00",
          "test_start": "2025-07-24T00:00:00",
          "test_end": "2025-09-03T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -5.98267380431652,
              "rmse": 0.06446028373507921,
              "mape": 1.5514292986947384,
              "confidence": 0.3000000000000663
            },
            "catboost": {
              "raw_r2": 0.008989512322836513,
              "rmse": 0.025608157969519083,
              "mape": 1.7631642375709282,
              "confidence": 0.6323027493351597
            }
          },
          "dirhit": 75.0,
          "rmse": 0.018229516263854124,
          "mape": 3191381.475263005,
          "nrmse": 0.9899614813015529,
          "mask_count": 8,
          "mask_pct": 27.586206896551722,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 3,
          "train_days": 510,
          "test_days": 30,
          "train_end_idx": 510,
          "test_end_idx": 540,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-03T00:00:00",
          "test_start": "2025-09-04T00:00:00",
          "test_end": "2025-10-15T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -6.721518052697642,
              "rmse": 0.0647749960770014,
              "mape": 1.5697821469823972,
              "confidence": 0.30000000000000165
            },
            "catboost": {
              "raw_r2": 0.01765859327033026,
              "rmse": 0.024863401096306553,
              "mape": 1.6576409575351816,
              "confidence": 0.6393382935514764
            }
          },
          "dirhit": 77.77777777777779,
          "rmse": 0.01992944062573127,
          "mape": 3120978.504161563,
          "nrmse": 1.044677336489196,
          "mask_count": 9,
          "mask_pct": 31.03448275862069,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 4,
          "train_days": 540,
          "test_days": 30,
          "train_end_idx": 540,
          "test_end_idx": 570,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-15T00:00:00",
          "test_start": "2025-10-16T00:00:00",
          "test_end": "2025-11-26T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -6.325873768776741,
              "rmse": 0.06492622183200726,
              "mape": 1.5800637383905127,
              "confidence": 0.3000000000000119
            },
            "catboost": {
              "raw_r2": 0.007318992269983671,
              "rmse": 0.02460737644306405,
              "mape": 1.7148557064584966,
              "confidence": 0.6309460176629631
            }
          },
          "dirhit": 50.0,
          "rmse": 0.024989934808178245,
          "mape": 2799361.9101597206,
          "nrmse": 1.045762667271433,
          "mask_count": 4,
          "mask_pct": 13.793103448275861,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        }
      ],
      "avg_dirhit": 56.94444444444444,
      "avg_nrmse": 1.039403005171084,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -6.422715883721659,
          "rmse": 0.06463546386676525,
          "mape": 1.568772799224658,
          "confidence": 0.3000000000000205
        },
        "catboost": {
          "raw_r2": 0.014218681012619815,
          "rmse": 0.024816441295845176,
          "mape": 1.6979301954529498,
          "confidence": 0.6365447963636892
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 5,
    "min_mask_pct": 2.5,
    "best_trial_number": 571,
    "best_trial_seed": 613,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "symbol_specs": {
      "AKFGY_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 450,
            "test_end_idx": 480,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-10T00:00:00",
            "test_start": "2025-06-11T00:00:00",
            "test_end": "2025-07-23T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 480,
            "test_end_idx": 510,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-23T00:00:00",
            "test_start": "2025-07-24T00:00:00",
            "test_end": "2025-09-03T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 510,
            "test_end_idx": 540,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-03T00:00:00",
            "test_start": "2025-09-04T00:00:00",
            "test_end": "2025-10-15T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 540,
            "test_end_idx": 570,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-15T00:00:00",
            "test_start": "2025-10-16T00:00:00",
            "test_end": "2025-11-26T00:00:00"
          }
        ]
      }
    }
  },
  "_created_at": "2025-12-03T02:46:45.180435",
  "_created_from": "study_database",
  "_filter_applied": {
    "min_mask_count": 5,
    "min_mask_pct": 2.5
  }
}