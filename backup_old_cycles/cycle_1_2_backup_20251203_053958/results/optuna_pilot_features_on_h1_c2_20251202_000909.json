{
  "best_value": 63.91258172778674,
  "best_dirhit": 100.0,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_adaptive_k_1d": 1.1662699249841066,
    "ml_pattern_weight_scale_1d": 1.601779403739677,
    "enable_talib_patterns_short": false,
    "external_min_days": 33,
    "external_smooth_alpha": 0.15988678088646863,
    "regime_scale_low": 0.8946136081431215,
    "regime_scale_high": 1.0632012151578292,
    "smart_consensus_weight": 0.6692682617363395,
    "smart_performance_weight": 0.42698415423742797,
    "smart_sigma": 0.0023043027738885837,
    "smart_weight_xgb": 1.4105603186651907,
    "smart_weight_lgbm": 0.7245797475790782,
    "smart_weight_cat": 1.1706137951631215,
    "xgb_n_estimators": 426,
    "xgb_max_depth": 6,
    "xgb_learning_rate": 0.02599033170442589,
    "xgb_subsample": 0.6138692447435191,
    "xgb_colsample_bytree": 0.652919353397278,
    "xgb_reg_alpha": 1.7814135546614808e-05,
    "xgb_reg_lambda": 0.07570328990181914,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.3779744413978864,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 267,
    "lgb_n_estimators": 367,
    "lgb_max_depth": 5,
    "lgb_learning_rate": 0.03378864437087189,
    "lgb_num_leaves": 7,
    "lgb_subsample": 0.8490881666190471,
    "lgb_colsample_bytree": 0.5798325171964215,
    "lgb_reg_alpha": 0.0001361885778949788,
    "lgb_reg_lambda": 0.0030188783012800686,
    "lgb_min_data_in_leaf": 16,
    "lgb_feature_fraction_bynode": 0.8074589116439339,
    "lgb_bagging_freq": 0,
    "lgb_min_gain_to_split": 0.2175872089623044,
    "cat_iterations": 129,
    "cat_depth": 6,
    "cat_learning_rate": 0.016611313693049155,
    "cat_l2_leaf_reg": 4.697944835057906,
    "cat_subsample": 0.5937069321513699,
    "cat_rsm": 0.8397411487973723,
    "cat_border_count": 41,
    "cat_random_strength": 1.8695727705016285,
    "cat_leaf_estimation_iterations": 19,
    "cat_bootstrap_type": "Bayesian"
  },
  "best_trial": {
    "number": 278,
    "value": 63.91258172778674,
    "state": "1"
  },
  "best_trial_number": 278,
  "best_trial_seed": 320,
  "n_trials": 1428,
  "pruned_count": 0,
  "avg_trial_time": 255.3038432223786,
  "top_k_trials": [
    {
      "number": 278,
      "value": 63.91258172778674,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 1.1662699249841066,
        "ml_pattern_weight_scale_1d": 1.601779403739677,
        "enable_talib_patterns_short": false,
        "external_min_days": 33,
        "external_smooth_alpha": 0.15988678088646863,
        "regime_scale_low": 0.8946136081431215,
        "regime_scale_high": 1.0632012151578292,
        "smart_consensus_weight": 0.6692682617363395,
        "smart_performance_weight": 0.42698415423742797,
        "smart_sigma": 0.0023043027738885837,
        "smart_weight_xgb": 1.4105603186651907,
        "smart_weight_lgbm": 0.7245797475790782,
        "smart_weight_cat": 1.1706137951631215,
        "xgb_n_estimators": 426,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.02599033170442589,
        "xgb_subsample": 0.6138692447435191,
        "xgb_colsample_bytree": 0.652919353397278,
        "xgb_reg_alpha": 1.7814135546614808e-05,
        "xgb_reg_lambda": 0.07570328990181914,
        "xgb_min_child_weight": 7,
        "xgb_gamma": 0.3779744413978864,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 267,
        "lgb_n_estimators": 367,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.03378864437087189,
        "lgb_num_leaves": 7,
        "lgb_subsample": 0.8490881666190471,
        "lgb_colsample_bytree": 0.5798325171964215,
        "lgb_reg_alpha": 0.0001361885778949788,
        "lgb_reg_lambda": 0.0030188783012800686,
        "lgb_min_data_in_leaf": 16,
        "lgb_feature_fraction_bynode": 0.8074589116439339,
        "lgb_bagging_freq": 0,
        "lgb_min_gain_to_split": 0.2175872089623044,
        "cat_iterations": 129,
        "cat_depth": 6,
        "cat_learning_rate": 0.016611313693049155,
        "cat_l2_leaf_reg": 4.697944835057906,
        "cat_subsample": 0.5937069321513699,
        "cat_rsm": 0.8397411487973723,
        "cat_border_count": 41,
        "cat_random_strength": 1.8695727705016285,
        "cat_leaf_estimation_iterations": 19,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 100.0,
        "avg_nrmse": 1.0145697120355437,
        "model_choice": "all",
        "symbol_metrics": {
          "BRYAT_1d": {
            "symbol": "BRYAT",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 452,
                "test_days": 30,
                "train_end_idx": 452,
                "test_end_idx": 482,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.002372428753189141,
                    "rmse": 0.029829589400427944,
                    "mape": 1.8718530794835335,
                    "confidence": 0.6230724242404859
                  },
                  "lightgbm": {
                    "raw_r2": -0.007423463699531767,
                    "rmse": 0.02991067658075062,
                    "mape": 1.774610129746814,
                    "confidence": 0.6189691281202359
                  },
                  "catboost": {
                    "raw_r2": 0.023072863270595767,
                    "rmse": 0.02948160250043841,
                    "mape": 1.624280045699616,
                    "confidence": 0.6437259375037652
                  }
                },
                "dirhit": null,
                "rmse": 0.028320239786398298,
                "mape": 94.3324793569124,
                "nrmse": 1.032515013287451,
                "mask_count": 3,
                "mask_pct": 10.344827586206897,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.002372428753189141,
                    "lightgbm": -0.007423463699531767,
                    "catboost": 0.023072863270595767
                  },
                  "ensemble_weights": {
                    "xgboost": 0.426039273510086,
                    "lightgbm": 0.2186342417722123,
                    "catboost": 0.3553264847177016
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 2,
                "train_days": 482,
                "test_days": 30,
                "train_end_idx": 482,
                "test_end_idx": 512,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.005129097588478497,
                    "rmse": 0.029716281963909977,
                    "mape": 1.8627961431893305,
                    "confidence": 0.6208328365990311
                  },
                  "lightgbm": {
                    "raw_r2": -0.01030511413774778,
                    "rmse": 0.029811382164775233,
                    "mape": 1.7892227008229962,
                    "confidence": 0.6166289466960637
                  },
                  "catboost": {
                    "raw_r2": 0.010373587009719465,
                    "rmse": 0.02954855681025356,
                    "mape": 1.6626304461745076,
                    "confidence": 0.6334266503574686
                  }
                },
                "dirhit": 100.0,
                "rmse": 0.041427838123942046,
                "mape": 126.37730546080084,
                "nrmse": 0.9646370527793574,
                "mask_count": 11,
                "mask_pct": 37.93103448275862,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.005129097588478497,
                    "lightgbm": -0.01030511413774778,
                    "catboost": 0.010373587009719465
                  },
                  "ensemble_weights": {
                    "xgboost": 0.42633542085574716,
                    "lightgbm": 0.2187806851070283,
                    "catboost": 0.3548838940372246
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 3,
                "train_days": 512,
                "test_days": 30,
                "train_end_idx": 512,
                "test_end_idx": 542,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.03358912137029746,
                    "rmse": 0.030507753967435408,
                    "mape": 1.8650547739651218,
                    "confidence": 0.5977728057225857
                  },
                  "lightgbm": {
                    "raw_r2": -0.04075156325966985,
                    "rmse": 0.03061335105850835,
                    "mape": 1.8057290956511443,
                    "confidence": 0.5920034364774236
                  },
                  "catboost": {
                    "raw_r2": -0.018204969028670675,
                    "rmse": 0.03026222273051581,
                    "mape": 1.6867256725462731,
                    "confidence": 0.6102186671771846
                  }
                },
                "dirhit": null,
                "rmse": 0.024213641758743784,
                "mape": 152.02207709361602,
                "nrmse": 1.0786801739953156,
                "mask_count": 3,
                "mask_pct": 10.344827586206897,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.03358912137029746,
                    "lightgbm": -0.04075156325966985,
                    "catboost": -0.018204969028670675
                  },
                  "ensemble_weights": {
                    "xgboost": 0.4263748309332577,
                    "lightgbm": 0.21871646565319686,
                    "catboost": 0.35490870341354536
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 4,
                "train_days": 542,
                "test_days": 30,
                "train_end_idx": 542,
                "test_end_idx": 572,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.025621643725481924,
                    "rmse": 0.03018216283529314,
                    "mape": 1.8205054210519644,
                    "confidence": 0.6042108388492466
                  },
                  "lightgbm": {
                    "raw_r2": -0.031153283866096244,
                    "rmse": 0.030276835057908076,
                    "mape": 1.7473242278157628,
                    "confidence": 0.5997390122019612
                  },
                  "catboost": {
                    "raw_r2": -0.002160883531052408,
                    "rmse": 0.029898844598342182,
                    "mape": 1.6172601953398547,
                    "confidence": 0.6232442992103622
                  }
                },
                "dirhit": null,
                "rmse": 0.037433143677180994,
                "mape": 483519.8529621011,
                "nrmse": 0.9824466080800509,
                "mask_count": 8,
                "mask_pct": 27.586206896551722,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.025621643725481924,
                    "lightgbm": -0.031153283866096244,
                    "catboost": -0.002160883531052408
                  },
                  "ensemble_weights": {
                    "xgboost": 0.42610663060929216,
                    "lightgbm": 0.2186483586801201,
                    "catboost": 0.3552450107105877
                  },
                  "source": "model"
                }
              }
            ],
            "avg_dirhit": 100.0,
            "avg_nrmse": 1.0145697120355437,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.016678072859361757,
                "rmse": 0.030058947041766617,
                "mape": 1.8550523544224877,
                "confidence": 0.6114722263528374
              },
              "lightgbm": {
                "raw_r2": -0.02240835624076141,
                "rmse": 0.03015306121548557,
                "mape": 1.7792215385091792,
                "confidence": 0.606835130873921
              },
              "catboost": {
                "raw_r2": 0.0032701494301480374,
                "rmse": 0.029797806659887488,
                "mape": 1.6477240899400627,
                "confidence": 0.6276538885621952
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 1198,
      "value": 58.14122307625169,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "cat",
        "ml_adaptive_k_1d": 1.003586099568114,
        "ml_pattern_weight_scale_1d": 1.9279496642164258,
        "enable_talib_patterns_short": false,
        "external_min_days": 52,
        "external_smooth_alpha": 0.13738232056106756,
        "regime_scale_low": 0.8820272490893386,
        "regime_scale_high": 1.024979565693002,
        "smart_consensus_weight": 0.6438573347684834,
        "smart_performance_weight": 0.24926375848754878,
        "smart_sigma": 0.0014438291177243275,
        "smart_weight_xgb": 1.4042835398242834,
        "smart_weight_lgbm": 0.816874583521919,
        "smart_weight_cat": 1.1141324600618299,
        "cat_iterations": 165,
        "cat_depth": 5,
        "cat_learning_rate": 0.022098599115135988,
        "cat_l2_leaf_reg": 5.843685794467639,
        "cat_subsample": 0.530552952516683,
        "cat_rsm": 0.661345415471883,
        "cat_border_count": 35,
        "cat_random_strength": 0.1556563224992128,
        "cat_leaf_estimation_iterations": 19,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 91.66666666666666,
        "avg_nrmse": 1.0042405984024942,
        "model_choice": "cat",
        "symbol_metrics": {
          "BRYAT_1d": {
            "symbol": "BRYAT",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 452,
                "test_days": 30,
                "train_end_idx": 452,
                "test_end_idx": 482,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.002406264428526613,
                    "rmse": 0.029828703790610252,
                    "mape": 1.866977917196412,
                    "confidence": 0.623044933735194
                  },
                  "catboost": {
                    "raw_r2": 0.0674279747676944,
                    "rmse": 0.0288348694341893,
                    "mape": 1.54611321035675,
                    "confidence": 0.6792721382022765
                  }
                },
                "dirhit": null,
                "rmse": 0.027641548533794823,
                "mape": 96.03375712891929,
                "nrmse": 1.0077709110840327,
                "mask_count": 4,
                "mask_pct": 13.793103448275861,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 2,
                "train_days": 482,
                "test_days": 30,
                "train_end_idx": 482,
                "test_end_idx": 512,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.00499642154400437,
                    "rmse": 0.02971277916906745,
                    "mape": 1.8661971136768107,
                    "confidence": 0.6209406186168909
                  },
                  "catboost": {
                    "raw_r2": 0.03798584538459715,
                    "rmse": 0.02920141661431588,
                    "mape": 1.5873012333226673,
                    "confidence": 0.6557710543016284
                  }
                },
                "dirhit": 91.66666666666666,
                "rmse": 0.040340870813512834,
                "mape": 111.48123228691207,
                "nrmse": 0.9393272854759565,
                "mask_count": 12,
                "mask_pct": 41.37931034482759,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 3,
                "train_days": 512,
                "test_days": 30,
                "train_end_idx": 512,
                "test_end_idx": 542,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.031205133864065166,
                    "rmse": 0.030472318276337524,
                    "mape": 1.8753878496410448,
                    "confidence": 0.5996971390114312
                  },
                  "catboost": {
                    "raw_r2": 0.0070589898533436335,
                    "rmse": 0.029901709534760977,
                    "mape": 1.5355320231778575,
                    "confidence": 0.6307348339286669
                  }
                },
                "dirhit": null,
                "rmse": 0.024138723827504628,
                "mape": 211.99267831864316,
                "nrmse": 1.0753426963903518,
                "mask_count": 4,
                "mask_pct": 13.793103448275861,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              },
              {
                "split_index": 4,
                "train_days": 542,
                "test_days": 30,
                "train_end_idx": 542,
                "test_end_idx": 572,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.024042424320383466,
                    "rmse": 0.03015155255031188,
                    "mape": 1.8195581332726016,
                    "confidence": 0.6054890206050727
                  },
                  "catboost": {
                    "raw_r2": 0.010741333296986011,
                    "rmse": 0.029713633908729876,
                    "mape": 1.5742535284274843,
                    "confidence": 0.6337252361443081
                  }
                },
                "dirhit": null,
                "rmse": 0.03784525135406549,
                "mape": 243739.79678188736,
                "nrmse": 0.9945215006596363,
                "mask_count": 7,
                "mask_pct": 24.137931034482758,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0
              }
            ],
            "avg_dirhit": 91.66666666666666,
            "avg_nrmse": 1.0042405984024942,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.015662561039244904,
                "rmse": 0.030041338446581776,
                "mape": 1.8570302534467173,
                "confidence": 0.6122929279921472
              },
              "catboost": {
                "raw_r2": 0.030803535825655298,
                "rmse": 0.029412907372999005,
                "mape": 1.5607999988211898,
                "confidence": 0.64987581564422
              }
            }
          }
        }
      },
      "state": "1"
    },
    {
      "number": 554,
      "value": 58.12565605526562,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_adaptive_k_1d": 1.1252101122426903,
        "ml_pattern_weight_scale_1d": 1.7896080346532168,
        "enable_talib_patterns_short": false,
        "external_min_days": 41,
        "external_smooth_alpha": 0.1471448233377371,
        "regime_scale_low": 0.8977431256606847,
        "regime_scale_high": 1.0739890336122493,
        "smart_consensus_weight": 0.6727112629129135,
        "smart_performance_weight": 0.42389189071498906,
        "smart_sigma": 0.0016868149888816235,
        "smart_weight_xgb": 1.4493422969788463,
        "smart_weight_lgbm": 0.7932125687669124,
        "smart_weight_cat": 1.2020015252200018,
        "xgb_n_estimators": 325,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.028384712834715314,
        "xgb_subsample": 0.637451540118075,
        "xgb_colsample_bytree": 0.7723051174403766,
        "xgb_reg_alpha": 0.46363184507097255,
        "xgb_reg_lambda": 0.0032168486814672897,
        "xgb_min_child_weight": 14,
        "xgb_gamma": 0.1905468520414446,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 240,
        "lgb_n_estimators": 564,
        "lgb_max_depth": 4,
        "lgb_learning_rate": 0.02316945750272444,
        "lgb_num_leaves": 8,
        "lgb_subsample": 0.6826324147750138,
        "lgb_colsample_bytree": 0.7837838253875267,
        "lgb_reg_alpha": 0.00020426804311733996,
        "lgb_reg_lambda": 0.0004366794354247042,
        "lgb_min_data_in_leaf": 55,
        "lgb_feature_fraction_bynode": 0.7539642319485725,
        "lgb_bagging_freq": 1,
        "lgb_min_gain_to_split": 0.35831303737516146,
        "cat_iterations": 130,
        "cat_depth": 5,
        "cat_learning_rate": 0.012037046520272732,
        "cat_l2_leaf_reg": 9.351047249780493,
        "cat_subsample": 0.5598753500499812,
        "cat_rsm": 0.6006452603772419,
        "cat_border_count": 28,
        "cat_random_strength": 0.6828914057920263,
        "cat_leaf_estimation_iterations": 12,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 91.66666666666666,
        "avg_nrmse": 1.0068351019001724,
        "model_choice": "all",
        "symbol_metrics": {
          "BRYAT_1d": {
            "symbol": "BRYAT",
            "horizon": 1,
            "split_metrics": [
              {
                "split_index": 1,
                "train_days": 452,
                "test_days": 30,
                "train_end_idx": 452,
                "test_end_idx": 482,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-06-12T00:00:00",
                "test_start": "2025-06-13T00:00:00",
                "test_end": "2025-07-25T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0030701836163688303,
                    "rmse": 0.02983755470708339,
                    "mape": 1.8463500644294815,
                    "confidence": 0.6225055247969074
                  },
                  "lightgbm": {
                    "raw_r2": -0.007423463699531767,
                    "rmse": 0.02991067658075062,
                    "mape": 1.774610129746814,
                    "confidence": 0.6189691281202359
                  },
                  "catboost": {
                    "raw_r2": 0.04532027979559986,
                    "rmse": 0.02923769870087236,
                    "mape": 1.5984423155896283,
                    "confidence": 0.6616659671742373
                  }
                },
                "dirhit": null,
                "rmse": 0.02776392218880343,
                "mape": 86.88702931448064,
                "nrmse": 1.0122324776872904,
                "mask_count": 0,
                "mask_pct": 0.0,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.0030701836163688303,
                    "lightgbm": -0.007423463699531767,
                    "catboost": 0.04532027979559986
                  },
                  "ensemble_weights": {
                    "xgboost": 0.4194645381599176,
                    "lightgbm": 0.22937726405013623,
                    "catboost": 0.35115819778994617
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 2,
                "train_days": 482,
                "test_days": 30,
                "train_end_idx": 482,
                "test_end_idx": 512,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-07-25T00:00:00",
                "test_start": "2025-07-28T00:00:00",
                "test_end": "2025-09-05T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.0053351058980071935,
                    "rmse": 0.029720217858522777,
                    "mape": 1.8463424789915217,
                    "confidence": 0.6206654834858252
                  },
                  "lightgbm": {
                    "raw_r2": -0.01030511413774778,
                    "rmse": 0.029811382164775233,
                    "mape": 1.7892227008229962,
                    "confidence": 0.6166289466960637
                  },
                  "catboost": {
                    "raw_r2": 0.027891178400068828,
                    "rmse": 0.029326972235124732,
                    "mape": 1.609600527179686,
                    "confidence": 0.6476249269668294
                  }
                },
                "dirhit": 91.66666666666666,
                "rmse": 0.04188809783172493,
                "mape": 120.79245357395745,
                "nrmse": 0.9753540872212823,
                "mask_count": 12,
                "mask_pct": 41.37931034482759,
                "low_support": false,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.0053351058980071935,
                    "lightgbm": -0.01030511413774778,
                    "catboost": 0.027891178400068828
                  },
                  "ensemble_weights": {
                    "xgboost": 0.4199095315783612,
                    "lightgbm": 0.22959303596635022,
                    "catboost": 0.35049743245528875
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 3,
                "train_days": 512,
                "test_days": 30,
                "train_end_idx": 512,
                "test_end_idx": 542,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-09-05T00:00:00",
                "test_start": "2025-09-08T00:00:00",
                "test_end": "2025-10-17T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.03255849064547078,
                    "rmse": 0.03049160992531644,
                    "mape": 1.8579899469417325,
                    "confidence": 0.5986044937373531
                  },
                  "lightgbm": {
                    "raw_r2": -0.04075156325966985,
                    "rmse": 0.03061335105850835,
                    "mape": 1.8057290956511443,
                    "confidence": 0.5920034364774236
                  },
                  "catboost": {
                    "raw_r2": 0.012353583297301926,
                    "rmse": 0.029820540040884292,
                    "mape": 1.600474236452124,
                    "confidence": 0.6350340963950489
                  }
                },
                "dirhit": null,
                "rmse": 0.023970686777505336,
                "mape": 185.03396999837202,
                "nrmse": 1.0678569065146741,
                "mask_count": 4,
                "mask_pct": 13.793103448275861,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.03255849064547078,
                    "lightgbm": -0.04075156325966985,
                    "catboost": 0.012353583297301926
                  },
                  "ensemble_weights": {
                    "xgboost": 0.41963464012413887,
                    "lightgbm": 0.2293008744681101,
                    "catboost": 0.3510644854077512
                  },
                  "source": "model"
                }
              },
              {
                "split_index": 4,
                "train_days": 542,
                "test_days": 30,
                "train_end_idx": 542,
                "test_end_idx": 572,
                "train_start": "2023-08-21T00:00:00",
                "train_end": "2025-10-17T00:00:00",
                "test_start": "2025-10-20T00:00:00",
                "test_end": "2025-11-28T00:00:00",
                "valid_predictions": 29,
                "model_metrics": {
                  "xgboost": {
                    "raw_r2": -0.025892993130200326,
                    "rmse": 0.03018540166519267,
                    "mape": 1.8041981844000006,
                    "confidence": 0.6039912791289165
                  },
                  "lightgbm": {
                    "raw_r2": -0.031153283866096244,
                    "rmse": 0.030276835057908076,
                    "mape": 1.7473242278157628,
                    "confidence": 0.5997390122019612
                  },
                  "catboost": {
                    "raw_r2": -0.0029236697818972868,
                    "rmse": 0.029909467147882788,
                    "mape": 1.5872797631983857,
                    "confidence": 0.6226245606039074
                  }
                },
                "dirhit": null,
                "rmse": 0.036984302315721994,
                "mape": 388817.5820505411,
                "nrmse": 0.9718969361774437,
                "mask_count": 7,
                "mask_pct": 24.137931034482758,
                "low_support": true,
                "min_mask_count": 10,
                "min_mask_pct": 5.0,
                "ensemble_debug": {
                  "historical_r2": {
                    "xgboost": -0.025892993130200326,
                    "lightgbm": -0.031153283866096244,
                    "catboost": -0.0029236697818972868
                  },
                  "ensemble_weights": {
                    "xgboost": 0.42020766469710435,
                    "lightgbm": 0.22974295927534266,
                    "catboost": 0.3500493760275529
                  },
                  "source": "model"
                }
              }
            ],
            "avg_dirhit": 91.66666666666666,
            "avg_nrmse": 1.0068351019001724,
            "split_count": 4,
            "avg_model_metrics": {
              "xgboost": {
                "raw_r2": -0.016714193322511783,
                "rmse": 0.030058696039028818,
                "mape": 1.838720168690684,
                "confidence": 0.6114416952872506
              },
              "lightgbm": {
                "raw_r2": -0.02240835624076141,
                "rmse": 0.03015306121548557,
                "mape": 1.7792215385091792,
                "confidence": 0.606835130873921
              },
              "catboost": {
                "raw_r2": 0.02066034292776833,
                "rmse": 0.029573669531191043,
                "mape": 1.598949210604956,
                "confidence": 0.6417373877850058
              }
            }
          }
        }
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_BRYAT_h1_c2",
  "symbols": [
    "BRYAT"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_adaptive_k_1d": 1.1662699249841066,
    "ml_pattern_weight_scale_1d": 1.601779403739677,
    "external_min_days": 33,
    "external_smooth_alpha": 0.15988678088646863,
    "regime_scale_low": 0.8946136081431215,
    "regime_scale_high": 1.0632012151578292,
    "smart_consensus_weight": 0.6692682617363395,
    "smart_performance_weight": 0.42698415423742797,
    "smart_sigma": 0.0023043027738885837,
    "smart_weight_xgb": 1.4105603186651907,
    "smart_weight_lgbm": 0.7245797475790782,
    "smart_weight_cat": 1.1706137951631215
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 426,
    "xgb_max_depth": 6,
    "xgb_learning_rate": 0.02599033170442589,
    "xgb_subsample": 0.6138692447435191,
    "xgb_colsample_bytree": 0.652919353397278,
    "xgb_reg_alpha": 1.7814135546614808e-05,
    "xgb_reg_lambda": 0.07570328990181914,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.3779744413978864,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 267,
    "lgb_n_estimators": 367,
    "lgb_max_depth": 5,
    "lgb_learning_rate": 0.03378864437087189,
    "lgb_num_leaves": 7,
    "lgb_subsample": 0.8490881666190471,
    "lgb_colsample_bytree": 0.5798325171964215,
    "lgb_reg_alpha": 0.0001361885778949788,
    "lgb_reg_lambda": 0.0030188783012800686,
    "lgb_min_data_in_leaf": 16,
    "lgb_feature_fraction_bynode": 0.8074589116439339,
    "lgb_bagging_freq": 0,
    "lgb_min_gain_to_split": 0.2175872089623044,
    "cat_iterations": 129,
    "cat_depth": 6,
    "cat_learning_rate": 0.016611313693049155,
    "cat_l2_leaf_reg": 4.697944835057906,
    "cat_subsample": 0.5937069321513699,
    "cat_rsm": 0.8397411487973723,
    "cat_border_count": 41,
    "cat_random_strength": 1.8695727705016285,
    "cat_leaf_estimation_iterations": 19,
    "cat_bootstrap_type": "Bayesian"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "BRYAT_1d": {
      "symbol": "BRYAT",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 452,
          "test_days": 30,
          "train_end_idx": 452,
          "test_end_idx": 482,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-12T00:00:00",
          "test_start": "2025-06-13T00:00:00",
          "test_end": "2025-07-25T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.002372428753189141,
              "rmse": 0.029829589400427944,
              "mape": 1.8718530794835335,
              "confidence": 0.6230724242404859
            },
            "lightgbm": {
              "raw_r2": -0.007423463699531767,
              "rmse": 0.02991067658075062,
              "mape": 1.774610129746814,
              "confidence": 0.6189691281202359
            },
            "catboost": {
              "raw_r2": 0.023072863270595767,
              "rmse": 0.02948160250043841,
              "mape": 1.624280045699616,
              "confidence": 0.6437259375037652
            }
          },
          "dirhit": null,
          "rmse": 0.028320239786398298,
          "mape": 94.3324793569124,
          "nrmse": 1.032515013287451,
          "mask_count": 3,
          "mask_pct": 10.344827586206897,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.002372428753189141,
              "lightgbm": -0.007423463699531767,
              "catboost": 0.023072863270595767
            },
            "ensemble_weights": {
              "xgboost": 0.426039273510086,
              "lightgbm": 0.2186342417722123,
              "catboost": 0.3553264847177016
            },
            "source": "model"
          }
        },
        {
          "split_index": 2,
          "train_days": 482,
          "test_days": 30,
          "train_end_idx": 482,
          "test_end_idx": 512,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-25T00:00:00",
          "test_start": "2025-07-28T00:00:00",
          "test_end": "2025-09-05T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.005129097588478497,
              "rmse": 0.029716281963909977,
              "mape": 1.8627961431893305,
              "confidence": 0.6208328365990311
            },
            "lightgbm": {
              "raw_r2": -0.01030511413774778,
              "rmse": 0.029811382164775233,
              "mape": 1.7892227008229962,
              "confidence": 0.6166289466960637
            },
            "catboost": {
              "raw_r2": 0.010373587009719465,
              "rmse": 0.02954855681025356,
              "mape": 1.6626304461745076,
              "confidence": 0.6334266503574686
            }
          },
          "dirhit": 100.0,
          "rmse": 0.041427838123942046,
          "mape": 126.37730546080084,
          "nrmse": 0.9646370527793574,
          "mask_count": 11,
          "mask_pct": 37.93103448275862,
          "low_support": false,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.005129097588478497,
              "lightgbm": -0.01030511413774778,
              "catboost": 0.010373587009719465
            },
            "ensemble_weights": {
              "xgboost": 0.42633542085574716,
              "lightgbm": 0.2187806851070283,
              "catboost": 0.3548838940372246
            },
            "source": "model"
          }
        },
        {
          "split_index": 3,
          "train_days": 512,
          "test_days": 30,
          "train_end_idx": 512,
          "test_end_idx": 542,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-05T00:00:00",
          "test_start": "2025-09-08T00:00:00",
          "test_end": "2025-10-17T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.03358912137029746,
              "rmse": 0.030507753967435408,
              "mape": 1.8650547739651218,
              "confidence": 0.5977728057225857
            },
            "lightgbm": {
              "raw_r2": -0.04075156325966985,
              "rmse": 0.03061335105850835,
              "mape": 1.8057290956511443,
              "confidence": 0.5920034364774236
            },
            "catboost": {
              "raw_r2": -0.018204969028670675,
              "rmse": 0.03026222273051581,
              "mape": 1.6867256725462731,
              "confidence": 0.6102186671771846
            }
          },
          "dirhit": null,
          "rmse": 0.024213641758743784,
          "mape": 152.02207709361602,
          "nrmse": 1.0786801739953156,
          "mask_count": 3,
          "mask_pct": 10.344827586206897,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.03358912137029746,
              "lightgbm": -0.04075156325966985,
              "catboost": -0.018204969028670675
            },
            "ensemble_weights": {
              "xgboost": 0.4263748309332577,
              "lightgbm": 0.21871646565319686,
              "catboost": 0.35490870341354536
            },
            "source": "model"
          }
        },
        {
          "split_index": 4,
          "train_days": 542,
          "test_days": 30,
          "train_end_idx": 542,
          "test_end_idx": 572,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-17T00:00:00",
          "test_start": "2025-10-20T00:00:00",
          "test_end": "2025-11-28T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.025621643725481924,
              "rmse": 0.03018216283529314,
              "mape": 1.8205054210519644,
              "confidence": 0.6042108388492466
            },
            "lightgbm": {
              "raw_r2": -0.031153283866096244,
              "rmse": 0.030276835057908076,
              "mape": 1.7473242278157628,
              "confidence": 0.5997390122019612
            },
            "catboost": {
              "raw_r2": -0.002160883531052408,
              "rmse": 0.029898844598342182,
              "mape": 1.6172601953398547,
              "confidence": 0.6232442992103622
            }
          },
          "dirhit": null,
          "rmse": 0.037433143677180994,
          "mape": 483519.8529621011,
          "nrmse": 0.9824466080800509,
          "mask_count": 8,
          "mask_pct": 27.586206896551722,
          "low_support": true,
          "min_mask_count": 10,
          "min_mask_pct": 5.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.025621643725481924,
              "lightgbm": -0.031153283866096244,
              "catboost": -0.002160883531052408
            },
            "ensemble_weights": {
              "xgboost": 0.42610663060929216,
              "lightgbm": 0.2186483586801201,
              "catboost": 0.3552450107105877
            },
            "source": "model"
          }
        }
      ],
      "avg_dirhit": 100.0,
      "avg_nrmse": 1.0145697120355437,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.016678072859361757,
          "rmse": 0.030058947041766617,
          "mape": 1.8550523544224877,
          "confidence": 0.6114722263528374
        },
        "lightgbm": {
          "raw_r2": -0.02240835624076141,
          "rmse": 0.03015306121548557,
          "mape": 1.7792215385091792,
          "confidence": 0.606835130873921
        },
        "catboost": {
          "raw_r2": 0.0032701494301480374,
          "rmse": 0.029797806659887488,
          "mape": 1.6477240899400627,
          "confidence": 0.6276538885621952
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 10,
    "min_mask_pct": 5.0,
    "best_trial_number": 278,
    "best_trial_seed": 320,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "split_generation": {
      "type": "generate_walkforward_splits",
      "n_splits": 4
    },
    "symbol_specs": {
      "BRYAT_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 452,
            "test_end_idx": 482,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-12T00:00:00",
            "test_start": "2025-06-13T00:00:00",
            "test_end": "2025-07-25T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 482,
            "test_end_idx": 512,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-25T00:00:00",
            "test_start": "2025-07-28T00:00:00",
            "test_end": "2025-09-05T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 512,
            "test_end_idx": 542,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-05T00:00:00",
            "test_start": "2025-09-08T00:00:00",
            "test_end": "2025-10-17T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 542,
            "test_end_idx": 572,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-17T00:00:00",
            "test_start": "2025-10-20T00:00:00",
            "test_end": "2025-11-28T00:00:00"
          }
        ]
      }
    }
  }
}