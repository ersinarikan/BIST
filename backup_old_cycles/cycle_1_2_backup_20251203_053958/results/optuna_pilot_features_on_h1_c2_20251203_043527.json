{
  "best_value": 66.07142857142857,
  "best_dirhit": 39.285714285714285,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_adaptive_k_1d": 1.3079928902617854,
    "ml_pattern_weight_scale_1d": 1.3737017147823776,
    "enable_talib_patterns_short": true,
    "external_min_days": 24,
    "external_smooth_alpha": 0.07502063943258565,
    "regime_scale_low": 0.8274600024650057,
    "regime_scale_high": 1.1152841555695714,
    "yolo_min_conf": 0.5313194752906026,
    "smart_consensus_weight": 0.6824197078111078,
    "smart_performance_weight": 0.6858535478982704,
    "smart_sigma": 0.001464754741728691,
    "smart_weight_xgb": 1.0979269918530916,
    "smart_weight_lgbm": 0.8329389120704838,
    "smart_weight_cat": 0.5803022315827973,
    "fingpt_confidence_threshold": 0.33845538252495166,
    "xgb_n_estimators": 530,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.03647758369265888,
    "xgb_subsample": 0.7503298833706139,
    "xgb_colsample_bytree": 0.5973883813621016,
    "xgb_reg_alpha": 0.7467472660092801,
    "xgb_reg_lambda": 0.01635609075254802,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.00613854202806927,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 349,
    "lgb_n_estimators": 445,
    "lgb_max_depth": 8,
    "lgb_learning_rate": 0.02320088765370648,
    "lgb_num_leaves": 52,
    "lgb_subsample": 0.6378677667907012,
    "lgb_colsample_bytree": 0.5620453999973728,
    "lgb_reg_alpha": 0.02178402649382655,
    "lgb_reg_lambda": 0.563890069725556,
    "lgb_min_data_in_leaf": 98,
    "lgb_feature_fraction_bynode": 0.5889053761732317,
    "lgb_bagging_freq": 6,
    "lgb_min_gain_to_split": 0.5796475544099522,
    "cat_iterations": 223,
    "cat_depth": 8,
    "cat_learning_rate": 0.012523620859387895,
    "cat_l2_leaf_reg": 9.832567576612245,
    "cat_subsample": 0.8075537050780739,
    "cat_rsm": 0.6491618010324436,
    "cat_border_count": 60,
    "cat_random_strength": 1.5175471766377688,
    "cat_leaf_estimation_iterations": 4,
    "cat_bootstrap_type": "No"
  },
  "best_trial": {
    "number": 369,
    "value": 21.085775268797242,
    "state": "1"
  },
  "best_trial_number": 369,
  "best_trial_seed": 411,
  "n_trials": 363,
  "pruned_count": 0,
  "avg_trial_time": 0.0,
  "top_k_trials": [],
  "study_name": "hpo_with_features_EYGYO_h1_c2",
  "symbols": [
    "EYGYO"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": true,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_adaptive_k_1d": 1.3079928902617854,
    "ml_pattern_weight_scale_1d": 1.3737017147823776,
    "external_min_days": 24,
    "external_smooth_alpha": 0.07502063943258565,
    "regime_scale_low": 0.8274600024650057,
    "regime_scale_high": 1.1152841555695714,
    "yolo_min_conf": 0.5313194752906026,
    "smart_consensus_weight": 0.6824197078111078,
    "smart_performance_weight": 0.6858535478982704,
    "smart_sigma": 0.001464754741728691,
    "smart_weight_xgb": 1.0979269918530916,
    "smart_weight_lgbm": 0.8329389120704838,
    "smart_weight_cat": 0.5803022315827973,
    "fingpt_confidence_threshold": 0.33845538252495166
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 530,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.03647758369265888,
    "xgb_subsample": 0.7503298833706139,
    "xgb_colsample_bytree": 0.5973883813621016,
    "xgb_reg_alpha": 0.7467472660092801,
    "xgb_reg_lambda": 0.01635609075254802,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.00613854202806927,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 349,
    "lgb_n_estimators": 445,
    "lgb_max_depth": 8,
    "lgb_learning_rate": 0.02320088765370648,
    "lgb_num_leaves": 52,
    "lgb_subsample": 0.6378677667907012,
    "lgb_colsample_bytree": 0.5620453999973728,
    "lgb_reg_alpha": 0.02178402649382655,
    "lgb_reg_lambda": 0.563890069725556,
    "lgb_min_data_in_leaf": 98,
    "lgb_feature_fraction_bynode": 0.5889053761732317,
    "lgb_bagging_freq": 6,
    "lgb_min_gain_to_split": 0.5796475544099522,
    "cat_iterations": 223,
    "cat_depth": 8,
    "cat_learning_rate": 0.012523620859387895,
    "cat_l2_leaf_reg": 9.832567576612245,
    "cat_subsample": 0.8075537050780739,
    "cat_rsm": 0.6491618010324436,
    "cat_border_count": 60,
    "cat_random_strength": 1.5175471766377688,
    "cat_leaf_estimation_iterations": 4,
    "cat_bootstrap_type": "No"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "EYGYO_1d": {
      "symbol": "EYGYO",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 454,
          "test_days": 30,
          "train_end_idx": 454,
          "test_end_idx": 484,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-06-13T00:00:00",
          "test_start": "2025-06-16T00:00:00",
          "test_end": "2025-07-28T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.001341914546337956,
              "rmse": 0.02890564287208102,
              "mape": 1.8098808026954878,
              "confidence": 0.6239096985213967
            },
            "lightgbm": {
              "raw_r2": -0.006394030019593562,
              "rmse": 0.028993447006983343,
              "mape": 1.9437480251598385,
              "confidence": 0.6198052930565935
            },
            "catboost": {
              "raw_r2": 0.017486904110710928,
              "rmse": 0.028707286659377364,
              "mape": 1.7516495689219047,
              "confidence": 0.639199064996745
            }
          },
          "dirhit": 0.0,
          "rmse": 0.026668672749079414,
          "mape": 4858154.139085913,
          "nrmse": 1.051515217456434,
          "mask_count": 0,
          "mask_pct": 0.0,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.001341914546337956,
              "lightgbm": -0.006394030019593562,
              "catboost": 0.017486904110710928
            },
            "ensemble_weights": {
              "xgboost": 0.2584274628245364,
              "lightgbm": 0.1954422249878347,
              "catboost": 0.546130312187629
            },
            "source": "model"
          }
        },
        {
          "split_index": 2,
          "train_days": 484,
          "test_days": 30,
          "train_end_idx": 484,
          "test_end_idx": 514,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-07-28T00:00:00",
          "test_start": "2025-07-29T00:00:00",
          "test_end": "2025-09-08T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.008961190864131977,
              "rmse": 0.028641482616255223,
              "mape": 1.6930170842389718,
              "confidence": 0.6322797497317754
            },
            "lightgbm": {
              "raw_r2": -0.006118127602959304,
              "rmse": 0.02880051588873512,
              "mape": 1.9409515750801272,
              "confidence": 0.6200294089344809
            },
            "catboost": {
              "raw_r2": 0.01073304309460843,
              "rmse": 0.02863269583001983,
              "mape": 1.7821833404005172,
              "confidence": 0.6337185052059859
            }
          },
          "dirhit": 25.0,
          "rmse": 0.04173662403272401,
          "mape": 570784.6625474592,
          "nrmse": 1.1843382776815443,
          "mask_count": 4,
          "mask_pct": 13.793103448275861,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": 0.008961190864131977,
              "lightgbm": -0.006118127602959304,
              "catboost": 0.01073304309460843
            },
            "ensemble_weights": {
              "xgboost": 0.7562974310970716,
              "lightgbm": 0.14313660960466862,
              "catboost": 0.10056595929825982
            },
            "source": "model"
          }
        },
        {
          "split_index": 3,
          "train_days": 514,
          "test_days": 30,
          "train_end_idx": 514,
          "test_end_idx": 544,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-09-08T00:00:00",
          "test_start": "2025-09-09T00:00:00",
          "test_end": "2025-10-20T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.002159876633613833,
              "rmse": 0.02925129484402065,
              "mape": 1.8138227473682929,
              "confidence": 0.6232451172906672
            },
            "lightgbm": {
              "raw_r2": -0.02038163272089366,
              "rmse": 0.02953303947630956,
              "mape": 1.8879309051508575,
              "confidence": 0.6084542402901272
            },
            "catboost": {
              "raw_r2": -0.008840396841518975,
              "rmse": 0.029363775358247444,
              "mape": 1.8216971298401876,
              "confidence": 0.6178183468302424
            }
          },
          "dirhit": 75.0,
          "rmse": 0.0417997718537734,
          "mape": 2544226.2052100217,
          "nrmse": 1.0100502828338516,
          "mask_count": 16,
          "mask_pct": 55.172413793103445,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.002159876633613833,
              "lightgbm": -0.02038163272089366,
              "catboost": -0.008840396841518975
            },
            "ensemble_weights": {
              "xgboost": 0.2597594225232971,
              "lightgbm": 0.19527839426877525,
              "catboost": 0.5449621832079277
            },
            "source": "model"
          }
        },
        {
          "split_index": 4,
          "train_days": 544,
          "test_days": 30,
          "train_end_idx": 544,
          "test_end_idx": 574,
          "train_start": "2023-08-21T00:00:00",
          "train_end": "2025-10-20T00:00:00",
          "test_start": "2025-10-21T00:00:00",
          "test_end": "2025-12-02T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.01115689939765574,
              "rmse": 0.02998837406110542,
              "mape": 1.7811173740544373,
              "confidence": 0.6159373692918608
            },
            "lightgbm": {
              "raw_r2": -0.01893301224457093,
              "rmse": 0.03009953975425868,
              "mape": 1.8927774903014505,
              "confidence": 0.6096284051824936
            },
            "catboost": {
              "raw_r2": -0.00838211487237391,
              "rmse": 0.02994408673647885,
              "mape": 1.823485050460312,
              "confidence": 0.618190528371296
            }
          },
          "dirhit": 57.14285714285714,
          "rmse": 0.03326635777419658,
          "mape": 107.64646426288293,
          "nrmse": 1.030246042830008,
          "mask_count": 7,
          "mask_pct": 24.137931034482758,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0,
          "ensemble_debug": {
            "historical_r2": {
              "xgboost": -0.01115689939765574,
              "lightgbm": -0.01893301224457093,
              "catboost": -0.00838211487237391
            },
            "ensemble_weights": {
              "xgboost": 0.258976002078437,
              "lightgbm": 0.1957089333648515,
              "catboost": 0.5453150645567115
            },
            "source": "model"
          }
        }
      ],
      "avg_dirhit": 39.285714285714285,
      "avg_nrmse": 1.0690374552004593,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.001424374928368888,
          "rmse": 0.02919669859836558,
          "mape": 1.7744595020892975,
          "confidence": 0.623842983708925
        },
        "lightgbm": {
          "raw_r2": -0.012956700647004365,
          "rmse": 0.029356635531571675,
          "mape": 1.9163519989230684,
          "confidence": 0.6144793368659238
        },
        "catboost": {
          "raw_r2": 0.0027493588728566176,
          "rmse": 0.02916196114603087,
          "mape": 1.7947537724057305,
          "confidence": 0.6272316113510673
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 5,
    "min_mask_pct": 2.5,
    "best_trial_number": 369,
    "best_trial_seed": 411,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "symbol_specs": {
      "EYGYO_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 454,
            "test_end_idx": 484,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-06-13T00:00:00",
            "test_start": "2025-06-16T00:00:00",
            "test_end": "2025-07-28T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 484,
            "test_end_idx": 514,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-07-28T00:00:00",
            "test_start": "2025-07-29T00:00:00",
            "test_end": "2025-09-08T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 514,
            "test_end_idx": 544,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-09-08T00:00:00",
            "test_start": "2025-09-09T00:00:00",
            "test_end": "2025-10-20T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 544,
            "test_end_idx": 574,
            "train_start": "2023-08-21T00:00:00",
            "train_end": "2025-10-20T00:00:00",
            "test_start": "2025-10-21T00:00:00",
            "test_end": "2025-12-02T00:00:00"
          }
        ]
      }
    }
  },
  "_created_at": "2025-12-03T04:35:27.874663",
  "_created_from": "study_database",
  "_filter_applied": {
    "min_mask_count": 5,
    "min_mask_pct": 2.5
  }
}