{
  "best_value": 59.261426978818285,
  "best_dirhit": 59.261426978818285,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.2878797470270388,
    "ml_loss_threshold": 0.008176783059001408,
    "ml_dir_penalty": 2.6520939268824764,
    "meta_stacking_alpha": 0.717663645900303,
    "ml_adaptive_k_1d": 1.255729888152111,
    "ml_pattern_weight_scale_1d": 0.8992789966228723,
    "enable_talib_patterns_short": false,
    "external_min_days": 40,
    "external_smooth_alpha": 0.37169754941688354,
    "yolo_min_conf": 0.7124731888921213,
    "smart_consensus_weight": 0.5997160973848498,
    "smart_performance_weight": 0.31942536983555836,
    "smart_sigma": 0.004125829310108426,
    "smart_weight_xgb": 1.1158505374950725,
    "smart_weight_lgbm": 1.0626485135431916,
    "smart_weight_cat": 0.9205634737080676,
    "xgb_n_estimators": 232,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.06170500814861864,
    "xgb_subsample": 0.8576892268387707,
    "xgb_colsample_bytree": 0.7025869421511454,
    "xgb_reg_alpha": 0.00016187659114298887,
    "xgb_reg_lambda": 0.1014093329219219,
    "xgb_min_child_weight": 13,
    "xgb_gamma": 0.005188577528011488,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 156,
    "lgb_n_estimators": 178,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.016214884923400112,
    "lgb_num_leaves": 32,
    "lgb_subsample": 0.5653085566905841,
    "lgb_colsample_bytree": 0.7955021907843344,
    "lgb_reg_alpha": 0.0012948001000139691,
    "lgb_reg_lambda": 0.834438530338806,
    "lgb_min_data_in_leaf": 45,
    "lgb_feature_fraction_bynode": 0.5067980069798506,
    "lgb_bagging_freq": 10,
    "lgb_min_gain_to_split": 0.22772594029396726,
    "cat_iterations": 343,
    "cat_depth": 5,
    "cat_learning_rate": 0.018597181903921935,
    "cat_l2_leaf_reg": 6.850955934220003,
    "cat_subsample": 0.7978001108742157,
    "cat_rsm": 0.7763969347791034,
    "cat_border_count": 99,
    "cat_random_strength": 1.1755674972685244,
    "cat_leaf_estimation_iterations": 17,
    "cat_bootstrap_type": "Bernoulli"
  },
  "best_trial": {
    "number": 37,
    "value": 34.99586952386577,
    "state": "1"
  },
  "best_trial_number": 37,
  "best_trial_seed": 79,
  "n_trials": 34,
  "pruned_count": 0,
  "avg_trial_time": 0.0,
  "top_k_trials": [],
  "study_name": "hpo_with_features_GIPTA_h1_c2",
  "symbols": [
    "GIPTA"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.2878797470270388,
    "ml_loss_threshold": 0.008176783059001408,
    "ml_dir_penalty": 2.6520939268824764,
    "meta_stacking_alpha": 0.717663645900303,
    "ml_adaptive_k_1d": 1.255729888152111,
    "ml_pattern_weight_scale_1d": 0.8992789966228723,
    "external_min_days": 40,
    "external_smooth_alpha": 0.37169754941688354,
    "yolo_min_conf": 0.7124731888921213,
    "smart_consensus_weight": 0.5997160973848498,
    "smart_performance_weight": 0.31942536983555836,
    "smart_sigma": 0.004125829310108426,
    "smart_weight_xgb": 1.1158505374950725,
    "smart_weight_lgbm": 1.0626485135431916,
    "smart_weight_cat": 0.9205634737080676
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 232,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.06170500814861864,
    "xgb_subsample": 0.8576892268387707,
    "xgb_colsample_bytree": 0.7025869421511454,
    "xgb_reg_alpha": 0.00016187659114298887,
    "xgb_reg_lambda": 0.1014093329219219,
    "xgb_min_child_weight": 13,
    "xgb_gamma": 0.005188577528011488,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 156,
    "lgb_n_estimators": 178,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.016214884923400112,
    "lgb_num_leaves": 32,
    "lgb_subsample": 0.5653085566905841,
    "lgb_colsample_bytree": 0.7955021907843344,
    "lgb_reg_alpha": 0.0012948001000139691,
    "lgb_reg_lambda": 0.834438530338806,
    "lgb_min_data_in_leaf": 45,
    "lgb_feature_fraction_bynode": 0.5067980069798506,
    "lgb_bagging_freq": 10,
    "lgb_min_gain_to_split": 0.22772594029396726,
    "cat_iterations": 343,
    "cat_depth": 5,
    "cat_learning_rate": 0.018597181903921935,
    "cat_l2_leaf_reg": 6.850955934220003,
    "cat_subsample": 0.7978001108742157,
    "cat_rsm": 0.7763969347791034,
    "cat_border_count": 99,
    "cat_random_strength": 1.1755674972685244,
    "cat_leaf_estimation_iterations": 17,
    "cat_bootstrap_type": "Bernoulli"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "GIPTA_1d": {
      "symbol": "GIPTA",
      "horizon": 1,
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 431,
          "test_days": 30,
          "train_end_idx": 431,
          "test_end_idx": 461,
          "train_start": "2023-09-15T00:00:00",
          "train_end": "2025-06-13T00:00:00",
          "test_start": "2025-06-16T00:00:00",
          "test_end": "2025-07-28T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.1730273014856006,
              "rmse": 0.033436189152221976,
              "mape": 1.4662857543181282,
              "confidence": 0.49257374523874536
            },
            "lightgbm": {
              "raw_r2": -0.026316185147228666,
              "rmse": 0.03122069788551547,
              "mape": 1.651154047868828,
              "confidence": 0.6036488959486037
            },
            "catboost": {
              "raw_r2": 0.0014014311661555423,
              "rmse": 0.03074933867554368,
              "mape": 1.588928660863834,
              "confidence": 0.6261386581634735
            }
          },
          "dirhit": 65.0,
          "rmse": 0.03912141071603856,
          "mape": 130.12446520736503,
          "nrmse": 1.1467730587827165,
          "mask_count": 20,
          "mask_pct": 68.96551724137932,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 2,
          "train_days": 461,
          "test_days": 30,
          "train_end_idx": 461,
          "test_end_idx": 491,
          "train_start": "2023-09-15T00:00:00",
          "train_end": "2025-07-28T00:00:00",
          "test_start": "2025-07-29T00:00:00",
          "test_end": "2025-09-08T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.05204107723297069,
              "rmse": 0.03129381954549657,
              "mape": 1.4367897629446233,
              "confidence": 0.5829535932592294
            },
            "lightgbm": {
              "raw_r2": -0.03793711240602741,
              "rmse": 0.031164967464081542,
              "mape": 1.6313409101408987,
              "confidence": 0.5942681867482228
            },
            "catboost": {
              "raw_r2": -0.00852599926927966,
              "rmse": 0.03068382240205103,
              "mape": 1.5540679123032526,
              "confidence": 0.6180736745057921
            }
          },
          "dirhit": 61.53846153846154,
          "rmse": 0.03578169581928011,
          "mape": 9604197.010103364,
          "nrmse": 1.0013179157750103,
          "mask_count": 13,
          "mask_pct": 44.827586206896555,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 3,
          "train_days": 491,
          "test_days": 30,
          "train_end_idx": 491,
          "test_end_idx": 521,
          "train_start": "2023-09-15T00:00:00",
          "train_end": "2025-09-08T00:00:00",
          "test_start": "2025-09-09T00:00:00",
          "test_end": "2025-10-20T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0677861185000439,
              "rmse": 0.032220336746698025,
              "mape": 1.4229441606465707,
              "confidence": 0.5704450269934409
            },
            "lightgbm": {
              "raw_r2": -0.02987975258310664,
              "rmse": 0.031656696512917366,
              "mape": 1.6277137420505465,
              "confidence": 0.6007677562223328
            },
            "catboost": {
              "raw_r2": -0.013231627945512728,
              "rmse": 0.031370655671192293,
              "mape": 1.6241403628943936,
              "confidence": 0.6142532218056573
            }
          },
          "dirhit": 58.333333333333336,
          "rmse": 0.058164431350407,
          "mape": 398.9244269254703,
          "nrmse": 1.0776677620735422,
          "mask_count": 24,
          "mask_pct": 82.75862068965517,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        },
        {
          "split_index": 4,
          "train_days": 521,
          "test_days": 30,
          "train_end_idx": 521,
          "test_end_idx": 551,
          "train_start": "2023-09-15T00:00:00",
          "train_end": "2025-10-20T00:00:00",
          "test_start": "2025-10-21T00:00:00",
          "test_end": "2025-12-02T00:00:00",
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.09170990137964563,
              "rmse": 0.03487759385451759,
              "mape": 1.5225582987304445,
              "confidence": 0.5517644853735607
            },
            "lightgbm": {
              "raw_r2": -0.03224657414306775,
              "rmse": 0.034043336859567765,
              "mape": 1.630927575327308,
              "confidence": 0.5988562701029847
            },
            "catboost": {
              "raw_r2": -0.019443983023307448,
              "rmse": 0.03380560591970981,
              "mape": 1.6333570358451373,
              "confidence": 0.609214195408447
            }
          },
          "dirhit": 52.17391304347826,
          "rmse": 0.059308215102652335,
          "mape": 225.86782148296112,
          "nrmse": 1.09899417090675,
          "mask_count": 23,
          "mask_pct": 79.3103448275862,
          "low_support": false,
          "min_mask_count": 0,
          "min_mask_pct": 0.0
        }
      ],
      "avg_dirhit": 59.261426978818285,
      "avg_nrmse": 1.0811882268845046,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.09614109964956521,
          "rmse": 0.03295698482473354,
          "mape": 1.4621444941599417,
          "confidence": 0.549434212716244
        },
        "lightgbm": {
          "raw_r2": -0.03159490606985761,
          "rmse": 0.032021424680520535,
          "mape": 1.6352840688468953,
          "confidence": 0.599385277255536
        },
        "catboost": {
          "raw_r2": -0.009950044767986072,
          "rmse": 0.0316523556671242,
          "mape": 1.6001234929766541,
          "confidence": 0.6169199374708425
        }
      }
    }
  },
  "evaluation_spec": {
    "horizon": 1,
    "dirhit_threshold": 0.005,
    "min_mask_count": 5,
    "min_mask_pct": 2.5,
    "best_trial_number": 37,
    "best_trial_seed": 79,
    "scoring": {
      "formula": "score = 0.7*avg_dirhit - k*avg_nrmse",
      "k": 6.0
    },
    "symbol_specs": {
      "GIPTA_1d": {
        "splits": [
          {
            "split_index": 1,
            "train_end_idx": 431,
            "test_end_idx": 461,
            "train_start": "2023-09-15T00:00:00",
            "train_end": "2025-06-13T00:00:00",
            "test_start": "2025-06-16T00:00:00",
            "test_end": "2025-07-28T00:00:00"
          },
          {
            "split_index": 2,
            "train_end_idx": 461,
            "test_end_idx": 491,
            "train_start": "2023-09-15T00:00:00",
            "train_end": "2025-07-28T00:00:00",
            "test_start": "2025-07-29T00:00:00",
            "test_end": "2025-09-08T00:00:00"
          },
          {
            "split_index": 3,
            "train_end_idx": 491,
            "test_end_idx": 521,
            "train_start": "2023-09-15T00:00:00",
            "train_end": "2025-09-08T00:00:00",
            "test_start": "2025-09-09T00:00:00",
            "test_end": "2025-10-20T00:00:00"
          },
          {
            "split_index": 4,
            "train_end_idx": 521,
            "test_end_idx": 551,
            "train_start": "2023-09-15T00:00:00",
            "train_end": "2025-10-20T00:00:00",
            "test_start": "2025-10-21T00:00:00",
            "test_end": "2025-12-02T00:00:00"
          }
        ]
      }
    }
  },
  "_created_at": "2025-12-03T04:37:42.427092",
  "_created_from": "study_database",
  "_filter_applied": {
    "min_mask_count": 5,
    "min_mask_pct": 2.5
  }
}