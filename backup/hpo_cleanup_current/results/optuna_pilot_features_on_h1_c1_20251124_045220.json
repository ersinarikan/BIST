{
  "best_value": 50.82344662515503,
  "best_dirhit": 47.24164724164724,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "model_choice": "all",
    "meta_stacking_alpha": 0.010697119213677221,
    "ml_adaptive_k_1d": 1.8980061349547532,
    "ml_pattern_weight_scale_1d": 1.7155060176270664,
    "enable_talib_patterns_short": true,
    "external_min_days": 39,
    "external_smooth_alpha": 0.28733674526963265,
    "yolo_min_conf": 0.7642681223705741,
    "smart_consensus_weight": 0.3988123511045206,
    "smart_performance_weight": 0.4968989364922687,
    "smart_sigma": 0.0012581771624410325,
    "smart_weight_xgb": 1.032333396525896,
    "smart_weight_lgbm": 0.7615994786537944,
    "smart_weight_cat": 1.2953579618664743,
    "xgb_n_estimators": 254,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.08714039040463485,
    "xgb_subsample": 0.6518263049906248,
    "xgb_colsample_bytree": 0.6324639830153979,
    "xgb_reg_alpha": 3.4410140367948285e-06,
    "xgb_reg_lambda": 0.819693900894489,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.00011255509259218079,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 483,
    "lgb_n_estimators": 436,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.062228799486277055,
    "lgb_num_leaves": 7,
    "lgb_subsample": 0.6244050376988419,
    "lgb_colsample_bytree": 0.6721177553562147,
    "lgb_reg_alpha": 0.5613381571905942,
    "lgb_reg_lambda": 0.035557807876737894,
    "lgb_min_data_in_leaf": 82,
    "lgb_feature_fraction_bynode": 0.5141106498575178,
    "lgb_bagging_freq": 2,
    "lgb_min_gain_to_split": 0.16140385172365534,
    "cat_iterations": 469,
    "cat_depth": 6,
    "cat_learning_rate": 0.08652865417858237,
    "cat_l2_leaf_reg": 2.2291273792040838,
    "cat_subsample": 0.5996375519245529,
    "cat_rsm": 0.7969295390527615,
    "cat_border_count": 76,
    "cat_random_strength": 0.46352928081448547,
    "cat_leaf_estimation_iterations": 15,
    "cat_bootstrap_type": "Bayesian"
  },
  "best_trial": {
    "number": 248,
    "value": 50.82344662515503,
    "state": "1"
  },
  "n_trials": 1371,
  "pruned_count": 0,
  "avg_trial_time": 190.58293295328465,
  "top_k_trials": [
    {
      "number": 248,
      "value": 50.82344662515503,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "meta_stacking_alpha": 0.010697119213677221,
        "ml_adaptive_k_1d": 1.8980061349547532,
        "ml_pattern_weight_scale_1d": 1.7155060176270664,
        "enable_talib_patterns_short": true,
        "external_min_days": 39,
        "external_smooth_alpha": 0.28733674526963265,
        "yolo_min_conf": 0.7642681223705741,
        "smart_consensus_weight": 0.3988123511045206,
        "smart_performance_weight": 0.4968989364922687,
        "smart_sigma": 0.0012581771624410325,
        "smart_weight_xgb": 1.032333396525896,
        "smart_weight_lgbm": 0.7615994786537944,
        "smart_weight_cat": 1.2953579618664743,
        "xgb_n_estimators": 254,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.08714039040463485,
        "xgb_subsample": 0.6518263049906248,
        "xgb_colsample_bytree": 0.6324639830153979,
        "xgb_reg_alpha": 3.4410140367948285e-06,
        "xgb_reg_lambda": 0.819693900894489,
        "xgb_min_child_weight": 7,
        "xgb_gamma": 0.00011255509259218079,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 483,
        "lgb_n_estimators": 436,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.062228799486277055,
        "lgb_num_leaves": 7,
        "lgb_subsample": 0.6244050376988419,
        "lgb_colsample_bytree": 0.6721177553562147,
        "lgb_reg_alpha": 0.5613381571905942,
        "lgb_reg_lambda": 0.035557807876737894,
        "lgb_min_data_in_leaf": 82,
        "lgb_feature_fraction_bynode": 0.5141106498575178,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.16140385172365534,
        "cat_iterations": 469,
        "cat_depth": 6,
        "cat_learning_rate": 0.08652865417858237,
        "cat_l2_leaf_reg": 2.2291273792040838,
        "cat_subsample": 0.5996375519245529,
        "cat_rsm": 0.7969295390527615,
        "cat_border_count": 76,
        "cat_random_strength": 0.46352928081448547,
        "cat_leaf_estimation_iterations": 15,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 81.42857142857143,
        "avg_nrmse": 1.0294255624741617,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 119,
      "value": 46.220829684180515,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.5449066658746807,
        "ml_loss_threshold": 0.0031423719990717526,
        "ml_dir_penalty": 1.6746782825593234,
        "meta_stacking_alpha": 5.893029275712874,
        "ml_adaptive_k_1d": 1.8353046855686834,
        "ml_pattern_weight_scale_1d": 0.501367021888094,
        "enable_talib_patterns_short": false,
        "external_min_days": 41,
        "external_smooth_alpha": 0.34022021373689737,
        "yolo_min_conf": 0.4481126921704559,
        "smart_consensus_weight": 0.45138236032456314,
        "smart_performance_weight": 0.2922467488155773,
        "smart_sigma": 0.0013529907358768617,
        "smart_weight_xgb": 1.2575449064041262,
        "smart_weight_lgbm": 0.7328355704416416,
        "smart_weight_cat": 1.0995910840220273,
        "fingpt_confidence_threshold": 0.3726621880418498,
        "xgb_n_estimators": 161,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.03873089084074613,
        "xgb_subsample": 0.7492706478383132,
        "xgb_colsample_bytree": 0.5125414818528714,
        "xgb_reg_alpha": 0.002197696802216016,
        "xgb_reg_lambda": 0.19979449539134192,
        "xgb_min_child_weight": 6,
        "xgb_gamma": 0.0005380480104082729,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 286,
        "lgb_n_estimators": 469,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.024602147810342426,
        "lgb_num_leaves": 58,
        "lgb_subsample": 0.7127763679654767,
        "lgb_colsample_bytree": 0.7752826742164832,
        "lgb_reg_alpha": 0.8405018587185596,
        "lgb_reg_lambda": 0.0022604682352233563,
        "lgb_min_data_in_leaf": 27,
        "lgb_feature_fraction_bynode": 0.6174041029593542,
        "lgb_bagging_freq": 8,
        "lgb_min_gain_to_split": 0.1819649677931024,
        "cat_iterations": 569,
        "cat_depth": 7,
        "cat_learning_rate": 0.14260844350115887,
        "cat_l2_leaf_reg": 9.420383129086774,
        "cat_subsample": 0.7120293962504616,
        "cat_rsm": 0.6733055649116437,
        "cat_border_count": 231,
        "cat_random_strength": 0.23101965376178332,
        "cat_leaf_estimation_iterations": 12,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 75.0,
        "avg_nrmse": 1.0465283859699142,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1226,
      "value": 43.77012592062294,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "meta_stacking_alpha": 0.3324332438207457,
        "ml_adaptive_k_1d": 1.7738775431454472,
        "ml_pattern_weight_scale_1d": 1.8535335893221268,
        "enable_talib_patterns_short": true,
        "external_min_days": 40,
        "external_smooth_alpha": 0.30835043173600374,
        "yolo_min_conf": 0.4259430552403536,
        "smart_consensus_weight": 0.7420977911966251,
        "smart_performance_weight": 0.5054455036298137,
        "smart_sigma": 0.001493820790152235,
        "smart_weight_xgb": 1.1320377733377105,
        "smart_weight_lgbm": 0.7073665087641268,
        "smart_weight_cat": 1.1695126370617581,
        "xgb_n_estimators": 276,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.08409408045630291,
        "xgb_subsample": 0.560437350474685,
        "xgb_colsample_bytree": 0.5070952656739639,
        "xgb_reg_alpha": 6.327697204998608e-06,
        "xgb_reg_lambda": 0.9374498614154586,
        "xgb_min_child_weight": 7,
        "xgb_gamma": 0.000228385753243855,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 468,
        "lgb_n_estimators": 570,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.08410126082232504,
        "lgb_num_leaves": 13,
        "lgb_subsample": 0.7374332889029162,
        "lgb_colsample_bytree": 0.5540669584977705,
        "lgb_reg_alpha": 0.5448192408242442,
        "lgb_reg_lambda": 0.0050976178351372,
        "lgb_min_data_in_leaf": 86,
        "lgb_feature_fraction_bynode": 0.536928299839348,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.06417006939633568,
        "cat_iterations": 573,
        "cat_depth": 8,
        "cat_learning_rate": 0.13768974941532885,
        "cat_l2_leaf_reg": 6.15967111271242,
        "cat_subsample": 0.5381279860542996,
        "cat_rsm": 0.6462514922786744,
        "cat_border_count": 72,
        "cat_random_strength": 0.2521394050734615,
        "cat_leaf_estimation_iterations": 11,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 71.875,
        "avg_nrmse": 1.0903956798961774,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_ALARK_h1_c1",
  "symbols": [
    "ALARK"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "meta_stacking_alpha": 0.010697119213677221,
    "ml_adaptive_k_1d": 1.8980061349547532,
    "ml_pattern_weight_scale_1d": 1.7155060176270664,
    "external_min_days": 39,
    "external_smooth_alpha": 0.28733674526963265,
    "yolo_min_conf": 0.7642681223705741,
    "smart_consensus_weight": 0.3988123511045206,
    "smart_performance_weight": 0.4968989364922687,
    "smart_sigma": 0.0012581771624410325,
    "smart_weight_xgb": 1.032333396525896,
    "smart_weight_lgbm": 0.7615994786537944,
    "smart_weight_cat": 1.2953579618664743
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 254,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.08714039040463485,
    "xgb_subsample": 0.6518263049906248,
    "xgb_colsample_bytree": 0.6324639830153979,
    "xgb_reg_alpha": 3.4410140367948285e-06,
    "xgb_reg_lambda": 0.819693900894489,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.00011255509259218079,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 483,
    "lgb_n_estimators": 436,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.062228799486277055,
    "lgb_num_leaves": 7,
    "lgb_subsample": 0.6244050376988419,
    "lgb_colsample_bytree": 0.6721177553562147,
    "lgb_reg_alpha": 0.5613381571905942,
    "lgb_reg_lambda": 0.035557807876737894,
    "lgb_min_data_in_leaf": 82,
    "lgb_feature_fraction_bynode": 0.5141106498575178,
    "lgb_bagging_freq": 2,
    "lgb_min_gain_to_split": 0.16140385172365534,
    "cat_iterations": 469,
    "cat_depth": 6,
    "cat_learning_rate": 0.08652865417858237,
    "cat_l2_leaf_reg": 2.2291273792040838,
    "cat_subsample": 0.5996375519245529,
    "cat_rsm": 0.7969295390527615,
    "cat_border_count": 76,
    "cat_random_strength": 0.46352928081448547,
    "cat_leaf_estimation_iterations": 15,
    "cat_bootstrap_type": "Bayesian"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "ALARK_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.011418096726193353,
              "rmse": 0.023429787095003474,
              "mape": 1.6429662184728293,
              "confidence": 0.6342746846272056
            },
            "lightgbm": {
              "raw_r2": -0.007816424541618275,
              "rmse": 0.023597537211330552,
              "mape": 1.7749968174239041,
              "confidence": 0.6186499632997151
            },
            "catboost": {
              "raw_r2": 0.02206098415883388,
              "rmse": 0.023281014495231324,
              "mape": 1.6891226550797882,
              "confidence": 0.6429063974529692
            }
          },
          "dirhit": 33.33333333333333,
          "rmse": 0.029729017938691826,
          "mape": 186.68169569575142,
          "nrmse": 1.2861276247792113,
          "mask_count": 18,
          "mask_pct": 62.06896551724138
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.029054723203864413,
              "rmse": 0.022839859030668423,
              "mape": 1.5879779065650081,
              "confidence": 0.6485655324255623
            },
            "lightgbm": {
              "raw_r2": -0.0005219257131268881,
              "rmse": 0.023200223265851385,
              "mape": 1.8023417717719878,
              "confidence": 0.6245759355987466
            },
            "catboost": {
              "raw_r2": 0.037394318356362165,
              "rmse": 0.022729403834103653,
              "mape": 1.6909923866999657,
              "confidence": 0.655294680638908
            }
          },
          "dirhit": 38.46153846153847,
          "rmse": 0.019577308018704467,
          "mape": 1129741.9586483478,
          "nrmse": 1.1434365105631388,
          "mask_count": 13,
          "mask_pct": 44.827586206896555
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.029592000665678058,
              "rmse": 0.022689143384326045,
              "mape": 1.590175780491502,
              "confidence": 0.6489997326704544
            },
            "lightgbm": {
              "raw_r2": -0.002694813732032545,
              "rmse": 0.023045712673016507,
              "mape": 1.8221511349265178,
              "confidence": 0.6228104969680757
            },
            "catboost": {
              "raw_r2": 0.0012642500084248942,
              "rmse": 0.023002379863265927,
              "mape": 1.6991867335760062,
              "confidence": 0.6260271997114264
            }
          },
          "dirhit": 72.72727272727273,
          "rmse": 0.020785932754588444,
          "mape": 6213441.471222124,
          "nrmse": 1.0331312202655474,
          "mask_count": 11,
          "mask_pct": 37.93103448275862
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.011068611718745847,
              "rmse": 0.022591199224325568,
              "mape": 1.6755378745964973,
              "confidence": 0.6339909523073307
            },
            "lightgbm": {
              "raw_r2": -0.003953488375535589,
              "rmse": 0.02276168245845327,
              "mape": 1.849547441153801,
              "confidence": 0.6217878952888265
            },
            "catboost": {
              "raw_r2": -0.002720748018245067,
              "rmse": 0.02275359128761794,
              "mape": 1.6913139904975412,
              "confidence": 0.6227894263261224
            }
          },
          "dirhit": 44.44444444444444,
          "rmse": 0.01686958127644835,
          "mape": 558411.1410874475,
          "nrmse": 1.1817960342085905,
          "mask_count": 9,
          "mask_pct": 31.03448275862069
        }
      ],
      "avg_dirhit": 47.24164724164724,
      "avg_nrmse": 1.1611228474541218,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": 0.020283358078620417,
          "rmse": 0.02288749718358088,
          "mape": 1.6241644450314592,
          "confidence": 0.6414577255076382
        },
        "lightgbm": {
          "raw_r2": -0.0037466630905783243,
          "rmse": 0.02315128890216293,
          "mape": 1.8122592913190527,
          "confidence": 0.6219560727888409
        },
        "catboost": {
          "raw_r2": 0.014499701126343967,
          "rmse": 0.02294159737005471,
          "mape": 1.6926539414633253,
          "confidence": 0.6367544260323565
        }
      }
    }
  }
}