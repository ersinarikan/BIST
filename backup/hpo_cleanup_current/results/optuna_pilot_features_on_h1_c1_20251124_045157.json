{
  "best_value": 50.66730653984772,
  "best_dirhit": 46.18384195783576,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.42519936065652025,
    "ml_loss_threshold": 0.0021431483655515327,
    "ml_dir_penalty": 3.485274924667776,
    "meta_stacking_alpha": 1.352037737738716,
    "ml_adaptive_k_1d": 1.044763646289014,
    "ml_pattern_weight_scale_1d": 1.3072934095470967,
    "enable_talib_patterns_short": false,
    "external_min_days": 24,
    "external_smooth_alpha": 0.21872914271620972,
    "yolo_min_conf": 0.7226689561439273,
    "smart_consensus_weight": 0.36914218556985656,
    "smart_performance_weight": 0.5346726919276763,
    "smart_sigma": 0.002029516192055064,
    "smart_weight_xgb": 0.7134088257735247,
    "smart_weight_lgbm": 1.0250936790964422,
    "smart_weight_cat": 0.6357161839749778,
    "xgb_n_estimators": 480,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.12924939379656117,
    "xgb_subsample": 0.6095287891316138,
    "xgb_colsample_bytree": 0.8885815458943536,
    "xgb_reg_alpha": 0.01737896365991889,
    "xgb_reg_lambda": 0.8345923671739265,
    "xgb_min_child_weight": 11,
    "xgb_gamma": 0.28314597733203056,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 263,
    "lgb_n_estimators": 137,
    "lgb_max_depth": 2,
    "lgb_learning_rate": 0.10449743609784087,
    "lgb_num_leaves": 39,
    "lgb_subsample": 0.5488985386701961,
    "lgb_colsample_bytree": 0.5576079092073261,
    "lgb_reg_alpha": 0.09711268770427146,
    "lgb_reg_lambda": 0.0019518473397077498,
    "lgb_min_data_in_leaf": 62,
    "lgb_feature_fraction_bynode": 0.7866934284435169,
    "lgb_bagging_freq": 2,
    "lgb_min_gain_to_split": 0.47393689377687054,
    "cat_iterations": 150,
    "cat_depth": 3,
    "cat_learning_rate": 0.0382910115050207,
    "cat_l2_leaf_reg": 1.8092146313882835,
    "cat_subsample": 0.8073815806411665,
    "cat_rsm": 0.6083540717060268,
    "cat_border_count": 117,
    "cat_random_strength": 0.22214769300765053,
    "cat_leaf_estimation_iterations": 3,
    "cat_bootstrap_type": "Bayesian"
  },
  "best_trial": {
    "number": 1016,
    "value": 50.66730653984772,
    "state": "1"
  },
  "n_trials": 1385,
  "pruned_count": 0,
  "avg_trial_time": 188.6250432434971,
  "top_k_trials": [
    {
      "number": 1016,
      "value": 50.66730653984772,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.42519936065652025,
        "ml_loss_threshold": 0.0021431483655515327,
        "ml_dir_penalty": 3.485274924667776,
        "meta_stacking_alpha": 1.352037737738716,
        "ml_adaptive_k_1d": 1.044763646289014,
        "ml_pattern_weight_scale_1d": 1.3072934095470967,
        "enable_talib_patterns_short": false,
        "external_min_days": 24,
        "external_smooth_alpha": 0.21872914271620972,
        "yolo_min_conf": 0.7226689561439273,
        "smart_consensus_weight": 0.36914218556985656,
        "smart_performance_weight": 0.5346726919276763,
        "smart_sigma": 0.002029516192055064,
        "smart_weight_xgb": 0.7134088257735247,
        "smart_weight_lgbm": 1.0250936790964422,
        "smart_weight_cat": 0.6357161839749778,
        "xgb_n_estimators": 480,
        "xgb_max_depth": 5,
        "xgb_learning_rate": 0.12924939379656117,
        "xgb_subsample": 0.6095287891316138,
        "xgb_colsample_bytree": 0.8885815458943536,
        "xgb_reg_alpha": 0.01737896365991889,
        "xgb_reg_lambda": 0.8345923671739265,
        "xgb_min_child_weight": 11,
        "xgb_gamma": 0.28314597733203056,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 263,
        "lgb_n_estimators": 137,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.10449743609784087,
        "lgb_num_leaves": 39,
        "lgb_subsample": 0.5488985386701961,
        "lgb_colsample_bytree": 0.5576079092073261,
        "lgb_reg_alpha": 0.09711268770427146,
        "lgb_reg_lambda": 0.0019518473397077498,
        "lgb_min_data_in_leaf": 62,
        "lgb_feature_fraction_bynode": 0.7866934284435169,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.47393689377687054,
        "cat_iterations": 150,
        "cat_depth": 3,
        "cat_learning_rate": 0.0382910115050207,
        "cat_l2_leaf_reg": 1.8092146313882835,
        "cat_subsample": 0.8073815806411665,
        "cat_rsm": 0.6083540717060268,
        "cat_border_count": 117,
        "cat_random_strength": 0.22214769300765053,
        "cat_leaf_estimation_iterations": 3,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 81.51515151515152,
        "avg_nrmse": 1.0655499201263887,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 872,
      "value": 49.37404091193754,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": true,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.7439736157028335,
        "ml_loss_threshold": 0.0023528926136064158,
        "ml_dir_penalty": 3.857286549602749,
        "meta_stacking_alpha": 1.2360304799943027,
        "ml_adaptive_k_1d": 1.1855575421791642,
        "ml_pattern_weight_scale_1d": 1.330976908675689,
        "enable_talib_patterns_short": false,
        "external_min_days": 28,
        "external_smooth_alpha": 0.20280912304969095,
        "regime_scale_low": 0.911653601570841,
        "regime_scale_high": 1.190436984222069,
        "yolo_min_conf": 0.6937414710274864,
        "smart_consensus_weight": 0.30614725810104815,
        "smart_performance_weight": 0.5076032726441362,
        "smart_sigma": 0.0011383063523828826,
        "smart_weight_xgb": 0.7798830078181099,
        "smart_weight_lgbm": 1.1074033760539472,
        "smart_weight_cat": 0.6934111001679535,
        "xgb_n_estimators": 464,
        "xgb_max_depth": 5,
        "xgb_learning_rate": 0.11466967914768172,
        "xgb_subsample": 0.5236153806848406,
        "xgb_colsample_bytree": 0.8757394938806097,
        "xgb_reg_alpha": 0.03861536651032413,
        "xgb_reg_lambda": 0.22776006185786266,
        "xgb_min_child_weight": 12,
        "xgb_gamma": 0.4458454091959779,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 256,
        "lgb_n_estimators": 131,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.13578773883118686,
        "lgb_num_leaves": 47,
        "lgb_subsample": 0.5151653932231345,
        "lgb_colsample_bytree": 0.5253532307334523,
        "lgb_reg_alpha": 0.42028335678353146,
        "lgb_reg_lambda": 0.00484761639159188,
        "lgb_min_data_in_leaf": 63,
        "lgb_feature_fraction_bynode": 0.8243977181099086,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.4202623625283887,
        "cat_iterations": 133,
        "cat_depth": 4,
        "cat_learning_rate": 0.035932924685327744,
        "cat_l2_leaf_reg": 1.0004989558263846,
        "cat_subsample": 0.7422763700721339,
        "cat_rsm": 0.5826772404604849,
        "cat_border_count": 134,
        "cat_random_strength": 0.28087535178925843,
        "cat_leaf_estimation_iterations": 2,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 80.0,
        "avg_nrmse": 1.104326514677076,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1065,
      "value": 48.67890432451722,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.7456490867110077,
        "ml_loss_threshold": 0.00203989988293852,
        "ml_dir_penalty": 3.933546134923012,
        "meta_stacking_alpha": 0.9395970221305606,
        "ml_adaptive_k_1d": 1.0930617242263132,
        "ml_pattern_weight_scale_1d": 1.2650270808423696,
        "enable_talib_patterns_short": false,
        "external_min_days": 27,
        "external_smooth_alpha": 0.1829115398928399,
        "yolo_min_conf": 0.7388265412980775,
        "xgb_n_estimators": 465,
        "xgb_max_depth": 6,
        "xgb_learning_rate": 0.1403165180942851,
        "xgb_subsample": 0.6333828756059992,
        "xgb_colsample_bytree": 0.8718061973463843,
        "xgb_reg_alpha": 0.010860747151033015,
        "xgb_reg_lambda": 0.45303333696482506,
        "xgb_min_child_weight": 11,
        "xgb_gamma": 0.17586311235282587,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 264,
        "lgb_n_estimators": 130,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.09361269924916087,
        "lgb_num_leaves": 12,
        "lgb_subsample": 0.5313951615778794,
        "lgb_colsample_bytree": 0.5799823506619964,
        "lgb_reg_alpha": 0.26649088915331964,
        "lgb_reg_lambda": 0.01946945973107957,
        "lgb_min_data_in_leaf": 67,
        "lgb_feature_fraction_bynode": 0.8305707899537382,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.4845488624347509,
        "cat_iterations": 155,
        "cat_depth": 3,
        "cat_learning_rate": 0.0372526846350624,
        "cat_l2_leaf_reg": 1.1507390304656873,
        "cat_subsample": 0.7971426008648448,
        "cat_rsm": 0.5821501189100361,
        "cat_border_count": 112,
        "cat_random_strength": 0.14937554795413857,
        "cat_leaf_estimation_iterations": 5,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 78.57142857142857,
        "avg_nrmse": 1.053515945913796,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_ALBRK_h1_c1",
  "symbols": [
    "ALBRK"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.42519936065652025,
    "ml_loss_threshold": 0.0021431483655515327,
    "ml_dir_penalty": 3.485274924667776,
    "meta_stacking_alpha": 1.352037737738716,
    "ml_adaptive_k_1d": 1.044763646289014,
    "ml_pattern_weight_scale_1d": 1.3072934095470967,
    "external_min_days": 24,
    "external_smooth_alpha": 0.21872914271620972,
    "yolo_min_conf": 0.7226689561439273,
    "smart_consensus_weight": 0.36914218556985656,
    "smart_performance_weight": 0.5346726919276763,
    "smart_sigma": 0.002029516192055064,
    "smart_weight_xgb": 0.7134088257735247,
    "smart_weight_lgbm": 1.0250936790964422,
    "smart_weight_cat": 0.6357161839749778
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 480,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.12924939379656117,
    "xgb_subsample": 0.6095287891316138,
    "xgb_colsample_bytree": 0.8885815458943536,
    "xgb_reg_alpha": 0.01737896365991889,
    "xgb_reg_lambda": 0.8345923671739265,
    "xgb_min_child_weight": 11,
    "xgb_gamma": 0.28314597733203056,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 263,
    "lgb_n_estimators": 137,
    "lgb_max_depth": 2,
    "lgb_learning_rate": 0.10449743609784087,
    "lgb_num_leaves": 39,
    "lgb_subsample": 0.5488985386701961,
    "lgb_colsample_bytree": 0.5576079092073261,
    "lgb_reg_alpha": 0.09711268770427146,
    "lgb_reg_lambda": 0.0019518473397077498,
    "lgb_min_data_in_leaf": 62,
    "lgb_feature_fraction_bynode": 0.7866934284435169,
    "lgb_bagging_freq": 2,
    "lgb_min_gain_to_split": 0.47393689377687054,
    "cat_iterations": 150,
    "cat_depth": 3,
    "cat_learning_rate": 0.0382910115050207,
    "cat_l2_leaf_reg": 1.8092146313882835,
    "cat_subsample": 0.8073815806411665,
    "cat_rsm": 0.6083540717060268,
    "cat_border_count": 117,
    "cat_random_strength": 0.22214769300765053,
    "cat_leaf_estimation_iterations": 3,
    "cat_bootstrap_type": "Bayesian"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "ALBRK_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.011269207522327148,
              "rmse": 0.024035752570843734,
              "mape": 1.7679617833280756,
              "confidence": 0.6158461906107444
            },
            "lightgbm": {
              "raw_r2": -0.009508870047312786,
              "rmse": 0.0240139501476296,
              "mape": 1.7691061550680274,
              "confidence": 0.6172754981124093
            },
            "catboost": {
              "raw_r2": 0.011491551783278986,
              "rmse": 0.02376594719913825,
              "mape": 1.721058088107364,
              "confidence": 0.6343343179433865
            }
          },
          "dirhit": 42.857142857142854,
          "rmse": 0.038831259241605146,
          "mape": 10162470.998794133,
          "nrmse": 1.3525413575477645,
          "mask_count": 21,
          "mask_pct": 72.41379310344827
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.002083276121330154,
              "rmse": 0.0245812895867315,
              "mape": 1.7296325717176833,
              "confidence": 0.6233073534558764
            },
            "lightgbm": {
              "raw_r2": -0.0015290646924410733,
              "rmse": 0.024575080535912116,
              "mape": 1.7085140766510618,
              "confidence": 0.6237576409888099
            },
            "catboost": {
              "raw_r2": 0.025903188524404208,
              "rmse": 0.024202587182587464,
              "mape": 1.564553730372665,
              "confidence": 0.6460169700006351
            }
          },
          "dirhit": 47.368421052631575,
          "rmse": 0.02776978219447127,
          "mape": 8895950.295100318,
          "nrmse": 1.6014483273095725,
          "mask_count": 19,
          "mask_pct": 65.51724137931035
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0002517653426593232,
              "rmse": 0.02428495395331469,
              "mape": 1.7026862850077422,
              "confidence": 0.6247954406861022
            },
            "lightgbm": {
              "raw_r2": -0.0010043400042543116,
              "rmse": 0.02429346821025454,
              "mape": 1.7027418621417434,
              "confidence": 0.6241839754613823
            },
            "catboost": {
              "raw_r2": 0.01982902081405724,
              "rmse": 0.02403126095501573,
              "mape": 1.6681616721946873,
              "confidence": 0.6410978950453737
            }
          },
          "dirhit": 41.17647058823529,
          "rmse": 0.030428383785434436,
          "mape": 294.99032982214754,
          "nrmse": 1.2600099327852539,
          "mask_count": 17,
          "mask_pct": 58.620689655172406
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0011455141554997568,
              "rmse": 0.02434986792069027,
              "mape": 1.6855373752894858,
              "confidence": 0.6240692722930372
            },
            "lightgbm": {
              "raw_r2": -0.0020479089584558205,
              "rmse": 0.024361578080242512,
              "mape": 1.6832749715340414,
              "confidence": 0.623336088509417
            },
            "catboost": {
              "raw_r2": 0.018414032363177363,
              "rmse": 0.02412064004296169,
              "mape": 1.6544085745637374,
              "confidence": 0.6399508413696731
            }
          },
          "dirhit": 53.333333333333336,
          "rmse": 0.027452730313686072,
          "mape": 21815363.636929214,
          "nrmse": 1.3815781078459937,
          "mask_count": 15,
          "mask_pct": 51.724137931034484
        }
      ],
      "avg_dirhit": 46.18384195783576,
      "avg_nrmse": 1.398894431372146,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.003687440785454096,
          "rmse": 0.024312966007895048,
          "mape": 1.7214545038357467,
          "confidence": 0.62200456426144
        },
        "lightgbm": {
          "raw_r2": -0.003522545925615998,
          "rmse": 0.02431101924350969,
          "mape": 1.7159092663487185,
          "confidence": 0.6221383007680046
        },
        "catboost": {
          "raw_r2": 0.01890944837122945,
          "rmse": 0.024030108844925784,
          "mape": 1.6520455163096133,
          "confidence": 0.6403500060897671
        }
      }
    }
  }
}