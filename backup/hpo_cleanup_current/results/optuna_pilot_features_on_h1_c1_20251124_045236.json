{
  "best_value": 43.11198531606682,
  "best_dirhit": 55.9222027972028,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.5884380049957668,
    "ml_loss_threshold": 0.0010775505068858055,
    "ml_dir_penalty": 3.653249835034126,
    "ml_adaptive_k_1d": 1.7575677159161833,
    "ml_pattern_weight_scale_1d": 1.3300089542445963,
    "enable_talib_patterns_short": true,
    "external_min_days": 59,
    "external_smooth_alpha": 0.16521170360916515,
    "smart_consensus_weight": 0.4292080745477625,
    "smart_performance_weight": 0.46700484742691173,
    "smart_sigma": 0.003188771397559961,
    "smart_weight_xgb": 0.7646233917720875,
    "smart_weight_lgbm": 1.4468465235101478,
    "smart_weight_cat": 1.4866815273297376,
    "fingpt_confidence_threshold": 0.4420829922205371,
    "xgb_n_estimators": 218,
    "xgb_max_depth": 2,
    "xgb_learning_rate": 0.1262577534622659,
    "xgb_subsample": 0.7483122070898988,
    "xgb_colsample_bytree": 0.6814509331774797,
    "xgb_reg_alpha": 2.2421252587401484e-06,
    "xgb_reg_lambda": 0.106853849375666,
    "xgb_min_child_weight": 8,
    "xgb_gamma": 0.0010389982840779033,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 217,
    "lgb_n_estimators": 518,
    "lgb_max_depth": 5,
    "lgb_learning_rate": 0.0631614552464048,
    "lgb_num_leaves": 46,
    "lgb_subsample": 0.7102721621263351,
    "lgb_colsample_bytree": 0.5146803540444025,
    "lgb_reg_alpha": 1.7520735684632436,
    "lgb_reg_lambda": 0.0005101662420097431,
    "lgb_min_data_in_leaf": 81,
    "lgb_feature_fraction_bynode": 0.8013148819442469,
    "lgb_bagging_freq": 3,
    "lgb_min_gain_to_split": 0.4745992643607861,
    "cat_iterations": 381,
    "cat_depth": 2,
    "cat_learning_rate": 0.06258797229485509,
    "cat_l2_leaf_reg": 1.8457347284354741,
    "cat_subsample": 0.7193700462377295,
    "cat_rsm": 0.563332976089357,
    "cat_border_count": 31,
    "cat_random_strength": 2.370929654333446,
    "cat_leaf_estimation_iterations": 12,
    "cat_bootstrap_type": "Bayesian"
  },
  "best_trial": {
    "number": 590,
    "value": 43.11198531606682,
    "state": "1"
  },
  "n_trials": 1378,
  "pruned_count": 0,
  "avg_trial_time": 189.63821592302108,
  "top_k_trials": [
    {
      "number": 590,
      "value": 43.11198531606682,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.5884380049957668,
        "ml_loss_threshold": 0.0010775505068858055,
        "ml_dir_penalty": 3.653249835034126,
        "ml_adaptive_k_1d": 1.7575677159161833,
        "ml_pattern_weight_scale_1d": 1.3300089542445963,
        "enable_talib_patterns_short": true,
        "external_min_days": 59,
        "external_smooth_alpha": 0.16521170360916515,
        "smart_consensus_weight": 0.4292080745477625,
        "smart_performance_weight": 0.46700484742691173,
        "smart_sigma": 0.003188771397559961,
        "smart_weight_xgb": 0.7646233917720875,
        "smart_weight_lgbm": 1.4468465235101478,
        "smart_weight_cat": 1.4866815273297376,
        "fingpt_confidence_threshold": 0.4420829922205371,
        "xgb_n_estimators": 218,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.1262577534622659,
        "xgb_subsample": 0.7483122070898988,
        "xgb_colsample_bytree": 0.6814509331774797,
        "xgb_reg_alpha": 2.2421252587401484e-06,
        "xgb_reg_lambda": 0.106853849375666,
        "xgb_min_child_weight": 8,
        "xgb_gamma": 0.0010389982840779033,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 217,
        "lgb_n_estimators": 518,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.0631614552464048,
        "lgb_num_leaves": 46,
        "lgb_subsample": 0.7102721621263351,
        "lgb_colsample_bytree": 0.5146803540444025,
        "lgb_reg_alpha": 1.7520735684632436,
        "lgb_reg_lambda": 0.0005101662420097431,
        "lgb_min_data_in_leaf": 81,
        "lgb_feature_fraction_bynode": 0.8013148819442469,
        "lgb_bagging_freq": 3,
        "lgb_min_gain_to_split": 0.4745992643607861,
        "cat_iterations": 381,
        "cat_depth": 2,
        "cat_learning_rate": 0.06258797229485509,
        "cat_l2_leaf_reg": 1.8457347284354741,
        "cat_subsample": 0.7193700462377295,
        "cat_rsm": 0.563332976089357,
        "cat_border_count": 31,
        "cat_random_strength": 2.370929654333446,
        "cat_leaf_estimation_iterations": 12,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 70.53571428571428,
        "avg_nrmse": 1.0438357806555287,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 718,
      "value": 43.07844562273966,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.5881353775822776,
        "ml_loss_threshold": 0.002817063115052102,
        "ml_dir_penalty": 3.7729231161859818,
        "n_seeds": 4,
        "meta_stacking_alpha": 1.2461892878687466,
        "ml_adaptive_k_1d": 1.514067216078445,
        "ml_pattern_weight_scale_1d": 1.3653940263114817,
        "enable_talib_patterns_short": true,
        "external_min_days": 54,
        "external_smooth_alpha": 0.30268822718818744,
        "smart_consensus_weight": 0.35939302895082825,
        "smart_performance_weight": 0.22818306426933158,
        "smart_sigma": 0.009106378479673891,
        "smart_weight_xgb": 0.7456630762640271,
        "smart_weight_lgbm": 1.2550988646422558,
        "smart_weight_cat": 1.0262757727313176,
        "fingpt_confidence_threshold": 0.48378509394623664,
        "xgb_n_estimators": 256,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.07060770666404377,
        "xgb_subsample": 0.7741173919220741,
        "xgb_colsample_bytree": 0.7169391634943669,
        "xgb_reg_alpha": 7.832629804574163e-06,
        "xgb_reg_lambda": 0.09741642613267346,
        "xgb_min_child_weight": 8,
        "xgb_gamma": 0.000944843637560068,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 196,
        "lgb_n_estimators": 536,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.08479698664496431,
        "lgb_num_leaves": 45,
        "lgb_subsample": 0.6734568495760868,
        "lgb_colsample_bytree": 0.5296180032185379,
        "lgb_reg_alpha": 1.3382886099776683,
        "lgb_reg_lambda": 0.0011262348110083694,
        "lgb_min_data_in_leaf": 68,
        "lgb_feature_fraction_bynode": 0.817393217876576,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.4870099625897103,
        "cat_iterations": 441,
        "cat_depth": 5,
        "cat_learning_rate": 0.07219869037759316,
        "cat_l2_leaf_reg": 1.3044983324697221,
        "cat_subsample": 0.7024440054836841,
        "cat_rsm": 0.8429510784860487,
        "cat_border_count": 54,
        "cat_random_strength": 1.7201528410307578,
        "cat_leaf_estimation_iterations": 12,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 70.55555555555556,
        "avg_nrmse": 1.0517405443582049,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1124,
      "value": 43.052844649454514,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.5504980290512367,
        "ml_loss_threshold": 0.005837526073046231,
        "ml_dir_penalty": 3.5534635581476843,
        "n_seeds": 3,
        "ml_adaptive_k_1d": 1.5981563055888115,
        "ml_pattern_weight_scale_1d": 1.6415160112761726,
        "enable_talib_patterns_short": false,
        "external_min_days": 58,
        "external_smooth_alpha": 0.2620255730288992,
        "smart_consensus_weight": 0.310177261728763,
        "smart_performance_weight": 0.4191328393914388,
        "smart_sigma": 0.00496519930711361,
        "smart_weight_xgb": 0.7543128778972704,
        "smart_weight_lgbm": 1.353587845929244,
        "smart_weight_cat": 0.9754978720514351,
        "fingpt_confidence_threshold": 0.48212511615257203,
        "xgb_n_estimators": 228,
        "xgb_max_depth": 2,
        "xgb_learning_rate": 0.11873426417957751,
        "xgb_subsample": 0.7796319529795483,
        "xgb_colsample_bytree": 0.6259890697557039,
        "xgb_reg_alpha": 1.2364570121118542e-05,
        "xgb_reg_lambda": 0.42501325974872284,
        "xgb_min_child_weight": 7,
        "xgb_gamma": 0.0010503180281310788,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 213,
        "lgb_n_estimators": 450,
        "lgb_max_depth": 3,
        "lgb_learning_rate": 0.04911286002530885,
        "lgb_num_leaves": 52,
        "lgb_subsample": 0.7226256113047044,
        "lgb_colsample_bytree": 0.5488923765425591,
        "lgb_reg_alpha": 2.3016427171660445,
        "lgb_reg_lambda": 0.0007783104098283122,
        "lgb_min_data_in_leaf": 72,
        "lgb_feature_fraction_bynode": 0.8353466548362487,
        "lgb_bagging_freq": 4,
        "lgb_min_gain_to_split": 0.5019987273469066,
        "cat_iterations": 519,
        "cat_depth": 2,
        "cat_learning_rate": 0.06406588706433532,
        "cat_l2_leaf_reg": 2.683270272238439,
        "cat_subsample": 0.7149727940906896,
        "cat_rsm": 0.6001402260820388,
        "cat_border_count": 60,
        "cat_random_strength": 0.14373941789086397,
        "cat_leaf_estimation_iterations": 14,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 70.53571428571428,
        "avg_nrmse": 1.053692558424246,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_ASELS_h1_c1",
  "symbols": [
    "ASELS"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": false,
    "enable_fingpt": false,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.5884380049957668,
    "ml_loss_threshold": 0.0010775505068858055,
    "ml_dir_penalty": 3.653249835034126,
    "ml_adaptive_k_1d": 1.7575677159161833,
    "ml_pattern_weight_scale_1d": 1.3300089542445963,
    "external_min_days": 59,
    "external_smooth_alpha": 0.16521170360916515,
    "smart_consensus_weight": 0.4292080745477625,
    "smart_performance_weight": 0.46700484742691173,
    "smart_sigma": 0.003188771397559961,
    "smart_weight_xgb": 0.7646233917720875,
    "smart_weight_lgbm": 1.4468465235101478,
    "smart_weight_cat": 1.4866815273297376,
    "fingpt_confidence_threshold": 0.4420829922205371
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 218,
    "xgb_max_depth": 2,
    "xgb_learning_rate": 0.1262577534622659,
    "xgb_subsample": 0.7483122070898988,
    "xgb_colsample_bytree": 0.6814509331774797,
    "xgb_reg_alpha": 2.2421252587401484e-06,
    "xgb_reg_lambda": 0.106853849375666,
    "xgb_min_child_weight": 8,
    "xgb_gamma": 0.0010389982840779033,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 217,
    "lgb_n_estimators": 518,
    "lgb_max_depth": 5,
    "lgb_learning_rate": 0.0631614552464048,
    "lgb_num_leaves": 46,
    "lgb_subsample": 0.7102721621263351,
    "lgb_colsample_bytree": 0.5146803540444025,
    "lgb_reg_alpha": 1.7520735684632436,
    "lgb_reg_lambda": 0.0005101662420097431,
    "lgb_min_data_in_leaf": 81,
    "lgb_feature_fraction_bynode": 0.8013148819442469,
    "lgb_bagging_freq": 3,
    "lgb_min_gain_to_split": 0.4745992643607861,
    "cat_iterations": 381,
    "cat_depth": 2,
    "cat_learning_rate": 0.06258797229485509,
    "cat_l2_leaf_reg": 1.8457347284354741,
    "cat_subsample": 0.7193700462377295,
    "cat_rsm": 0.563332976089357,
    "cat_border_count": 31,
    "cat_random_strength": 2.370929654333446,
    "cat_leaf_estimation_iterations": 12,
    "cat_bootstrap_type": "Bayesian"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "0",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "ASELS_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.16884560319572683,
              "rmse": 0.027370673708850414,
              "mape": 1.44731580854401,
              "confidence": 0.4954192908640315
            },
            "lightgbm": {
              "raw_r2": -0.006496109165623117,
              "rmse": 0.02553468758152173,
              "mape": 1.6439885429240901,
              "confidence": 0.6197223752797265
            },
            "catboost": {
              "raw_r2": 0.036171310085541496,
              "rmse": 0.025061999184991336,
              "mape": 1.5495281338224807,
              "confidence": 0.6543093427974319
            }
          },
          "dirhit": 72.72727272727273,
          "rmse": 0.026227570607254783,
          "mape": 114.49352019143102,
          "nrmse": 1.0165081453525513,
          "mask_count": 11,
          "mask_pct": 37.93103448275862
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.2580142030938793,
              "rmse": 0.028545878452085137,
              "mape": 1.4606635045080492,
              "confidence": 0.4402965141240611
            },
            "lightgbm": {
              "raw_r2": -0.008716144448082996,
              "rmse": 0.025677073506665274,
              "mape": 1.621078762057171,
              "confidence": 0.6179192532934599
            },
            "catboost": {
              "raw_r2": 0.02170899988499005,
              "rmse": 0.02532730571664935,
              "mape": 1.5793627691012906,
              "confidence": 0.6426212646331704
            }
          },
          "dirhit": 50.0,
          "rmse": 0.020340668257221486,
          "mape": 114.16694122823361,
          "nrmse": 1.0511539011894229,
          "mask_count": 14,
          "mask_pct": 48.275862068965516
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.1686571299381073,
              "rmse": 0.027605901435699815,
              "mape": 1.420976203011827,
              "confidence": 0.4955481058480481
            },
            "lightgbm": {
              "raw_r2": -0.012957808574821575,
              "rmse": 0.02558728619935626,
              "mape": 1.6410341533004895,
              "confidence": 0.6144754617765028
            },
            "catboost": {
              "raw_r2": 0.009624566023560802,
              "rmse": 0.025343288461442265,
              "mape": 1.571577092469936,
              "confidence": 0.6328184511172015
            }
          },
          "dirhit": 62.5,
          "rmse": 0.02645079599675582,
          "mape": 110.39830094306535,
          "nrmse": 1.0168609876943884,
          "mask_count": 8,
          "mask_pct": 27.586206896551722
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.20510785073413365,
              "rmse": 0.027827981185262265,
              "mape": 1.434353039933464,
              "confidence": 0.4715673871369891
            },
            "lightgbm": {
              "raw_r2": -0.018411008833406628,
              "rmse": 0.025530319116409062,
              "mape": 1.6189926499822922,
              "confidence": 0.6100516100503294
            },
            "catboost": {
              "raw_r2": 0.013140773944679532,
              "rmse": 0.025159283510785373,
              "mape": 1.6016571175898102,
              "confidence": 0.6356730394816683
            }
          },
          "dirhit": 38.46153846153847,
          "rmse": 0.026802126834963875,
          "mape": 1877908.5145991808,
          "nrmse": 1.1471236551836166,
          "mask_count": 13,
          "mask_pct": 44.827586206896555
        }
      ],
      "avg_dirhit": 55.9222027972028,
      "avg_nrmse": 1.0579116723549948,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.20015619674046176,
          "rmse": 0.027837608695474407,
          "mape": 1.4408271389993375,
          "confidence": 0.4757078244932824
        },
        "lightgbm": {
          "raw_r2": -0.01164526775548358,
          "rmse": 0.025582341600988084,
          "mape": 1.6312735270660106,
          "confidence": 0.6155421751000046
        },
        "catboost": {
          "raw_r2": 0.020161412484692973,
          "rmse": 0.025222969218467083,
          "mape": 1.5755312782458795,
          "confidence": 0.6413555245073681
        }
      }
    }
  }
}