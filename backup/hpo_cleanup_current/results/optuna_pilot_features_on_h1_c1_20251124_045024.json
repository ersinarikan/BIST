{
  "best_value": 61.074545584015354,
  "best_dirhit": 56.25,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_adaptive_k_1d": 2.9657898991779166,
    "ml_pattern_weight_scale_1d": 1.9932436750506428,
    "enable_talib_patterns_short": false,
    "external_min_days": 43,
    "external_smooth_alpha": 0.1852611936981578,
    "smart_consensus_weight": 0.7999128231238541,
    "smart_performance_weight": 0.6135896136473024,
    "smart_sigma": 0.0034511072666800076,
    "smart_weight_xgb": 1.3162969461095197,
    "smart_weight_lgbm": 1.2100915641856658,
    "smart_weight_cat": 1.044021880636692,
    "xgb_n_estimators": 534,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.08029474434408722,
    "xgb_subsample": 0.6657750733212543,
    "xgb_colsample_bytree": 0.6068637006357854,
    "xgb_reg_alpha": 0.01169175740935373,
    "xgb_reg_lambda": 8.160735463939712,
    "xgb_min_child_weight": 10,
    "xgb_gamma": 0.06838963379669055,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 163,
    "lgb_n_estimators": 537,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.014629092531627669,
    "lgb_num_leaves": 42,
    "lgb_subsample": 0.792129594002183,
    "lgb_colsample_bytree": 0.5519831508428614,
    "lgb_reg_alpha": 0.0025761012528936395,
    "lgb_reg_lambda": 0.1407590749222157,
    "lgb_min_data_in_leaf": 69,
    "lgb_feature_fraction_bynode": 0.7817649755832364,
    "lgb_bagging_freq": 5,
    "lgb_min_gain_to_split": 0.8614365024824914,
    "cat_iterations": 142,
    "cat_depth": 2,
    "cat_learning_rate": 0.011214040204455721,
    "cat_l2_leaf_reg": 8.690860837260502,
    "cat_subsample": 0.867788617519664,
    "cat_rsm": 0.5590652188174217,
    "cat_border_count": 149,
    "cat_random_strength": 0.529673210105176,
    "cat_leaf_estimation_iterations": 4,
    "cat_bootstrap_type": "MVS"
  },
  "best_trial": {
    "number": 1310,
    "value": 61.074545584015354,
    "state": "1"
  },
  "n_trials": 1385,
  "pruned_count": 0,
  "avg_trial_time": 188.57066108453756,
  "top_k_trials": [
    {
      "number": 1310,
      "value": 61.074545584015354,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 2.9657898991779166,
        "ml_pattern_weight_scale_1d": 1.9932436750506428,
        "enable_talib_patterns_short": false,
        "external_min_days": 43,
        "external_smooth_alpha": 0.1852611936981578,
        "smart_consensus_weight": 0.7999128231238541,
        "smart_performance_weight": 0.6135896136473024,
        "smart_sigma": 0.0034511072666800076,
        "smart_weight_xgb": 1.3162969461095197,
        "smart_weight_lgbm": 1.2100915641856658,
        "smart_weight_cat": 1.044021880636692,
        "xgb_n_estimators": 534,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.08029474434408722,
        "xgb_subsample": 0.6657750733212543,
        "xgb_colsample_bytree": 0.6068637006357854,
        "xgb_reg_alpha": 0.01169175740935373,
        "xgb_reg_lambda": 8.160735463939712,
        "xgb_min_child_weight": 10,
        "xgb_gamma": 0.06838963379669055,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 163,
        "lgb_n_estimators": 537,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.014629092531627669,
        "lgb_num_leaves": 42,
        "lgb_subsample": 0.792129594002183,
        "lgb_colsample_bytree": 0.5519831508428614,
        "lgb_reg_alpha": 0.0025761012528936395,
        "lgb_reg_lambda": 0.1407590749222157,
        "lgb_min_data_in_leaf": 69,
        "lgb_feature_fraction_bynode": 0.7817649755832364,
        "lgb_bagging_freq": 5,
        "lgb_min_gain_to_split": 0.8614365024824914,
        "cat_iterations": 142,
        "cat_depth": 2,
        "cat_learning_rate": 0.011214040204455721,
        "cat_l2_leaf_reg": 8.690860837260502,
        "cat_subsample": 0.867788617519664,
        "cat_rsm": 0.5590652188174217,
        "cat_border_count": 149,
        "cat_random_strength": 0.529673210105176,
        "cat_leaf_estimation_iterations": 4,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 95.83333333333334,
        "avg_nrmse": 1.001464624886332,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1225,
      "value": 59.60861626948685,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 2.953620401406204,
        "ml_pattern_weight_scale_1d": 1.6858446052104505,
        "enable_talib_patterns_short": true,
        "external_min_days": 42,
        "external_smooth_alpha": 0.18782337776734082,
        "smart_consensus_weight": 0.7819377350495299,
        "smart_performance_weight": 0.5574383890570694,
        "smart_sigma": 0.0029719240594925276,
        "smart_weight_xgb": 1.465432703951896,
        "smart_weight_lgbm": 1.1139076257497509,
        "smart_weight_cat": 1.1241403026841321,
        "fingpt_confidence_threshold": 0.2822403110187911,
        "xgb_n_estimators": 478,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.014048221732964444,
        "xgb_subsample": 0.6647986861136254,
        "xgb_colsample_bytree": 0.6143814573182088,
        "xgb_reg_alpha": 0.010468530648082647,
        "xgb_reg_lambda": 16.953260474384226,
        "xgb_min_child_weight": 10,
        "xgb_gamma": 0.08263352571870612,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 317,
        "lgb_n_estimators": 491,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.014401637112078623,
        "lgb_num_leaves": 43,
        "lgb_subsample": 0.8166045463626236,
        "lgb_colsample_bytree": 0.5604414652035653,
        "lgb_reg_alpha": 0.012169627679431496,
        "lgb_reg_lambda": 0.23489078227832016,
        "lgb_min_data_in_leaf": 65,
        "lgb_feature_fraction_bynode": 0.7653540705269509,
        "lgb_bagging_freq": 5,
        "lgb_min_gain_to_split": 0.46040559040155393,
        "cat_iterations": 160,
        "cat_depth": 4,
        "cat_learning_rate": 0.01175866060164608,
        "cat_l2_leaf_reg": 8.06249879992517,
        "cat_subsample": 0.8798868222764393,
        "cat_rsm": 0.7605638221509912,
        "cat_border_count": 162,
        "cat_random_strength": 0.1061714325400442,
        "cat_leaf_estimation_iterations": 17,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 93.75,
        "avg_nrmse": 1.0027306217521912,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1274,
      "value": 59.60328791609386,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 2.9350299932321615,
        "ml_pattern_weight_scale_1d": 1.811608401248504,
        "enable_talib_patterns_short": false,
        "external_min_days": 46,
        "external_smooth_alpha": 0.1803943708775885,
        "smart_consensus_weight": 0.7764639021661197,
        "smart_performance_weight": 0.6382779289309327,
        "smart_sigma": 0.003207190192100957,
        "smart_weight_xgb": 1.4222848575199283,
        "smart_weight_lgbm": 1.145041757672399,
        "smart_weight_cat": 1.0518349868574064,
        "xgb_n_estimators": 519,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.07215960878556661,
        "xgb_subsample": 0.6750770650393113,
        "xgb_colsample_bytree": 0.607295933045819,
        "xgb_reg_alpha": 0.011521683800908318,
        "xgb_reg_lambda": 8.209153651765275,
        "xgb_min_child_weight": 10,
        "xgb_gamma": 0.05784947509562871,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 165,
        "lgb_n_estimators": 506,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.01510492845466581,
        "lgb_num_leaves": 42,
        "lgb_subsample": 0.8086058281049101,
        "lgb_colsample_bytree": 0.5409137748025178,
        "lgb_reg_alpha": 0.003795293694716434,
        "lgb_reg_lambda": 0.15131585417794643,
        "lgb_min_data_in_leaf": 68,
        "lgb_feature_fraction_bynode": 0.7926233145950655,
        "lgb_bagging_freq": 5,
        "lgb_min_gain_to_split": 0.5112835253486216,
        "cat_iterations": 167,
        "cat_depth": 4,
        "cat_learning_rate": 0.010722577618868653,
        "cat_l2_leaf_reg": 8.485744194016808,
        "cat_subsample": 0.8928647663748679,
        "cat_rsm": 0.5735504936063436,
        "cat_border_count": 158,
        "cat_random_strength": 0.47879910173761997,
        "cat_leaf_estimation_iterations": 4,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 93.75,
        "avg_nrmse": 1.0036186806510226,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_ATLAS_h1_c1",
  "symbols": [
    "ATLAS"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_adaptive_k_1d": 2.9657898991779166,
    "ml_pattern_weight_scale_1d": 1.9932436750506428,
    "external_min_days": 43,
    "external_smooth_alpha": 0.1852611936981578,
    "smart_consensus_weight": 0.7999128231238541,
    "smart_performance_weight": 0.6135896136473024,
    "smart_sigma": 0.0034511072666800076,
    "smart_weight_xgb": 1.3162969461095197,
    "smart_weight_lgbm": 1.2100915641856658,
    "smart_weight_cat": 1.044021880636692
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 534,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.08029474434408722,
    "xgb_subsample": 0.6657750733212543,
    "xgb_colsample_bytree": 0.6068637006357854,
    "xgb_reg_alpha": 0.01169175740935373,
    "xgb_reg_lambda": 8.160735463939712,
    "xgb_min_child_weight": 10,
    "xgb_gamma": 0.06838963379669055,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 163,
    "lgb_n_estimators": 537,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.014629092531627669,
    "lgb_num_leaves": 42,
    "lgb_subsample": 0.792129594002183,
    "lgb_colsample_bytree": 0.5519831508428614,
    "lgb_reg_alpha": 0.0025761012528936395,
    "lgb_reg_lambda": 0.1407590749222157,
    "lgb_min_data_in_leaf": 69,
    "lgb_feature_fraction_bynode": 0.7817649755832364,
    "lgb_bagging_freq": 5,
    "lgb_min_gain_to_split": 0.8614365024824914,
    "cat_iterations": 142,
    "cat_depth": 2,
    "cat_learning_rate": 0.011214040204455721,
    "cat_l2_leaf_reg": 8.690860837260502,
    "cat_subsample": 0.867788617519664,
    "cat_rsm": 0.5590652188174217,
    "cat_border_count": 149,
    "cat_random_strength": 0.529673210105176,
    "cat_leaf_estimation_iterations": 4,
    "cat_bootstrap_type": "MVS"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "ATLAS_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.004295527791483196,
              "rmse": 0.03215642166761414,
              "mape": 1.8395859372250478,
              "confidence": 0.6215100178259135
            },
            "lightgbm": {
              "raw_r2": -0.0068237610056644344,
              "rmse": 0.03220768328901398,
              "mape": 1.8938774858166132,
              "confidence": 0.6194562319608617
            },
            "catboost": {
              "raw_r2": 0.00017441086697770705,
              "rmse": 0.03209319344225598,
              "mape": 1.8005267062189265,
              "confidence": 0.6251417088204388
            }
          },
          "dirhit": 75.0,
          "rmse": 0.02125914716555275,
          "mape": 451277.1145781184,
          "nrmse": 1.0052055235072397,
          "mask_count": 4,
          "mask_pct": 13.793103448275861
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.0027372660915195115,
              "rmse": 0.0312918461232068,
              "mape": 1.8060688686035329,
              "confidence": 0.6272239939837296
            },
            "lightgbm": {
              "raw_r2": -0.0024673503909954744,
              "rmse": 0.0313654243883067,
              "mape": 1.848512316620938,
              "confidence": 0.6229953032327287
            },
            "catboost": {
              "raw_r2": 0.007045785509147732,
              "rmse": 0.031180493797721132,
              "mape": 1.7831497994637937,
              "confidence": 0.6307241087332928
            }
          },
          "dirhit": 50.0,
          "rmse": 0.02746009484543385,
          "mape": 1019721.3811860672,
          "nrmse": 1.0023461760178616,
          "mask_count": 2,
          "mask_pct": 6.896551724137931
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.0018200172422740597,
              "rmse": 0.031093123056808007,
              "mape": 1.7894912790022346,
              "confidence": 0.6264787538045349
            },
            "lightgbm": {
              "raw_r2": -0.00345246394059906,
              "rmse": 0.03116165855528867,
              "mape": 1.8766049131875548,
              "confidence": 0.6221949427039607
            },
            "catboost": {
              "raw_r2": 0.00586013808142094,
              "rmse": 0.031049514356029546,
              "mape": 1.8192071935998169,
              "confidence": 0.6297610215725256
            }
          },
          "dirhit": 0.0,
          "rmse": 0.033378514377936236,
          "mape": 104.05629519909041,
          "nrmse": 0.9997142223257984,
          "mask_count": 0,
          "mask_pct": 0.0
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.0005752255700092931,
              "rmse": 0.03106176963771339,
              "mape": 1.7896039337690486,
              "confidence": 0.6254673704534541
            },
            "lightgbm": {
              "raw_r2": -0.002221511652588252,
              "rmse": 0.03109834373108121,
              "mape": 1.8836662567539282,
              "confidence": 0.6231950403399041
            },
            "catboost": {
              "raw_r2": 0.0067840981617924845,
              "rmse": 0.030934462985467464,
              "mape": 1.7806992737152514,
              "confidence": 0.630511551300819
            }
          },
          "dirhit": 100.0,
          "rmse": 0.020702586297721606,
          "mape": 2912902.1527475654,
          "nrmse": 0.9793198842372833,
          "mask_count": 1,
          "mask_pct": 3.4482758620689653
        }
      ],
      "avg_dirhit": 56.25,
      "avg_nrmse": 0.9966464515220458,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": 0.00020924527807991702,
          "rmse": 0.031400790121335585,
          "mape": 1.806187504649966,
          "confidence": 0.6251700340169081
        },
        "lightgbm": {
          "raw_r2": -0.003741271747461805,
          "rmse": 0.03145827749092264,
          "mape": 1.8756652430947587,
          "confidence": 0.6219603795593638
        },
        "catboost": {
          "raw_r2": 0.0049661081548347166,
          "rmse": 0.03131441614536853,
          "mape": 1.7958957432494471,
          "confidence": 0.629034597606769
        }
      }
    }
  }
}