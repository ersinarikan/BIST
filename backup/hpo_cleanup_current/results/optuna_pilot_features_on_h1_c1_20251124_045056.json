{
  "best_value": 41.74653480938592,
  "best_dirhit": 50.53030303030303,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "model_choice": "lgbm",
    "ml_loss_mse_weight": 0.7858753001158365,
    "ml_loss_threshold": 0.008198688106468644,
    "ml_dir_penalty": 4.652416247838945,
    "n_seeds": 4,
    "meta_stacking_alpha": 5.902264290830403,
    "ml_adaptive_k_1d": 2.376137788122276,
    "ml_pattern_weight_scale_1d": 1.2021302132452563,
    "enable_talib_patterns_short": true,
    "external_min_days": 53,
    "external_smooth_alpha": 0.2857392182634245,
    "smart_consensus_weight": 0.30894026714835193,
    "smart_performance_weight": 0.6370197520413154,
    "smart_sigma": 0.002430994272842645,
    "smart_weight_xgb": 0.6894279523347387,
    "smart_weight_lgbm": 1.3306769586032783,
    "smart_weight_cat": 0.5967754222997341,
    "fingpt_confidence_threshold": 0.28062007436508385,
    "lgb_n_estimators": 598,
    "lgb_max_depth": 2,
    "lgb_learning_rate": 0.10011012750529479,
    "lgb_num_leaves": 57,
    "lgb_subsample": 0.8390378238616732,
    "lgb_colsample_bytree": 0.5708966452609803,
    "lgb_reg_alpha": 0.3381928680368674,
    "lgb_reg_lambda": 0.00036790683388723485,
    "lgb_min_data_in_leaf": 64,
    "lgb_feature_fraction_bynode": 0.7505913740989608,
    "lgb_bagging_freq": 2,
    "lgb_min_gain_to_split": 0.5068484919960867
  },
  "best_trial": {
    "number": 357,
    "value": 41.74653480938592,
    "state": "1"
  },
  "n_trials": 1371,
  "pruned_count": 0,
  "avg_trial_time": 190.53211490656932,
  "top_k_trials": [
    {
      "number": 357,
      "value": 41.74653480938592,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "lgbm",
        "ml_loss_mse_weight": 0.7858753001158365,
        "ml_loss_threshold": 0.008198688106468644,
        "ml_dir_penalty": 4.652416247838945,
        "n_seeds": 4,
        "meta_stacking_alpha": 5.902264290830403,
        "ml_adaptive_k_1d": 2.376137788122276,
        "ml_pattern_weight_scale_1d": 1.2021302132452563,
        "enable_talib_patterns_short": true,
        "external_min_days": 53,
        "external_smooth_alpha": 0.2857392182634245,
        "smart_consensus_weight": 0.30894026714835193,
        "smart_performance_weight": 0.6370197520413154,
        "smart_sigma": 0.002430994272842645,
        "smart_weight_xgb": 0.6894279523347387,
        "smart_weight_lgbm": 1.3306769586032783,
        "smart_weight_cat": 0.5967754222997341,
        "fingpt_confidence_threshold": 0.28062007436508385,
        "lgb_n_estimators": 598,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.10011012750529479,
        "lgb_num_leaves": 57,
        "lgb_subsample": 0.8390378238616732,
        "lgb_colsample_bytree": 0.5708966452609803,
        "lgb_reg_alpha": 0.3381928680368674,
        "lgb_reg_lambda": 0.00036790683388723485,
        "lgb_min_data_in_leaf": 64,
        "lgb_feature_fraction_bynode": 0.7505913740989608,
        "lgb_bagging_freq": 2,
        "lgb_min_gain_to_split": 0.5068484919960867
      },
      "attrs": {
        "avg_dirhit": 68.75,
        "avg_nrmse": 1.0630775317690138,
        "model_choice": "lgbm"
      },
      "state": "1"
    },
    {
      "number": 176,
      "value": 41.023435259476884,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "lgbm",
        "ml_loss_mse_weight": 0.5353388409696475,
        "ml_loss_threshold": 0.003635185312365764,
        "ml_dir_penalty": 4.8404491649656824,
        "n_seeds": 3,
        "ml_adaptive_k_1d": 2.200620214122715,
        "ml_pattern_weight_scale_1d": 1.3502107239895396,
        "enable_talib_patterns_short": false,
        "external_min_days": 35,
        "external_smooth_alpha": 0.31978046095375917,
        "smart_consensus_weight": 0.3196830920267858,
        "smart_performance_weight": 0.5400063162600364,
        "smart_sigma": 0.0027210907602575325,
        "smart_weight_xgb": 1.0661018421479307,
        "smart_weight_lgbm": 0.9566140279173763,
        "smart_weight_cat": 0.5647732233372817,
        "lgb_n_estimators": 155,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.013916681524739967,
        "lgb_num_leaves": 38,
        "lgb_subsample": 0.7125300899797831,
        "lgb_colsample_bytree": 0.693786589000569,
        "lgb_reg_alpha": 2.6271766531715034e-05,
        "lgb_reg_lambda": 0.00038116401793482216,
        "lgb_min_data_in_leaf": 75,
        "lgb_feature_fraction_bynode": 0.6333544093316767,
        "lgb_bagging_freq": 4,
        "lgb_min_gain_to_split": 0.5908842423388133
      },
      "attrs": {
        "avg_dirhit": 67.5,
        "avg_nrmse": 1.0377607900871861,
        "model_choice": "lgbm"
      },
      "state": "1"
    },
    {
      "number": 499,
      "value": 40.140439251845635,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "lgbm",
        "ml_loss_mse_weight": 0.23886498464896422,
        "ml_loss_threshold": 0.005858791098813874,
        "ml_dir_penalty": 2.338237578704094,
        "n_seeds": 5,
        "meta_stacking_alpha": 8.066952997457093,
        "ml_adaptive_k_1d": 1.234034532296184,
        "ml_pattern_weight_scale_1d": 1.5676476441639382,
        "enable_talib_patterns_short": true,
        "external_min_days": 53,
        "external_smooth_alpha": 0.10905152248742395,
        "regime_scale_low": 0.8852308234352613,
        "regime_scale_high": 1.1580269378606531,
        "smart_consensus_weight": 0.3103235653486998,
        "smart_performance_weight": 0.6426045307389451,
        "smart_sigma": 0.0035755740302839093,
        "smart_weight_xgb": 0.5668118522961498,
        "smart_weight_lgbm": 1.110610794006718,
        "smart_weight_cat": 0.5205871973306325,
        "fingpt_confidence_threshold": 0.39023973679038737,
        "lgb_n_estimators": 591,
        "lgb_max_depth": 2,
        "lgb_learning_rate": 0.12724972653877145,
        "lgb_num_leaves": 63,
        "lgb_subsample": 0.8673944274547667,
        "lgb_colsample_bytree": 0.5671885889102689,
        "lgb_reg_alpha": 0.13953675319760447,
        "lgb_reg_lambda": 0.28121701638610713,
        "lgb_min_data_in_leaf": 64,
        "lgb_feature_fraction_bynode": 0.6260525665269482,
        "lgb_bagging_freq": 0,
        "lgb_min_gain_to_split": 0.05887898348928222
      },
      "attrs": {
        "avg_dirhit": 66.88204887218045,
        "avg_nrmse": 1.1128324931134452,
        "model_choice": "lgbm"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_ANHYT_h1_c1",
  "symbols": [
    "ANHYT"
  ],
  "horizon": 1,
  "best_model_choice": "lgbm",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.7858753001158365,
    "ml_loss_threshold": 0.008198688106468644,
    "ml_dir_penalty": 4.652416247838945,
    "n_seeds": 4,
    "meta_stacking_alpha": 5.902264290830403,
    "ml_adaptive_k_1d": 2.376137788122276,
    "ml_pattern_weight_scale_1d": 1.2021302132452563,
    "external_min_days": 53,
    "external_smooth_alpha": 0.2857392182634245,
    "smart_consensus_weight": 0.30894026714835193,
    "smart_performance_weight": 0.6370197520413154,
    "smart_sigma": 0.002430994272842645,
    "smart_weight_xgb": 0.6894279523347387,
    "smart_weight_lgbm": 1.3306769586032783,
    "smart_weight_cat": 0.5967754222997341,
    "fingpt_confidence_threshold": 0.28062007436508385
  },
  "hyperparameters": {
    "model_choice": "lgbm",
    "lgb_n_estimators": 598,
    "lgb_max_depth": 2,
    "lgb_learning_rate": 0.10011012750529479,
    "lgb_num_leaves": 57,
    "lgb_subsample": 0.8390378238616732,
    "lgb_colsample_bytree": 0.5708966452609803,
    "lgb_reg_alpha": 0.3381928680368674,
    "lgb_reg_lambda": 0.00036790683388723485,
    "lgb_min_data_in_leaf": 64,
    "lgb_feature_fraction_bynode": 0.7505913740989608,
    "lgb_bagging_freq": 2,
    "lgb_min_gain_to_split": 0.5068484919960867
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "1",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "0",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "0"
  },
  "best_trial_metrics": {
    "ANHYT_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.02494660239739484,
              "rmse": 0.03238352470342568,
              "mape": 1.6389734535541975,
              "confidence": 0.604757124184577
            },
            "lightgbm": {
              "raw_r2": -0.06626784766511358,
              "rmse": 0.03302775442317589,
              "mape": 1.6118645147352562,
              "confidence": 0.5716446210193004
            }
          },
          "dirhit": 50.0,
          "rmse": 0.026971885221729216,
          "mape": 2884386.9324863655,
          "nrmse": 1.1798104199222905,
          "mask_count": 16,
          "mask_pct": 55.172413793103445
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0038293696947786504,
              "rmse": 0.03190426731360165,
              "mape": 1.6531035873274609,
              "confidence": 0.621888732172112
            },
            "lightgbm": {
              "raw_r2": -0.033513019603722105,
              "rmse": 0.03235931069963504,
              "mape": 1.611922301568213,
              "confidence": 0.5978342054183615
            }
          },
          "dirhit": 45.45454545454545,
          "rmse": 0.01702954996463025,
          "mape": 168.30078960371938,
          "nrmse": 1.0875268649346335,
          "mask_count": 11,
          "mask_pct": 37.93103448275862
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": 0.006823618532445989,
              "rmse": 0.030991255719492714,
              "mape": 1.6858642809553754,
              "confidence": 0.6305436523133297
            },
            "lightgbm": {
              "raw_r2": -0.01948937149035146,
              "rmse": 0.031355692228013744,
              "mape": 1.600639001410456,
              "confidence": 0.6091774044851808
            }
          },
          "dirhit": 66.66666666666666,
          "rmse": 0.02993420459623899,
          "mape": 5791264.847103542,
          "nrmse": 1.0570260059823346,
          "mask_count": 12,
          "mask_pct": 41.37931034482759
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.00836519935406077,
              "rmse": 0.0310449049572347,
              "mape": 1.6483971969436593,
              "confidence": 0.6182042662085969
            },
            "lightgbm": {
              "raw_r2": -0.02067933888650475,
              "rmse": 0.031209876898068225,
              "mape": 1.5996064952444757,
              "confidence": 0.6082129901445604
            }
          },
          "dirhit": 40.0,
          "rmse": 0.019796131968468064,
          "mape": 2240987.2892852197,
          "nrmse": 1.1331164640515201,
          "mask_count": 10,
          "mask_pct": 34.48275862068966
        }
      ],
      "avg_dirhit": 50.53030303030303,
      "avg_nrmse": 1.1143699387226946,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.007579388228447068,
          "rmse": 0.031580988173438684,
          "mape": 1.6565846296951734,
          "confidence": 0.618848443719654
        },
        "lightgbm": {
          "raw_r2": -0.03498739441142297,
          "rmse": 0.03198815856222322,
          "mape": 1.6060080782396002,
          "confidence": 0.5967173052668507
        }
      }
    }
  }
}