{
  "best_value": 59.52166337398608,
  "best_dirhit": 44.50757575757576,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "model_choice": "xgb",
    "ml_loss_mse_weight": 0.36424820300082167,
    "ml_loss_threshold": 0.0015405254421938703,
    "ml_dir_penalty": 4.810363140569025,
    "ml_adaptive_k_1d": 2.272757870111165,
    "ml_pattern_weight_scale_1d": 1.3963450284660295,
    "enable_talib_patterns_short": false,
    "external_min_days": 46,
    "external_smooth_alpha": 0.31435160506815546,
    "regime_scale_low": 0.897227866805796,
    "regime_scale_high": 1.020205798080306,
    "smart_consensus_weight": 0.3277001555400131,
    "smart_performance_weight": 0.4635443005246051,
    "smart_sigma": 0.002506413962128884,
    "smart_weight_xgb": 1.373972297498477,
    "smart_weight_lgbm": 1.069301748037458,
    "smart_weight_cat": 0.9537423967430042,
    "xgb_n_estimators": 578,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.07755081538938362,
    "xgb_subsample": 0.856931504223901,
    "xgb_colsample_bytree": 0.6801919089491227,
    "xgb_reg_alpha": 0.7834956026422768,
    "xgb_reg_lambda": 0.12289737631173767,
    "xgb_min_child_weight": 12,
    "xgb_gamma": 0.0003644148404566423,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 350
  },
  "best_trial": {
    "number": 1391,
    "value": 59.52166337398608,
    "state": "1"
  },
  "n_trials": 1500,
  "pruned_count": 0,
  "avg_trial_time": 160.60800243695797,
  "top_k_trials": [
    {
      "number": 1391,
      "value": 59.52166337398608,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "xgb",
        "ml_loss_mse_weight": 0.36424820300082167,
        "ml_loss_threshold": 0.0015405254421938703,
        "ml_dir_penalty": 4.810363140569025,
        "ml_adaptive_k_1d": 2.272757870111165,
        "ml_pattern_weight_scale_1d": 1.3963450284660295,
        "enable_talib_patterns_short": false,
        "external_min_days": 46,
        "external_smooth_alpha": 0.31435160506815546,
        "regime_scale_low": 0.897227866805796,
        "regime_scale_high": 1.020205798080306,
        "smart_consensus_weight": 0.3277001555400131,
        "smart_performance_weight": 0.4635443005246051,
        "smart_sigma": 0.002506413962128884,
        "smart_weight_xgb": 1.373972297498477,
        "smart_weight_lgbm": 1.069301748037458,
        "smart_weight_cat": 0.9537423967430042,
        "xgb_n_estimators": 578,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.07755081538938362,
        "xgb_subsample": 0.856931504223901,
        "xgb_colsample_bytree": 0.6801919089491227,
        "xgb_reg_alpha": 0.7834956026422768,
        "xgb_reg_lambda": 0.12289737631173767,
        "xgb_min_child_weight": 12,
        "xgb_gamma": 0.0003644148404566423,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 350
      },
      "attrs": {
        "avg_dirhit": 93.75,
        "avg_nrmse": 1.0172227710023196,
        "model_choice": "xgb"
      },
      "state": "1"
    },
    {
      "number": 1328,
      "value": 55.127725126981446,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "xgb",
        "ml_loss_mse_weight": 0.40428386051053006,
        "ml_loss_threshold": 0.0025515028232323206,
        "ml_dir_penalty": 4.476061561983747,
        "ml_adaptive_k_1d": 2.298473940218081,
        "ml_pattern_weight_scale_1d": 1.5230076544212026,
        "enable_talib_patterns_short": false,
        "external_min_days": 47,
        "external_smooth_alpha": 0.3657184971828033,
        "regime_scale_low": 0.8919834286273648,
        "regime_scale_high": 1.0663302125253553,
        "smart_consensus_weight": 0.32083302469906844,
        "smart_performance_weight": 0.4824890210049674,
        "smart_sigma": 0.0016262960011766327,
        "smart_weight_xgb": 1.2993927201218338,
        "smart_weight_lgbm": 1.0347491300060232,
        "smart_weight_cat": 1.362867695395081,
        "xgb_n_estimators": 550,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.08025510233016937,
        "xgb_subsample": 0.8185985425116363,
        "xgb_colsample_bytree": 0.6985264835692581,
        "xgb_reg_alpha": 0.42308233353840147,
        "xgb_reg_lambda": 0.09863409764427736,
        "xgb_min_child_weight": 12,
        "xgb_gamma": 0.00021892711994180464,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 163
      },
      "attrs": {
        "avg_dirhit": 87.5,
        "avg_nrmse": 1.0203791455030908,
        "model_choice": "xgb"
      },
      "state": "1"
    },
    {
      "number": 823,
      "value": 55.11407128342449,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "xgb",
        "ml_loss_mse_weight": 0.4215343735253459,
        "ml_loss_threshold": 0.0028873548808392977,
        "ml_dir_penalty": 4.444086433528202,
        "ml_adaptive_k_1d": 1.651256380239332,
        "ml_pattern_weight_scale_1d": 1.605340796299674,
        "enable_talib_patterns_short": false,
        "external_min_days": 49,
        "external_smooth_alpha": 0.16070220429274315,
        "regime_scale_low": 0.8212114366356847,
        "regime_scale_high": 1.0375007011474635,
        "smart_consensus_weight": 0.7239701161580425,
        "smart_performance_weight": 0.6189130988142205,
        "smart_sigma": 0.0024299505317274994,
        "smart_weight_xgb": 1.4644097255445965,
        "smart_weight_lgbm": 0.8563557217841754,
        "smart_weight_cat": 1.0627355456079222,
        "xgb_n_estimators": 565,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.09684314306384022,
        "xgb_subsample": 0.7905576165084796,
        "xgb_colsample_bytree": 0.7282317425788423,
        "xgb_reg_alpha": 0.9948448548273164,
        "xgb_reg_lambda": 0.17206046602286934,
        "xgb_min_child_weight": 12,
        "xgb_gamma": 0.0002456425302200679,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 158
      },
      "attrs": {
        "avg_dirhit": 87.5,
        "avg_nrmse": 1.0226547860959174,
        "model_choice": "xgb"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_AVPGY_h1_c1",
  "symbols": [
    "AVPGY"
  ],
  "horizon": 1,
  "best_model_choice": "xgb",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.36424820300082167,
    "ml_loss_threshold": 0.0015405254421938703,
    "ml_dir_penalty": 4.810363140569025,
    "ml_adaptive_k_1d": 2.272757870111165,
    "ml_pattern_weight_scale_1d": 1.3963450284660295,
    "external_min_days": 46,
    "external_smooth_alpha": 0.31435160506815546,
    "regime_scale_low": 0.897227866805796,
    "regime_scale_high": 1.020205798080306,
    "smart_consensus_weight": 0.3277001555400131,
    "smart_performance_weight": 0.4635443005246051,
    "smart_sigma": 0.002506413962128884,
    "smart_weight_xgb": 1.373972297498477,
    "smart_weight_lgbm": 1.069301748037458,
    "smart_weight_cat": 0.9537423967430042
  },
  "hyperparameters": {
    "model_choice": "xgb",
    "xgb_n_estimators": 578,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.07755081538938362,
    "xgb_subsample": 0.856931504223901,
    "xgb_colsample_bytree": 0.6801919089491227,
    "xgb_reg_alpha": 0.7834956026422768,
    "xgb_reg_lambda": 0.12289737631173767,
    "xgb_min_child_weight": 12,
    "xgb_gamma": 0.0003644148404566423,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 350
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "0",
    "ENABLE_CATBOOST": "0"
  },
  "best_trial_metrics": {
    "AVPGY_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 357,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.011493218588447873,
              "rmse": 0.024207538140487993,
              "mape": 1.6386674233099154,
              "confidence": 0.6156643288947133
            }
          },
          "dirhit": 66.66666666666666,
          "rmse": 0.020552020950515715,
          "mape": 722454.1875026526,
          "nrmse": 1.0288554681393514,
          "mask_count": 3,
          "mask_pct": 10.344827586206897
        },
        {
          "split_index": 2,
          "train_days": 387,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.005022405358256377,
              "rmse": 0.023929761536425172,
              "mape": 1.712408035106852,
              "confidence": 0.6209195100786313
            }
          },
          "dirhit": 0.0,
          "rmse": 0.012399431252705035,
          "mape": 1640634.0635165966,
          "nrmse": 1.0690643275665477,
          "mask_count": 1,
          "mask_pct": 3.4482758620689653
        },
        {
          "split_index": 3,
          "train_days": 417,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.04731212076987353,
              "rmse": 0.023628583308507794,
              "mape": 1.647961496468427,
              "confidence": 0.5867371709300209
            }
          },
          "dirhit": 36.36363636363637,
          "rmse": 0.023826050342206664,
          "mape": 6913216.350395141,
          "nrmse": 1.1002662586301728,
          "mask_count": 22,
          "mask_pct": 75.86206896551724
        },
        {
          "split_index": 4,
          "train_days": 447,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.049169685611947456,
              "rmse": 0.023626608056276054,
              "mape": 1.6156914543720393,
              "confidence": 0.5852496431420756
            }
          },
          "dirhit": 75.0,
          "rmse": 0.024901954498596644,
          "mape": 119.78075872076663,
          "nrmse": 1.0188995413933648,
          "mask_count": 4,
          "mask_pct": 13.793103448275861
        }
      ],
      "avg_dirhit": 44.50757575757576,
      "avg_nrmse": 1.054271398932359,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.02824935758213131,
          "rmse": 0.02384812276042425,
          "mape": 1.6536821023143085,
          "confidence": 0.6021426632613602
        }
      }
    }
  }
}