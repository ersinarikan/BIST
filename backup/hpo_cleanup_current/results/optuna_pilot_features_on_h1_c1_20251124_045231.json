{
  "best_value": 51.30670071606512,
  "best_dirhit": 56.430398246255024,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.5352472611557326,
    "ml_loss_threshold": 0.00997261507790789,
    "ml_dir_penalty": 4.056031134239831,
    "n_seeds": 4,
    "meta_stacking_alpha": 0.015296373992044107,
    "ml_adaptive_k_1d": 1.9778806686330708,
    "ml_pattern_weight_scale_1d": 0.5994687978685977,
    "enable_talib_patterns_short": false,
    "external_min_days": 37,
    "external_smooth_alpha": 0.30211854092284535,
    "fingpt_confidence_threshold": 0.43160749632619505,
    "xgb_n_estimators": 284,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.12288131176222229,
    "xgb_subsample": 0.8373638754519352,
    "xgb_colsample_bytree": 0.7191183910501352,
    "xgb_reg_alpha": 0.0003123559334246844,
    "xgb_reg_lambda": 2.0969547499339636,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.003324013007925287,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 466,
    "lgb_n_estimators": 127,
    "lgb_max_depth": 8,
    "lgb_learning_rate": 0.010516312572927483,
    "lgb_num_leaves": 30,
    "lgb_subsample": 0.54152856506995,
    "lgb_colsample_bytree": 0.7964545773201492,
    "lgb_reg_alpha": 4.261420528058856e-05,
    "lgb_reg_lambda": 0.00035147325797109196,
    "lgb_min_data_in_leaf": 93,
    "lgb_feature_fraction_bynode": 0.5505234801227996,
    "lgb_bagging_freq": 8,
    "lgb_min_gain_to_split": 0.9701200876598641,
    "cat_iterations": 228,
    "cat_depth": 5,
    "cat_learning_rate": 0.01105625121484682,
    "cat_l2_leaf_reg": 3.8808648181183405,
    "cat_subsample": 0.8180770193688461,
    "cat_rsm": 0.7001575942335602,
    "cat_border_count": 29,
    "cat_random_strength": 0.1295633166271218,
    "cat_leaf_estimation_iterations": 6,
    "cat_bootstrap_type": "Bayesian"
  },
  "best_trial": {
    "number": 818,
    "value": 51.30670071606512,
    "state": "1"
  },
  "n_trials": 1402,
  "pruned_count": 0,
  "avg_trial_time": 186.36263666167025,
  "top_k_trials": [
    {
      "number": 818,
      "value": 51.30670071606512,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": true,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": false,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.5352472611557326,
        "ml_loss_threshold": 0.00997261507790789,
        "ml_dir_penalty": 4.056031134239831,
        "n_seeds": 4,
        "meta_stacking_alpha": 0.015296373992044107,
        "ml_adaptive_k_1d": 1.9778806686330708,
        "ml_pattern_weight_scale_1d": 0.5994687978685977,
        "enable_talib_patterns_short": false,
        "external_min_days": 37,
        "external_smooth_alpha": 0.30211854092284535,
        "fingpt_confidence_threshold": 0.43160749632619505,
        "xgb_n_estimators": 284,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.12288131176222229,
        "xgb_subsample": 0.8373638754519352,
        "xgb_colsample_bytree": 0.7191183910501352,
        "xgb_reg_alpha": 0.0003123559334246844,
        "xgb_reg_lambda": 2.0969547499339636,
        "xgb_min_child_weight": 7,
        "xgb_gamma": 0.003324013007925287,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 466,
        "lgb_n_estimators": 127,
        "lgb_max_depth": 8,
        "lgb_learning_rate": 0.010516312572927483,
        "lgb_num_leaves": 30,
        "lgb_subsample": 0.54152856506995,
        "lgb_colsample_bytree": 0.7964545773201492,
        "lgb_reg_alpha": 4.261420528058856e-05,
        "lgb_reg_lambda": 0.00035147325797109196,
        "lgb_min_data_in_leaf": 93,
        "lgb_feature_fraction_bynode": 0.5505234801227996,
        "lgb_bagging_freq": 8,
        "lgb_min_gain_to_split": 0.9701200876598641,
        "cat_iterations": 228,
        "cat_depth": 5,
        "cat_learning_rate": 0.01105625121484682,
        "cat_l2_leaf_reg": 3.8808648181183405,
        "cat_subsample": 0.8180770193688461,
        "cat_rsm": 0.7001575942335602,
        "cat_border_count": 29,
        "cat_random_strength": 0.1295633166271218,
        "cat_leaf_estimation_iterations": 6,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 81.94444444444443,
        "avg_nrmse": 1.0090683991743277,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1100,
      "value": 48.915471401801035,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": false,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.35881805021516483,
        "ml_loss_threshold": 0.0020171891382143605,
        "ml_dir_penalty": 4.610485034236665,
        "meta_stacking_alpha": 0.013814330457736735,
        "ml_adaptive_k_1d": 1.7122881893771085,
        "ml_pattern_weight_scale_1d": 0.9458876519674614,
        "enable_talib_patterns_short": false,
        "external_min_days": 38,
        "external_smooth_alpha": 0.278828626738833,
        "fingpt_confidence_threshold": 0.47778868259218554,
        "xgb_n_estimators": 243,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.08999345121510337,
        "xgb_subsample": 0.7581741100053085,
        "xgb_colsample_bytree": 0.7138837584962296,
        "xgb_reg_alpha": 0.0103795871370116,
        "xgb_reg_lambda": 2.5016278944311225,
        "xgb_min_child_weight": 7,
        "xgb_gamma": 0.0013836974789096545,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 375,
        "lgb_n_estimators": 157,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.011047940143659934,
        "lgb_num_leaves": 51,
        "lgb_subsample": 0.7227176853513639,
        "lgb_colsample_bytree": 0.8688682510833279,
        "lgb_reg_alpha": 7.489464637195831e-05,
        "lgb_reg_lambda": 0.00026619081897547633,
        "lgb_min_data_in_leaf": 58,
        "lgb_feature_fraction_bynode": 0.5626354328632496,
        "lgb_bagging_freq": 7,
        "lgb_min_gain_to_split": 0.05937049269772071,
        "cat_iterations": 344,
        "cat_depth": 5,
        "cat_learning_rate": 0.024774706475823475,
        "cat_l2_leaf_reg": 5.991337727801561,
        "cat_subsample": 0.8003249300880328,
        "cat_rsm": 0.9186643273752344,
        "cat_border_count": 207,
        "cat_random_strength": 0.10560280948405004,
        "cat_leaf_estimation_iterations": 3,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 78.47985347985349,
        "avg_nrmse": 1.003404339016067,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 807,
      "value": 48.841092104604094,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": false,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.7224765937337018,
        "ml_loss_threshold": 0.0021403230594990923,
        "ml_dir_penalty": 4.244368871454435,
        "meta_stacking_alpha": 0.0112224468602048,
        "ml_adaptive_k_1d": 1.5397541040641434,
        "ml_pattern_weight_scale_1d": 0.7224579807687178,
        "enable_talib_patterns_short": false,
        "external_min_days": 38,
        "external_smooth_alpha": 0.3286925295404905,
        "fingpt_confidence_threshold": 0.4183295798945162,
        "xgb_n_estimators": 420,
        "xgb_max_depth": 4,
        "xgb_learning_rate": 0.14402475236530332,
        "xgb_subsample": 0.8170292619818643,
        "xgb_colsample_bytree": 0.723184867206052,
        "xgb_reg_alpha": 0.03268821326049271,
        "xgb_reg_lambda": 1.3822271288382801,
        "xgb_min_child_weight": 7,
        "xgb_gamma": 0.0027601635028821347,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 466,
        "lgb_n_estimators": 146,
        "lgb_max_depth": 8,
        "lgb_learning_rate": 0.011812424905936897,
        "lgb_num_leaves": 16,
        "lgb_subsample": 0.7574923967566051,
        "lgb_colsample_bytree": 0.812940848136474,
        "lgb_reg_alpha": 0.04866745201578631,
        "lgb_reg_lambda": 0.0006572223289902997,
        "lgb_min_data_in_leaf": 93,
        "lgb_feature_fraction_bynode": 0.5245408361571244,
        "lgb_bagging_freq": 8,
        "lgb_min_gain_to_split": 0.8442369370251467,
        "cat_iterations": 188,
        "cat_depth": 7,
        "cat_learning_rate": 0.01101391996834559,
        "cat_l2_leaf_reg": 3.7771954497189766,
        "cat_subsample": 0.6985004446665769,
        "cat_rsm": 0.6736633694405975,
        "cat_border_count": 36,
        "cat_random_strength": 0.1472404628955773,
        "cat_leaf_estimation_iterations": 6,
        "cat_bootstrap_type": "Bayesian"
      },
      "attrs": {
        "avg_dirhit": 78.4090909090909,
        "avg_nrmse": 1.0075452552932567,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_ATATP_h1_c1",
  "symbols": [
    "ATATP"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": true,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": false,
    "enable_stacked_short": false,
    "enable_meta_stacking": true,
    "enable_regime_detection": false,
    "enable_fingpt": true,
    "enable_talib_patterns_short": false
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.5352472611557326,
    "ml_loss_threshold": 0.00997261507790789,
    "ml_dir_penalty": 4.056031134239831,
    "n_seeds": 4,
    "meta_stacking_alpha": 0.015296373992044107,
    "ml_adaptive_k_1d": 1.9778806686330708,
    "ml_pattern_weight_scale_1d": 0.5994687978685977,
    "external_min_days": 37,
    "external_smooth_alpha": 0.30211854092284535,
    "fingpt_confidence_threshold": 0.43160749632619505
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 284,
    "xgb_max_depth": 4,
    "xgb_learning_rate": 0.12288131176222229,
    "xgb_subsample": 0.8373638754519352,
    "xgb_colsample_bytree": 0.7191183910501352,
    "xgb_reg_alpha": 0.0003123559334246844,
    "xgb_reg_lambda": 2.0969547499339636,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.003324013007925287,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 466,
    "lgb_n_estimators": 127,
    "lgb_max_depth": 8,
    "lgb_learning_rate": 0.010516312572927483,
    "lgb_num_leaves": 30,
    "lgb_subsample": 0.54152856506995,
    "lgb_colsample_bytree": 0.7964545773201492,
    "lgb_reg_alpha": 4.261420528058856e-05,
    "lgb_reg_lambda": 0.00035147325797109196,
    "lgb_min_data_in_leaf": 93,
    "lgb_feature_fraction_bynode": 0.5505234801227996,
    "lgb_bagging_freq": 8,
    "lgb_min_gain_to_split": 0.9701200876598641,
    "cat_iterations": 228,
    "cat_depth": 5,
    "cat_learning_rate": 0.01105625121484682,
    "cat_l2_leaf_reg": 3.8808648181183405,
    "cat_subsample": 0.8180770193688461,
    "cat_rsm": 0.7001575942335602,
    "cat_border_count": 29,
    "cat_random_strength": 0.1295633166271218,
    "cat_leaf_estimation_iterations": 6,
    "cat_bootstrap_type": "Bayesian"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "1",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "0",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "0",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "ATATP_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -1.117932390896347,
              "rmse": 0.053833160187436606,
              "mape": 1.4621478719236012,
              "confidence": 0.3024195488092249
            },
            "lightgbm": {
              "raw_r2": -0.08431342553372811,
              "rmse": 0.03621159892173909,
              "mape": 1.5253475810791597,
              "confidence": 0.5574921772341073
            },
            "catboost": {
              "raw_r2": -0.08057734175649915,
              "rmse": 0.036165434927413406,
              "mape": 1.5283489629067968,
              "confidence": 0.5604023338096289
            }
          },
          "dirhit": 42.857142857142854,
          "rmse": 0.03209431551861487,
          "mape": 329.0228952386921,
          "nrmse": 1.1348941268304937,
          "mask_count": 14,
          "mask_pct": 48.275862068965516
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -1.0516527409435485,
              "rmse": 0.05276374703679298,
              "mape": 1.485936638702244,
              "confidence": 0.3033653023846636
            },
            "lightgbm": {
              "raw_r2": -0.07540071173316032,
              "rmse": 0.03583880447920563,
              "mape": 1.5213431775698494,
              "confidence": 0.5644523733039746
            },
            "catboost": {
              "raw_r2": -0.07454394694692239,
              "rmse": 0.03585308103920331,
              "mape": 1.5225440372851535,
              "confidence": 0.5651246010434099
            }
          },
          "dirhit": 58.82352941176471,
          "rmse": 0.03855344713922645,
          "mape": 2161199.2075747796,
          "nrmse": 1.047141885240701,
          "mask_count": 17,
          "mask_pct": 58.620689655172406
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -1.035252093608934,
              "rmse": 0.053890020872054696,
              "mape": 1.4604649192482428,
              "confidence": 0.3036512833159172
            },
            "lightgbm": {
              "raw_r2": -0.054796976132730935,
              "rmse": 0.0360305439271805,
              "mape": 1.5308947971494398,
              "confidence": 0.5807538990203709
            },
            "catboost": {
              "raw_r2": -0.05309124158770003,
              "rmse": 0.036012199699887226,
              "mape": 1.532077607037279,
              "confidence": 0.5821149029464738
            }
          },
          "dirhit": 58.82352941176471,
          "rmse": 0.04999137872783805,
          "mape": 240.14907185944418,
          "nrmse": 1.0424797860853636,
          "mask_count": 17,
          "mask_pct": 58.620689655172406
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.9213109309976479,
              "rmse": 0.05217570054379726,
              "mape": 1.5240855538923577,
              "confidence": 0.30642682781579306
            },
            "lightgbm": {
              "raw_r2": -0.0575247718073999,
              "rmse": 0.03693479161531407,
              "mape": 1.536769515402788,
              "confidence": 0.5785806952351678
            },
            "catboost": {
              "raw_r2": -0.0542767588530236,
              "rmse": 0.03689423394392262,
              "mape": 1.5366838408671704,
              "confidence": 0.581168814648579
            }
          },
          "dirhit": 65.21739130434783,
          "rmse": 0.04277532660670175,
          "mape": 513009.2528540586,
          "nrmse": 0.9435708349724566,
          "mask_count": 23,
          "mask_pct": 79.3103448275862
        }
      ],
      "avg_dirhit": 56.430398246255024,
      "avg_nrmse": 1.0420216582822537,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -1.0315370391116194,
          "rmse": 0.05316565716002039,
          "mape": 1.4831587459416116,
          "confidence": 0.3039657405813997
        },
        "lightgbm": {
          "raw_r2": -0.06800897130175482,
          "rmse": 0.03625393473585982,
          "mape": 1.5285887678003092,
          "confidence": 0.5703197861984051
        },
        "catboost": {
          "raw_r2": -0.06562232228603629,
          "rmse": 0.03623123740260664,
          "mape": 1.5299136120241,
          "confidence": 0.572202663112023
        }
      }
    }
  }
}