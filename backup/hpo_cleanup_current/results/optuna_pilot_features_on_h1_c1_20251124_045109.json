{
  "best_value": 47.21483641665053,
  "best_dirhit": 67.07264957264958,
  "best_params": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_adaptive_k_1d": 2.430381482408128,
    "ml_pattern_weight_scale_1d": 1.1231092695298628,
    "enable_talib_patterns_short": true,
    "external_min_days": 35,
    "external_smooth_alpha": 0.24040033748606857,
    "regime_scale_low": 0.8943228196061078,
    "regime_scale_high": 1.142220723156154,
    "yolo_min_conf": 0.7837585353510551,
    "smart_consensus_weight": 0.694286650545213,
    "smart_performance_weight": 0.5095361376450622,
    "smart_sigma": 0.015916544014109715,
    "smart_weight_xgb": 1.2571547141601056,
    "smart_weight_lgbm": 1.4964954842745808,
    "smart_weight_cat": 0.6784067971109338,
    "xgb_n_estimators": 180,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.021706388624436395,
    "xgb_subsample": 0.5340441096570999,
    "xgb_colsample_bytree": 0.6759316897673501,
    "xgb_reg_alpha": 4.827941377640057e-05,
    "xgb_reg_lambda": 0.5106648080194185,
    "xgb_min_child_weight": 14,
    "xgb_gamma": 0.46806160779088773,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 502,
    "lgb_n_estimators": 404,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.010006298854128156,
    "lgb_num_leaves": 13,
    "lgb_subsample": 0.6385332950546249,
    "lgb_colsample_bytree": 0.5501605306958383,
    "lgb_reg_alpha": 0.0011608386633313896,
    "lgb_reg_lambda": 0.00021939142333509993,
    "lgb_min_data_in_leaf": 16,
    "lgb_feature_fraction_bynode": 0.5001107703862514,
    "lgb_bagging_freq": 1,
    "lgb_min_gain_to_split": 0.42416432113834995,
    "cat_iterations": 221,
    "cat_depth": 6,
    "cat_learning_rate": 0.014480004729981125,
    "cat_l2_leaf_reg": 8.723325488417615,
    "cat_subsample": 0.8048051461452153,
    "cat_rsm": 0.5239226275262235,
    "cat_border_count": 31,
    "cat_random_strength": 2.1734437628024867,
    "cat_leaf_estimation_iterations": 8,
    "cat_bootstrap_type": "Bernoulli"
  },
  "best_trial": {
    "number": 844,
    "value": 47.21483641665053,
    "state": "1"
  },
  "n_trials": 1367,
  "pruned_count": 0,
  "avg_trial_time": 191.09787614714494,
  "top_k_trials": [
    {
      "number": 844,
      "value": 47.21483641665053,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 2.430381482408128,
        "ml_pattern_weight_scale_1d": 1.1231092695298628,
        "enable_talib_patterns_short": true,
        "external_min_days": 35,
        "external_smooth_alpha": 0.24040033748606857,
        "regime_scale_low": 0.8943228196061078,
        "regime_scale_high": 1.142220723156154,
        "yolo_min_conf": 0.7837585353510551,
        "smart_consensus_weight": 0.694286650545213,
        "smart_performance_weight": 0.5095361376450622,
        "smart_sigma": 0.015916544014109715,
        "smart_weight_xgb": 1.2571547141601056,
        "smart_weight_lgbm": 1.4964954842745808,
        "smart_weight_cat": 0.6784067971109338,
        "xgb_n_estimators": 180,
        "xgb_max_depth": 3,
        "xgb_learning_rate": 0.021706388624436395,
        "xgb_subsample": 0.5340441096570999,
        "xgb_colsample_bytree": 0.6759316897673501,
        "xgb_reg_alpha": 4.827941377640057e-05,
        "xgb_reg_lambda": 0.5106648080194185,
        "xgb_min_child_weight": 14,
        "xgb_gamma": 0.46806160779088773,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 502,
        "lgb_n_estimators": 404,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.010006298854128156,
        "lgb_num_leaves": 13,
        "lgb_subsample": 0.6385332950546249,
        "lgb_colsample_bytree": 0.5501605306958383,
        "lgb_reg_alpha": 0.0011608386633313896,
        "lgb_reg_lambda": 0.00021939142333509993,
        "lgb_min_data_in_leaf": 16,
        "lgb_feature_fraction_bynode": 0.5001107703862514,
        "lgb_bagging_freq": 1,
        "lgb_min_gain_to_split": 0.42416432113834995,
        "cat_iterations": 221,
        "cat_depth": 6,
        "cat_learning_rate": 0.014480004729981125,
        "cat_l2_leaf_reg": 8.723325488417615,
        "cat_subsample": 0.8048051461452153,
        "cat_rsm": 0.5239226275262235,
        "cat_border_count": 31,
        "cat_random_strength": 2.1734437628024867,
        "cat_leaf_estimation_iterations": 8,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 76.25418060200668,
        "avg_nrmse": 1.0271816674590248,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 62,
      "value": 46.82143562352256,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 1.182612870073667,
        "ml_pattern_weight_scale_1d": 1.100055141810153,
        "enable_talib_patterns_short": true,
        "external_min_days": 35,
        "external_smooth_alpha": 0.2457559695917215,
        "regime_scale_low": 0.8396481368211152,
        "regime_scale_high": 1.1956634447750507,
        "yolo_min_conf": 0.7849706112146849,
        "smart_consensus_weight": 0.7277538987960079,
        "smart_performance_weight": 0.22763806650340243,
        "smart_sigma": 0.001417549605667067,
        "smart_weight_xgb": 1.1929948066977776,
        "smart_weight_lgbm": 0.9637151812467553,
        "smart_weight_cat": 0.641389300557859,
        "fingpt_confidence_threshold": 0.2883819949282046,
        "xgb_n_estimators": 187,
        "xgb_max_depth": 5,
        "xgb_learning_rate": 0.023461550160457544,
        "xgb_subsample": 0.5075470371518177,
        "xgb_colsample_bytree": 0.6303462402988211,
        "xgb_reg_alpha": 8.442351027629298e-05,
        "xgb_reg_lambda": 0.47077475677670516,
        "xgb_min_child_weight": 5,
        "xgb_gamma": 0.4824825758369345,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 476,
        "lgb_n_estimators": 389,
        "lgb_max_depth": 7,
        "lgb_learning_rate": 0.01340200413706813,
        "lgb_num_leaves": 21,
        "lgb_subsample": 0.7767990564783918,
        "lgb_colsample_bytree": 0.5476353796035528,
        "lgb_reg_alpha": 0.0005681902937505205,
        "lgb_reg_lambda": 0.0010902949880300535,
        "lgb_min_data_in_leaf": 90,
        "lgb_feature_fraction_bynode": 0.7728007590543284,
        "lgb_bagging_freq": 4,
        "lgb_min_gain_to_split": 0.4675996598020411,
        "cat_iterations": 253,
        "cat_depth": 7,
        "cat_learning_rate": 0.014089749848397263,
        "cat_l2_leaf_reg": 9.542015398682697,
        "cat_subsample": 0.8059343469220608,
        "cat_rsm": 0.5877704460588564,
        "cat_border_count": 44,
        "cat_random_strength": 2.3036107096886815,
        "cat_leaf_estimation_iterations": 11,
        "cat_bootstrap_type": "Bernoulli"
      },
      "attrs": {
        "avg_dirhit": 75.71428571428572,
        "avg_nrmse": 1.029760729412906,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 474,
      "value": 46.23709570556115,
      "params": {
        "enable_external_features": false,
        "enable_fingpt_features": false,
        "enable_yolo_features": true,
        "enable_directional_loss": false,
        "enable_seed_bagging": false,
        "enable_talib_patterns": true,
        "enable_smart_ensemble": true,
        "enable_stacked_short": false,
        "enable_meta_stacking": false,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_adaptive_k_1d": 1.1590613015083724,
        "ml_pattern_weight_scale_1d": 1.1164668000315838,
        "enable_talib_patterns_short": true,
        "external_min_days": 35,
        "external_smooth_alpha": 0.17921769431254314,
        "regime_scale_low": 0.9415302314839546,
        "regime_scale_high": 1.1903552668502804,
        "yolo_min_conf": 0.7714358091035372,
        "smart_consensus_weight": 0.789141316730398,
        "smart_performance_weight": 0.2153351975646391,
        "smart_sigma": 0.01762044896935044,
        "smart_weight_xgb": 1.3148996850777186,
        "smart_weight_lgbm": 0.8109590486277664,
        "smart_weight_cat": 1.4274349964539985,
        "xgb_n_estimators": 429,
        "xgb_max_depth": 5,
        "xgb_learning_rate": 0.015964202480148994,
        "xgb_subsample": 0.8024503508672222,
        "xgb_colsample_bytree": 0.8056402992263256,
        "xgb_reg_alpha": 5.4669142899644755e-05,
        "xgb_reg_lambda": 1.3389011708543628,
        "xgb_min_child_weight": 6,
        "xgb_gamma": 0.5559584391933202,
        "xgb_grow_policy": "lossguide",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 495,
        "lgb_n_estimators": 388,
        "lgb_max_depth": 8,
        "lgb_learning_rate": 0.07059242587601292,
        "lgb_num_leaves": 26,
        "lgb_subsample": 0.7333100487400294,
        "lgb_colsample_bytree": 0.5150471755678342,
        "lgb_reg_alpha": 0.003158839569773827,
        "lgb_reg_lambda": 0.00019691707001327844,
        "lgb_min_data_in_leaf": 93,
        "lgb_feature_fraction_bynode": 0.795748705433809,
        "lgb_bagging_freq": 6,
        "lgb_min_gain_to_split": 0.4466932965036773,
        "cat_iterations": 248,
        "cat_depth": 6,
        "cat_learning_rate": 0.014469274459511114,
        "cat_l2_leaf_reg": 6.323924332679286,
        "cat_subsample": 0.7793381079057858,
        "cat_rsm": 0.5759079032105698,
        "cat_border_count": 155,
        "cat_random_strength": 4.190664300341381,
        "cat_leaf_estimation_iterations": 2,
        "cat_bootstrap_type": "MVS"
      },
      "attrs": {
        "avg_dirhit": 74.88471673254283,
        "avg_nrmse": 1.030367667869804,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_AVOD_h1_c1",
  "symbols": [
    "AVOD"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": false,
    "enable_fingpt_features": false,
    "enable_yolo_features": true,
    "enable_directional_loss": false,
    "enable_seed_bagging": false,
    "enable_talib_patterns": true,
    "enable_smart_ensemble": true,
    "enable_stacked_short": false,
    "enable_meta_stacking": false,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_adaptive_k_1d": 2.430381482408128,
    "ml_pattern_weight_scale_1d": 1.1231092695298628,
    "external_min_days": 35,
    "external_smooth_alpha": 0.24040033748606857,
    "regime_scale_low": 0.8943228196061078,
    "regime_scale_high": 1.142220723156154,
    "yolo_min_conf": 0.7837585353510551,
    "smart_consensus_weight": 0.694286650545213,
    "smart_performance_weight": 0.5095361376450622,
    "smart_sigma": 0.015916544014109715,
    "smart_weight_xgb": 1.2571547141601056,
    "smart_weight_lgbm": 1.4964954842745808,
    "smart_weight_cat": 0.6784067971109338
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 180,
    "xgb_max_depth": 3,
    "xgb_learning_rate": 0.021706388624436395,
    "xgb_subsample": 0.5340441096570999,
    "xgb_colsample_bytree": 0.6759316897673501,
    "xgb_reg_alpha": 4.827941377640057e-05,
    "xgb_reg_lambda": 0.5106648080194185,
    "xgb_min_child_weight": 14,
    "xgb_gamma": 0.46806160779088773,
    "xgb_grow_policy": "lossguide",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 502,
    "lgb_n_estimators": 404,
    "lgb_max_depth": 7,
    "lgb_learning_rate": 0.010006298854128156,
    "lgb_num_leaves": 13,
    "lgb_subsample": 0.6385332950546249,
    "lgb_colsample_bytree": 0.5501605306958383,
    "lgb_reg_alpha": 0.0011608386633313896,
    "lgb_reg_lambda": 0.00021939142333509993,
    "lgb_min_data_in_leaf": 16,
    "lgb_feature_fraction_bynode": 0.5001107703862514,
    "lgb_bagging_freq": 1,
    "lgb_min_gain_to_split": 0.42416432113834995,
    "cat_iterations": 221,
    "cat_depth": 6,
    "cat_learning_rate": 0.014480004729981125,
    "cat_l2_leaf_reg": 8.723325488417615,
    "cat_subsample": 0.8048051461452153,
    "cat_rsm": 0.5239226275262235,
    "cat_border_count": 31,
    "cat_random_strength": 2.1734437628024867,
    "cat_leaf_estimation_iterations": 8,
    "cat_bootstrap_type": "Bernoulli"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "0",
    "ENABLE_FINGPT_FEATURES": "0",
    "ENABLE_YOLO_FEATURES": "1",
    "ML_USE_DIRECTIONAL_LOSS": "0",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "1",
    "ML_USE_SMART_ENSEMBLE": "1",
    "ML_USE_STACKED_SHORT": "0",
    "ENABLE_META_STACKING": "0",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "AVOD_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0015333612637026632,
              "rmse": 0.026757262976600627,
              "mape": 1.8845298551580734,
              "confidence": 0.6237541500758154
            },
            "lightgbm": {
              "raw_r2": -0.001769637196021856,
              "rmse": 0.026759721772023952,
              "mape": 1.883368613066402,
              "confidence": 0.6235621791588501
            },
            "catboost": {
              "raw_r2": 0.028886411276922448,
              "rmse": 0.02631099089408969,
              "mape": 1.6650396720873701,
              "confidence": 0.6484294938376522
            }
          },
          "dirhit": 100.0,
          "rmse": 0.02514948997128563,
          "mape": 680444.1567372195,
          "nrmse": 1.0080764939972695,
          "mask_count": 5,
          "mask_pct": 17.24137931034483
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.0007859837747986228,
              "rmse": 0.02637640358558903,
              "mape": 1.9231059109469293,
              "confidence": 0.6243613890048823
            },
            "lightgbm": {
              "raw_r2": -0.0012260542739019886,
              "rmse": 0.026381133408328584,
              "mape": 1.9308597544770352,
              "confidence": 0.6240038340221313
            },
            "catboost": {
              "raw_r2": 0.018136739365956018,
              "rmse": 0.026145522670958793,
              "mape": 1.7346341957031435,
              "confidence": 0.6397260104651262
            }
          },
          "dirhit": 44.44444444444444,
          "rmse": 0.04612165362303827,
          "mape": 111.23771852776376,
          "nrmse": 1.073834940326943,
          "mask_count": 18,
          "mask_pct": 62.06896551724138
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.003772461916609663,
              "rmse": 0.02859887453942074,
              "mape": 1.9368095242145469,
              "confidence": 0.6219349655670954
            },
            "lightgbm": {
              "raw_r2": -0.004400031389144281,
              "rmse": 0.028605973397471614,
              "mape": 1.9440756357038151,
              "confidence": 0.6214251186840941
            },
            "catboost": {
              "raw_r2": 0.01957355969231019,
              "rmse": 0.028359825336984088,
              "mape": 1.7231580197952203,
              "confidence": 0.640890835598683
            }
          },
          "dirhit": 70.0,
          "rmse": 0.061141884005990736,
          "mape": 1581538.9926236654,
          "nrmse": 0.9891071198021721,
          "mask_count": 10,
          "mask_pct": 34.48275862068966
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -0.007216806083516862,
              "rmse": 0.032204111031526664,
              "mape": 1.9496399860654319,
              "confidence": 0.6191369812088485
            },
            "lightgbm": {
              "raw_r2": -0.00753235724754564,
              "rmse": 0.032207748487822464,
              "mape": 1.9603411466629892,
              "confidence": 0.6188806830277089
            },
            "catboost": {
              "raw_r2": 0.00796588604094258,
              "rmse": 0.032060221392842175,
              "mape": 1.7617732091749343,
              "confidence": 0.6314714269171386
            }
          },
          "dirhit": 53.84615384615385,
          "rmse": 0.035096230436492376,
          "mape": 1713136.2934487178,
          "nrmse": 1.0636161188998612,
          "mask_count": 13,
          "mask_pct": 44.827586206896555
        }
      ],
      "avg_dirhit": 67.07264957264958,
      "avg_nrmse": 1.0336586682565614,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -0.0033271532596569524,
          "rmse": 0.028484163033284264,
          "mape": 1.9235213190962455,
          "confidence": 0.6222968714641604
        },
        "lightgbm": {
          "raw_r2": -0.0037320200266534416,
          "rmse": 0.028488644266411657,
          "mape": 1.9296612874775603,
          "confidence": 0.6219679537231961
        },
        "catboost": {
          "raw_r2": 0.018640649094032808,
          "rmse": 0.028219140073718688,
          "mape": 1.7211512741901671,
          "confidence": 0.6401294417046499
        }
      }
    }
  }
}