{
  "best_value": 45.9720122955752,
  "best_dirhit": 62.571042909917594,
  "best_params": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": false,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "model_choice": "all",
    "ml_loss_mse_weight": 0.3398127343727328,
    "ml_loss_threshold": 0.008457023685959542,
    "ml_dir_penalty": 3.1674248872048767,
    "meta_stacking_alpha": 1.7762116826349075,
    "ml_adaptive_k_1d": 1.0645648073858627,
    "ml_pattern_weight_scale_1d": 1.010550040417549,
    "enable_talib_patterns_short": true,
    "external_min_days": 37,
    "external_smooth_alpha": 0.13299869022057415,
    "regime_scale_low": 0.8136997659140719,
    "regime_scale_high": 1.0328919974958088,
    "fingpt_confidence_threshold": 0.20490656081689898,
    "xgb_n_estimators": 280,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.015385229393209588,
    "xgb_subsample": 0.5548573377300893,
    "xgb_colsample_bytree": 0.5984843152327072,
    "xgb_reg_alpha": 7.88137352768004e-06,
    "xgb_reg_lambda": 1.8271038967502429,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.9749726280936286,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 283,
    "lgb_n_estimators": 154,
    "lgb_max_depth": 5,
    "lgb_learning_rate": 0.011948339179043116,
    "lgb_num_leaves": 14,
    "lgb_subsample": 0.7602172881470333,
    "lgb_colsample_bytree": 0.8388265854577956,
    "lgb_reg_alpha": 1.5016907656196546e-05,
    "lgb_reg_lambda": 0.002400285177943724,
    "lgb_min_data_in_leaf": 38,
    "lgb_feature_fraction_bynode": 0.5153463359890662,
    "lgb_bagging_freq": 7,
    "lgb_min_gain_to_split": 0.3118190149647083,
    "cat_iterations": 463,
    "cat_depth": 4,
    "cat_learning_rate": 0.057140555298763905,
    "cat_l2_leaf_reg": 6.725353130142887,
    "cat_subsample": 0.6317623675701063,
    "cat_rsm": 0.7270180272438348,
    "cat_border_count": 22,
    "cat_random_strength": 1.5034228656357558,
    "cat_leaf_estimation_iterations": 9,
    "cat_bootstrap_type": "No"
  },
  "best_trial": {
    "number": 1362,
    "value": 45.9720122955752,
    "state": "1"
  },
  "n_trials": 1407,
  "pruned_count": 0,
  "avg_trial_time": 185.686371913229,
  "top_k_trials": [
    {
      "number": 1362,
      "value": 45.9720122955752,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": false,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.3398127343727328,
        "ml_loss_threshold": 0.008457023685959542,
        "ml_dir_penalty": 3.1674248872048767,
        "meta_stacking_alpha": 1.7762116826349075,
        "ml_adaptive_k_1d": 1.0645648073858627,
        "ml_pattern_weight_scale_1d": 1.010550040417549,
        "enable_talib_patterns_short": true,
        "external_min_days": 37,
        "external_smooth_alpha": 0.13299869022057415,
        "regime_scale_low": 0.8136997659140719,
        "regime_scale_high": 1.0328919974958088,
        "fingpt_confidence_threshold": 0.20490656081689898,
        "xgb_n_estimators": 280,
        "xgb_max_depth": 5,
        "xgb_learning_rate": 0.015385229393209588,
        "xgb_subsample": 0.5548573377300893,
        "xgb_colsample_bytree": 0.5984843152327072,
        "xgb_reg_alpha": 7.88137352768004e-06,
        "xgb_reg_lambda": 1.8271038967502429,
        "xgb_min_child_weight": 7,
        "xgb_gamma": 0.9749726280936286,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 283,
        "lgb_n_estimators": 154,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.011948339179043116,
        "lgb_num_leaves": 14,
        "lgb_subsample": 0.7602172881470333,
        "lgb_colsample_bytree": 0.8388265854577956,
        "lgb_reg_alpha": 1.5016907656196546e-05,
        "lgb_reg_lambda": 0.002400285177943724,
        "lgb_min_data_in_leaf": 38,
        "lgb_feature_fraction_bynode": 0.5153463359890662,
        "lgb_bagging_freq": 7,
        "lgb_min_gain_to_split": 0.3118190149647083,
        "cat_iterations": 463,
        "cat_depth": 4,
        "cat_learning_rate": 0.057140555298763905,
        "cat_l2_leaf_reg": 6.725353130142887,
        "cat_subsample": 0.6317623675701063,
        "cat_rsm": 0.7270180272438348,
        "cat_border_count": 22,
        "cat_random_strength": 1.5034228656357558,
        "cat_leaf_estimation_iterations": 9,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 79.101966873706,
        "avg_nrmse": 1.566560752669834,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 1111,
      "value": 45.89790911779175,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": true,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.4702570890572326,
        "ml_loss_threshold": 0.008641978524190696,
        "ml_dir_penalty": 1.6333731764791148,
        "meta_stacking_alpha": 0.013227003085838893,
        "ml_adaptive_k_1d": 1.5544685317542029,
        "ml_pattern_weight_scale_1d": 1.5045229751778462,
        "enable_talib_patterns_short": true,
        "external_min_days": 57,
        "external_smooth_alpha": 0.1526630887067151,
        "regime_scale_low": 0.8030294832178764,
        "regime_scale_high": 1.1106991915842712,
        "yolo_min_conf": 0.7252626946903513,
        "smart_consensus_weight": 0.5413193495060853,
        "smart_performance_weight": 0.20869724623239036,
        "smart_sigma": 0.017133909425058894,
        "smart_weight_xgb": 0.6277115861795686,
        "smart_weight_lgbm": 0.8641539069107129,
        "smart_weight_cat": 1.4608577609382594,
        "fingpt_confidence_threshold": 0.23738041504518365,
        "xgb_n_estimators": 321,
        "xgb_max_depth": 5,
        "xgb_learning_rate": 0.04608030617291936,
        "xgb_subsample": 0.5071620381236767,
        "xgb_colsample_bytree": 0.5899820980536818,
        "xgb_reg_alpha": 1.453800140993506e-05,
        "xgb_reg_lambda": 1.4508005520809408,
        "xgb_min_child_weight": 8,
        "xgb_gamma": 0.6286261598182201,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 293,
        "lgb_n_estimators": 149,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.010736749859489124,
        "lgb_num_leaves": 7,
        "lgb_subsample": 0.7482127707456228,
        "lgb_colsample_bytree": 0.8549767835564781,
        "lgb_reg_alpha": 0.0036002306345648853,
        "lgb_reg_lambda": 0.007701329204620853,
        "lgb_min_data_in_leaf": 90,
        "lgb_feature_fraction_bynode": 0.5242477243897292,
        "lgb_bagging_freq": 8,
        "lgb_min_gain_to_split": 0.5102251966091599,
        "cat_iterations": 491,
        "cat_depth": 4,
        "cat_learning_rate": 0.04869141877951862,
        "cat_l2_leaf_reg": 7.27889758416268,
        "cat_subsample": 0.7630899745300802,
        "cat_rsm": 0.7451307117013777,
        "cat_border_count": 66,
        "cat_random_strength": 1.0817137662809055,
        "cat_leaf_estimation_iterations": 4,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 79.21650717703349,
        "avg_nrmse": 1.5922743176886156,
        "model_choice": "all"
      },
      "state": "1"
    },
    {
      "number": 761,
      "value": 45.59081471875603,
      "params": {
        "enable_external_features": true,
        "enable_fingpt_features": true,
        "enable_yolo_features": true,
        "enable_directional_loss": true,
        "enable_seed_bagging": false,
        "enable_talib_patterns": false,
        "enable_smart_ensemble": false,
        "enable_stacked_short": true,
        "enable_meta_stacking": true,
        "enable_regime_detection": true,
        "enable_fingpt": true,
        "model_choice": "all",
        "ml_loss_mse_weight": 0.38256837979968994,
        "ml_loss_threshold": 0.008680576822316337,
        "ml_dir_penalty": 1.6192029643034824,
        "meta_stacking_alpha": 0.9948035293096217,
        "ml_adaptive_k_1d": 1.5034456551895246,
        "ml_pattern_weight_scale_1d": 1.3805438338784801,
        "enable_talib_patterns_short": true,
        "external_min_days": 48,
        "external_smooth_alpha": 0.3049289124005491,
        "regime_scale_low": 0.8148545422053334,
        "regime_scale_high": 1.0348630471450484,
        "yolo_min_conf": 0.7358193024627562,
        "fingpt_confidence_threshold": 0.23379910141963547,
        "xgb_n_estimators": 323,
        "xgb_max_depth": 5,
        "xgb_learning_rate": 0.0539845819086015,
        "xgb_subsample": 0.6564554890701518,
        "xgb_colsample_bytree": 0.564516686639413,
        "xgb_reg_alpha": 4.2888946893517375e-06,
        "xgb_reg_lambda": 1.688978513551187,
        "xgb_min_child_weight": 9,
        "xgb_gamma": 0.5780071978251418,
        "xgb_grow_policy": "depthwise",
        "xgb_tree_method": "hist",
        "xgb_max_bin": 158,
        "lgb_n_estimators": 189,
        "lgb_max_depth": 5,
        "lgb_learning_rate": 0.01337665110098726,
        "lgb_num_leaves": 7,
        "lgb_subsample": 0.7814697169351502,
        "lgb_colsample_bytree": 0.8214379634894832,
        "lgb_reg_alpha": 0.009926583119207298,
        "lgb_reg_lambda": 0.03151245394872696,
        "lgb_min_data_in_leaf": 96,
        "lgb_feature_fraction_bynode": 0.5696961806900277,
        "lgb_bagging_freq": 9,
        "lgb_min_gain_to_split": 0.6683019358672706,
        "cat_iterations": 446,
        "cat_depth": 4,
        "cat_learning_rate": 0.041672939436901375,
        "cat_l2_leaf_reg": 6.807726512451121,
        "cat_subsample": 0.5968099742043559,
        "cat_rsm": 0.7570833866229016,
        "cat_border_count": 150,
        "cat_random_strength": 0.9553162818096965,
        "cat_leaf_estimation_iterations": 10,
        "cat_bootstrap_type": "No"
      },
      "attrs": {
        "avg_dirhit": 79.6853146853147,
        "avg_nrmse": 1.6981509268273751,
        "model_choice": "all"
      },
      "state": "1"
    }
  ],
  "study_name": "hpo_with_features_AKYHO_h1_c1",
  "symbols": [
    "AKYHO"
  ],
  "horizon": 1,
  "best_model_choice": "all",
  "feature_flags": {
    "enable_external_features": true,
    "enable_fingpt_features": true,
    "enable_yolo_features": false,
    "enable_directional_loss": true,
    "enable_seed_bagging": false,
    "enable_talib_patterns": false,
    "enable_smart_ensemble": false,
    "enable_stacked_short": true,
    "enable_meta_stacking": true,
    "enable_regime_detection": true,
    "enable_fingpt": true,
    "enable_talib_patterns_short": true
  },
  "feature_params": {
    "ml_loss_mse_weight": 0.3398127343727328,
    "ml_loss_threshold": 0.008457023685959542,
    "ml_dir_penalty": 3.1674248872048767,
    "meta_stacking_alpha": 1.7762116826349075,
    "ml_adaptive_k_1d": 1.0645648073858627,
    "ml_pattern_weight_scale_1d": 1.010550040417549,
    "external_min_days": 37,
    "external_smooth_alpha": 0.13299869022057415,
    "regime_scale_low": 0.8136997659140719,
    "regime_scale_high": 1.0328919974958088,
    "fingpt_confidence_threshold": 0.20490656081689898
  },
  "hyperparameters": {
    "model_choice": "all",
    "xgb_n_estimators": 280,
    "xgb_max_depth": 5,
    "xgb_learning_rate": 0.015385229393209588,
    "xgb_subsample": 0.5548573377300893,
    "xgb_colsample_bytree": 0.5984843152327072,
    "xgb_reg_alpha": 7.88137352768004e-06,
    "xgb_reg_lambda": 1.8271038967502429,
    "xgb_min_child_weight": 7,
    "xgb_gamma": 0.9749726280936286,
    "xgb_grow_policy": "depthwise",
    "xgb_tree_method": "hist",
    "xgb_max_bin": 283,
    "lgb_n_estimators": 154,
    "lgb_max_depth": 5,
    "lgb_learning_rate": 0.011948339179043116,
    "lgb_num_leaves": 14,
    "lgb_subsample": 0.7602172881470333,
    "lgb_colsample_bytree": 0.8388265854577956,
    "lgb_reg_alpha": 1.5016907656196546e-05,
    "lgb_reg_lambda": 0.002400285177943724,
    "lgb_min_data_in_leaf": 38,
    "lgb_feature_fraction_bynode": 0.5153463359890662,
    "lgb_bagging_freq": 7,
    "lgb_min_gain_to_split": 0.3118190149647083,
    "cat_iterations": 463,
    "cat_depth": 4,
    "cat_learning_rate": 0.057140555298763905,
    "cat_l2_leaf_reg": 6.725353130142887,
    "cat_subsample": 0.6317623675701063,
    "cat_rsm": 0.7270180272438348,
    "cat_border_count": 22,
    "cat_random_strength": 1.5034228656357558,
    "cat_leaf_estimation_iterations": 9,
    "cat_bootstrap_type": "No"
  },
  "features_enabled": {
    "ENABLE_EXTERNAL_FEATURES": "1",
    "ENABLE_FINGPT_FEATURES": "1",
    "ENABLE_YOLO_FEATURES": "0",
    "ML_USE_DIRECTIONAL_LOSS": "1",
    "ENABLE_SEED_BAGGING": "0",
    "ENABLE_TALIB_PATTERNS": "0",
    "ML_USE_SMART_ENSEMBLE": "0",
    "ML_USE_STACKED_SHORT": "1",
    "ENABLE_META_STACKING": "1",
    "ML_USE_REGIME_DETECTION": "1",
    "ENABLE_FINGPT": "1",
    "ML_USE_ADAPTIVE_LEARNING": "0",
    "ENABLE_XGBOOST": "1",
    "ENABLE_LIGHTGBM": "1",
    "ENABLE_CATBOOST": "1"
  },
  "best_trial_metrics": {
    "AKYHO_1d": {
      "split_metrics": [
        {
          "split_index": 1,
          "train_days": 448,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -21.4245477800953,
              "rmse": 0.23290881524975637,
              "mape": 1.7734824891927439,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.010791649933402647,
              "rmse": 0.06603455940683688,
              "mape": 1.7232687997946772,
              "confidence": 0.616233911192881
            },
            "catboost": {
              "raw_r2": 0.014416507356516525,
              "rmse": 0.06441086271582058,
              "mape": 1.6861632630371424,
              "confidence": 0.6367083430588585
            }
          },
          "dirhit": 52.94117647058824,
          "rmse": 0.0614270235386069,
          "mape": 60849821.91477203,
          "nrmse": 1.8656412104106515,
          "mask_count": 17,
          "mask_pct": 58.620689655172406
        },
        {
          "split_index": 2,
          "train_days": 478,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -20.332330153063378,
              "rmse": 0.23248500380204198,
              "mape": 1.7797063478209072,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.009446352407691242,
              "rmse": 0.0642984240983355,
              "mape": 1.7271600214923262,
              "confidence": 0.6173262651881747
            },
            "catboost": {
              "raw_r2": 0.013778167482282297,
              "rmse": 0.06352076722696022,
              "mape": 1.63895399249634,
              "confidence": 0.6361903357005936
            }
          },
          "dirhit": 72.22222222222221,
          "rmse": 0.03452708324171949,
          "mape": 1827353.386320239,
          "nrmse": 1.0617029025011446,
          "mask_count": 18,
          "mask_pct": 62.06896551724138
        },
        {
          "split_index": 3,
          "train_days": 508,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -24.91064059345618,
              "rmse": 0.2313534843977518,
              "mape": 1.7751239284308948,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.004662428032036796,
              "rmse": 0.0632313657570168,
              "mape": 1.7730584247795431,
              "confidence": 0.6212119487756418
            },
            "catboost": {
              "raw_r2": 0.02121916331112102,
              "rmse": 0.06185590466333114,
              "mape": 1.669972584190256,
              "confidence": 0.6422244162555537
            }
          },
          "dirhit": 69.56521739130434,
          "rmse": 0.08240585577468738,
          "mape": 21763831.172405176,
          "nrmse": 2.97866428071095,
          "mask_count": 23,
          "mask_pct": 79.3103448275862
        },
        {
          "split_index": 4,
          "train_days": 538,
          "test_days": 30,
          "valid_predictions": 29,
          "model_metrics": {
            "xgboost": {
              "raw_r2": -24.620701763658754,
              "rmse": 0.23100587639030856,
              "mape": 1.7794201275006467,
              "confidence": 0.3
            },
            "lightgbm": {
              "raw_r2": -0.0006129976788638766,
              "rmse": 0.061764004473061095,
              "mape": 1.7318625350600851,
              "confidence": 0.6245019397758276
            },
            "catboost": {
              "raw_r2": 0.004454328631201025,
              "rmse": 0.061432803232915105,
              "mape": 1.7141273963679924,
              "confidence": 0.6286189924211995
            }
          },
          "dirhit": 55.55555555555556,
          "rmse": 0.01173223758510128,
          "mape": 6998874.420224542,
          "nrmse": 0.9628974326603746,
          "mask_count": 9,
          "mask_pct": 31.03448275862069
        }
      ],
      "avg_dirhit": 62.571042909917594,
      "avg_nrmse": 1.7172264565707802,
      "split_count": 4,
      "avg_model_metrics": {
        "xgboost": {
          "raw_r2": -22.822055072568403,
          "rmse": 0.23193829495996468,
          "mape": 1.776933223236298,
          "confidence": 0.3
        },
        "lightgbm": {
          "raw_r2": -0.00637835701299864,
          "rmse": 0.06383208843381256,
          "mape": 1.738837445281658,
          "confidence": 0.6198185162331313
        },
        "catboost": {
          "raw_r2": 0.013467041695280216,
          "rmse": 0.06280508445975676,
          "mape": 1.6773043090229327,
          "confidence": 0.6359355218590513
        }
      }
    }
  }
}